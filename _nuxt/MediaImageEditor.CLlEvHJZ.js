import{a9 as Rx,_ as Ix}from"./entry.Dlrc_O8N.js";import{c as Ex,d as Ax,ag as Lx,O as zx,Q as Fx,l as nm,W as Dx,u as Z1,y as Bx,ad as Ox,ah as Wx}from"./swiper-vue.CEq_1mxI.js";import{V as _x}from"./VNavigationDrawer.BI5tgrRF.js";import"./border.CVV9H6h1.js";import"./color.BhqTrDwI.js";import"./elevation.CTNmy1SF.js";import"./rounded.BO8GkCMC.js";import"./router.QmMRyV9b.js";import"./scopeId.c-DE_LfO.js";import"./ssrBoot.BgOGdUa4.js";import"./tag.DURzlijk.js";import"./anchor.NBCuhVUE.js";/*!
 * Pintura v8.74.0 - Test version
 * (c) 2018-2024 PQINA Inc. - All Rights Reserved
 * License: https://pqina.nl/pintura/license/
 * 
 * This version of Pintura is for testing purposes only.
 * Visit https://pqina.nl/pintura/ to obtain a commercial license.
 */const Vx=[{value:65504,name:"jfif"},{value:65498,name:"sos"},{value:65505,subvalue:17784,name:"exif"},{value:65505,subvalue:26740,name:"xmp"},{value:65506,subvalue:19792,name:"mpf"}];var Of=t=>{if(t.getUint16(0)!==65496)return;const e=t.byteLength;let i,n=2,r;for(;n<e&&t.getUint8(n)===255;){i=t.getUint16(n);const o=Vx.find(a=>a.value===i&&(!a.subvalue||a.subvalue===t.getUint16(n+2+2)));if(o){const{name:a}=o;r||(r={}),r[a]||(r[a]={offset:n,size:t.getUint16(n+2)})}if(i===65498)break;n+=2+t.getUint16(n+2)}return r},oh=(t,e,i)=>{if(!t)return;const n=new DataView(t),r=Of(n);if(!r||!r.exif)return;const o=((a,s)=>{if(a.getUint16(s)!==65505)return;const l=a.getUint16(s+2);if(s+=4,a.getUint32(s)!==1165519206)return;s+=6;const c=a.getUint16(s);if(c!==18761&&c!==19789)return;const d=c===18761;if(s+=2,a.getUint16(s,d)!==42)return;s+=a.getUint32(s+2,d);const u=p=>{const h=[];let g=s;const m=Math.min(a.byteLength,s+l-16);for(;g<m;g+=12){const y=g;a.getUint16(y,d)===p&&h.push(y)}return h};return{read:p=>{const h=u(p);if(h.length)return a.getUint16(h[0]+8,d)},write:(p,h)=>{const g=u(p);return!!g.length&&(g.forEach(m=>a.setUint16(m+8,h,d)),!0)}}})(n,r.exif.offset);return o?i===void 0?o.read(e):o.write(e,i):void 0},ah=t=>window.__pqina_webapi__?window.__pqina_webapi__[t]:window[t],me=(...t)=>{};const Nx={ArrayBuffer:"readAsArrayBuffer"};var Wf=async(t,e=[0,t.size],i)=>await((n,r=me,o={})=>new Promise((a,s)=>{const{dataFormat:l=Nx.ArrayBuffer}=o,c=new(ah("FileReader"));c.onload=()=>a(c.result),c.onerror=()=>s(c.error),c.onprogress=r,c[l](n)}))(t.slice(...e),i),Hx=async(t,e)=>{const i=await Wf(t,[0,262144],e);return oh(i,274)||1};let X1=null;var Br=()=>(X1===null&&(X1=typeof window<"u"&&window.document!==void 0),X1);let Rd=null;var $u=()=>new Promise(t=>{if(Rd===null){const e="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let i=Br()?new Image:{};return i.onload=()=>{Rd=i.naturalWidth===1,i=void 0,t(Rd)},void(i.src=e)}return t(Rd)}),Fc=t=>t.getContext("2d").getImageData(0,0,t.width,t.height),hn=(t,e,i=[])=>{const n=document.createElement(t),r=Object.getOwnPropertyDescriptors(n.__proto__);for(const o in e)o==="style"?n.style.cssText=e[o]:r[o]&&r[o].set||/textContent|innerHTML/.test(o)||typeof e[o]=="function"?n[o]=e[o]:n.setAttribute(o,e[o]);return i.forEach(o=>n.appendChild(o)),n};const jx={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]};var Qn=t=>{t.width=1,t.height=1;const e=t.getContext("2d");e&&e.clearRect(0,0,1,1)},Il=t=>"data"in t,sh=t=>Br()?RegExp(t).test(window.navigator.userAgent):void 0;let Y1=null;var gu=()=>(Y1===null&&(Y1=sh(/Android/)),Y1),_f=(t,e)=>{const i=hn("canvas",{width:t.width,height:t.height});return i.getContext("2d",e).drawImage(t,0,0),i},Bl=async(t,e=1)=>{const i=await $u(),[n,r]=i||e<5?[t.width,t.height]:[t.height,t.width],o=hn("canvas",{width:n,height:r}),a=o.getContext("2d",{willReadFrequently:!0});if(Il(t)&&!i&&e>1){const s=hn("canvas",{width:t.width,height:t.height});s.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),t=s}if(!i&&e>1&&a.transform.apply(a,((s,l,c=-1)=>(c===-1&&(c=1),jx[c](s,l)))(t.width,t.height,e)),Il(t)){if(a.putImageData(t,0,0),gu())return _f(o)}else a.drawImage(t,0,0);return t instanceof HTMLCanvasElement&&Qn(t),o},Vf=async(t,e=1)=>e===1||await $u()?t:Fc(await Bl(t,e)),el=t=>typeof t=="object";const rm=t=>t instanceof HTMLElement?t:el(t)?Nf(t):t,Nf=t=>{let e;return Array.isArray(t)?(e=[],t.forEach((i,n)=>{e[n]=rm(i)})):(e={},Object.keys(t).forEach(i=>{const n=t[i];e[i]=rm(n)})),e};var Oe=t=>typeof t=="string",Qi=t=>typeof t=="function",Ux=(t,e)=>new Promise((i,n)=>{const r=()=>i(((o,{width:a,height:s,canvasMemoryLimit:l,contextOptions:c})=>{let d=a||o.naturalWidth,u=s||o.naturalHeight;d||u||(d=300,u=150);const p=d*u;if(l&&p>l){const g=Math.sqrt(l)/Math.sqrt(p);d=Math.floor(d*g),u=Math.floor(u*g)}const h=hn("canvas");return h.width=d,h.height=u,h.getContext("2d",c).drawImage(o,0,0,d,u),h})(t,e));t.complete&&t.width?r():(t.onload=r,t.onerror=()=>n(new Error("Failed to load image")))}),Hf=()=>"createImageBitmap"in window,jf=t=>/svg/.test(t.type),ia=()=>Math.random().toString(36).substring(2,9);const q1=new Map;var Dc=(t,e,i)=>new Promise((n,r)=>{const o=t.toString();let a=q1.get(o);if(!a){const l=(p=>`function () {self.onmessage = function (message) {(${p.toString()}).apply(null, message.data.content.concat([function (err, response) {
    response = response || {};
    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];
    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);
}]))}}`)(t),c=URL.createObjectURL((p=>new Blob(["(",typeof p=="function"?p.toString():p,")()"],{type:"application/javascript"}))(l)),d=new Map,u=new Worker(c);a={url:c,worker:u,messages:d,terminationTimeout:void 0,terminate:()=>{clearTimeout(a.terminationTimeout),a.worker.terminate(),URL.revokeObjectURL(c),q1.delete(o)}},u.onmessage=function(p){const{id:h,content:g,error:m}=p.data;if(clearTimeout(a.terminationTimeout),a.terminationTimeout=setTimeout(()=>{d.size>0||a.terminate()},500),!d.has(h))return;const y=d.get(h);d.delete(h),m!=null?y.reject(m):y.resolve(g)},q1.set(o,a)}const s=ia();a.messages.set(s,{resolve:n,reject:r}),a.worker.postMessage({id:s,content:e},i)});let K1=null;var xa=()=>(K1===null&&(K1=sh(/Firefox/)),K1);const om=async(t,e)=>{const i=await(async(r,o)=>{const a=hn("img",{src:URL.createObjectURL(r)}),s=await Ux(a,o);return URL.revokeObjectURL(a.src),s})(t,{canvasMemoryLimit:e,contextOptions:{willReadFrequently:!0}}),n=Fc(i);return Qn(i),n};var Uf=async(t,e)=>{if(gu()&&!xa())return await om(t,e);let i;if(Hf()&&!jf(t)&&"OffscreenCanvas"in window)try{i=await Dc((n,r,o)=>{createImageBitmap(n).then(a=>{let s=a.width,l=a.height;const c=s*l;if(r&&c>r){const h=Math.sqrt(r)/Math.sqrt(c);s=Math.floor(s*h),l=Math.floor(l*h)}const d=new OffscreenCanvas(s,l),u=d.getContext("2d",{willReadFrequently:!0});u.drawImage(a,0,0,s,l);const p=u.getImageData(0,0,d.width,d.height);o(null,p)}).catch(a=>{o(a)})},[t,e])}catch{}return i&&i.width?i:await om(t,e)},lh=(t,e,i)=>new Promise((n,r)=>{try{t.toBlob(o=>{if(!o)return r(new Error("Failed to create blob"));n(o)},e,i)}catch(o){r(o)}}),Gx=async(t,e,i)=>{const n=await Bl(t),r=await lh(n,e,i);return Qn(n),r};const Zx={matroska:"mkv"};var Gf=t=>{const e=(t.match(/\/([a-z0-9]+)/)||[])[1];if(/^x/.test(e)){const[,i=""]=t.split("/x-");return Zx[i]}return e},Zf=t=>t.substr(0,t.lastIndexOf("."))||t;const Xx=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/;var ch=t=>{return t&&(e=(i=t,i.split(".").pop()).toLowerCase(),Xx.test(e)?"image/"+(/jfif|jif|jpe|jpg/.test(e)?"jpeg":e==="svg"?"svg+xml":e):"");var e,i},Cc=(t,e,i)=>{const n=new Date().getTime(),r=t.type.length&&!/null|text/.test(t.type),o=r?t.type:i,a=((s,l)=>{const c=ch(s);if(c===l)return s;const d=Gf(l)||c;return`${Zf(s)}.${d}`})(e,o);try{return new(ah("File"))([t],a,{lastModified:n,type:r?t.type:o})}catch{const l=r?t.slice():t.slice(0,t.size,o);return l.lastModified=n,l.name=a,l}},Ko=(t,e)=>t/e,Zi=t=>t;const J1=Math.PI,Vo=Math.PI/2,Jo=Vo/2;var Ia=t=>{const e=Math.abs(t)%Math.PI;return e>Jo&&e<Math.PI-Jo};const Lp={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:fs,Right:ys,Bottom:xs,Left:bs,TopLeft:na,TopRight:ra,BottomRight:oa,BottomLeft:aa}=Lp;var Tc={[fs]:[.5,0],[ys]:[1,.5],[xs]:[.5,1],[bs]:[0,.5],[na]:[0,0],[ra]:[1,0],[oa]:[1,1],[aa]:[0,1]},ii=(t,e=12)=>parseFloat(t.toFixed(e));const iu=(t,e,i)=>i+(t-i)*e,am=t=>({x:t.x+.5*t.width,y:t.y+.5*t.height,rx:.5*t.width,ry:.5*t.height}),Ji=()=>rt(0,0),rt=(t,e)=>({x:t,y:e}),sm=t=>rt(t.pageX,t.pageY),_e=t=>rt(t.x,t.y),Tl=t=>(t.x=-t.x,t.y=-t.y,t),Jr=(t,e,i=Ji())=>{const n=Math.cos(e),r=Math.sin(e),o=t.x-i.x,a=t.y-i.y;return t.x=i.x+n*o-r*a,t.y=i.y+r*o+n*a,t},ps=t=>Math.sqrt(t.x*t.x+t.y*t.y),ao=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?Ji():(t.x/=e,t.y/=e,t)},Id=(t,e)=>Math.atan2(e.y-t.y,e.x-t.x),ds=(t,e)=>t.x===e.x&&t.y===e.y,Mo=(t,e)=>(t.x=e(t.x),t.y=e(t.y),t),Bn=(t,e)=>(t.x+=e.x,t.y+=e.y,t),On=(t,e)=>(t.x-=e.x,t.y-=e.y,t),lm=(t,e)=>(t.x/=e,t.y/=e,t),Dr=(t,e)=>(t.x*=e,t.y*=e,t),Zd=(t,e)=>t.x*e.x+t.y*e.y,Xd=(t,e)=>t.x*e.y-t.y*e.x,Bo=(t,e=Ji())=>{const i=t.x-e.x,n=t.y-e.y;return i*i+n*n},$o=(t,e=Ji())=>Math.sqrt(Bo(t,e)),Yx=(t,e,i)=>(t.x=iu(t.x,e,i.x),t.y=iu(t.y,e,i.y),t),Oo=t=>{let e=0,i=0;return t.forEach(n=>{e+=n.x,i+=n.y}),rt(e/t.length,i/t.length)},Ml=(t,e,i,n,r)=>(t.forEach(o=>{o.x=e?n-(o.x-n):o.x,o.y=i?r-(o.y-r):o.y}),t),Js=(t,e,i,n)=>{const r=Math.sin(e),o=Math.cos(e);return t.forEach(a=>{a.x-=i,a.y-=n;const s=a.x*o-a.y*r,l=a.x*r+a.y*o;a.x=i+s,a.y=n+l}),t},Ol=(t,e)=>({width:t,height:e}),oo=t=>Ol(t.width,t.height),Aa=t=>Ol(t.width,t.height),Qs=t=>Ol(t.width,t.height),Xf=t=>Ol(t[0],t[1]),vc=t=>{return/img/i.test(t.nodeName)?Ol((e=t).naturalWidth,e.naturalHeight):Aa(t);var e},Hn=(t,e)=>Ol(t,e),Mc=(t,e,i=Zi)=>i(t.width)===i(e.width)&&i(t.height)===i(e.height),Ed=(t,e)=>(t.width*=e,t.height*=e,t),El=t=>rt(.5*t.width,.5*t.height),Yf=(t,e)=>{const i=Math.abs(e),n=Math.abs(Math.cos(i)),r=Math.abs(Math.sin(i)),o=n*t.width+r*t.height,a=r*t.width+n*t.height;return t.width=o,t.height=a,t},nu=(t,e)=>t.width>=e.width&&t.height>=e.height,Xa=(t,e)=>(t.width=e(t.width),t.height=e(t.height),t),vs=(t,e)=>({start:t,end:e}),qf=t=>vs(_e(t.start),_e(t.end)),dh=(t,e)=>{if(e===0)return t;const i=rt(t.start.x-t.end.x,t.start.y-t.end.y),n=ao(i),r=Dr(n,e);return t.start.x+=r.x,t.start.y+=r.y,t.end.x-=r.x,t.end.y-=r.y,t},qx=[rt(-1,-1),rt(-1,1),rt(1,1),rt(1,-1)],sa=(t,e,i,n)=>({x:t,y:e,width:i,height:n}),Ci=t=>sa(t.x,t.y,t.width,t.height),hs=()=>sa(0,0,0,0),Ur=t=>sa(0,0,t.width,t.height),Kx=t=>sa(t[3],t[0],t[1]-t[3],t[2]-t[0]),ls=t=>sa(t.x||0,t.y||0,t.width||0,t.height||0),ar=t=>{let e=t[0].x,i=t[0].x,n=t[0].y,r=t[0].y;return t.forEach(o=>{e=Math.min(e,o.x),i=Math.max(i,o.x),n=Math.min(n,o.y),r=Math.max(r,o.y)}),sa(e,n,i-e,r-n)},Q1=t=>An(t.x-t.rx,t.y-t.ry,2*t.rx,2*t.ry),cm=(t,e)=>sa(t.x-.5*e.width,t.y-.5*e.height,e.width,e.height),An=(t,e,i,n)=>sa(t,e,i,n),Ti=t=>rt(t.x+.5*t.width,t.y+.5*t.height),Qo=(t,e)=>(t.x+=e.x,t.y+=e.y,t),Fr=(t,e,i)=>(i=i||Ti(t),t.x=e*(t.x-i.x)+i.x,t.y=e*(t.y-i.y)+i.y,t.width=e*t.width,t.height=e*t.height,t),dm=(t,e,i,n)=>{const r=(n.x-t.x)/t.width,o=(n.y-t.y)/t.height;let a=Math.max(e.width,t.width),s=Math.max(e.height,t.height);return a=Math.min(i.width,a),s=Math.min(i.height,s),t.x=n.x-r*a,t.y=n.y-o*s,t.width=a,t.height=s,t},um=(t,e)=>{const[i,n]=Tc[e],r=i*t.width,o=n*t.height;return rt(t.x+r,t.y+o)},ms=(t,e)=>(t.x*=e,t.y*=e,t.width*=e,t.height*=e,t),ta=(t,e,i=Zi)=>i(t.x)===i(e.x)&&i(t.y)===i(e.y)&&i(t.width)===i(e.width)&&i(t.height)===i(e.height),sr=t=>Ko(t.width,t.height),Kf=(t,e,i,n,r)=>(t.x=e,t.y=i,t.width=n,t.height=r,t),fu=(t,e)=>(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t),Mr=(t,e,i)=>(i||(i=Ti(t)),_o(t).map(n=>Jr(n,e,i))),Yd=(t,e)=>sa(.5*t.width-.5*e.width,.5*t.height-.5*e.height,e.width,e.height),ru=(t,e)=>!(e.x<t.x)&&!(e.y<t.y)&&!(e.x>t.x+t.width)&&!(e.y>t.y+t.height),qa=(t,e,i=Ji())=>{if(t.width===0||t.height===0)return hs();const n=sr(t);e||(e=n);let r=t.width,o=t.height;return e>n?r=o*e:o=r/e,sa(i.x+.5*(t.width-r),i.y+.5*(t.height-o),r,o)},to=(t,e=sr(t),i=Ji())=>{if(t.width===0||t.height===0)return hs();let n=t.width,r=n/e;return r>t.height&&(r=t.height,n=r*e),sa(i.x+.5*(t.width-n),i.y+.5*(t.height-r),n,r)},tl=t=>[Math.min(t.y,t.y+t.height),Math.max(t.x,t.x+t.width),Math.max(t.y,t.y+t.height),Math.min(t.x,t.x+t.width)],_o=t=>[rt(t.x,t.y),rt(t.x+t.width,t.y),rt(t.x+t.width,t.y+t.height),rt(t.x,t.y+t.height)],Wo=(t,e)=>{if(t)return t.x=e(t.x),t.y=e(t.y),t.width=e(t.width),t.height=e(t.height),t},Jf=(t,e,i=Ti(t))=>_o(t).map((n,r)=>{const o=qx[r];return rt(iu(n.x,1+o.x*e.x,i.x),iu(n.y,1+o.y*e.y,i.y))}),Pc=t=>(t.x=0,t.y=0,t),pm=t=>{const e=t[0],i=t[t.length-1];t=ds(e,i)?t:[...t,e];const n=e.x,r=e.y;let o,a,s,l=0,c=0,d=0,u=0;const p=t.length;for(;c<p;c++)o=t[c],a=t[c+1>p-1?0:c+1],s=(o.y-r)*(a.x-n)-(a.y-r)*(o.x-n),l+=s,d+=(o.x+a.x-2*n)*s,u+=(o.y+a.y-2*r)*s;return s=3*l,rt(n+d/s,r+u/s)},uh=(t,e)=>Qf(t.start,t.end,e.start,e.end),Qf=(t,e,i,n)=>{const r=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(r===0)return;const o=((n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x))/r,a=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/r;return o<0||o>1||a<0||a>1?void 0:rt(t.x+o*(e.x-t.x),t.y+o*(e.y-t.y))},ty=(t,e,{ignoreIdenticalLines:i=!1,breakOnIntersection:n=!1}={})=>{const r=e.length,o=[];for(let a=0;a<r-1;a++){if(i&&(ds(t.start,e[a])||ds(t.start,e[a+1])||ds(t.end,e[a])||ds(t.end,e[a+1])))continue;const s=Qf(t.start,t.end,e[a],e[a+1]);if(s){if(n)return[s];o.push(s)}}return o.length?o:void 0},zp=(t,e)=>{let i=0,n=0,r=!1;const o=e.length;for(i=0,n=o-1;i<o;n=i++)e[i].y>t.y!=e[n].y>t.y&&t.x<(e[n].x-e[i].x)*(t.y-e[i].y)/(e[n].y-e[i].y)+e[i].x&&(r=!r);return r},ey=t=>{const e=[];for(let i=0;i<t.length;i++){let n=i+1;n===t.length&&(n=0),e.push(vs(_e(t[i]),_e(t[n])))}return e},iy=(t,e=0)=>ey(t).map(i=>dh(i,e)),ou=(t,e,i,n=0,r=!1,o=!1,a=12)=>{const s=[];for(let l=0;l<a;l++)s.push(rt(t.x+e*Math.cos(l*(2*Math.PI)/a),t.y+i*Math.sin(l*(2*Math.PI)/a)));return(r||o)&&Ml(s,r,o,t.x,t.y),n&&Js(s,n,t.x,t.y),s},ph=(t,e,i,n)=>{const r=rt(t.x-i.x,t.y-i.y),o=rt(n.x-i.x,n.y-i.y),a=Zd(o,o);let s=Zd(r,o)/a;s=s<0?0:s,s=s>1?1:s;const l=rt(o.x*s+i.x-t.x,o.y*s+i.y-t.y);return Zd(l,l)<=e*e},ny=(t,e,i)=>{const n=i.length;for(let r=0;r<n-1;r++)if(ph(t,e,i[r],i[r+1]))return!0;return!1},Fp=(t,e,i)=>!!zp(t,i)||!!ny(t,e,i)||ph(t,e,i[0],i[i.length-1]),tp=(t,e,i,n,r)=>Fp(t,e,Mr(i,n,r||Ti(i)));var Jx=(t,e)=>{const i=Ur(t),n=Ti(i),r=Mr(i,e,n);return Pc(ar(r))},Al=(t,e)=>t instanceof HTMLElement&&(!e||new RegExp(`^${e}$`,"i").test(t.nodeName)),Bc=t=>t instanceof File,hm=async(t,e,i)=>{const n=await lh(t,e,i);return Cc(n,"canvas")},hh=t=>t.split("/").pop().split(/\?|\#/).shift();const Qx=Br()&&Node.prototype.replaceChildren?(t,e)=>t.replaceChildren(e):(t,e)=>{for(;t.lastChild;)t.removeChild(t.lastChild);e!==void 0&&t.append(e)},Ad=Br()&&hn("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"});let mm;var mh=t=>(Qx(Ad,t),Ad.parentNode||document.body.append(Ad),clearTimeout(mm),mm=setTimeout(()=>{Ad.remove()},500),t);let ep=null;var Ea=()=>(ep===null&&(ep=Br()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),ep),ry=t=>new Promise((e,i)=>{let n=!1;!t.parentNode&&Ea()&&(n=!0,t.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",mh(t));const r=()=>{const a=t.naturalWidth,s=t.naturalHeight;a&&s&&(n&&t.remove(),clearInterval(o),e({width:a,height:s}))};t.onerror=a=>{clearInterval(o),i(a)};const o=setInterval(r,1);r()}),oy=t=>new Promise((e,i)=>{const n=()=>{e({width:t.videoWidth,height:t.videoHeight})};if(t.readyState>=1)return n();t.onloadedmetadata=n,t.onerror=()=>i(t.error)}),yu=t=>/^image/.test(t.type),$h=t=>new Promise(e=>{const i=Oe(t)?t:URL.createObjectURL(t),n=()=>{const o=new Image;o.src=i,e(o)};if(t instanceof Blob&&yu(t))return n();const r=document.createElement("video");r.preload="metadata",r.onloadedmetadata=()=>e(r),r.onerror=n,r.src=i}),au=t=>t.nodeName==="VIDEO",ay=async t=>{let e,i;e=t.src?t:await $h(t);try{i=au(e)?await oy(e):await ry(e)}finally{Bc(t)&&URL.revokeObjectURL(e.src)}return i},tb=async t=>{const e=await ay(t),i=await(o=>new Promise((a,s)=>{if(o.complete)return a(o);o.onload=()=>a(o),o.onerror=()=>s(new Error("Failed to load image"))}))(t),n=hn("canvas",e);n.getContext("2d",{willReadFrequently:!0}).drawImage(i,0,0);const r=await lh(n);return Cc(r,hh(i.src))},Sl=(t=0,e=!0)=>new(ah("ProgressEvent"))("progress",{loaded:100*t,total:100,lengthComputable:e}),$m=(t,e,i=n=>n)=>t.getAllResponseHeaders().indexOf(e)>=0?i(t.getResponseHeader(e)):void 0,eb=t=>{if(!t)return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(i=>i.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(i=>i.length);return e.length?decodeURI(e[e.length-1]):null};const ib="URL_REQUEST";class wc extends Error{constructor(e,i,n){super(e),this.name="EditorError",this.code=i,this.metadata=n}}var sy=(t,e)=>{const{headers:i={},credentials:n}=e||{};Object.entries(i).forEach(([r,o])=>t.setRequestHeader(r,o)),n&&(t.withCredentials=n!=="omit")},nb=(t,e,i)=>/^data:/.test(t)?(async(n,r="data-uri",o=me)=>{o(Sl(0));const a=await fetch(n);o(Sl(.33));const s=await a.blob();let l;yu(s)||(l="image/"+(n.includes(",/9j/")?"jpeg":"png")),o(Sl(.66));const c=Cc(s,r,l);return o(Sl(1)),c})(t,void 0,e):((n,r,o)=>new Promise((a,s)=>{const l=()=>s(new wc("Error fetching image",ib,c)),c=new XMLHttpRequest;c.onprogress=r,c.onerror=l,c.onload=()=>{if(!c.response||c.status>=300||c.status<200)return l();const u=$m(c,"Content-Type"),p=$m(c,"Content-Disposition",eb)||hh(n);a(Cc(c.response,p,u||ch(p)))};const{willRequest:d}=o;Promise.resolve(d&&d(n,{resourceType:"image"})).then(u=>{if(u===!1)return s("Image load rejected");c.open("GET",n),sy(c,u),c.responseType="blob",c.send()}).catch(console.error)}))(t,e,i),gh=t=>t instanceof Blob&&!(t instanceof File),ly=t=>"close"in t,rb=async(t,e,i)=>{if(Bc(t)||gh(t))return t;if(Oe(t))return await nb(t,e,i);if(Al(t,"canvas"))return await hm(t);if(Al(t,"img"))return await tb(t);if(Il(t)||ly(t))return await hm(await Bl(t));throw new wc("Invalid image source","invalid-image-source")};let ip=null;var xu=()=>(ip===null&&(ip=Br()&&/^mac/i.test(navigator.platform)),ip);let np=null;var ya=()=>(np===null&&(np=Br()&&(sh(/iPhone|iPad|iPod/)||xu()&&navigator.maxTouchPoints>=1)),np),ob=async(t,e=1)=>await $u()||ya()||e<5?t:Hn(t.height,t.width),cy=t=>/jpeg/.test(t.type),ab=t=>{return typeof(e=t)!="object"||e.constructor!=Object?t:JSON.stringify(t);var e},fh=(t,e=0,i)=>(e===0||(t.translate(i.x,i.y),t.rotate(e),t.translate(-i.x,-i.y)),t),dy=(t,e,i)=>(t.scale(e,i),t),sb=async(t,e={})=>{const{flipX:i,flipY:n,rotation:r,crop:o}=e,a=Aa(t),s=i||n,l=!!r,c=o&&(o.x||o.y||o.width||o.height),d=c&&ta(o,Ur(a)),u=c&&!d;if(!s&&!l&&!u)return t;let p,h=hn("canvas",{width:t.width,height:t.height});if(h.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),s){const g=hn("canvas",{width:h.width,height:h.height}).getContext("2d",{willReadFrequently:!0});dy(g,i?-1:1,n?-1:1),g.drawImage(h,i?-h.width:0,n?-h.height:0),g.restore(),Qn(h),h=g.canvas}if(l){const g=Xa(Qs(ar(Mr(ls(h),r))),Math.floor),m=hn("canvas",{width:o.width,height:o.height}).getContext("2d",{willReadFrequently:!0});((y,x,k)=>{y.translate(x,k)})(m,-o.x,-o.y),fh(m,r,El(g)),m.drawImage(h,.5*(g.width-h.width),.5*(g.height-h.height)),m.restore(),Qn(h),h=m.canvas}else if(u)return p=h.getContext("2d",{willReadFrequently:!0}).getImageData(o.x,o.y,o.width,o.height),Qn(h),p;return p=h.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,h.width,h.height),Qn(h),p},lb=(t,e)=>{const{imageData:i,width:n,height:r}=t,o=i.width,a=i.height,s=Math.round(n),l=Math.round(r),c=i.data,d=new Uint8ClampedArray(s*l*4),u=o/s,p=a/l,h=Math.ceil(.5*u),g=Math.ceil(.5*p);for(let m=0;m<l;m++)for(let y=0;y<s;y++){const x=4*(y+m*s);let k=0,w=0,C=0,M=0,R=0,O=0,T=0;const z=(m+.5)*p;for(let F=Math.floor(m*p);F<(m+1)*p;F++){const B=Math.abs(z-(F+.5))/g,f=(y+.5)*u,V=B*B;for(let J=Math.floor(y*u);J<(y+1)*u;J++){let S=Math.abs(f-(J+.5))/h;const j=Math.sqrt(V+S*S);if(j<-1||j>1||(k=2*j*j*j-3*j*j+1,k<=0))continue;S=4*(J+F*o);const K=c[S+3];T+=k*K,C+=k,K<255&&(k=k*K/250),M+=k*c[S],R+=k*c[S+1],O+=k*c[S+2],w+=k}}d[x]=M/w,d[x+1]=R/w,d[x+2]=O/w,d[x+3]=T/C}e(null,{data:d,width:s,height:l})},yh=t=>{if(t instanceof ImageData)return t;let e;try{e=new ImageData(t.width,t.height)}catch{e=hn("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},cb=async(t,e={},i)=>{const{width:n,height:r,fit:o,upscale:a}=e;if(!n&&!r)return t;let s=n,l=r;if(n?r||(l=n):s=r,o!=="force"){const c=s/t.width,d=l/t.height;let u=1;if(o==="cover"?u=Math.max(c,d):o==="contain"&&(u=Math.min(c,d)),u>1&&a===!1)return t;s=Math.round(t.width*u),l=Math.round(t.height*u)}return s=Math.max(s,1),l=Math.max(l,1),t.width===s&&t.height===l?t:i?i(t,s,l):(t=await Dc(lb,[{imageData:t,width:s,height:l}],[t.data.buffer]),yh(t))},db=(t,e)=>{const{imageData:i,matrix:n}=t;if(!n)return e(null,i);const r=new Uint8ClampedArray(i.width*i.height*4),o=i.data,a=o.length,s=n[0],l=n[1],c=n[2],d=n[3],u=n[4],p=n[5],h=n[6],g=n[7],m=n[8],y=n[9],x=n[10],k=n[11],w=n[12],C=n[13],M=n[14],R=n[15],O=n[16],T=n[17],z=n[18],F=n[19];let B=0,f=0,V=0,J=0,S=0,j=0,K=0,dt=0,lt=0,N=0,ft=0,$t=0;for(;B<a;B+=4)f=o[B]/255,V=o[B+1]/255,J=o[B+2]/255,S=o[B+3]/255,j=f*s+V*l+J*c+S*d+u,K=f*p+V*h+J*g+S*m+y,dt=f*x+V*k+J*w+S*C+M,lt=f*R+V*O+J*T+S*z+F,N=Math.max(0,j*lt)+(1-lt),ft=Math.max(0,K*lt)+(1-lt),$t=Math.max(0,dt*lt)+(1-lt),r[B]=255*Math.max(0,Math.min(1,N)),r[B+1]=255*Math.max(0,Math.min(1,ft)),r[B+2]=255*Math.max(0,Math.min(1,$t)),r[B+3]=255*S;e(null,{data:r,width:i.width,height:i.height})},uy=(t,e)=>{const{imageData:i,matrix:n}=t;if(!n)return e(null,i);let r=n.reduce((T,z)=>T+z);r=r<=0?1:r;const o=i.width,a=i.height,s=i.data;let l=0,c=0,d=0;const u=Math.round(Math.sqrt(n.length)),p=Math.floor(u/2);let h=0,g=0,m=0,y=0,x=0,k=0,w=0,C=0,M=0,R=0;const O=new Uint8ClampedArray(o*a*4);for(d=0;d<a;d++)for(c=0;c<o;c++){for(h=0,g=0,m=0,y=0,k=0;k<u;k++)for(x=0;x<u;x++)w=d+k-p,C=c+x-p,w<0&&(w=a-1),w>=a&&(w=0),C<0&&(C=o-1),C>=o&&(C=0),M=4*(w*o+C),R=n[k*u+x],h+=s[M]*R,g+=s[M+1]*R,m+=s[M+2]*R,y+=s[M+3]*R;O[l]=h/r,O[l+1]=g/r,O[l+2]=m/r,O[l+3]=y/r,l+=4}e(null,{data:O,width:o,height:a})},ub=(t,e)=>{let{imageData:i,strength:n}=t;if(!n)return e(null,i);const r=new Uint8ClampedArray(i.width*i.height*4),o=i.width,a=i.height,s=i.data,l=(V,J)=>(c=V-R,d=J-O,Math.sqrt(c*c+d*d));let c,d,u,p,h,g,m,y,x,k,w,C=0,M=0,R=.5*o,O=.5*a,T=l(0,0);for(n>0?(u=0,p=0,h=0):(n=Math.abs(n),u=1,p=1,h=1),M=0;M<a;M++)for(C=0;C<o;C++)z=4*(C+M*o),F=s,B=r,f=l(C,M)*n/T,g=F[z]/255,m=F[z+1]/255,y=F[z+2]/255,x=F[z+3]/255,k=1-f,w=k*x+f,B[z]=(k*x*g+f*u)/w*255,B[z+1]=(k*x*m+f*p)/w*255,B[z+2]=(k*x*y+f*h)/w*255,B[z+3]=255*w;var z,F,B,f;e(null,{data:r,width:i.width,height:i.height})},pb=(t,e)=>{const{imageData:i,level:n,monochrome:r=!1}=t;if(!n)return e(null,i);const o=new Uint8ClampedArray(i.width*i.height*4),a=i.data,s=a.length;let l,c,d,u=0;const p=()=>255*(2*Math.random()-1)*n,h=r?()=>{const g=p();return[g,g,g]}:()=>[p(),p(),p()];for(;u<s;u+=4)[l,c,d]=h(),o[u]=a[u]+l,o[u+1]=a[u+1]+c,o[u+2]=a[u+2]+d,o[u+3]=a[u+3];e(null,{data:o,width:i.width,height:i.height})},hb=(t,e)=>{const{imageData:i,level:n}=t;if(!n)return e(null,i);const r=new Uint8ClampedArray(i.width*i.height*4),o=i.data,a=o.length;let s,l,c,d=0;for(;d<a;d+=4)s=o[d]/255,l=o[d+1]/255,c=o[d+2]/255,r[d]=255*Math.pow(s,n),r[d+1]=255*Math.pow(l,n),r[d+2]=255*Math.pow(c,n),r[d+3]=o[d+3];e(null,{data:r,width:i.width,height:i.height})},mb=async(t,e={})=>{const{colorMatrix:i,convolutionMatrix:n,gamma:r,noise:o,vignette:a}=e,s=[];if(n&&s.push([uy,{matrix:n.clarity}]),r>0&&s.push([hb,{level:1/r}]),i&&!(d=>{const u=d.length;let p;const h=u>=20?6:u>=16?5:3;for(let g=0;g<u;g++)if(p=d[g],p===1&&g%h!=0||p!==0&&p!==1)return!1;return!0})(i)&&s.push([db,{matrix:i}]),(o>0||o<0)&&s.push([pb,{level:o}]),(a>0||a<0)&&s.push([ub,{strength:a}]),!s.length)return t;const l=(d,u)=>`(err, imageData) => {
            (${d[u][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${u}]), 
                ${d[u+1]?l(d,u+1):"done"})
        }`,c=`function (options, done) {
        const filterInstructions = options.filterInstructions;
        const imageData = options.imageData;
        (${l(s,0)})(null, imageData)
    }`;return t=await Dc(c,[{imageData:t,filterInstructions:s.map(d=>d[1])}],[t.data.buffer]),yh(t)},$i=t=>typeof t=="number",su=t=>Oe(t)&&t.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g)!==null,Le=(t,e)=>t.hasOwnProperty(e),Ln=t=>Array.isArray(t);let gm=64,rp=102,fm=112,ym=!1;var py=(t,e)=>(!ym&&Br()&&(/^win/i.test(navigator.platform)&&(rp=103),(ya()||xu())&&(gm=63.5,rp=110,fm=123),ym=!0),`<svg${e?` aria-label="${e}"`:""} width="128" height="128" viewBox="0 0 128 128" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg"><text x="${gm}" y="${rp}" alignment-baseline="text-top" dominant-baseline="text-top" text-anchor="middle" font-size="${fm}px">${t}</text></svg>`),Ll=t=>t instanceof Blob,Hr=(t,e)=>t/e*100+"%",Pr=t=>`rgba(${Math.round(255*t[0])}, ${Math.round(255*t[1])}, ${Math.round(255*t[2])}, ${$i(t[3])?t[3]:1})`,qd=t=>Object.values(t).join("_");const hy=async(t,e=0)=>{const i=hn("canvas",{width:80,height:80}).getContext("2d");return await((n=0)=>new Promise(r=>{setTimeout(r,n)}))(e),i.drawImage(t,0,0,80,80),!((n=>!new Uint32Array(n.getImageData(0,0,n.canvas.width,n.canvas.height).data.buffer).some(r=>r!==0))(i)&&e<=256)||await hy(t,e+16)},xm=new Map;var $b=t=>new Promise((e,i)=>{const n=new FileReader;n.onerror=()=>i(n.error),n.onload=()=>e(n.result),n.readAsDataURL(t)}),Ya=()=>{let t=[];return{sub:(e,i)=>(t.push({event:e,callback:i}),()=>t=t.filter(n=>n.event!==e||n.callback!==i)),pub:(e,i)=>{t.filter(n=>n.event===e).forEach(n=>n.callback(i))}}};const Qr=32,xh=({color:t=[0,0,0],fontSize:e=16,fontFamily:i="sans-serif",fontVariant:n="normal",fontWeight:r="normal",fontStyle:o="normal",textAlign:a="left",letterSpacing:s="normal",lineHeight:l=20},c=1)=>`font-size:${e*c}px;font-style:${o};font-weight:${r};font-family:${i};font-variant:${n};line-height:${l*c}px;text-align:${a};letter-spacing:${$i(s)?s+"px":"normal"};color:${Pr(t)};`,bh=(t,e,i=1)=>{const{width:n,height:r,disableNewline:o}=e,a=!n,s=o===!1?((d="")=>d.split(`
`).length)(t):void 0,l=a?"normal":"break-word",c=a&&!s?"nowrap":"pre-line";return`max-width:none;min-width:auto;width:${a?"auto":n*i+"px"};height:${r?r*i+"px":"auto"};margin-top:0;margin-bottom:0;padding-top:${(({fontSize:d=16,lineHeight:u=20}={})=>.5*Math.max(0,d-u))(e)*i}px;word-break:${l};word-wrap:normal;white-space:${c};`},bm=new Map,my=t=>{const e=[];for(const i of Array.from(t.childNodes))i.nodeType===Node.TEXT_NODE?e.push(gb(i)):e.push(...my(i));return e},$y="pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;",gb=t=>{const e=t.nodeValue;if(!e)return[];const i=e.length,n=document.createRange();n.selectNodeContents(t);const r=[];for(let a=0;a<i;a++){n.setStart(t,0),n.setEnd(t,a+1);const s=n.getClientRects().length-1,l=e.charAt(a);r[s]?r[s]+=l:r.push(l)}const o=n.getClientRects();return r.map((a,s)=>({rect:o[s],text:a}))},vm=new Map,qo=(t="",e)=>{const{width:i=0,height:n=0}=e;if(i&&n)return Hn(i,n);let{fontSize:r=16,fontFamily:o,lineHeight:a=20,fontWeight:s,fontStyle:l,fontVariant:c,letterSpacing:d}=e;const u=qd({text:t,fontFamily:o,fontWeight:s,fontStyle:l,fontVariant:c,fontSize:r,letterSpacing:d,lineHeight:a,width:i});let p=vm.get(u);if(p)return p;let h=1;r>1e3&&xa()&&(h=r/1e3,r=1e3,a/=h);const g=mh(hn("pre",{contenteditable:"true",spellcheck:"false",style:`${$y}${xh({...e,fontSize:r,lineHeight:a})};${bh(t,e)}"`,innerHTML:t})).getBoundingClientRect();return p=Aa(g),p.height+=Math.max(0,r-a),p=Xa(p,m=>m*h),i&&(p.width=i),vm.set(u,p),p},wm=new Map,fb=(t,e)=>new Promise((i,n)=>{let r=wm.get(t);r===void 0&&(r=((o,a)=>{const{sub:s,pub:l}=Ya();let c,d;return Promise.resolve(a&&a(o,{resourceType:"stylesheet"})).then(u=>{if(u===!1)return d="requestPrevented",l("error",d);const{headers:p,credentials:h}=u||{};fetch(o,{headers:p,credentials:h}).then(g=>g.text()).then(g=>{c=g,l("load",c)}).catch(g=>{d=g,l("error",d)})}),{sub:(u,p)=>u==="load"&&c?p(c):u==="error"&&d?p(d):void s(u,p)}})(t,e),wm.set(t,r)),r.sub("load",i),r.sub("error",n)}),Sm=async(t,e)=>{let i;try{i=await fb(t,e)}catch{return[]}const n=hn("style",{innerHTML:i,id:ia()});document.head.append(n);const r=Array.from(document.styleSheets).find(o=>o.ownerNode.id===n.id);return n.remove(),Array.from(r.cssRules)},xl=new Map,yb=async(t,e)=>{if(xl.has(t.href))return xl.get(t.href);let i;try{i=Array.from(t.cssRules);for(const n of(r=>r.filter(o=>o instanceof CSSImportRule))(i)){const r=n.href;if(xl.has(r)){const a=xl.get(r);i=[...i,...a];continue}const o=await Sm(r,e);xl.set(r,o),i=[...i,...o]}}catch{const r=t.href;i=await Sm(r,e),xl.set(r,i)}return(n=>n.filter(r=>r instanceof CSSFontFaceRule))(i)},gy=(t,e)=>t.style.getPropertyValue(e),xb=(t,e)=>t.style?gy(t,"font-family").replace(/^"|"$/g,"")==e:!1,bb=async(t,e)=>{const i=((n,r)=>{const o=[];for(const a of n)xb(a,r)&&o.push(a);return o})(await(async n=>{const r=Array.from(document.styleSheets).map(s=>yb(s,n)),o=await Promise.all(r),a=[];return o.forEach(s=>a.push(...s)),a})(e),t);return i.length?i.map(n=>{const r=n.parentStyleSheet.href&&new URL(n.parentStyleSheet.href),o=r?r.origin+(l=>l.pathname.split("/").slice(0,-1).join("/"))(r)+"/":"",a=n.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],s=Array.from(n.style).filter(l=>l!="src").reduce((l,c)=>l+=c+":"+gy(n,c)+";","");return[/^http/.test(a)?a:o+a,s]}):[]},km=new Map,Cm=new Map;var fy=async(t="",e)=>{if(!t.length)return;let{color:i,imageWidth:n=300,imageHeight:r=150,paddingTop:o=0,paddingRight:a=Qr,paddingBottom:s=0,paddingLeft:l=Qr,fontFamily:c,fontSize:d,pixelRatio:u=1,willRequest:p,outline:h,blur:g}=e,m=1,y="";d>1e3&&xa()&&(m=d/1e3,y=`transform-origin:0 0;transform:scale(${m})`);const x=u/m,k=(n+l+a)*u,w=(r+s+o)*u,C=await(async(F,B)=>{if(km.get(F))return;let f=Cm.get(F);if(!f){const J=await bb(F,B);if(!J.length)return void km.set(F,!0);const S=[];for(const[j,K]of J){const dt=await fetch(j).then(ft=>ft.blob()),lt=!(V=dt.type)||/woff2/.test(V)?"woff2":/woff/.test(V)?"woff":/ttf|truetype/.test(V)?"truetype":/otf|opentype/.test(V)?"opentype":/svg/.test(V)?"svg":"woff2",N=await $b(dt);S.push(`@font-face { src:url(${N}) format('${lt}');${K};font-display:block; }`)}f=S.join(""),Cm.set(F,f)}var V;return f})(c,p),M=t.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&nbsp;/g,"Â ").replace(/&(?!#\d{4};|[a-z]+;)/gi,"&amp;").replace(/<br>|\n/g,"<br/>"),R=`top:${o*x}px;right:${a*x}px;bottom:${s*x}px;left:${l*x}px`;let O=i,T="",z="";if(h||g){const F=Pr(i);h&&(O=[0,0,0,0],T=`-webkit-text-stroke: ${2*h*x}px ${F}`),g&&(Ea()?z=`filter:blur(${g*x*.4}px)`:(O=[0,0,0,0],z=`text-shadow: 0 0 ${g*x}px ${F}`))}return((F,{safariCacheKey:B="*"}={})=>new Promise((f,V)=>{const J=new Image;J.onerror=()=>V(new Error("Failed to load SVG")),J.onload=()=>{if(!Ea()||!F.includes("@font-face")||xm.has(B))return f(J);hy(J).then(()=>{xm.set(B,!0),f(J)})},J.src="data:image/svg+xml,"+F}))(`<svg xmlns="http://www.w3.org/2000/svg" width="${k}" height="${w}" viewBox="0 0 ${k} ${w}"><foreignObject x="0" y="0" width="${k}" height="${w}"><div xmlns="http://www.w3.org/1999/xhtml">${C?`<style>${C}</style>`:""}<pre contenteditable="true" spellcheck="false" style="position:absolute;${R};${xh({...e,color:O,fontSize:d},x)};${bh(t,e,x)};${y};${T};${z}">${M}</pre></div></foreignObject></svg>`,{safariCacheKey:c})};const Nn=t=>{const e={...t};return Nf(e)},Tm=(t,e={})=>{const i=sr(t);let n,r;const o=e.width||e.rx,a=e.height||e.ry;if(o&&a)return oo(e);if(o||a){n=parseFloat(o||Number.MAX_SAFE_INTEGER),r=parseFloat(a||Number.MAX_SAFE_INTEGER);const s=Math.min(n,r);Oe(o)||Oe(a)?(n=s+"%",r=s*i+"%"):(n=s,r=s)}else n="10%",r=10*i+"%";return{[(e.width?"width":e.rx?"rx":void 0)||"width"]:n,[(e.width?"height":e.rx?"ry":void 0)||"height"]:r}},Mm=(t,e={})=>{return{width:void 0,height:void 0,...e,aspectRatio:1,backgroundImage:(i=py(t),"data:image/svg+xml,"+i.replace("<","%3C").replace(">","%3E"))};var i},Pm=(t,e={})=>({backgroundColor:[0,0,0,0],...Jn(e)?{}:{width:void 0,height:void 0,aspectRatio:void 0},...e,backgroundImage:Oe(t)?t:Ll(t)?URL.createObjectURL(t):t}),Rm=(t,e)=>{let i;if(Oe(t)||Ll(t)){const n={...Tm(e),backgroundSize:"contain"};i=su(t)?Mm(t,n):Pm(t,n)}else if(t.src){const n=Tm(e,t.shape||t),r={...t.shape,...n};if(t.width&&t.height&&!Le(r,"aspectRatio")){const o=Vp(n,"width",e),a=Vp(n,"height",e);r.aspectRatio=Ko(o,a)}r.backgroundSize||t.shape||t.width&&t.height||(r.backgroundSize="contain"),i=su(t.src)?Mm(t.src,r):Pm(t.src,r)}else t.shape&&(i=Nn(t.shape));return Le(i,"backgroundImage")&&(Le(i,"backgroundColor")||(i.backgroundColor=[0,0,0,0]),Le(i,"disableStyle")||(i.disableStyle=["cornerRadius","backgroundColor","strokeColor","strokeWidth"])),e?Zn(i,e):i},Ua=t=>rt(t.x1,t.y1),Ga=t=>rt(t.x2,t.y2),Kn=t=>Le(t,"text"),lu=t=>Kn(t)&&!(bu(t)||Le(t,"width")),Kd=t=>Kn(t)&&(bu(t)||Le(t,"width")),To=t=>!Kn(t)&&vb(t),Jn=t=>Le(t,"rx"),or=t=>Le(t,"x1"),qn=t=>Le(t,"points"),ja=t=>Kn(t)&&t.isEditing,Ld=t=>!Le(t,"opacity")||t.opacity>0,cs=t=>t.isSelected,op=t=>t.isEditing,Co=t=>t._isDraft,Ys=t=>Le(t,"width")&&Le(t,"height"),yy=t=>{const e=Le(t,"right"),i=Le(t,"bottom");return e||i},bu=t=>(Le(t,"x")||Le(t,"left"))&&Le(t,"right")||(Le(t,"y")||Le(t,"top"))&&Le(t,"bottom"),vb=t=>Ys(t)||bu(t),Dp=t=>(t._isDraft=!0,t),Im=t=>(t._isDraft=!1,t),Bp=(t,e)=>t.disableStyle!==!0&&(!Ln(t.disableStyle)||!e||!t.disableStyle.includes(e)),ha=t=>t.disableSelect!==!0,Em=t=>t.disableRemove!==!0,wb=t=>!t.disableFlip&&!Co(t)&&!yy(t)&&(e=>Le(e,"backgroundImage")||Le(e,"text"))(t),bl=(t,e)=>!!Kn(t)&&t.disableInput!==!0&&(Qi(t.disableInput)?t.disableInput(e??t.text):e||!0),js=(t,e)=>t.disableTextLayout!==!0&&(!Ln(t.disableTextLayout)||!e||!t.disableTextLayout.includes(e)),Op=t=>t.disableManipulate!==!0&&!Co(t)&&!yy(t),$c=t=>Op(t)&&t.disableMove!==!0,Wp=t=>(delete t.left,delete t.right,delete t.top,delete t.bottom,t),Am=t=>(delete t.rotation,t),Lm=t=>(t.strokeWidth=t.strokeWidth||1,t.strokeColor=t.strokeColor||[0,0,0],t),zm=t=>(t.backgroundColor=t.backgroundColor?t.backgroundColor:t.strokeWidth||t.backgroundImage?void 0:[0,0,0],t),Fm=t=>{let e=t.text;e=e.replace(/&(#[0-9]+|[a-z]+);/gi,(i,n)=>`___${n}___`),e=e.replace(/&/,"&amp;"),t.text=e.replace(/___(#[0-9]+|[a-z]+)___/gi,(i,n)=>`&${n};`)},Sb=t=>{if(t.fontSize=t.fontSize||"4%",t.fontFamily=t.fontFamily||"sans-serif",t.fontWeight=t.fontWeight||"normal",t.fontStyle=t.fontStyle||"normal",t.fontVariant=t.fontVariant||"normal",t.lineHeight=t.lineHeight||"120%",t.color=t.color||[0,0,0],t.format=t.format==="html"?"html":"text",t.textShadow){const[e,i,n,r]=t.textShadow;t.textShadowX=e,t.textShadowY=i,t.textShadowBlur=n,t.textShadowColor=r,delete t.textShadow}if(t.textOutline){const[e,i]=t.textOutline;t.textOutlineWidth=e,t.textOutlineColor=i,delete t.textOutline}return t.format==="html"?Fm(t):(e=>{Fm(e);let i=e.text;i=i.replace(/</g,"&gt;"),i=i.replace(/>/g,"&lt;"),e.text=i})(t),lu(t)?kb(t):Cb(t)},kb=t=>(t.disableNewline!==!1&&(delete t.textAlign,t.text=t.text.replace(/\n/g," ")),Wp(t)),Cb=t=>(t.textAlign=t.textAlign||"left",t),xy=t=>((e=>{Oe(e.id)||(e.id=ia()),Le(e,"rotation")||(e.rotation=0),Le(e,"opacity")||(e.opacity=1),Le(e,"disableErase")||(e.disableErase=!0)})(t),Kn(t)?Sb(t):To(t)?(e=>{e.cornerRadius=e.cornerRadius||0,e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],zm(e)})(t):qn(t)?(e=>{Lm(e),Am(e),Le(e,"pathClose")||(e.disableResize=!0,Le(e,"disableMove")||(e.disableMove=!0)),Wp(e)})(t):or(t)?(e=>{Lm(e),e.lineStart=e.lineStart||void 0,e.lineEnd=e.lineEnd||void 0,Am(e),Wp(e)})(t):Jn(t)&&(e=>{e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],zm(e)})(t),t),Tb=t=>Kn(t)?"text":To(t)?"rectangle":qn(t)?"path":or(t)?"line":Jn(t)?"ellipse":void 0,cu=(t,e)=>parseFloat(t)/100*e,Mb=new RegExp(/^x|left|right|^width|rx|fontSize|eraseRadius|feather|cornerRadius|strokeWidth|strokeDash/,"i"),Pb=new RegExp(/^y|top|bottom|^height|ry/,"i"),vh=(t,e,{width:i,height:n})=>{if(Array.isArray(e))return e.map(o=>(el(o)&&by(o,{width:i,height:n}),Oe(o)&&(o=vh(t,o,{width:i,height:n})),o));if(typeof e!="string"||!e.endsWith("%"))return e;const r=parseFloat(e)/100;return Mb.test(t)?ii(i*r,6):Pb.test(t)?ii(n*r,6):e},Rb=vh,Ib=["lineHeight","textOutlineWidth","textShadowX","textShadowY","textShadowBlur"],by=(t,e)=>{Object.entries(t).map(([i,n])=>{t[i]=vh(i,n,e)}),t.text&&Ib.filter(i=>Oe(t[i])).forEach(i=>{var n,r;t[i]=(n=t[i],r=t.fontSize,Math.round(r*(parseFloat(n)/100)))})},Zn=(t,e)=>(by(t,e),Sy(t,e),t),_p=(t,e)=>{let i;return/^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(t)?i=e.width:/^y|height|ry/.test(t)&&(i=e.height),i},Vp=(t,e,i)=>Array.isArray(t[e])?t[e].map(n=>Object.entries(n).reduce((r,[o,a])=>(r[o]=Oe(a)?cu(a,_p(o,i)):a,r),{})):Oe(t[e])?cu(t[e],_p(e,i)):t[e],Pl=(t,e,i)=>e.reduce((n,r)=>{const o=Vp(t,r,i);return n[r]=o,n},{}),ga=(t,e,i)=>(Object.keys(e).forEach(n=>((r,o,a,s)=>{if(!Oe(r[o]))return r[o]=a,r;const l=_p(o,s);return r[o]=l===void 0?a:Hr(a,l),r})(t,n,e[n],i)),t),vy=(t,e)=>{const i=t.filter(n=>n.x<0||n.y<0||n.x1<0||n.y1<0).reduce((n,r)=>{const[o,a,s,l]=(c=>{const d=hs(),u=c.strokeWidth||0;if(To(c))d.x=c.x-.5*u,d.y=c.y-.5*u,d.width=c.width+u,d.height=c.height+u;else if(or(c)){const{x1:p,y1:h,x2:g,y2:m}=c,y=Math.abs(Math.min(p,g)),x=Math.abs(Math.max(p,g)),k=Math.abs(Math.min(h,m)),w=Math.abs(Math.min(h,m));d.x=y+.5*u,d.y=x+.5*u,d.width=x-y+u,d.height=w-k+u}else Jn(c)&&(d.x=c.x-c.rx+.5*u,d.y=c.y-c.ry+.5*u,d.width=2*c.rx+u,d.height=2*c.ry+u);return d&&Le(c,"rotation")&&Mr(d,c.rotation),tl(d)})(r);return n.top=Math.min(o,n.top),n.left=Math.min(l,n.left),n.bottom=Math.max(s,n.bottom),n.right=Math.max(a,n.right),n},{top:0,right:0,bottom:0,left:0});return i.right>0&&(i.right-=e.width),i.bottom>0&&(i.bottom-=e.height),i},wy=(t,e,i)=>{const n=Nn(t);Zn(n,e);const r=i(n);return Array.isArray(r)?r:[r]},Sy=(t,e)=>{if(Le(t,"left")&&(t.x=t.left),Le(t,"right")&&!Oe(t.right)){const i=e.width-t.right;Le(t,"left")?(t.x=t.left,t.width=Math.max(0,i-t.left)):Le(t,"width")&&(t.x=i-t.width)}if(Le(t,"top")&&(t.y=t.top),Le(t,"bottom")&&!Oe(t.bottom)){const i=e.height-t.bottom;Le(t,"top")?(t.y=t.top,t.height=Math.max(0,i-t.top)):Le(t,"height")&&(t.y=i-t.height)}return t},ky=(t,e)=>(qn(t)&&t.points.filter(i=>$i(i.x)).forEach(i=>{i.x*=e,i.y*=e}),or(t)&&$i(t.x1)&&(t.x1*=e,t.y1*=e,t.x2*=e,t.y2*=e),$i(t.x)&&$i(t.y)&&(t.x*=e,t.y*=e),$i(t.width)&&$i(t.height)&&(t.width*=e,t.height*=e),$i(t.rx)&&$i(t.ry)&&(t.rx*=e,t.ry*=e),(i=>$i(i.strokeWidth)&&i.strokeWidth>0)(t)&&(t.strokeWidth*=e),Kn(t)&&(t._scale=e,$i(t.fontSize)&&(t.fontSize*=e),$i(t.lineHeight)&&(t.lineHeight*=e),$i(t.width)&&!$i(t.height)&&(t.width*=e)),Le(t,"cornerRadius")&&$i(t.cornerRadius)&&(t.cornerRadius*=e),t),Cy=t=>{if(To(t))return rt(t.x+.5*t.width,t.y+.5*t.height);if(Jn(t))return rt(t.x,t.y);if(t.text){if(Kd(t)){const i=t.height||qo(t.text,t).height;return rt(t.x+.5*t.width,t.y+.5*i)}const e=qo(t.text,t);return rt(t.x+.5*e.width,t.y+.5*e.height)}return qn(t)?Oo(t.points):or(t)?Oo([Ua(t),Ga(t)]):void 0};var Oc=t=>/canvas/i.test(t.nodeName),Eb=(t,e)=>new Promise((i,n)=>{let r=t,o=!1;const a=()=>{o||(o=!0,Qi(e)&&Promise.resolve().then(()=>e(Hn(r.naturalWidth,r.naturalHeight))))};if(r.src||(r=new Image,Oe(t)&&new URL(t,location.href).origin!==location.origin&&(r.crossOrigin="anonymous"),r.src=Oe(t)?t:URL.createObjectURL(t)),r.complete)return a(),i(r);Qi(e)&&ry(r).then(a).catch(n),r.onload=()=>{a(),i(r)},r.onerror=()=>n(new Error("Failed to load image"))});const Dm=new Map([]),wh=(t,e={})=>new Promise((i,n)=>{const{onMetadata:r=me,onLoad:o=i,onError:a=n,onComplete:s=me}=e;let l=Dm.get(t);if(l||(l={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:Ya()},Dm.set(t,l)),l.bus.sub("meta",r),l.bus.sub("load",o),l.bus.sub("error",a),l.bus.sub("complete",s),Oc(t)){const c=t,d=c.cloneNode();l.complete=!0,l.image=d,l.size=vc(c)}if(l.complete)return l.bus.pub("meta",{size:l.size}),l.error?l.bus.pub("error",l.error):l.bus.pub("load",l.image),l.bus.pub("complete"),void(l.bus=Ya());l.loading||(l.loading=!0,Eb(t,c=>{l.size=c,l.bus.pub("meta",{size:c})}).then(c=>{l.image=c,l.bus.pub("load",c)}).catch(c=>{l.error=c,l.bus.pub("error",c)}).finally(()=>{l.complete=!0,l.loading=!1,l.bus.pub("complete"),l.bus=Ya()}))}),Ab=(t,e,i,n)=>t.drawImage(e,i.x,i.x,i.width,i.height,n.x,n.y,n.width,n.height);var Ty=async(t,e,i,n,r=Ab,o)=>{t.save(),t.clip(),await r(t,e,i,n,o),t.restore()};const du=(t,e,i,n,r)=>{const o=Ci(t);if(n){const s=Wo(ar(n),ii);return s.x*=i.width,s.width*=i.width,s.y*=i.height,s.height*=i.height,{srcRect:s,destRect:o}}const a=An(0,0,i.width,i.height);if(e==="contain"){const s=to(t,sr(a));o.width=s.width,o.height=s.height,r?(o.x+=r.x,o.y+=r.y):(o.x+=s.x,o.y+=s.y)}else if(e==="cover"){const s=qa(o,a.width/a.height);o.width=s.width,o.height=s.height,r?(o.x+=r.x,o.y+=r.y):(o.x+=s.x,o.y+=s.y)}else e?(o.width=e.width,o.height=e.height,r&&(o.x+=r.x,o.y+=r.y)):r&&(o.width=i.width,o.height=i.height,o.x+=r.x,o.y+=r.y);return{srcRect:a,destRect:o}},ap=(t,e)=>(e.cornerRadius>0?((i,n,r,o,a,s)=>{o<2*s&&(s=o/2),a<2*s&&(s=a/2),i.beginPath(),i.moveTo(n+s,r),i.arcTo(n+o,r,n+o,r+a,s),i.arcTo(n+o,r+a,n,r+a,s),i.arcTo(n,r+a,n,r,s),i.arcTo(n,r,n+o,r,s),i.closePath()})(t,e.x,e.y,e.width,e.height,e.cornerRadius):t.rect(e.x,e.y,e.width,e.height),t),Bm=(t,e)=>(e.backgroundColor&&t.fill(),t),Om=(t,e)=>(e.strokeWidth&&t.stroke(),t);var Sh=async(t,e,i={})=>{const{drawImage:n}=i;if(t.lineWidth=e.strokeWidth?e.strokeWidth:1,t.strokeStyle=e.strokeColor?Pr(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Pr(e.backgroundColor):"none",t.globalAlpha=e.opacity,e.backgroundImage){let r;if(r=Oc(e.backgroundImage)?e.backgroundImage:await wh(e.backgroundImage),ap(t,e),Bm(t,e),e.backgroundRepeat==="repeat"){const o=e.backgroundPosition||{x:0,y:0},{srcRect:a,destRect:s}=du(e,e.backgroundSize||vc(r),vc(r),e.backgroundCorners,{x:0,y:0}),l=document.createElement("canvas");l.width=s.width,l.height=s.height;const c=l.getContext("2d",{willReadFrequently:!1,desynchronized:!0});await n(c,r,a,{...s,x:0,y:0});const d=t.createPattern(l,"repeat");t.fillStyle=d,t.save(),t.beginPath(),t.rect(e.x+o.x,e.y+o.y,e.width-o.x,e.height-o.y),t.clip(),t.translate(s.x+o.x,s.y+o.y),t.fill(),Qn(l),t.restore()}else{const{srcRect:o,destRect:a}=du(e,e.backgroundSize,vc(r),e.backgroundCorners,e.backgroundPosition);await Ty(t,r,o,a,n,{feather:e.feather})}return t.beginPath(),ap(t,e),Om(t,e),[]}return ap(t,e),Bm(t,e),Om(t,e),[]},kh=async(t,e,i={})=>new Promise(async(n,r)=>{const{drawImage:o}=i;if(t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Pr(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Pr(e.backgroundColor):"none",t.globalAlpha=e.opacity,t.ellipse(e.x,e.y,e.rx,e.ry,0,0,2*Math.PI),e.backgroundColor&&t.fill(),e.backgroundImage){let a;try{a=await wh(e.backgroundImage)}catch(d){r(d)}const s=An(e.x-e.rx,e.y-e.ry,2*e.rx,2*e.ry),{srcRect:l,destRect:c}=du(s,e.backgroundSize,vc(a),e.backgroundCorners,e.backgroundPosition);await Ty(t,a,l,c,o),e.strokeWidth&&t.stroke(),n([])}else e.strokeWidth&&t.stroke(),n([])}),Lb=async(t,e,i)=>{const n=e.width&&e.height?Aa(e):qo(e.text,e),r={x:e.x,y:e.y,width:n.width,height:n.height};if(Sh(t,{...e,...r,options:i}),!e.text.length)return[];const{textOutlineWidth:o=0,textShadowX:a=0,textShadowY:s=0,textShadowBlur:l=0,textShadowColor:c,outline:d,blur:u,...p}=e;return e.height&&(t.rect(r.x-o+Math.min(a,0),r.y-o+Math.min(s,0),r.width+o+o+Math.abs(a)+l,r.height+o+Math.abs(s)+l),t.save(),t.clip()),(a||s||l)&&(t.save(),t.translate(a,s),await sp(t,r,e,{...i,paddingLeft:Qr+l,paddingRight:Qr+l,paddingTop:l,paddingBottom:l,shapeExtendedProps:{color:c,blur:l}}),t.restore()),o&&await sp(t,r,e,{...i,paddingLeft:Qr+o,paddingRight:Qr+o,paddingTop:o,paddingBottom:o,shapeExtendedProps:{color:e.textOutlineColor,outline:o}}),e.height&&t.restore(),await sp(t,r,p,{...i,paddingLeft:Qr,paddingRight:Qr,paddingTop:0,paddingBottom:0}),[]};const sp=async(t,e,i,n)=>{const{willRequest:r,shapeExtendedProps:o,paddingLeft:a,paddingRight:s,paddingTop:l,paddingBottom:c}=n,d=await fy(i.text,{...i,...o,...e,paddingLeft:a,paddingRight:s,paddingTop:l,paddingBottom:c,imageWidth:e.width,imageHeight:e.height,willRequest:r});t.drawImage(d,i.x-a,i.y-l,d.width,d.height)};var zb=async(t,e)=>new Promise(async i=>{t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Pr(e.strokeColor):"none",t.globalAlpha=e.opacity;let n=Ua(e),r=Ga(e);t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),e.strokeWidth&&t.stroke(),i([])}),Np=async(t,e)=>new Promise((i,n)=>{if(e.bitmap&&e.points.length===1)return void kh(t,{x:e.points[0].x,y:e.points[0].y,rx:.5*e.strokeWidth,ry:.5*e.strokeWidth,backgroundColor:e.strokeColor}).then(()=>i([]));t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Pr(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Pr(e.backgroundColor):"none",t.globalAlpha=e.opacity;const{points:r}=e;t.lineCap=e.strokeCap,t.lineJoin=e.strokeJoin,t.setLineDash(e.strokeDash||[]),e.pathClose&&t.beginPath(),t.moveTo(r[0].x,r[0].y);const o=r.length;for(let a=1;a<o;a++)t.lineTo(r[a].x,r[a].y);e.pathClose&&t.closePath(),e.strokeWidth&&t.stroke(),e.backgroundColor&&t.fill(),i([])}),My=(t,e,i,n)=>((e||i)&&(t.translate(n.x,n.y),t.scale(e?-1:1,i?-1:1),t.translate(-n.x,-n.y)),t);const Fb=async(t,e,i)=>{t.globalCompositeOperation=e.drawMode==="subtract"?"destination-out":"source-over";const n=Cy(e);let r;if(fh(t,e.rotation,n),My(t,e.flipX,e.flipY,n),To(e)?r=Sh:Jn(e)?r=kh:or(e)?r=zb:qn(e)?r=Np:Kn(e)&&(r=Lb),r){const o=await r(t,e,i);return o.length?[e,...await Py(t,o,i)]:[]}return[]};var Py=async(t,e,i)=>{let n=[];for(const r of e)t.save(),t.beginPath(),n=[...n,...await Fb(t,r,i)],t.restore();return n},Ch=async(t,e={})=>{const{shapes:i=[],contextBounds:n=t,transform:r=me,drawImage:o,willRequest:a,canvasMemoryLimit:s,computeShape:l=Zi,preprocessShape:c=Zi}=e;if(!i.length)return t;const d=hn("canvas");d.width=n.width,d.height=n.height;const u=d.getContext("2d",{willReadFrequently:!0});u.putImageData(t,n.x||0,n.y||0);const p=i.map(Nn).map(l).map(c).flat();r(u),await Py(u,p,{drawImage:o,canvasMemoryLimit:s,willRequest:a});const h=u.getImageData(0,0,d.width,d.height);return Qn(d),h},Db=async(t,e={})=>{const{backgroundColor:i,backgroundImage:n}=e,r=!(!i||i&&i[3]===0);if(!n&&!r)return t;const o=hn("canvas");o.width=t.width,o.height=t.height;const a=o.getContext("2d",{willReadFrequently:!0});if(a.putImageData(t,0,0),a.globalCompositeOperation="destination-over",r&&(a.fillStyle=Pr(i),a.fillRect(0,0,o.width,o.height)),n){let l;l=Oc(n)?n:await wh(n);const{srcRect:c,destRect:d}=du({x:0,y:0,width:t.width,height:t.height},"cover",{width:l.width,height:l.height});a.drawImage(l,c.x,c.y,c.width,c.height,d.x,d.y,d.width,d.height)}const s=a.getImageData(0,0,o.width,o.height);return Qn(o),s},Th=t=>t.length?t.reduce((e,i)=>((n,r)=>{const o=new Array(20);return o[0]=n[0]*r[0]+n[1]*r[5]+n[2]*r[10]+n[3]*r[15],o[1]=n[0]*r[1]+n[1]*r[6]+n[2]*r[11]+n[3]*r[16],o[2]=n[0]*r[2]+n[1]*r[7]+n[2]*r[12]+n[3]*r[17],o[3]=n[0]*r[3]+n[1]*r[8]+n[2]*r[13]+n[3]*r[18],o[4]=n[0]*r[4]+n[1]*r[9]+n[2]*r[14]+n[3]*r[19]+n[4],o[5]=n[5]*r[0]+n[6]*r[5]+n[7]*r[10]+n[8]*r[15],o[6]=n[5]*r[1]+n[6]*r[6]+n[7]*r[11]+n[8]*r[16],o[7]=n[5]*r[2]+n[6]*r[7]+n[7]*r[12]+n[8]*r[17],o[8]=n[5]*r[3]+n[6]*r[8]+n[7]*r[13]+n[8]*r[18],o[9]=n[5]*r[4]+n[6]*r[9]+n[7]*r[14]+n[8]*r[19]+n[9],o[10]=n[10]*r[0]+n[11]*r[5]+n[12]*r[10]+n[13]*r[15],o[11]=n[10]*r[1]+n[11]*r[6]+n[12]*r[11]+n[13]*r[16],o[12]=n[10]*r[2]+n[11]*r[7]+n[12]*r[12]+n[13]*r[17],o[13]=n[10]*r[3]+n[11]*r[8]+n[12]*r[13]+n[13]*r[18],o[14]=n[10]*r[4]+n[11]*r[9]+n[12]*r[14]+n[13]*r[19]+n[14],o[15]=n[15]*r[0]+n[16]*r[5]+n[17]*r[10]+n[18]*r[15],o[16]=n[15]*r[1]+n[16]*r[6]+n[17]*r[11]+n[18]*r[16],o[17]=n[15]*r[2]+n[16]*r[7]+n[17]*r[12]+n[18]*r[17],o[18]=n[15]*r[3]+n[16]*r[8]+n[17]*r[13]+n[18]*r[18],o[19]=n[15]*r[4]+n[16]*r[9]+n[17]*r[14]+n[18]*r[19]+n[19],o})([...e],i),t.shift()):[],Ry=(t,e)=>{const i=t.width*t.height,n=e.reduce((o,a)=>(a.width>o.width&&a.height>o.height&&(o.width=a.width,o.height=a.height),o),{width:0,height:0}),r=n.width*n.height;return((o,a=2)=>Math.round(o*a)/a)(Math.max(.5,.5+(1-r/i)/2),5)};function Je(){}const Mh=t=>t;function Cn(t,e){for(const i in e)t[i]=e[i];return t}function Iy(t){return t()}function Wm(){return Object.create(null)}function _i(t){t.forEach(Iy)}function Hi(t){return typeof t=="function"}function ti(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function jr(t,...e){if(t==null)return Je;const i=t.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function fa(t){let e;return jr(t,i=>e=i)(),e}function E(t,e,i){t.$$.on_destroy.push(jr(e,i))}function cr(t,e,i,n){if(t){const r=Ey(t,e,i,n);return t[0](r)}}function Ey(t,e,i,n){return t[1]&&n?Cn(i.ctx.slice(),t[1](n(e))):i.ctx}function dr(t,e,i,n){if(t[2]&&n){const r=t[2](n(i));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],a=Math.max(e.dirty.length,r.length);for(let s=0;s<a;s+=1)o[s]=e.dirty[s]|r[s];return o}return e.dirty|r}return e.dirty}function ur(t,e,i,n,r,o){if(r){const a=Ey(e,i,n,o);t.p(a,r)}}function pr(t){if(t.ctx.length>32){const e=[],i=t.ctx.length/32;for(let n=0;n<i;n++)e[n]=-1;return e}return-1}function Rc(t){const e={};for(const i in t)i[0]!=="$"&&(e[i]=t[i]);return e}function _m(t,e){const i={};e=new Set(e);for(const n in t)e.has(n)||n[0]==="$"||(i[n]=t[n]);return i}function kt(t,e,i){return t.set(i),e}function ji(t){return t&&Hi(t.destroy)?t.destroy:Je}const Ay=typeof window<"u";let Ly=Ay?()=>window.performance.now():()=>Date.now(),Ph=Ay?t=>requestAnimationFrame(t):Je;const Rl=new Set;function zy(t){Rl.forEach(e=>{e.c(t)||(Rl.delete(e),e.f())}),Rl.size!==0&&Ph(zy)}function Rh(t){let e;return Rl.size===0&&Ph(zy),{promise:new Promise(i=>{Rl.add(e={c:t,f:i})}),abort(){Rl.delete(e)}}}function Tt(t,e){t.appendChild(e)}function Fy(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Bb(t){const e=pt("style");return function(i,n){Tt(i.head||i,n),n.sheet}(Fy(t),e),e.sheet}function tt(t,e,i){t.insertBefore(e,i||null)}function Q(t){t.parentNode.removeChild(t)}function pt(t){return document.createElement(t)}function Rr(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function cn(t){return document.createTextNode(t)}function ce(){return cn(" ")}function Tn(){return cn("")}function Mt(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function Ob(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Wb(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function v(t,e,i){i==null?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function Vm(t,e){const i=Object.getOwnPropertyDescriptors(t.__proto__);for(const n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:i[n]&&i[n].set?t[n]=e[n]:v(t,n,e[n])}function Nm(t,e){Object.keys(e).forEach(i=>{(function(n,r,o){r in n?n[r]=typeof n[r]=="boolean"&&o===""||o:v(n,r,o)})(t,i,e[i])})}function zn(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Hm(t,e){t.value=e??""}function Dy(t,e,{bubbles:i=!1,cancelable:n=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,i,n,e),r}class vu{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,i,n=null){this.e||(this.is_svg?this.e=Rr(i.nodeName):this.e=pt(i.nodeName),this.t=i,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let i=0;i<this.n.length;i+=1)tt(this.t,this.n[i],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Q)}}function uu(t,e){return new t(e)}const pu=new Map;let Ic,Jd=0;function jm(t,e,i,n,r,o,a,s=0){const l=16.666/n;let c=`{
`;for(let y=0;y<=1;y+=l){const x=e+(i-e)*o(y);c+=100*y+`%{${a(x,1-x)}}
`}const d=c+`100% {${a(i,1-i)}}
}`,u=`__svelte_${function(y){let x=5381,k=y.length;for(;k--;)x=(x<<5)-x^y.charCodeAt(k);return x>>>0}(d)}_${s}`,p=Fy(t),{stylesheet:h,rules:g}=pu.get(p)||function(y,x){const k={stylesheet:Bb(x),rules:{}};return pu.set(y,k),k}(p,t);g[u]||(g[u]=!0,h.insertRule(`@keyframes ${u} ${d}`,h.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?m+", ":""}${u} ${n}ms linear ${r}ms 1 both`,Jd+=1,u}function _b(t,e){const i=(t.style.animation||"").split(", "),n=i.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),r=i.length-n.length;r&&(t.style.animation=n.join(", "),Jd-=r,Jd||Ph(()=>{Jd||(pu.forEach(o=>{const{ownerNode:a}=o.stylesheet;a&&Q(a)}),pu.clear())}))}function Sc(t){Ic=t}function il(){if(!Ic)throw new Error("Function called outside component initialization");return Ic}function ws(t){il().$$.on_mount.push(t)}function Vb(t){il().$$.after_update.push(t)}function No(t){il().$$.on_destroy.push(t)}function va(){const t=il();return(e,i,{cancelable:n=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=Dy(e,i,{cancelable:n});return r.slice().forEach(a=>{a.call(t,o)}),!o.defaultPrevented}return!0}}function ko(t,e){return il().$$.context.set(t,e),e}function ln(t){return il().$$.context.get(t)}function Gr(t,e){const i=t.$$.callbacks[e.type];i&&i.slice().forEach(n=>n.call(this,e))}const gc=[],Ai=[],Qd=[],Hp=[],By=Promise.resolve();let jp=!1;function Oy(){jp||(jp=!0,By.then(I))}function Wy(){return Oy(),By}function zl(t){Qd.push(t)}function Po(t){Hp.push(t)}const lp=new Set;let sc,zd=0;function I(){const t=Ic;do{for(;zd<gc.length;){const e=gc[zd];zd++,Sc(e),Nb(e.$$)}for(Sc(null),gc.length=0,zd=0;Ai.length;)Ai.pop()();for(let e=0;e<Qd.length;e+=1){const i=Qd[e];lp.has(i)||(lp.add(i),i())}Qd.length=0}while(gc.length);for(;Hp.length;)Hp.pop()();jp=!1,lp.clear(),Sc(t)}function Nb(t){if(t.fragment!==null){t.update(),_i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(zl)}}function cp(t,e,i){t.dispatchEvent(Dy(`${e?"intro":"outro"}${i}`))}const tu=new Set;let Za;function ze(){Za={r:0,c:[],p:Za}}function Fe(){Za.r||_i(Za.c),Za=Za.p}function P(t,e){t&&t.i&&(tu.delete(t),t.i(e))}function D(t,e,i,n){if(t&&t.o){if(tu.has(t))return;tu.add(t),Za.c.push(()=>{tu.delete(t),n&&(i&&t.d(1),n())}),t.o(e)}else n&&n()}const Hb={duration:0};function Um(t,e,i,n){let r=e(t,i),o=n?0:1,a=null,s=null,l=null;function c(){l&&_b(t,l)}function d(p,h){const g=p.b-o;return h*=Math.abs(g),{a:o,b:p.b,d:g,duration:h,start:p.start,end:p.start+h,group:p.group}}function u(p){const{delay:h=0,duration:g=300,easing:m=Mh,tick:y=Je,css:x}=r||Hb,k={start:Ly()+h,b:p};p||(k.group=Za,Za.r+=1),a||s?s=k:(x&&(c(),l=jm(t,o,p,g,h,m,x)),p&&y(0,1),a=d(k,g),zl(()=>cp(t,p,"start")),Rh(w=>{if(s&&w>s.start&&(a=d(s,g),s=null,cp(t,a.b,"start"),x&&(c(),l=jm(t,o,a.b,a.duration,0,m,r.css))),a){if(w>=a.end)y(o=a.b,1-o),cp(t,a.b,"end"),s||(a.b?c():--a.group.r||_i(a.group.c)),a=null;else if(w>=a.start){const C=w-a.start;o=a.a+a.d*m(C/a.duration),y(o,1-o)}}return!(!a&&!s)}))}return{run(p){Hi(r)?(sc||(sc=Promise.resolve(),sc.then(()=>{sc=null})),sc).then(()=>{r=r(),u(p)}):u(p)},end(){c(),a=s=null}}}const _y=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Vy(t,e){t.d(1),e.delete(t.key)}function Ss(t,e){D(t,1,1,()=>{e.delete(t.key)})}function La(t,e,i,n,r,o,a,s,l,c,d,u){let p=t.length,h=o.length,g=p;const m={};for(;g--;)m[t[g].key]=g;const y=[],x=new Map,k=new Map;for(g=h;g--;){const R=u(r,o,g),O=i(R);let T=a.get(O);T?n&&T.p(R,e):(T=c(O,R),T.c()),x.set(O,y[g]=T),O in m&&k.set(O,Math.abs(g-m[O]))}const w=new Set,C=new Set;function M(R){P(R,1),R.m(s,d),a.set(R.key,R),d=R.first,h--}for(;p&&h;){const R=y[h-1],O=t[p-1],T=R.key,z=O.key;R===O?(d=R.first,p--,h--):x.has(z)?!a.has(T)||w.has(T)?M(R):C.has(z)?p--:k.get(T)>k.get(z)?(C.add(T),M(R)):(w.add(z),p--):(l(O,a),p--)}for(;p--;){const R=t[p];x.has(R.key)||l(R,a)}for(;h;)M(y[h-1]);return y}function Ir(t,e){const i={},n={},r={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const l in a)l in s||(n[l]=1);for(const l in s)r[l]||(i[l]=s[l],r[l]=1);t[o]=s}else for(const l in a)r[l]=1}for(const a in n)a in i||(i[a]=void 0);return i}function Or(t){return typeof t=="object"&&t!==null?t:{}}function go(t,e,i){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=i,i(t.$$.ctx[n]))}function At(t){t&&t.c()}function It(t,e,i,n){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,i),n||zl(()=>{const a=t.$$.on_mount.map(Iy).filter(Hi);t.$$.on_destroy?t.$$.on_destroy.push(...a):_i(a),t.$$.on_mount=[]}),o.forEach(zl)}function Et(t,e){const i=t.$$;i.fragment!==null&&(_i(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function ai(t,e,i,n,r,o,a,s=[-1]){const l=Ic;Sc(t);const c=t.$$={fragment:null,ctx:[],props:o,update:Je,not_equal:r,bound:Wm(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Wm(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};a&&a(c.root);let d=!1;if(c.ctx=i?i(t,e.props||{},(u,p,...h)=>{const g=h.length?h[0]:p;return c.ctx&&r(c.ctx[u],c.ctx[u]=g)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](g),d&&function(m,y){m.$$.dirty[0]===-1&&(gc.push(m),Oy(),m.$$.dirty.fill(0)),m.$$.dirty[y/31|0]|=1<<y%31}(t,u)),p}):[],c.update(),d=!0,_i(c.before_update),c.fragment=!!n&&n(c.ctx),e.target){if(e.hydrate){const u=function(p){return Array.from(p.childNodes)}(e.target);c.fragment&&c.fragment.l(u),u.forEach(Q)}else c.fragment&&c.fragment.c();e.intro&&P(t.$$.fragment),It(t,e.target,e.anchor,e.customElement),I()}Sc(l)}class si{$destroy(){Et(this,1),this.$destroy=Je}$on(e,i){if(!Hi(i))return Je;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(i),()=>{const r=n.indexOf(i);r!==-1&&n.splice(r,1)}}$set(e){var i;this.$$set&&(i=e,Object.keys(i).length!==0)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const vl=[];function kl(t,e){return{subscribe:le(t,e).subscribe}}function le(t,e=Je){let i;const n=new Set;function r(o){if(ti(t,o)&&(t=o,i)){const a=!vl.length;for(const s of n)s[1](),vl.push(s,t);if(a){for(let s=0;s<vl.length;s+=2)vl[s][0](vl[s+1]);vl.length=0}}}return{set:r,update:function(o){r(o(t))},subscribe:function(o,a=Je){const s=[o,a];return n.add(s),n.size===1&&(i=e(r)||Je),o(t),()=>{n.delete(s),n.size===0&&(i(),i=null)}}}}function Ri(t,e,i){const n=!Array.isArray(t),r=n?[t]:t,o=e.length<2;return kl(i,a=>{let s=!1;const l=[];let c=0,d=Je;const u=()=>{if(c)return;d();const h=e(n?l[0]:l,a);o?a(h):d=Hi(h)?h:Je},p=r.map((h,g)=>jr(h,m=>{l[g]=m,c&=~(1<<g),s&&u()},()=>{c|=1<<g}));return s=!0,u(),function(){_i(p),d()}})}var Ny=t=>t.reduce((e,i)=>Object.assign(e,i),{});const wl=t=>({updateValue:t}),Do=t=>({defaultValue:t}),Hy=t=>({store:t}),Fd=t=>({store:(e,i)=>Ri(...t(i))}),Dd=t=>({store:(e,i)=>{const[n,r,o=()=>!1]=t(i);let a,s=!0;return Ri(n,(l,c)=>{r(l,d=>{!s&&o(a,d)||(a=d,s=!1,c(d))})})}}),lc=t=>({store:(e,i)=>{const[n,r={},o]=t(i);let a=[];const s={},l=h=>n(h,s),c=h=>{(a.length||h.length)&&(a=h,d())},d=()=>{const h=a.map(l);o&&h.sort(o),a=[...h],p(h)};Object.entries(r).map(([h,g])=>g.subscribe(m=>{s[h]=m,m&&d()}));const{subscribe:u,set:p}=le(e||[]);return{set:c,update:h=>c(h(a)),subscribe:u}}});var Gm=t=>{const e={},i={};return t.forEach(([n,...r])=>{const o=Ny(r),a=e[n]=((l,c,d)=>{const{store:u=C=>le(C),defaultValue:p=me,updateValue:h}=d,g=u(p(),c,l),{subscribe:m,update:y=me}=g;let x;const k=C=>{let M=!0;x&&x(),x=m(R=>{if(M)return M=!1;C(R),x(),x=void 0})},w=h?h(l):Zi;return g.set=C=>y(M=>w(C,M,k)),g.defaultValue=p,g})(i,e,o),s={get:()=>fa(a),set:a.set};Object.defineProperty(i,n,s)}),{stores:e,accessors:i}},jb=[["src",Hy(()=>{let t;const{subscribe:e,set:i}=le(),n=r=>{t!==r&&(t=r,i(t))};return{set:n,subscribe:e,update:r=>n(r(t))}})],["imageReader"],["imageWriter"],["imageScrambler"],["imageRedactionRendering",Do(()=>"pixelated")],["images",Do(()=>[])],["shapePreprocessor"],["willRequestResource"],["willRequest"]],jy=t=>t.charAt(0).toUpperCase()+t.slice(1),hu=(t,e)=>{Object.keys(e).forEach(i=>{const n=Qi(e[i])?{value:e[i],writable:!1}:e[i];Object.defineProperty(t,i,n)})};const Zm=(t,e)=>{let i,n,r,o,a,s,l,c,d,u;const p=e.length;for(i=0;i<p;i++)if(n=e[i],r=e[i+1>p-1?0:i+1],o=n.x-t.x,a=n.y-t.y,s=r.x-t.x,l=r.y-t.y,c=o-s,d=a-l,u=c*a-d*o,u<-1e-5)return!1;return!0};var Xm=(t,e)=>{const i=ey(e),n=Ji();_o(t).forEach(o=>{Bn(o,n),Zm(o,e)||i.forEach(a=>{const s=Math.atan2(a.start.y-a.end.y,a.start.x-a.end.x),l=1e4*Math.sin(Math.PI-s),c=1e4*Math.cos(Math.PI-s),d=rt(o.x+l,o.y+c),u=dh(qf(a),1e4),p=uh(vs(o,d),u);p&&Bn(n,On(_e(p),o))})});const r=Ci(t);return Bn(r,n),!!_o(r).every(o=>Zm(o,e))&&(fu(t,r),!0)},Uy=(t,e)=>{const i=_o(t),n=iy(e,5),r=Ti(t),o=[];i.forEach(l=>{const c=((u,p)=>{if(p===0)return u;const h=rt(u.start.x-u.end.x,u.start.y-u.end.y),g=ao(h),m=Dr(g,p);return u.end.x+=m.x,u.end.y+=m.y,u})(vs(_e(r),_e(l)),1e6);let d=!1;n.map(qf).forEach(u=>{const p=uh(c,u);p&&!d&&(o.push(p),d=!0)})});const a=$o(o[0],o[2])<$o(o[1],o[3])?[o[0],o[2]]:[o[1],o[3]],s=ar(a);return s.width<t.width&&(fu(t,s),!0)},Gy=(t,e,i={x:0,y:0})=>{const n=Ur(t),r=Ti(n),o=Jf(n,i,r).map(s=>Jr(s,e,r)),a=ar(o);return o.map(s=>On(s,a))},Cl=(t,e=0,i=sr(t))=>{let n,r;if(e!==0){const o=Math.atan2(1,i),a=Math.sign(e)*e,s=a%Math.PI,l=a%Vo;let c;c=s>Jo&&s<Vo+Jo?l>Jo?a:Vo-l:l>Jo?Vo-l:a;const d=Math.min(Math.abs(t.height/Math.sin(o+c)),Math.abs(t.width/Math.cos(o-c)));n=Math.cos(o)*d,r=n/i}else n=t.width,r=n/i,r>t.height&&(r=t.height,n=r*i);return Hn(n,r)},Ub=(t,e,i,n,r,o,a,s)=>{const l=oo(a),c=oo(s),d=ii(Math.max(e.width/c.width,e.height/c.height)),u=ii(Math.min(e.width/l.width,e.height/l.height)),p=Ci(e);if(u<1||d>1){const h=Ti(t),g=Ti(e),m=u<1?u:d,y=(g.x+h.x)/2,x=(g.y+h.y)/2,k=p.width/m,w=p.height/m;Kf(p,y-.5*k,x-.5*w,k,w)}return o?(((h,g,m=0,y=Ji(),x)=>{if($i(m)&&m!==0||y.x||y.y){const k=sr(h),w=Gy(g,m,y),C=Cl(g,m,k);if(!(h.width<C.width&&h.height<C.height)){const M=.5*h.width-.5*C.width,R=.5*h.height-.5*C.height;h.width>C.width&&(h.width=C.width,h.x+=M),h.height>C.height&&(h.height=C.height,h.y+=R)}Xm(h,w),Uy(h,w)&&Xm(h,w)}else{const k=sr(h);h.width=Math.min(h.width,g.width),h.height=Math.min(h.height,g.height),h.x=Math.max(h.x,0),h.x+h.width>g.width&&(h.x-=h.x+h.width-g.width),h.y=Math.max(h.y,0),h.y+h.height>g.height&&(h.y-=h.y+h.height-g.height);const w=Ti(h),C=to(h,k);C.width=Math.max(x.width,C.width),C.height=Math.max(x.height,C.height),C.x=w.x-.5*C.width,C.y=w.y-.5*C.height,fu(h,C)}})(p,i,n,r,l),{crop:p}):{crop:p}},Ih=(t,e,i)=>{const n=Ur(t),r=Ti(n),o=Mr(n,i,r),a=Ti(Pc(ar(o))),s=Ti(e),l=Jr(s,-i,a),c=On(l,a),d=Mo(Bn(r,c),ii);return An(d.x-.5*e.width,d.y-.5*e.height,e.width,e.height)},Xi=(t,e,i)=>Math.max(e,Math.min(t,i));const dp=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","manipulation","redaction","annotation","decoration","selection","frame","backgroundColor","backgroundImage","targetSize","metadata","trim","volume","minDuration","maxDuration","currentTime"],Up=t=>Ln(t)?t.map(Up):gh(t)||Bc(t)?t:el(t)?{...t}:t,cc=t=>t.map(e=>Object.entries(e).reduce((i,[n,r])=>(n.startsWith("_")||(i[n]=r),i),{})),Gb=(t,e)=>t===e;var Ka=(t,e,i=Gb)=>{if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1;return!0};const Ym=(t,e,i)=>{const n=Mo(Ti(t),d=>ii(d,8)),r=Ur(e),o=Ti(r),a=Mr(r,i,o),s=Mo(El(ar(a)),d=>ii(d,8)),l=Math.abs(s.x-n.x),c=Math.abs(s.y-n.y);return l<1&&c<1},Zb=(t,e,i,n,r)=>{if(!r)return[-1/0,1/0];const o=Math.max(i.width/n.width,i.height/n.height),a=Hn(n.width*o,n.height*o),s=(l=a,Math.sqrt(l.width*l.width+l.height*l.height));var l;if(s<Math.min(t.width,t.height))return[-1/0,1/0];const c=e?t.height:t.width,d=e?t.width:t.height,u=Math.acos(a.height/s),p=u-Math.acos(d/s),h=Math.asin(c/s)-u;if(Number.isNaN(p)&&Number.isNaN(h))return[-1/0,1/0];const g=Number.isNaN(p)?h:Number.isNaN(h)?p:Math.min(p,h);return[-g,g]},fc=(t,e)=>{const{context:i,props:n}=e;return t._isFormatted||((t=xy(t))._isFormatted=!0,Object.assign(t,n)),t._isDraft||!bu(t)||t._context&&ta(i,t._context)||(Sy(t,i),t._context={...i}),t},Xb=(t,e)=>(t._isFormatted||(t.disableMove=!0,t.disableSelect=!0,t.disableResize=!0,t.disableRotate=!0),fc(t,e));var Eh=[["file"],["size"],["loadState"],["processState"],["aspectRatio",Fd(({size:t})=>[t,e=>e?sr(e):void 0])],["perspectiveX",Do(()=>0)],["perspectiveY",Do(()=>0)],["perspective",Fd(({perspectiveX:t,perspectiveY:e})=>[[t,e],([i,n])=>({x:i,y:n})])],["rotation",Do(()=>0),wl(t=>(e,i,n)=>{if(e===i)return e;const{loadState:r,size:o,rotationRange:a,cropMinSize:s,cropMaxSize:l,crop:c,perspective:d,cropLimitToImage:u,cropOrigin:p}=t;if(!c||!r||!r.beforeComplete)return e;const h=u&&((y,x,k)=>{const w=Cl(x,k,sr(y));return Mc(Xa(w,Math.round),Xa(oo(y),Math.round))})(c,o,i),g=u&&Ym(c,o,i),m=((y,x,k,w,C,M,R,O,T,z)=>{const F=oo(T),B=oo(z);R&&(B.width=Math.min(z.width,C.width),B.height=Math.min(z.height,C.height));let f=!1;const V=(j,K)=>{const dt=Ih(C,w,j),lt=Ur(C),N=Ti(lt),ft=Jf(lt,M,N),$t=On(_e(N),pm(ft)),Lt=Jr(Ti(dt),K,N),ct=On(_e(N),Lt);ft.forEach(mt=>Jr(mt,K,N));const et=ar(ft),ht=pm(ft),Y=Bn(On(On(ht,ct),et),$t),Z=An(Y.x-.5*dt.width,Y.y-.5*dt.height,dt.width,dt.height);if(O&&Fr(Z,O.width/Z.width),R){const mt=Gy(C,K,M);Uy(Z,mt)}const St=ii(Math.min(Z.width/F.width,Z.height/F.height),8),nt=ii(Math.max(Z.width/B.width,Z.height/B.height),8);return(St<1||nt>1)&&ii(Math.abs(K-j))===ii(Math.PI/2)&&!f?(f=!0,V(y,y+Math.sign(K-j)*Math.PI)):{rotation:K,crop:Wo(Z,mt=>ii(mt,8))}},J=Math.sign(x)*Math.round(Math.abs(x)/Vo)*Vo,S=Xi(x,J+k[0],J+k[1]);return V(y,S)})(i,e,a,c,o,d,u,p,s,l);if(h&&g){const y=Cl(o,e,sr(m.crop));m.crop.x+=.5*m.crop.width,m.crop.y+=.5*m.crop.height,m.crop.x-=.5*y.width,m.crop.y-=.5*y.height,m.crop.width=y.width,m.crop.height=y.height}return n(()=>{t.crop=Wo(m.crop,y=>ii(y,8))}),m.rotation})],["flipX",Do(()=>!1)],["flipY",Do(()=>!1)],["flip",Fd(({flipX:t,flipY:e})=>[[t,e],([i,n])=>({x:i,y:n})])],["isRotatedSideways",Dd(({rotation:t})=>[[t],([e],i)=>i(Ia(e)),(e,i)=>e!==i])],["crop",wl(t=>(e,i=e)=>{const{loadState:n,size:r,cropMinSize:o,cropMaxSize:a,cropLimitToImage:s,cropAspectRatio:l,rotation:c,perspective:d}=t;if(!e&&!i||!n||!n.beforeComplete)return e;e||(e=Ur(Cl(r,c,l||sr(r))));const u=Ub(i,e,r,c,d,s,o,a),p=Wo(u.crop,h=>ii(h,8));return ta(i,p)?i:p})],["cropAspectRatio",wl(t=>(e,i)=>{const{loadState:n,crop:r,size:o,rotation:a,cropLimitToImage:s}=t,l=(d=>{if(d){if(/:/.test(d)){const[u,p]=d.split(":");return u/p}return parseFloat(d)}})(e);if(!l)return;if(!r||!n||!n.beforeComplete)return l;const c=i?Math.abs(e-i):1;if(Ym(r,o,a)&&s&&c>=.1){const d=((u,p)=>{const h=u.width,g=u.height;return Ia(p)&&(u.width=g,u.height=h),u})(oo(o),a);t.crop=Wo(to(Ur(d),e),ii)}else{const d={width:r.height*l,height:r.height},u=.5*(r.width-d.width),p=.5*(r.height-d.height);t.crop=Wo(An(r.x+u,r.y+p,d.width,d.height),ii)}return l})],["cropOrigin"],["cropMinSize",Do(()=>({width:1,height:1}))],["cropMaxSize",Do(()=>({width:32768,height:32768}))],["cropLimitToImage",Do(()=>!0),wl(t=>(e,i,n)=>{const{crop:r}=t;return r&&!i&&e&&n(()=>t.crop=Ci(t.crop)),e})],["cropSize",Dd(({crop:t})=>[[t],([e],i)=>{e&&i(Hn(e.width,e.height))},(e,i)=>Mc(e,i)])],["cropRectAspectRatio",Fd(({cropSize:t})=>[[t],([e],i)=>{e&&i(ii(sr(e),5))}])],["cropRange",Dd(({size:t,rotation:e,cropRectAspectRatio:i,cropMinSize:n,cropMaxSize:r,cropLimitToImage:o})=>[[t,e,i,n,r,o],([a,s,l,c,d,u],p)=>{a&&p(((h,g,m,y,x,k)=>{const w=oo(y),C=oo(x);return k?[w,Xa(Cl(h,g,m),Math.round)]:[w,C]})(a,s,l,c,d,u))},(a,s)=>Ka(a,s)])],["rotationRange",Dd(({size:t,isRotatedSideways:e,cropMinSize:i,cropSize:n,cropLimitToImage:r})=>[[t,e,i,n,r],([o,a,s,l,c],d)=>{!o||!l||d(Zb(o,a,s,l,c))},(o,a)=>Ka(o,a)])],["backgroundColor",wl(()=>t=>((e=[0,0,0,0],i=1)=>e.length===4?e:[...e,i])(t))],["backgroundImage"],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["duration"],["currentTime"],["minDuration",Do(()=>1/24)],["maxDuration",Do(()=>1/0)],["volume",Do(()=>1)],["trim"],["redaction",lc(({size:t})=>[fc,{context:t}])],["manipulation",lc(({size:t})=>[fc,{context:t}])],["annotation",lc(({size:t})=>[fc,{context:t}])],["decoration",lc(({crop:t})=>[fc,{context:t}])],["selection",lc(({size:t})=>[Xb,{context:t}])],["frame",wl(()=>t=>{if(!t)return;const e={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return Oe(t)?e.frameStyle=t:Object.assign(e,t),e})],["metadata"],["state",Hy((t,e,i)=>{const n=dp.map(l=>e[l]);let r=!1;const o=le({}),{subscribe:a}=Ri([...n,o],(l,c)=>{if(r)return;const d=dp.reduce((u,p,h)=>(u[p]=Up(l[h]),u),{});d.crop&&Wo(d.crop,Math.round),d.manipulation=d.manipulation&&cc(d.manipulation),d.redaction=d.redaction&&cc(d.redaction),d.annotation=d.annotation&&cc(d.annotation),d.decoration=d.decoration&&cc(d.decoration),d.selection=d.selection&&cc(d.selection),c(d)}),s=l=>{l&&(r=!0,i.cropOrigin=void 0,dp.filter(c=>Le(l,c)).forEach(c=>{const d=l[c];i[c]=d===null?void 0:Up(d)}),r=!1,o.set({}))};return{set:s,update:l=>s(l(null)),subscribe:a}})]],qm=async(t,e,i={},n)=>{const{ontaskstart:r,ontaskprogress:o,ontaskend:a,token:s}=n;let l=!1;const c={cancel:me};s.cancel=()=>{l=!0,c.cancel()};for(const[d,u]of e.entries()){if(l)return;const[p,h]=u;r(d,h);try{t=await p(t,{...i,taskCancelToken:c},g=>o(d,h,g))}catch(g){throw l=!0,g}a(d,h)}return t};const Zy=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],Yb=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],qb=Eh.map(([t])=>t).filter(t=>!Yb.includes(t)),up=t=>"image"+jy(t),Km=t=>Le(t,"crop");var Xy=()=>{const{stores:t,accessors:e}=Gm(jb),{sub:i,pub:n}=Ya(),r=()=>e.images?e.images[0]:{};let o={};const a={};qb.forEach(m=>{Object.defineProperty(e,up(m),{get:()=>{const y=r();if(y)return y.accessors[m]},set:y=>{o[up(m)]=y,a[up(m)]=y;const x=r();x&&(x.accessors[m]=y)}})});const s=()=>e.images&&e.images[0],l=t.src.subscribe(m=>{if(!m)return e.images=[];e.imageReader&&(e.images.length&&(o={}),d(m))}),c=t.imageReader.subscribe(m=>{m&&(e.images.length||e.src&&d(e.src))}),d=m=>{Promise.resolve().then(()=>p(m,o)).catch(()=>{})};let u;const p=(m,y={})=>new Promise((x,k)=>{let w=s();const C=!(y.cropLimitToImage===!1||y.imageCropLimitToImage===!1||a.imageCropLmitedToImage===!1),M=y.cropMinSize||y.imageCropMinSize||a.imageCropMinSize,R=C?M:w&&w.accessors.cropMinSize,O=y.minDuration||y.imageMinDuration;w&&g(),w=(({minSize:F={width:1,height:1},minDuration:B=0}={})=>{const{stores:f,accessors:V}=Gm(Eh),{pub:J,sub:S}=Ya(),j=(K,dt)=>{const lt=()=>V[K]||{},N=Lt=>{V[K]={...lt(),...Lt,timeStamp:Date.now()}},ft=()=>lt().error,$t=Lt=>{ft()||(N({error:Lt}),J(dt+"error",{...lt()}))};return{start(){J(dt+"start")},onabort(){N({abort:!0}),J(dt+"abort",{...lt()})},ontaskstart(Lt,ct){ft()||(N({index:Lt,task:ct,taskProgress:void 0,taskLengthComputable:void 0}),J(dt+"taskstart",{...lt()}))},ontaskprogress(Lt,ct,et){ft()||(N({index:Lt,task:ct,taskProgress:et.loaded/et.total,taskLengthComputable:et.lengthComputable}),J(dt+"taskprogress",{...lt()}),J(dt+"progress",{...lt()}))},ontaskend(Lt,ct){ft()||(N({index:Lt,task:ct}),J(dt+"taskend",{...lt()}))},ontaskerror(Lt){$t(Lt)},error(Lt){$t(Lt)},beforeComplete(Lt){ft()||(N({beforeComplete:!0}),J("before"+dt,Lt))},complete(Lt){ft()||(N({complete:!0}),J(dt,Lt))}}};return hu(V,{read:(K,{reader:dt},lt={})=>{if(!dt)return;Object.assign(V,{file:void 0,size:void 0,loadState:void 0});let N={cancel:me},ft=!1;const $t=j("loadState","load"),Lt={token:N,...$t},ct={src:K,size:void 0,dest:void 0,duration:void 0};return Promise.resolve().then(async()=>{try{if($t.start(),ft)return $t.onabort();const et=await qm(ct,dt,lt,Lt);if(ft)return $t.onabort();const{size:ht,duration:Y,dest:Z}=et||{};if(!ht||!ht.width||!ht.height)throw new wc("Image size missing","IMAGE_SIZE_MISSING",et);if(Y>0&&Y<B)throw new wc("Video too short","VIDEO_TOO_SHORT",{...et,minDuration:B});if(ht.width<F.width||ht.height<F.height)throw new wc("Image too small","IMAGE_TOO_SMALL",{...et,minWidth:F.width,minHeight:F.height});Object.assign(V,{file:Z,size:ht,duration:Y}),$t.beforeComplete(et),$t.complete(et)}catch(et){$t.error(et)}finally{N=void 0}}),()=>{ft=!0,N&&N.cancel(),$t.onabort()}},write:(K,dt)=>{if(!V.loadState.complete)return;V.processState=void 0;const lt=j("processState","process"),N={src:V.file,imageState:V.state,dest:void 0};if(Qi(K)&&(K=K(V.file,V.state)),!K)return lt.start(),void lt.complete(N);let ft={cancel:me},$t=!1;const Lt=dt,ct={token:ft,...lt};return Promise.resolve().then(async()=>{try{if(lt.start(),$t)return lt.onabort();const et=await qm(N,K,Lt,ct);if($t)return lt.onabort();lt.complete(et)}catch(et){lt.error(et)}finally{ft=void 0}}),()=>{$t=!0,ft&&ft.cancel()}},on:S}),{accessors:V,stores:f}})({minSize:R,minDuration:O}),Zy.map(F=>{return w.accessors.on(F,(B=F,f=>n(B,f)));var B});const T=()=>{o={},z.forEach(F=>F())},z=[];z.push(w.accessors.on("loaderror",F=>{T(),k(F)})),z.push(w.accessors.on("loadabort",()=>{T(),k({name:"AbortError"})})),z.push(w.accessors.on("load",F=>{u=void 0,T(),x(F)})),z.push(w.accessors.on("beforeload",()=>((F,B)=>{if(Km(B))return void(e.imageState=B);if(!B.imageCrop){const J=F.accessors.size,S=B.imageRotation||0,j=Yf(oo(J),S),K=Ur(j);K.width=ii(Math.abs(K.width),6),K.height=ii(Math.abs(K.height),6);const dt=B.imageCropAspectRatio||(B.imageCropLimitToImage?sr(J):sr(K));let lt;B.imageCropLimitToImage?lt=to(K,dt):(lt=qa(K,dt),lt.x=(J.width-lt.width)/2,lt.y=(J.height-lt.height)/2),B.imageCrop=lt}if(F.accessors.duration&&!B.imageTrim&&B.imageMaxDuration){const{duration:J}=F.accessors;B.imageTrim=[[0,Math.min(B.imageMaxDuration/J,1)]]}const f=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];f.filter(J=>Le(B,J)).forEach(J=>{e[J]=B[J],delete B[J]});const V=Object.keys(B).filter(J=>!f.includes(J)).reduce((J,S)=>(J[S]=B[S],J),{});Object.assign(e,V)})(w,y))),e.images=[w],y.imageReader&&(e.imageReader=y.imageReader),y.imageWriter&&(e.imageWriter=y.imageWriter),u=w.accessors.read(m,{reader:e.imageReader},{willRequest:e.willRequest})});let h;const g=()=>{const m=s();m&&(u&&u(),m.accessors.loadState=void 0,e.images=[])};return Object.defineProperty(e,"stores",{get:()=>t}),hu(e,{on:i,loadImage:p,abortLoadImage:()=>{u&&u(),e.images=[]},editImage:(m,y)=>new Promise((x,k)=>{p(m,y).then(()=>{const{images:w}=e,C=w[0],M=()=>{R(),O()},R=C.accessors.on("processerror",T=>{M(),k(T)}),O=C.accessors.on("process",T=>{M(),x(T)})}).catch(k)}),removeImage:g,processImage:(m,y)=>new Promise((x,k)=>{try{const w=[],C=()=>{h=void 0,w.forEach(M=>M())};(async()=>{if((R=>Oe(R)||Ll(R)||Al(R))(m))try{await p(m,y)}catch(R){k(R)}else m&&(Km(m)?e.imageState=m:Object.assign(e,m));const M=s();if(!M)return k("no image");w.push(M.accessors.on("processerror",R=>{C(),k(R)})),w.push(M.accessors.on("processabort",()=>{C(),k({name:"AbortError"})})),w.push(M.accessors.on("process",R=>{C(),x(R)})),h=M.accessors.write(e.imageWriter,{redactionRenderStyle:e.imageRedactionRendering,shapePreprocessor:e.shapePreprocessor||Zi,imageScrambler:e.imageScrambler,willRequest:e.willRequest,willRequestResource:e.willRequestResource})})()}catch(w){k(w)}}),abortProcessImage:()=>{const m=s();m&&(h&&h(),m.accessors.processState=void 0)},destroy:()=>{l&&l(),c&&c()}}),e};const Kb=(t,e)=>{const{processImage:i}=Xy();return i(t,e)};var Yy=()=>Ea()?ya()?/15_|16_/.test(navigator.userAgent)?14745600:16777216:/15_/.test(navigator.userAgent)?16777216:1/0:1/0,qy=(t,e)=>Object.keys(t).filter(i=>!e.includes(i)).reduce((i,n)=>(i[n]=t[n],i),{}),Ky=t=>new Promise(e=>{if(t.duration===1/0)return t.ontimeupdate=()=>{t.ontimeupdate=void 0,e(t)},void(t.currentTime=Number.MAX_SAFE_INTEGER);e(t)});const Jb=t=>new Promise(e=>{const i=new FileReader;i.onload=()=>e(i.result),i.readAsArrayBuffer(t)}),pp=(t,e=0,i=t.byteLength)=>{const n=[],r=e+i;for(;e<r;){const o=t.getUint32(e);if(o<0)break;const a=t.getUint32(e+4);if(n.push({type:a,size:o,offset:e,bodyOffset:e+8,bodySize:o-8}),o<8)break;e+=o}return n},Qb=(t,{limit:e=1024}={})=>{let i=0;if(i+=4,t.getUint32(i)!==1718909296)return 0;i+=4;const n=t.getUint32(i);return n===1836069938?((r,o,a)=>{let s=!1,l=-1;for(let h=o;h<a;h++)if(s||r.getUint32(h)!==1953653099||(s=!0,h+=4),s&&r.getUint8(h)==64){l=h;break}if(l<0)return 0;const c=r.getUint32(l-28),d=r.getUint32(l-20),u=r.getUint32(l-32),p=r.getUint32(l-16);return c===65536&&d===4294901760?90:u===4294901760&&p===4294901760?180:c===4294901760&&d===65536?270:0})(t,i,e):n===1903435808?(r=>{const o=pp(r).find(c=>c.type===1836019574);if(!o)return 0;const a=pp(r,o.bodyOffset,o.bodySize);a.filter(c=>c.type===1953653099).forEach(c=>{a.push(...pp(r,c.bodyOffset,c.bodySize))});const s=[1836476516,1953196132],l=a.filter(c=>s.includes(c.type));for(const{type:c,bodyOffset:d}of l){const u=r.getUint8(d);let p=d+4;p+=c===1836476516?32:36,p+=u===1?12:0;const h=r.getInt32(p),g=r.getInt32(p+4);if(h===0&&g>0)return 90;if(h<0&&g===0)return 180;if(h===0&&g<0)return 270}return 0})(t):0};var Jy=t=>new Promise((e,i)=>{(xa()?(async n=>{const r=await Jb(n),o=new DataView(r);return Qb(o)})(t):Promise.resolve(0)).then(n=>{const r=document.createElement("video");r.onerror=()=>i(r.error),r.playsInline=!0,r.preload="auto",r.onseeked=()=>{r.onseeked=void 0,e(r)},r.onloadeddata=()=>{r.onloadeddata=void 0,r.dataset.rotation=n?""+n:"0",Ky(r).then(e),r.currentTime=0},r.src=URL.createObjectURL(t),r.load()})}),Qy=(t,e)=>new Promise(i=>{if(t.currentTime===e)return i(t);let n=t.onseeked;t.onseeked=()=>{t.onseeked=n,i(t)},t.currentTime=Xi(e,0,t.duration)}),t2=(t,e=0)=>new Promise((i,n)=>{Jy(t).then(r=>{Qy(r,e).then(o=>{const a=hn("canvas");oy(o).then(({width:s,height:l})=>{a.width=s,a.height=l;const c=a.getContext("2d",{willReadFrequently:!0}),d=()=>{c.drawImage(o,0,0,a.width,a.height);const u=c.getImageData(0,0,a.width,a.height);Qn(a),URL.revokeObjectURL(o.src),i(u)};Ea()?setTimeout(d,16):d()})})})}),nl=t=>/video/.test(t.type);const Ah=({imageDataResizer:t,canvasMemoryLimit:e}={})=>async(i,n,r,o,a)=>{r.width=Math.max(r.width,1),r.height=Math.max(r.height,1),o.width=Math.max(o.width,1),o.height=Math.max(o.height,1);const{dest:s}=await Kb(n,{imageReader:a2(),imageWriter:s2({format:"canvas",targetSize:{...o,upscale:!0},imageDataResizer:t,canvasMemoryLimit:e}),imageCrop:r}),{feather:l=0}=a||{};if(l>0){const c=hn("canvas");c.width=s.width,c.height=s.height;const d=c.getContext("2d",{willReadFrequently:!0}),u=1/l;let p=0;for(p=0;p<l;p++){const g=p*u;d.strokeStyle=`rgba(0,0,0,${g*g})`,d.strokeRect(p+.5,p+.5,s.width-2*p-1,s.height-2*p-1)}d.fillStyle="#000",d.fillRect(p,p,s.width+.5-2*p,s.height+.5-2*p);const h=s.getContext("2d");h.globalCompositeOperation="destination-in",h.drawImage(c,0,0),Qn(c)}i.drawImage(s,o.x,o.y,o.width,o.height),Qn(s)},bn=(t,e=(...n)=>n,i)=>async(n,r,o)=>{o(Sl(0,!1));let a=!1;const s=await t(...e(n,r,l=>{a=!0,o(l)}));return i&&i(n,s),a||o(Sl(1,!1)),n},t4=({willRequest:t,srcProp:e="src",destProp:i="dest"}={})=>[bn(rb,(n,r,o)=>[n[e],o,{...r,willRequest:t}],(n,r)=>n[i]=r),"any-to-file"],e4=({srcProp:t="dest",destProp:e="dest"}={})=>[bn(async i=>{if(/octet-stream/.test(i.type)){console.warn(`Pintura: File has unknown mime type "${i.type}", make sure your server sets the correct Content-Type header.`);let n="image";const r=await $h(i);/video/i.test(r.nodeName)&&(n="video");const o={type:n+"/unknown"};return Bc(i)?new File([i],i.name,{...o,lastModified:i.lastModified}):new Blob([i],o)}return i},i=>[i[t]],(i,n)=>i[e]=n),"any-to-file"],e2=({srcProp:t="src",destProp:e="size"}={})=>[bn(ay,i=>[i[t]],(i,n)=>i[e]=n),"read-image-size"],i4=async t=>{const e=await $h(t);if(au(e))return await(i=>new Promise((n,r)=>{const o=()=>{Ky(i).then(()=>{n(i.duration)})};if(i.readyState>=1)return o();i.onloadedmetadata=o,i.onerror=()=>r(i.error)}))(e)},n4=({srcProp:t="src",destProp:e="duration"}={})=>[bn(i4,i=>[i[t]],(i,n)=>i[e]=n),"read-media-duration"],i2=({srcSize:t="size",srcOrientation:e="orientation",destSize:i="size"}={})=>[bn(ob,n=>[n[t],n[e]],(n,r)=>n[i]=r),"image-size-match-orientation"],n2=({srcProp:t="src",destProp:e="head"}={})=>[bn((i,n)=>cy(i)?Wf(i,n):void 0,i=>[i[t],[0,262144],onprogress],(i,n)=>i[e]=n),"read-image-head"],r2=({srcProp:t="head",destProp:e="orientation"}={})=>[bn(oh,i=>[i[t],274],(i,n=1)=>i[e]=n),"read-exif-orientation-tag"],r4=({srcProp:t="head"}={})=>[bn(oh,e=>[e[t],274,1]),"clear-exif-orientation-tag"],o4=({srcImageSize:t="size",srcCanvasSize:e="imageData",srcImageState:i="imageState",destImageSize:n="size",destScalar:r="scalar"}={})=>[bn((o,a)=>[Math.min(a.width/o.width,a.height/o.height),Aa(a)],o=>[o[t],o[e],o[i]],(o,[a,s])=>{o[r]=a,o[n]=s}),"calculate-canvas-scalar"],a4=({srcProp:t="src",destProp:e="imageData",canvasMemoryLimit:i,srcImageState:n="imageState"}={})=>[bn((r,o,a)=>nl(r)?t2(r,a.currentTime):Uf(r,o),r=>[r[t],i,r[n]],(r,o)=>r[e]=o),"blob-to-image-data"],s4=({srcImageData:t="imageData",srcOrientation:e="orientation"}={})=>[bn(Vf,i=>[i[t],i[e]],(i,n)=>i.imageData=n),"image-data-match-orientation"],l4=({srcImageData:t="imageData",srcImageState:e="imageState"}={})=>[bn(Db,i=>[i[t],{backgroundColor:i[e].backgroundColor,backgroundImage:i[e].backgroundImage}],(i,n)=>i.imageData=n),"image-data-fill"],c4=({srcImageData:t="imageData",srcImageState:e="imageState",destScalar:i="scalar"}={})=>[bn(sb,n=>{const r=n[i];let{crop:o}=n[e];return o&&r!==1&&(o=Fr(Ci(o),r,Ji())),[n[t],{crop:o,rotation:n[e].rotation,flipX:n[e].flipX,flipY:n[e].flipY}]},(n,r)=>n.imageData=r),"image-data-crop"],d4=({targetSize:t={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:e,srcProp:i="imageData",srcImageState:n="imageState",destImageScaledSize:r="imageScaledSize"})=>[bn(cb,o=>{const a=Math.min(t.width||Number.MAX_SAFE_INTEGER,o[n].targetSize&&o[n].targetSize.width||Number.MAX_SAFE_INTEGER),s=Math.min(t.height||Number.MAX_SAFE_INTEGER,o[n].targetSize&&o[n].targetSize.height||Number.MAX_SAFE_INTEGER);return[o[i],{width:a,height:s,fit:t.fit||"contain",upscale:(l=o[n],!!(l.targetSize&&l.targetSize.width||l.targetSize&&l.targetSize.height)||t.upscale||!1)},e];var l},(o,a)=>{Mc(o.imageData,a)||(o[r]=Aa(a)),o.imageData=a}),"image-data-resize"],u4=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:i="imageData"}={})=>[bn(mb,n=>{const{colorMatrix:r}=n[e],o=r&&Object.keys(r).map(a=>r[a]).filter(Boolean);return[n[t],{colorMatrix:o&&Th(o),convolutionMatrix:n[e].convolutionMatrix,gamma:n[e].gamma,noise:n[e].noise,vignette:n[e].vignette}]},(n,r)=>n[i]=r),"image-data-filter"],p4=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:i="imageData",destScalar:n="scalar"}={})=>[bn(async(r,o,a,s,l,c)=>{if(!o||!s.length)return r;let d;try{const m={dataSizeScalar:Ry(r,s)};a&&a[3]>0&&(m.backgroundColor=[...a]),d=await o(r,m)}catch{}const u=hn("canvas");u.width=r.width,u.height=r.height;const p=u.getContext("2d",{willReadFrequently:!0});if(p.putImageData(r,0,0),c==="auto"){const m=Math.sqrt(r.width*r.height);p.filter=`blur(${Math.round(m/100)}px)`}const h=new Path2D;s.forEach(m=>{const y=An(m.x,m.y,m.width,m.height);ms(y,l);const x=Mr(Ci(y),m.rotation),k=new Path2D;x.forEach((w,C)=>{if(C===0)return k.moveTo(w.x,w.y);k.lineTo(w.x,w.y)}),h.addPath(k)}),p.clip(h,"nonzero"),p.imageSmoothingEnabled=!1,p.drawImage(d,0,0,u.width,u.height),Qn(d);const g=p.getImageData(0,0,u.width,u.height);return Qn(u),g},(r,{imageScrambler:o,redactionRenderStyle:a})=>[r[t],o,r[e].backgroundColor,r[e].redaction,r[n],a],(r,o)=>r[i]=o),"image-data-redact"],hp=({srcImageData:t="imageData",srcSize:e="size",srcImageState:i="imageState",srcShapes:n="annotation",destImageData:r="imageData",destImageScaledSize:o="imageScaledSize",destScalar:a="scalar",imageDataResizer:s,canvasMemoryLimit:l,shapeFilter:c=Zi,shapeClip:d=!0,destImageContext:u="imageContext"}={})=>[bn(Ch,(p,{shapePreprocessor:h,willRequestResource:g,willRequest:m})=>{const y=p[i][n].filter(c);if(!y.length)return[p[t]];const x=p[a],{crop:k}=p[i],w=p[e];let C=x;const M=p[o];M&&(C=Math.min(M.width/k.width,M.height/k.height));const R={width:w.width/x,height:w.height/x};return[p[t],{shapes:y,computeShape:O=>(O=Zn(O,R),O=qy(O,["left","right","top","bottom"]),O=ky(O,C)),transform:O=>{const T=p[e],{rotation:z=0,flipX:F,flipY:B,cropLimitToImage:f}=p[i],V=p[a],{crop:J=Ur(T)}=p[i],S=p[o],j=S?Math.min(S.width/J.width,S.height/J.height):1,K={width:T.width/V*j,height:T.height/V*j},dt=Jx(K,z),lt=dt.width,N=dt.height,ft=.5*K.width-.5*lt,$t=.5*K.height-.5*N,Lt=El(K);O.translate(-ft,-$t),O.translate(-J.x*j,-J.y*j),O.translate(Lt.x,Lt.y),O.rotate(z),O.translate(-Lt.x,-Lt.y);const ct=p[u]||{x:0,y:0};O.translate(ct.x,ct.y),O.scale(F?-1:1,B?-1:1),O.translate(F?-K.width*V:0,B?-K.height*V:0),f&&d&&(O.rect(0,0,K.width,K.height),O.clip())},drawImage:Ah({imageDataResizer:s,canvasMemoryLimit:l}),preprocessShape:O=>h(O,{isPreview:!1,...p[i]}),canvasMemoryLimit:l,willRequest:m||g}]},(p,h)=>p[r]=h),"image-data-annotate"],Jm=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:i="imageData",destImageScaledSize:n="imageScaledSize",imageDataResizer:r,canvasMemoryLimit:o,destScalar:a="scalar",shapeFilter:s=Zi,destImageContext:l="imageContext"}={})=>[bn(Ch,(c,{shapePreprocessor:d,willRequestResource:u,willRequest:p})=>{let h=c[e].decoration.filter(s);if(typeof window<"u"&&(x=>{if(x&&x._yve10k0)return;const[k]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101,32]].map(R=>R.map(O=>String.fromCharCode(O)).join("")),{width:w,height:C}=c[e].crop,M=C/15;h=[...h,{x:.5*-M,y:.5*-M,width:1.5*w,height:1.25*C,text:Array(50).fill(k).join(""),fontWeight:900,lineHeight:M,fontSize:M,color:[1,1,1,.05]}]})(window),!h.length)return[c[t]];let g=c[a];const{crop:m}=c[e],y=c[n];return y&&(g=Math.min(y.width/m.width,y.height/m.height)),[c[t],{shapes:h,drawImage:Ah({imageDataResizer:r,canvasMemoryLimit:o}),computeShape:x=>(x=Zn(x,m),x=qy(x,["left","right","top","bottom"]),x=ky(x,g)),preprocessShape:x=>d(x,{isPreview:!1,...c[e]}),canvasMemoryLimit:o,willRequest:p||u,transform:x=>{const k=c[l]||{x:0,y:0};x.translate(k.x,k.y)}}]},(c,d)=>c[i]=d),"image-data-decorate"],h4=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:i="imageData",destImageScaledSize:n="imageScaledSize",imageDataResizer:r,canvasMemoryLimit:o,destScalar:a="scalar",destImageContext:s="imageContext"}={})=>[bn((l,c)=>new Promise(d=>{if(!c)return d([l]);Ch(l,c).then(u=>{d([u,c.contextBounds])})}),(l,{shapePreprocessor:c,willRequestResource:d,willRequest:u})=>{const p=l[e].frame;if(!p)return[l[t]];const h=l[a];let{crop:g}=l[e];g&&h!==1&&(g=Fr(Ci(g),h,Ji()));const m={...g},y=vy(wy(p,m,c),m);m.x=Math.abs(y.left),m.y=Math.abs(y.top),m.width+=Math.abs(y.left)+Math.abs(y.right),m.height+=Math.abs(y.top)+Math.abs(y.bottom);const x=l[n],k=x?Math.min(x.width/g.width,x.height/g.height):1;return ms(m,k),m.x=Math.floor(m.x),m.y=Math.floor(m.y),m.width=Math.floor(m.width),m.height=Math.floor(m.height),[l[t],{shapes:[p],contextBounds:m,computeShape:w=>Zn(w,l[t]),transform:w=>{w.translate(m.x,m.y)},drawImage:Ah({imageDataResizer:r,canvasMemoryLimit:o}),preprocessShape:w=>c(w,{isPreview:!1,...l[e]}),canvasMemoryLimit:o,willRequest:u||d}]},(l,[c,d])=>{l[s]=d,l[i]=c}),"image-data-frame"],m4=({mimeType:t,quality:e,srcImageData:i="imageData",srcFile:n="src",destBlob:r="blob"}={})=>[bn(Gx,o=>[o[i],t||ch(o[n].name)||o[n].type,e],(o,a)=>o[r]=a),"image-data-to-blob"],$4=({srcImageData:t="imageData",srcOrientation:e="orientation",destCanvas:i="dest"}={})=>[bn(Bl,n=>[n[t],n[e]],(n,r)=>n[i]=r),"image-data-to-canvas"],g4=async(t,e)=>{if(!cy(t)||!e)return t;const i=new DataView(e),n=Of(i);if(!n||!n.exif)return t;const r=["exif","mpf","xmp"].reduce((o,a)=>n[a]?Math.max(o,n[a].offset+n[a].size):o,0);return((o,a,s=[0,o.size])=>a?new Blob([a,o.slice(...s)],{type:o.type}):o)(t,e.slice(0,r+2),[20])},f4=(t="blob",e="head",i="blob")=>[bn(g4,n=>[n[t],n[e]],(n,r)=>n[i]=r),"blob-write-image-head"],y4=({renameFile:t,srcBlob:e="blob",srcFile:i="src",destFile:n="dest",defaultFilename:r}={})=>[bn(Cc,o=>[o[e],t?t(o[i]):o[i].name||`${r}.${Gf(o[e].type)}`],(o,a)=>o[n]=a),"blob-to-file"],Qm=({url:t="./",dataset:e=o=>[["dest",o.dest,o.dest.name],["imageState",o.imageState]],destStore:i="store",credentials:n,headers:r={}})=>[bn(async(o,a)=>await((s,l,c)=>new Promise((d,u)=>{const{token:p={},beforeSend:h=me,onprogress:g=me}=c;p.cancel=()=>m.abort();const m=new XMLHttpRequest;m.upload.onprogress=g,m.onload=()=>m.status>=200&&m.status<300?d(m):u(m),m.onerror=()=>u(m),m.ontimeout=()=>u(m),m.open("POST",encodeURI(s)),h(m),m.send(l instanceof FormData?l:l.reduce((y,x)=>(y.append(...x.map(ab)),y),new FormData))}))(t,o,{onprogress:a,beforeSend:s=>sy(s,{headers:r,credentials:n})}),(o,a,s)=>[e(o),s],(o,a)=>o[i]=a),"store"],o2=t=>[bn(e=>(t&&t.length&&Object.keys(e).forEach(i=>{t.includes(i)||delete e[i]}),e)),"prop-filter"],a2=(t={})=>{const{orientImage:e=!0,outputProps:i=["src","dest","size","duration"],preprocessImageFile:n,request:r={}}=t;return[t4({willRequest:()=>r}),e4(),n&&[bn(n,(o,a,s)=>[o.dest,a,s],(o,a)=>o.dest=a),"preprocess-image-file"],e2({srcProp:"dest"}),n4({srcProp:"dest"}),e&&n2({srcProp:"dest"}),e&&r2(),e&&i2(),o2(i)].filter(Boolean)},x4=t=>t&&(Oe(t)?Qm({url:t}):Qi(t)?[t,"store"]:Qm(t)),s2=(t={})=>(e,i,n={})=>{let{canvasMemoryLimit:r=Yy(),orientImage:o=!0,copyImageHead:a=!0,mimeType:s,quality:l,renameFile:c,targetSize:d,imageDataResizer:u,store:p,format:h="file",outputProps:g=["src","dest","imageState","store"],preprocessImageSource:m,preprocessImageState:y,postprocessImageData:x,postprocessImageBlob:k,testSrcSupport:w=!1}={...t,...n};if(!w||yu(e))return h==="blob"&&(h="file"),[m&&[bn(m,(C,M,R)=>[C.src,M,R,C.imageState],(C,M)=>C.src=M),"preprocess-image-source"],(o||a)&&n2(),o&&r2(),e2(),y&&[bn(y,(C,M,R,O)=>[C.imageState,M,R,{size:C.size,orientation:C.orientation}],(C,M)=>C.imageState=M),"preprocess-image-state"],a4({canvasMemoryLimit:r}),o&&i2(),o&&s4(),o4(),p4(),c4(),d4({imageDataResizer:u,targetSize:d}),hp({imageDataResizer:u,canvasMemoryLimit:r,srcShapes:"manipulation"}),u4(),l4(),hp({imageDataResizer:u,canvasMemoryLimit:r,srcShapes:"annotation",shapeFilter:C=>!C.aboveFrame}),Jm({imageDataResizer:u,canvasMemoryLimit:r,shapeFilter:C=>!C.aboveFrame}),h4({imageDataResizer:u,canvasMemoryLimit:r}),hp({imageDataResizer:u,canvasMemoryLimit:r,srcShapes:"annotation",shapeFilter:C=>C.aboveFrame,shapeClip:!1}),Jm({imageDataResizer:u,canvasMemoryLimit:r,shapeFilter:C=>C.aboveFrame}),x&&[bn(x,(C,M,R)=>[C.imageData,M,R],(C,M)=>C.imageData=M),"postprocess-image-data"],h==="file"?m4({mimeType:s,quality:l}):h==="canvas"?$4():[C=>(C.dest=C.imageData,C)],h==="file"&&o&&r4(),h==="file"&&a&&f4(),k&&[bn(k,({blob:C,imageData:M,src:R},O,T)=>[{blob:C,imageData:M,src:R},O,T],(C,M)=>C.blob=M),"postprocess-image-file"],h==="file"&&y4({defaultFilename:"image",renameFile:c}),h==="file"?x4(p):Qi(p)&&[p,"store"],o2(g)].filter(Boolean)};var b4=(t,e,i,n,r,o,a,s,l,c,d)=>{if(!(t&&e&&i&&n&&s))return;s*=o;const u=Pc(Ci(e)),p=Ti(u),h=Ti(t),g=Ur(i),m=Ti(g),y=Ih(i,n,l),x=Ti(y),k=On(_e(m),x),w=On(_e(h),p);k.x+=w.x,k.y+=w.y;const C=Tl(_e(k));C.x+=w.x,C.y+=w.y;const M=Ti(Qo(Qo(Ci(r),a),t)),R=On(M,h);return Bn(k,R),{origin:C,translation:k,rotation:{x:d?Math.PI:0,y:c?Math.PI:0,z:l},scale:s}};let dc=null;var Lh=()=>{if(dc===null)if("WebGL2RenderingContext"in window){let t;try{t=hn("canvas"),dc=!!t.getContext("webgl2")}catch{dc=!1}t&&Qn(t),t=void 0}else dc=!1;return dc},t$=t=>(t&t-1)==0,zh=(t,e={},i="",n="")=>Object.keys(e).filter(r=>!el(e[r])).reduce((r,o)=>r.replace(new RegExp(i+o+n),e[o]),t);const v4={head:`#version 300 es

in vec4 aPosition;uniform mat4 uMatrix;`,text:`
in vec2 aTexCoord;out vec2 vTexCoord;`,matrix:`
gl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);`},w4={head:`#version 300 es
precision highp float;

out vec4 fragColor;`,mask:`
uniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}`,init:`
float a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(uRepeat.y,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(uRepeat.x,vTexCoord.x))*step(0.0,vTexCoord.x);`,colorize:`
if(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}`,maskapply:`
float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);`,maskfeatherapply:`
float leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;`,rectaa:`
vec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,uEdgeFeather,uSize.x-scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,uSize.y-scaledPoint.y);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.y);`,cornerradius:`
vec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize)-1.0;vec2 p=r-s;float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.y;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);`,fragcolor:`
if(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));`},e$=(t,e,i)=>{const n=t.createShader(i),r=((o,a,s)=>(a=zh(a,s===o.VERTEX_SHADER?v4:w4,"##").trim(),Lh()?a:(a=(a=a.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),s===o.VERTEX_SHADER&&(a=a.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),s===o.FRAGMENT_SHADER&&(a=a.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),""+a)))(t,e,i);return t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)||console.error(t.getShaderInfoLog(n)),n},uc=(t,e,i,n,r)=>{const o=e$(t,e,t.VERTEX_SHADER),a=e$(t,i,t.FRAGMENT_SHADER),s=t.createProgram();t.attachShader(s,o),t.attachShader(s,a),t.linkProgram(s);const l={};return n.forEach(c=>{l[c]=t.getAttribLocation(s,c)}),r.forEach(c=>{l[c]=t.getUniformLocation(s,c)}),{program:s,locations:l,destroy(){t.detachShader(s,o),t.detachShader(s,a),t.deleteShader(o),t.deleteShader(a),t.deleteProgram(s)}}},i$=t=>t.nodeName!=="VIDEO"&&(!!Lh()||t$(t.width)&&t$(t.height)),S4=(t,e,i,n)=>(t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),((r,o,a)=>{r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i$(o)?r.LINEAR_MIPMAP_LINEAR:r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,a.filterParam),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,a.wrapParam),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,a.wrapParam),i$(o)&&r.generateMipmap(r.TEXTURE_2D)})(t,i,n),t.bindTexture(t.TEXTURE_2D,null),e),Us=(t,e=1)=>t?[t[0],t[1],t[2],$i(t[3])?e*t[3]:e]:[0,0,0,0],mp=()=>{const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},$p=(t,e,i,n,r,o,a)=>{const s=1/(e-i),l=1/(n-r),c=1/(o-a);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*s,t[13]=(r+n)*l,t[14]=(a+o)*c,t[15]=1},Gs=(t,e,i,n)=>{t[12]=t[0]*e+t[4]*i+t[8]*n+t[12],t[13]=t[1]*e+t[5]*i+t[9]*n+t[13],t[14]=t[2]*e+t[6]*i+t[10]*n+t[14],t[15]=t[3]*e+t[7]*i+t[11]*n+t[15]},n$=(t,e)=>{t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e},r$=(t,e)=>{const i=Math.sin(e),n=Math.cos(e),r=t[4],o=t[5],a=t[6],s=t[7],l=t[8],c=t[9],d=t[10],u=t[11];t[4]=r*n+l*i,t[5]=o*n+c*i,t[6]=a*n+d*i,t[7]=s*n+u*i,t[8]=l*n-r*i,t[9]=c*n-o*i,t[10]=d*n-a*i,t[11]=u*n-s*i},o$=(t,e)=>{const i=Math.sin(e),n=Math.cos(e),r=t[0],o=t[1],a=t[2],s=t[3],l=t[8],c=t[9],d=t[10],u=t[11];t[0]=r*n-l*i,t[1]=o*n-c*i,t[2]=a*n-d*i,t[3]=s*n-u*i,t[8]=r*i+l*n,t[9]=o*i+c*n,t[10]=a*i+d*n,t[11]=s*i+u*n},a$=(t,e)=>{const i=Math.sin(e),n=Math.cos(e),r=t[0],o=t[1],a=t[2],s=t[3],l=t[4],c=t[5],d=t[6],u=t[7];t[0]=r*n+l*i,t[1]=o*n+c*i,t[2]=a*n+d*i,t[3]=s*n+u*i,t[4]=l*n-r*i,t[5]=c*n-o*i,t[6]=d*n-a*i,t[7]=u*n-s*i};var k4=t=>t*Math.PI/180,wu=(t,e)=>Lh()?t.getContext("webgl2",e):t.getContext("webgl",e)||t.getContext("experimental-webgl",e);const gp=(t,e)=>{const i=t.length;return e>=i?t[e%i]:e<0?t[e%i+i]:t[e]},C4=(t,e,i,n)=>{const r=rt(i.x-e.x,i.y-e.y),o=rt(n.x-i.x,n.y-i.y),a=rt(e.x-n.x,e.y-n.y),s=rt(t.x-e.x,t.y-e.y),l=rt(t.x-i.x,t.y-i.y),c=rt(t.x-n.x,t.y-n.y),d=Xd(r,s),u=Xd(o,l),p=Xd(a,c);return d<=0&&u<=0&&p<=0},T4=t=>{if(t.length<3)return[];if((x=>{const k=x.length;for(let w=0;w<k;w++){const C=vs(x[w],gp(x,w+1));if(ty(C,x,{ignoreIdenticalLines:!0,breakOnIntersection:!0}))return!0}return!1})(t))return[];(x=>{let k,w,C,M,R,O=0;const T=x.length;for(k=0;k<T;k++)w=x[k],C=x[(k+1)%T],M=C.x-w.x,R=(C.y+w.y)/2,O+=M*R;return O})(t)<0&&t.reverse();const e=t.length,i=[...Array(e).keys()],n=[];let r,o,a,s,l,c,d,u,p,h,g,m,y=128;for(;i.length>3;){if(y<=0)return[];for(y--,r=0;r<i.length;r++)if(a=i[r],s=gp(i,r-1),l=gp(i,r+1),c=t[a],d=t[s],u=t[l],p=rt(d.x-c.x,d.y-c.y),h=rt(u.x-c.x,u.y-c.y),!(Xd(p,h)<0)){for(g=!0,o=0;o<e;o++)if(o!==a&&o!==s&&o!==l&&(m=t[o],C4(m,d,c,u))){g=!1;break}if(g){n.push([d,c,u]),i.splice(r,1);break}}}return n.push([t[i[0]],t[i[1]],t[i[2]]]),n},s$=(t,e,i,n,r)=>{const o=ao(rt(n.x-i.x,n.y-i.y)),a=ao(rt(r.x-n.x,r.y-n.y)),s=ao(rt(o.x+a.x,o.y+a.y)),l=rt(-s.y,s.x),c=rt(-o.y,o.x),d=Math.min(1/Zd(l,c),5);t[e]=n.x,t[e+1]=n.y,t[e+2]=l.x*d,t[e+3]=l.y*d,t[e+4]=-1,t[e+5]=n.x,t[e+6]=n.y,t[e+7]=l.x*d,t[e+8]=l.y*d,t[e+9]=1},l$=t=>{const e=new Float32Array(8);return e[0]=t[3].x,e[1]=t[3].y,e[2]=t[0].x,e[3]=t[0].y,e[4]=t[2].x,e[5]=t[2].y,e[6]=t[1].x,e[7]=t[1].y,e},c$=(t,e=0,i,n)=>{const r=_o(t),o=t.x+.5*t.width,a=t.y+.5*t.height;return(i||n)&&Ml(r,i,n,o,a),e!==0&&Js(r,e,o,a),r},Bd=(t,e,i,n,r)=>{const o=Math.min(20,Math.max(4,Math.round(n/2)));let a=0,s=0,l=0,c=0,d=0;for(;d<o;d++)a=d/o,s=r*Vo+a*Vo,l=n*Math.cos(s),c=n*Math.sin(s),t.push(rt(e+l,i+c))};let Od=null;var Fh=()=>{if(Od!==null)return Od;let t=hn("canvas");const e=wu(t);return Od=e?e.getParameter(e.MAX_TEXTURE_SIZE):void 0,Qn(t),t=void 0,Od},Dh=()=>Br()&&!!window.chrome;const yc=new Float32Array([0,1,0,0,1,1,1,0]),M4=new Float32Array([1,0,0,0,1,1,0,1]),P4=Br()&&xa(),d$=[0,0,0,0,1,0,0,0,0],R4=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],fp=[0,0,0,0],I4=[0,0,0,0],u$=(t,e,i,n,r)=>{if(!i||!n)return yc;let o=n.x/i.width,a=n.y/i.height,s=t/i.width/r,l=e/i.height/r;return s-=o,l-=a,new Float32Array([-o,l,-o,-a,s,l,s,-a])};var E4=(t,e={})=>{const{alpha:i=!1}=e,n={width:0,height:0},r={width:0,height:0},o=Fh()||1024;let a,s,l;const c=mp(),d=mp();let u,p,h,g,m,y,x,k,w,C=0,M=0,R=0,O=1;const T=new Map([]),z=()=>{f.stencilOp(f.KEEP,f.KEEP,f.KEEP),f.stencilFunc(f.ALWAYS,1,255),f.stencilMask(255)},F=k4(30),B=Math.tan(F/2),f=wu(t,{alpha:i,antialias:!1,premultipliedAlpha:!0,stencil:!0});if(!f)return;f.getExtension("OES_standard_derivatives"),f.disable(f.DEPTH_TEST),f.enable(f.STENCIL_TEST),f.enable(f.BLEND),f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!(!i&&xa())),z();const V=f.createTexture();f.bindTexture(f.TEXTURE_2D,V),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,1,1,0,f.RGBA,f.UNSIGNED_BYTE,new Uint8Array(fp)),T.set(0,V);const J=f.createTexture();T.set(2,J);const S=f.createFramebuffer(),j=f.createTexture();T.set(1,j);const K=f.createFramebuffer(),dt=uc(f,`
##head
##text
void main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}`,`
##head
in vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform int uAntialias;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){return(c*m)+(o*c.a);}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;if(uAntialias==1){vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);}vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));if(overlayColorAlpha<=0.0){color*=1.0-uOverlayColor.a;}color*=uOpacity;fragColor=color;}`,["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uOverlayColor","uAntialias"]),lt=f.createBuffer(),N=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,N),f.bufferData(f.ARRAY_BUFFER,yc,f.STATIC_DRAW);const ft=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,ft),f.bufferData(f.ARRAY_BUFFER,M4,f.STATIC_DRAW);const $t=uc(f,`#version 300 es

in vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform float uSharpness;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+uSharpness;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}`,`
##head
##mask
in vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uSharpness","uMaskBounds","uMaskOpacity"]),Lt=f.createBuffer();Dh()&&(f.bindBuffer(f.ARRAY_BUFFER,Lt),f.bufferData(f.ARRAY_BUFFER,1,f.DYNAMIC_DRAW));const ct=(xt,Gt,de,ue=!1)=>{const{program:be,locations:$e}=$t;f.useProgram(be),f.enableVertexAttribArray($e.aPosition),f.enableVertexAttribArray($e.aNormal),f.enableVertexAttribArray($e.aMiter);const _=((Vt,Ce)=>{let Re,He,bi,vt=0;const bt=Vt.length,Ge=new Float32Array(10*(Ce?bt+1:bt)),Me=Vt[0],ni=Vt[bt-1];for(vt=0;vt<bt;vt++)Re=Vt[vt-1],He=Vt[vt],bi=Vt[vt+1],Re||(Re=Ce?ni:rt(He.x+(He.x-bi.x),He.y+(He.y-bi.y))),bi||(bi=Ce?Me:rt(He.x+(He.x-Re.x),He.y+(He.y-Re.y))),s$(Ge,10*vt,Re,He,bi);return Ce&&s$(Ge,10*bt,ni,Me,Vt[1]),Ge})(xt,ue),ve=5*Float32Array.BYTES_PER_ELEMENT,gi=2*Float32Array.BYTES_PER_ELEMENT,ye=4*Float32Array.BYTES_PER_ELEMENT;f.uniform1f($e.uWidth,Gt),f.uniform1f($e.uSharpness,l),f.uniform4fv($e.uColor,de),f.uniformMatrix4fv($e.uMatrix,!1,u),f.uniform4f($e.uCanvasColor,C,M,R,O),f.uniform1fv($e.uMaskBounds,x),f.uniform1f($e.uMaskOpacity,y),f.bindBuffer(f.ARRAY_BUFFER,Lt),f.bufferData(f.ARRAY_BUFFER,_,f.STATIC_DRAW),f.vertexAttribPointer($e.aPosition,2,f.FLOAT,!1,ve,0),f.vertexAttribPointer($e.aNormal,2,f.FLOAT,!1,ve,gi),f.vertexAttribPointer($e.aMiter,1,f.FLOAT,!1,ve,ye),f.drawArrays(f.TRIANGLE_STRIP,0,_.length/5),f.disableVertexAttribArray($e.aPosition),f.disableVertexAttribArray($e.aNormal),f.disableVertexAttribArray($e.aMiter)},et=uc(f,`
##head
void main(){
##matrix
}`,`
##head
##mask
uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;
##maskapply
fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),ht=f.createBuffer(),Y=uc(f,`
##head
##text
in vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;
##matrix
}`,`
##head
##mask
in vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;uniform float uEdgeFeather;void main(){
##init
##colorize
##rectaa
##cornerradius
##maskfeatherapply
if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uRepeat","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted","uEdgeFeather"]),Z=f.createBuffer(),St=f.createBuffer(),nt=f.createBuffer(),mt=uc(f,`
##head
##text
out vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;
##matrix
}`,`
##head
##mask
in vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){
##init
float ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uRadius.x)*(vTexCoordDouble.x*uRadius.x),(vTexCoordDouble.y*uRadius.y)*(vTexCoordDouble.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uRepeat","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),Ft=f.createBuffer(),oe=f.createBuffer(),Rt=new Map,Ut={2:{width:0,height:0},1:{width:0,height:0}},Ot=(xt,Gt,de,ue=1)=>{const be=Math.min(Math.min(4096,o)/de.width,Math.min(4096,o)/de.height,ue),$e=Math.floor(be*de.width),_=Math.floor(be*de.height);Mc(de,Ut[xt])?f.bindFramebuffer(f.FRAMEBUFFER,Gt):(f.bindTexture(f.TEXTURE_2D,T.get(xt)),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,$e,_,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.bindFramebuffer(f.FRAMEBUFFER,Gt),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,T.get(xt),0),Ut[xt]=de);const ve=de.width*s,gi=de.height*s;var ye,Vt;$p(d,0,ve,gi,0,-1,1),Gs(d,0,gi,0),Vt=1,(ye=d)[0]*=Vt,ye[1]*=Vt,ye[2]*=Vt,ye[3]*=Vt,((Ce,Re)=>{Ce[4]*=Re,Ce[5]*=Re,Ce[6]*=Re,Ce[7]*=Re})(d,-1),u=d,f.viewport(0,0,$e,_),f.colorMask(!0,!0,!0,!0),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT),w=[1,0,1,0,1,Math.max(n.width,de.width),1,Math.max(n.width,de.width)]},U=(xt,Gt)=>{const{forceRelease:de=!1}=Gt||{},{src:ue}=Rt.get(xt);ue instanceof HTMLCanvasElement&&(de||ue.dataset.retain||Qn(ue)),Rt.delete(xt),f.deleteTexture(xt)},wt=xt=>Rt.get(xt).isRotatedVideo;return{drawPath:(xt,Gt=0,de=!1,ue=!1,be,$e,_,ve,gi)=>{if(xt.length<2)return;const ye=xt.map(He=>({x:He.x*s,y:He.y*s})),Vt=be*s;if(Vt>0&&ct(ye,Vt,Us($e,gi),_),ye.length<3||!ve||ve[3]===0||!_)return;const Ce=T4(ye),Re=new Float32Array(6*Ce.length);Ce.forEach(([He,bi,vt],bt)=>{const Ge=6*bt;Re[Ge+0]=He.x,Re[Ge+1]=He.y,Re[Ge+2]=bi.x,Re[Ge+3]=bi.y,Re[Ge+4]=vt.x,Re[Ge+5]=vt.y}),((He,bi)=>{const{program:vt,locations:bt}=et;f.useProgram(vt),f.enableVertexAttribArray(bt.aPosition),f.uniform4fv(bt.uColor,bi),f.uniformMatrix4fv(bt.uMatrix,!1,u),f.uniform1fv(bt.uMaskBounds,x),f.uniform1f(bt.uMaskOpacity,y),f.uniform4f(bt.uCanvasColor,C,M,R,O),f.bindBuffer(f.ARRAY_BUFFER,ht),f.bufferData(f.ARRAY_BUFFER,He,f.STATIC_DRAW),f.vertexAttribPointer(bt.aPosition,2,f.FLOAT,!1,0,0),f.drawArrays(f.TRIANGLES,0,He.length/2),f.disableVertexAttribArray(bt.aPosition)})(Re,Us(ve,gi))},drawRect:(xt,Gt=0,de=!1,ue=!1,be,$e,_,ve,gi,ye=!1,Vt,Ce,Re,He,bi,vt=1/s,bt,Ge)=>{const Me=ms(Ci(xt),s),ni=be.map(Ue=>((ei,vi)=>Math.floor(Xi(ei,0,Math.min(.5*(vi.width-1),.5*(vi.height-1)))))(Ue||0,xt)).map(Ue=>Ue*s);if($e||_){const Ue=Ci(Me);Ue.x-=.5,Ue.y-=.5,Ue.width+=1,Ue.height+=1;const ei=c$(Ue,Gt,de,ue),vi=l$(ei);let di;bt&&(di=Us(bt),di[3]===0&&(di[3]=.001));const Li=ve&&ye?[Ue.width/ve.width,Ue.height/ve.height]:[1,1];((X,jt,G,Bt,fe,Qt=V,se,zt=1,We=fp,Ee=yc,je=w,Ke=1,it)=>{const{program:Xt,locations:Nt}=Y;f.useProgram(Xt),f.enableVertexAttribArray(Nt.aPosition),f.enableVertexAttribArray(Nt.aTexCoord),f.enableVertexAttribArray(Nt.aRectCoord),f.uniform4fv(Nt.uColor,fe),f.uniform2fv(Nt.uSize,[jt,G]),f.uniform2fv(Nt.uPosition,[X[2],X[3]]),f.uniform2fv(Nt.uRepeat,se),f.uniform1i(Nt.uInverted,it?1:0),f.uniform1fv(Nt.uCornerRadius,Bt),f.uniform4f(Nt.uCanvasColor,C,M,R,O),f.uniform1fv(Nt.uMaskFeather,je.map((Zt,Yt)=>Yt%2==0?Zt:Zt*s)),f.uniform1fv(Nt.uMaskBounds,x),f.uniform1f(Nt.uMaskOpacity,y),f.uniform1f(Nt.uEdgeFeather,Math.max(0,Ke)),f.uniformMatrix4fv(Nt.uMatrix,!1,u),f.uniform1i(Nt.uTexture,4),f.uniform4fv(Nt.uTextureColor,We),f.uniform1f(Nt.uTextureOpacity,zt),f.activeTexture(f.TEXTURE0+4),f.bindTexture(f.TEXTURE_2D,Qt),f.bindBuffer(f.ARRAY_BUFFER,St),f.bufferData(f.ARRAY_BUFFER,Ee,f.STATIC_DRAW),f.vertexAttribPointer(Nt.aTexCoord,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ARRAY_BUFFER,nt),f.bufferData(f.ARRAY_BUFFER,yc,f.STATIC_DRAW),f.vertexAttribPointer(Nt.aRectCoord,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ARRAY_BUFFER,Z),f.bufferData(f.ARRAY_BUFFER,X,f.STATIC_DRAW),f.vertexAttribPointer(Nt.aPosition,2,f.FLOAT,!1,0,0),f.drawArrays(f.TRIANGLE_STRIP,0,X.length/2),f.disableVertexAttribArray(Nt.aPosition),f.disableVertexAttribArray(Nt.aTexCoord),f.disableVertexAttribArray(Nt.aRectCoord)})(vi,Ue.width,Ue.height,ni,Us($e,He),_,Li,He,di,Vt?new Float32Array(Vt):u$(Ue.width,Ue.height,ve,gi,s),bi,vt*s,Ge)}Ce&&(Ce=Math.min(Ce,Me.width,Me.height),ct(((Ue,ei,vi,di,Li,X,jt,G)=>{const Bt=[];if(X.every(fe=>fe===0))Bt.push(rt(Ue,ei),rt(Ue+vi,ei),rt(Ue+vi,ei+di),rt(Ue,ei+di));else{const[fe,Qt,se,zt]=X,We=Ue,Ee=Ue+vi,je=ei,Ke=ei+di;Bt.push(rt(We+fe,je)),Bd(Bt,Ee-Qt,je+Qt,Qt,-1),Bt.push(rt(Ee,je+Qt)),Bd(Bt,Ee-zt,Ke-zt,zt,0),Bt.push(rt(Ee-zt,Ke)),Bd(Bt,We+se,Ke-se,se,1),Bt.push(rt(We,Ke-se)),Bd(Bt,We+fe,je+fe,fe,2)}return(jt||G)&&Ml(Bt,jt,G,Ue+.5*vi,ei+.5*di),Li&&Js(Bt,Li,Ue+.5*vi,ei+.5*di),Bt})(Me.x,Me.y,Me.width,Me.height,Gt,ni,de,ue),Ce*s,Us(Re,He),!0))},drawEllipse:(xt,Gt,de,ue,be,$e,_,ve,gi,ye,Vt,Ce,Re,He,bi)=>{const vt=ms(An(xt.x-Gt,xt.y-de,2*Gt,2*de),s);if(_||ve){const bt=Ci(vt);bt.x-=.5,bt.y-=.5,bt.width+=1,bt.height+=1;const Ge=c$(bt,ue,be,$e);((Me,ni,Ue,ei,vi=V,di=yc,Li=1,X=!1)=>{const{program:jt,locations:G}=mt;f.useProgram(jt),f.enableVertexAttribArray(G.aPosition),f.enableVertexAttribArray(G.aTexCoord),f.uniformMatrix4fv(G.uMatrix,!1,u),f.uniform2fv(G.uRadius,[.5*ni,.5*Ue]),f.uniform1i(G.uInverted,X?1:0),f.uniform4fv(G.uColor,ei),f.uniform4f(G.uCanvasColor,C,M,R,O),f.uniform2fv(G.uRepeat,[1,1]),f.uniform1fv(G.uMaskBounds,x),f.uniform1f(G.uMaskOpacity,y),f.uniform1i(G.uTexture,4),f.uniform1f(G.uTextureOpacity,Li),f.activeTexture(f.TEXTURE0+4),f.bindTexture(f.TEXTURE_2D,vi),f.bindBuffer(f.ARRAY_BUFFER,oe),f.bufferData(f.ARRAY_BUFFER,di,f.STATIC_DRAW),f.vertexAttribPointer(G.aTexCoord,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ARRAY_BUFFER,Ft),f.bufferData(f.ARRAY_BUFFER,Me,f.STATIC_DRAW),f.vertexAttribPointer(G.aPosition,2,f.FLOAT,!1,0,0),f.drawArrays(f.TRIANGLE_STRIP,0,Me.length/2),f.disableVertexAttribArray(G.aPosition),f.disableVertexAttribArray(G.aTexCoord)})(l$(Ge),bt.width,bt.height,Us(_,He),ve,Vt?new Float32Array(Vt):u$(bt.width,bt.height,gi,ye,s),He,bi)}Ce&&ct(((bt,Ge,Me,ni,Ue,ei,vi)=>{const di=.5*Math.abs(Me),Li=.5*Math.abs(ni),X=Math.abs(Me)+Math.abs(ni),jt=Math.max(20,Math.round(X/6));return ou(rt(bt+di,Ge+Li),di,Li,Ue,ei,vi,jt)})(vt.x,vt.y,vt.width,vt.height,ue,be,$e),Ce*s,Us(Re,He),!0)},drawImage:(xt,Gt,de,ue,be,$e,_,ve,gi,ye,Vt=R4,Ce=1,Re,He=1,bi=0,vt=k,bt=I4,Ge=fp,Me=!1,ni=!1,Ue=!0)=>{const ei=Gt.width*s,vi=Gt.height*s,di=-.5*ei,Li=.5*vi,X=.5*ei,jt=-.5*vi,G=new Float32Array([di,jt,0,di,Li,0,X,jt,0,X,Li,0]);f.bindBuffer(f.ARRAY_BUFFER,lt),f.bufferData(f.ARRAY_BUFFER,G,f.STATIC_DRAW);const Bt=Gt.height/2/B*(n.height/Gt.height)*-1;be*=s,$e*=s,de*=s,ue*=s;const{program:fe,locations:Qt}=dt,se=mp();((Xt,Nt,Zt,Yt,ot)=>{const pe=1/Math.tan(Nt/2),ee=1/(Yt-ot);Xt[0]=pe/Zt,Xt[1]=0,Xt[2]=0,Xt[3]=0,Xt[4]=0,Xt[5]=pe,Xt[6]=0,Xt[7]=0,Xt[8]=0,Xt[9]=0,Xt[10]=(ot+Yt)*ee,Xt[11]=-1,Xt[12]=0,Xt[13]=0,Xt[14]=2*ot*Yt*ee,Xt[15]=0})(se,F,a,1,2*-Bt),Gs(se,be,-$e,Bt),Gs(se,de,-ue,0),a$(se,-gi),n$(se,ye),Gs(se,-de,ue,0),o$(se,ve),r$(se,_),f.useProgram(fe),f.enableVertexAttribArray(Qt.aPosition),f.enableVertexAttribArray(Qt.aTexCoord),f.uniform1i(Qt.uTexture,3),f.uniform2f(Qt.uTextureSize,Gt.width,Gt.height),f.activeTexture(f.TEXTURE0+3),f.bindTexture(f.TEXTURE_2D,xt);const zt=ni?1:0,We=T.get(zt);f.uniform1i(Qt.uTextureBlend,zt),f.activeTexture(f.TEXTURE0+zt),f.bindTexture(f.TEXTURE_2D,We);const Ee=Me?2:0,je=T.get(Ee);f.uniform1i(Qt.uTextureOverlay,Ee),f.activeTexture(f.TEXTURE0+Ee),f.bindTexture(f.TEXTURE_2D,je),f.bindBuffer(f.ARRAY_BUFFER,lt),f.vertexAttribPointer(Qt.aPosition,3,f.FLOAT,!1,0,0);const Ke=P4&&wt(xt);let it;f.bindBuffer(f.ARRAY_BUFFER,Ke?ft:N),f.vertexAttribPointer(Qt.aTexCoord,2,f.FLOAT,!1,0,0),f.uniformMatrix4fv(Qt.uMatrix,!1,se),f.uniform4fv(Qt.uOverlayColor,Ge),!Re||Ka(Re,d$)?(Re=d$,it=-1):(it=Re.reduce((Xt,Nt)=>Xt+Nt,0),it=it<=0?1:it),f.uniform1fv(Qt.uClarityKernel,Re),f.uniform1f(Qt.uClarityKernelWeight,it),f.uniform1f(Qt.uColorGamma,1/He),f.uniform1f(Qt.uColorVignette,bi),f.uniform1i(Qt.uAntialias,Ue?1:0),f.uniform4f(Qt.uColorOffset,Vt[4],Vt[9],Vt[14],Vt[19]),f.uniformMatrix4fv(Qt.uColorMatrix,!1,[Vt[0],Vt[1],Vt[2],Vt[3],Vt[5],Vt[6],Vt[7],Vt[8],Vt[10],Vt[11],Vt[12],Vt[13],Vt[15],Vt[16],Vt[17],Vt[18]]),f.uniform1f(Qt.uOpacity,Ce),f.uniform1f(Qt.uMaskOpacity,y),f.uniform1fv(Qt.uMaskBounds,x),f.uniform1fv(Qt.uMaskCornerRadius,bt.map(Xt=>Xt*s)),f.uniform1fv(Qt.uMaskFeather,vt.map((Xt,Nt)=>Nt%2==0?Xt:Xt*s)),f.drawArrays(f.TRIANGLE_STRIP,0,4),f.disableVertexAttribArray(Qt.aPosition),f.disableVertexAttribArray(Qt.aTexCoord)},textureFilterNearest:f.NEAREST,textureFilterLinear:f.LINEAR,textureClamp:f.CLAMP_TO_EDGE,textureRepeat:f.REPEAT,textureCreate:()=>f.createTexture(),textureUpdate:(xt,Gt,de)=>(Rt.set(xt,{src:Gt,options:de,isRotatedVideo:Gt.nodeName==="VIDEO"&&(Gt.dataset&&Gt.dataset.rotation==90||Gt.dataset.rotation==270)}),S4(f,xt,Gt,de)),textureGetSize:xt=>{const{src:Gt,options:de}=Rt.get(xt),ue=Aa(Gt);return de.scalar?Xa(ue,be=>be/de.scalar):ue},textureDelete:U,enablePreviewStencil:()=>{f.stencilOp(f.KEEP,f.KEEP,f.REPLACE),f.stencilFunc(f.ALWAYS,1,255),f.stencilMask(255)},applyPreviewStencil:()=>{f.stencilFunc(f.EQUAL,1,255),f.stencilMask(0)},disablePreviewStencil:z,setCanvasColor(xt){C=xt[0],M=xt[1],R=xt[2],O=i?xt[3]:1,f.clear(f.COLOR_BUFFER_BIT)},resetCanvasMatrix:()=>{$p(c,0,n.width,n.height,0,-1,1)},updateCanvasMatrix(xt,Gt,de,ue,be){const $e=xt.width,_=xt.height,ve=n.width*(.5/s),gi=n.height*(.5/s),ye={x:ve+(de.x+Gt.x),y:gi+(de.y+Gt.y)},Vt={x:ye.x-Gt.x,y:ye.y-Gt.y},Ce=.5*$e,Re=.5*_;Jr(Vt,be.z,ye),Yx(Vt,ue,ye),Gs(c,(Vt.x-Ce)*s,(Vt.y-Re)*s,0),Gs(c,Ce*s,Re*s,0),a$(c,be.z);const He=be.x>Math.PI/2;r$(c,He?Math.PI:0);const bi=be.y>Math.PI/2;o$(c,bi?Math.PI:0),n$(c,ue),Gs(c,-Ce*s,-Re*s,0)},drawToCanvas(){f.bindFramebuffer(f.FRAMEBUFFER,null),u=c,f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight),f.colorMask(!0,!0,!0,!0),f.clearColor(C,M,R,O),f.clear(f.COLOR_BUFFER_BIT),w=[1,0,1,0,1,n.width,1,n.width]},drawToImageBlendBuffer(xt,Gt){Ot(1,K,xt,Gt)},drawToImageOverlayBuffer(xt,Gt){Ot(2,S,xt,Gt)},enableMask(xt,Gt){const de=xt.x*s,ue=xt.y*s,be=xt.width*s,$e=xt.height*s;m=de,h=m+be,p=n.height-ue,g=n.height-(ue+$e),y=1-Gt,x=[p,h,g,m]},disableMask(){m=0,h=n.width,p=n.height,g=0,y=1,x=[p,h,g,m]},resize:(xt,Gt,de)=>{s=Math.max(1,de),l=s===1?.75:1,r.width=xt,r.height=Gt,n.width=xt*s,n.height=Gt*s,a=Ko(n.width,n.height),t.width=n.width,t.height=n.height,$p(c,0,n.width,n.height,0,-1,1),k=[1,0,1,0,1,r.width,1,r.width]},release(){Array.from(Rt.keys()).forEach(xt=>U(xt,{forceRelease:!0})),Rt.clear(),T.forEach(xt=>{f.deleteTexture(xt)}),T.clear(),dt.destroy(),$t.destroy(),et.destroy(),Y.destroy(),mt.destroy(),t.width=1,t.height=1,t=void 0}}},A4=(t,e)=>{const{imageData:i,amount:n=1}=t,r=Math.round(2*Math.max(1,n)),o=Math.round(.5*r),a=i.width,s=i.height,l=new Uint8ClampedArray(a*s*4),c=i.data;let d,u,p,h,g,m=0,y=0,x=0;const k=a*s*4-4;for(p=0;p<s;p++)for(d=crypto.getRandomValues(new Uint8ClampedArray(s)),u=0;u<a;u++)h=d[p]/255,y=0,x=0,h<.5&&(y=4*(-o+Math.round(Math.random()*r))),h>.5&&(x=(-o+Math.round(Math.random()*r))*(4*a)),g=Math.min(Math.max(0,m+y+x),k),l[m]=c[g],l[m+1]=c[g+1],l[m+2]=c[g+2],l[m+3]=c[g+3],m+=4;e(null,{data:l,width:i.width,height:i.height})};const L4=[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625];function z4(t){return Math.sqrt(1- --t*t)}function p$(t){return Object.prototype.toString.call(t)==="[object Date]"}function Gp(t,e){if(t===e||t!=t)return()=>t;const i=typeof t;if(i!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map((r,o)=>Gp(t[o],r));return r=>n.map(o=>o(r))}if(i==="object"){if(!t||!e)throw new Error("Object cannot be null");if(p$(t)&&p$(e)){t=t.getTime();const o=(e=e.getTime())-t;return a=>new Date(t+a*o)}const n=Object.keys(e),r={};return n.forEach(o=>{r[o]=Gp(t[o],e[o])}),o=>{const a={};return n.forEach(s=>{a[s]=r[s](o)}),a}}if(i==="number"){const n=e-t;return r=>t+r*n}throw new Error(`Cannot interpolate ${i} values`)}function Bh(t,e={}){const i=le(t);let n,r=t;function o(a,s){if(t==null)return i.set(t=a),Promise.resolve();r=a;let l=n,c=!1,{delay:d=0,duration:u=400,easing:p=Mh,interpolate:h=Gp}=Cn(Cn({},e),s);if(u===0)return l&&(l.abort(),l=null),i.set(t=r),Promise.resolve();const g=Ly()+d;let m;return n=Rh(y=>{if(y<g)return!0;c||(m=h(t,a),typeof u=="function"&&(u=u(t,a)),c=!0),l&&(l.abort(),l=null);const x=y-g;return x>u?(i.set(t=a),!1):(i.set(t=m(p(x/u))),!0)}),n.promise}return{set:o,update:(a,s)=>o(a(r,t),s),subscribe:i.subscribe}}function Zp(t,e,i,n){if(typeof i=="number"){const r=n-i,o=(i-e)/(t.dt||1/60),a=(o+(t.opts.stiffness*r-t.opts.damping*o)*t.inv_mass)*t.dt;return Math.abs(a)<t.opts.precision&&Math.abs(r)<t.opts.precision?n:(t.settled=!1,i+a)}if(Ln(i))return i.map((r,o)=>Zp(t,e[o],i[o],n[o]));if(typeof i=="object"){const r={};for(const o in i)r[o]=Zp(t,e[o],i[o],n[o]);return r}throw new Error(`Cannot spring ${typeof i} values`)}function oi(t,e={}){const i=le(t),{stiffness:n=.15,damping:r=.8,precision:o=.01}=e;let a,s,l,c=t,d=t,u=1,p=0,h=!1;function g(y,x={}){d=y;const k=l={};if(t==null||x.hard||m.stiffness>=1&&m.damping>=1)return h=!0,a=null,c=y,i.set(t=d),Promise.resolve();if(x.soft&&(p=1/(60*(x.soft===!0?.5:+x.soft)),u=0),!s){a=null,h=!1;const w={inv_mass:void 0,opts:m,settled:!0,dt:void 0};s=Rh(C=>{if(a===null&&(a=C),h)return h=!1,s=null,!1;u=Math.min(u+p,1),w.inv_mass=u,w.opts=m,w.settled=!0,w.dt=60*(C-a)/1e3;const M=Zp(w,c,t,d);return a=C,c=t,i.set(t=M),w.settled&&(s=null),!w.settled})}return new Promise(w=>{s.promise.then(()=>{k===l&&w()})})}const m={set:g,update:(y,x)=>g(y(d,t),x),subscribe:i.subscribe,stiffness:n,damping:r,precision:o};return m}var F4=kl(!1,t=>{const e=window.matchMedia("(prefers-reduced-motion:reduce)"),i=()=>t(e.matches);return i(),e.addListener(i),()=>e.removeListener(i)}),h$=()=>"ResizeObserver"in window;const yp=hs(),l2=(t,e,i,n,r)=>{t.rect||(t.rect=hs());const o=t.rect;Kf(yp,e,i,n,r),ta(o,yp)||(fu(o,yp),t.dispatchEvent(new CustomEvent("measure",{detail:o})))},Wd=Math.round,D4=t=>{const e=t.getBoundingClientRect();$a&&l2(t,Wd(e.x),Wd(e.y),Wd(e.width),Wd(e.height))},xp=t=>{$a&&l2(t,t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight)},kc=[];let Zs,ma,$a;function Xp(){kc.length?(kc.forEach(t=>t.measure(t)),$a=requestAnimationFrame(Xp)):$a=void 0}let _d=new Map([]),pc=0,bp=0;var Er=(t,e={})=>{const{observePosition:i=!1,observeViewRect:n=!1,once:r=!1,disabled:o=!1,isMeasureRoot:a=!1}=e;if(h$()&&a&&(ma||(ma=new ResizeObserver(s=>{s.forEach(c=>{_d.set(c.target,c.contentRect)});const l=Array.from(_d.values()).some(({width:c,height:d})=>c>0&&d>0);l?l&&$a===!1&&Xp():($a&&cancelAnimationFrame($a),$a=!1)})),ma.observe(t),pc++),!o)return!h$()||i||n?(t.measure=n?D4:xp,kc.push(t),$a===void 0&&($a=requestAnimationFrame(Xp)),t.measure(t),{destroy(){a&&ma&&(_d.delete(t),ma.unobserve(t),pc--,pc===0&&(ma.disconnect(),ma=void 0));const s=kc.indexOf(t);kc.splice(s,1),delete t.measure}}):(Zs||(Zs=new ResizeObserver(s=>{s.forEach(l=>{$a&&xp(l.target)})})),Zs.observe(t),xp(t),r?Zs.unobserve(t):bp++,{destroy(){a&&ma&&(_d.delete(t),ma.unobserve(t),pc--,pc===0&&(ma.disconnect(),ma=void 0)),r||(Zs.unobserve(t),bp--,bp===0&&(Zs.disconnect(),Zs=void 0))}})},B4=t=>{let e=!1;const i={pointerdown:()=>{e=!1},keydown:()=>{e=!0},keyup:()=>{e=!1},focus:n=>{e&&(n.target.dataset.focusVisible="")},blur:n=>{delete n.target.dataset.focusVisible}};return Object.keys(i).forEach(n=>t.addEventListener(n,i[n],!0)),{destroy(){Object.keys(i).forEach(n=>t.removeEventListener(n,i[n],!0))}}};const O4=async t=>new Promise(e=>{if(t.kind==="file")return e(t.getAsFile());t.getAsString(e)});var c2=(t,e={})=>{const i=r=>{r.preventDefault()},n=async r=>{r.preventDefault(),r.stopPropagation();try{const o=await(a=>new Promise((s,l)=>{const{items:c}=a.dataTransfer;if(!c)return s([]);Promise.all(Array.from(c).map(O4)).then(d=>{s(d.filter(u=>Ll(u)&&yu(u)||/^http/.test(u)))}).catch(l)}))(r);t.dispatchEvent(new CustomEvent("dropfiles",{detail:{event:r,resources:o},...e}))}catch{}};return t.addEventListener("drop",n),t.addEventListener("dragover",i),{destroy(){t.removeEventListener("drop",n),t.removeEventListener("dragover",i)}}};let Vd=null;var Oh=()=>{if(Vd===null)if(Br()){const t=hn("canvas");Vd=!wu(t,{failIfMajorPerformanceCaveat:!0}),Qn(t)}else Vd=!1;return Vd},vp=t=>t instanceof WebGLTexture,m$=([t,e,i,n])=>[n.x,n.y,t.x,t.y,i.x,i.y,e.x,e.y];function W4(t){let e,i,n,r;return{c(){e=pt("div"),i=pt("canvas"),v(e,"class","PinturaCanvas")},m(o,a){tt(o,e,a),Tt(e,i),t[36](i),n||(r=[Mt(i,"measure",t[37]),ji(Er.call(null,i))],n=!0)},p:Je,i:Je,o:Je,d(o){o&&Q(e),t[36](null),n=!1,_i(r)}}}function _4(t,e,i){let n,r,o,a,s,l,c;const d=[0,0,0,0],u=Ji(),p=Br()&&(X=>{const jt=.5*X,G=hn("canvas",{"data-retain":!0,width:X,height:X}),Bt=G.getContext("2d");return Bt.fillStyle="#f0f",Bt.fillRect(0,0,jt,jt),Bt.fillRect(jt,jt,jt,jt),G})(128),h=va();let g,{isAnimated:m}=e,{isTransparent:y}=e,{maskRect:x}=e,{maskOpacity:k=1}=e,{maskFrameOpacity:w=.95}=e,{maskMarkupOpacity:C=1}=e,{clipAnnotationsToImage:M=!0}=e,{pixelRatio:R=1}=e,{textPixelRatio:O=R}=e,{backgroundColor:T}=e,{willRender:z=Zi}=e,{didRender:F=Zi}=e,{willRequest:B}=e,{loadImageData:f=Zi}=e,{enableGrid:V=!1}=e,{gridColors:J}=e,{gridSize:S}=e,{gridOpacity:j=0}=e,{images:K=[]}=e,{interfaceImages:dt=[]}=e,{selectionColor:lt}=e,N=null,ft=null,$t=null;const Lt=(X,jt)=>X.set(jt,{hard:!m}),ct={precision:1e-4*.01};let et=0;const ht=Bh(void 0,{duration:0});E(t,ht,X=>i(35,c=X));const Y=oi(1,ct);E(t,Y,X=>i(34,s=X));const Z=oi(1,ct);E(t,Z,X=>i(50,o=X));const St=le();E(t,St,X=>i(52,l=X));const nt=le();E(t,nt,X=>i(51,a=X));const mt={},Ft=(X,jt)=>{let G=mt[X.id];const Bt=Math.min(1,2048/jt.width);let fe=G?G.element:hn("canvas",{width:jt.width*Bt,height:jt.height*Bt,"data-retain":!0});if(!G||((Qt,se)=>{if(Qt.total!==se.length)return!0;const zt=Qt.last,We=se[se.length-1];return zt.drawMode!==We.drawMode||!(!To(zt)||To(We)&&ta(zt,We))||!(!Jn(zt)||Jn(We)&&zt.x===We.x&&zt.y===We.y&&zt.rx===We.rx&&zt.ry===We.ry)||!(!qn(zt)||qn(We)&&We.points.length===zt.points.length)})(G,X.actions)){fe=fe.cloneNode(),((se,zt,We)=>{const{selectionColor:Ee=[1,1,1],scalar:je=1}=We||{};let Ke=!1;for(const it of zt){const Xt=it.drawMode==="subtract";if(Xt&&!Ke)continue;se.globalCompositeOperation=Xt?"destination-out":"source-over",se.save(),se.beginPath();const Nt=Cy(it);dy(se,je,je),fh(se,it.rotation,Nt),My(se,it.flipX,it.flipY,Nt),it.width?Sh(se,{...it,backgroundColor:Ee}):it.points?Np(se,Object.assign({},it,it.pathClose?{backgroundColor:Ee,strokeColor:[0,0,0,0]}:{strokeColor:Ee,strokeJoin:"round",strokeCap:"round"})):it.rx&&kh(se,{...it,backgroundColor:Ee,strokeColor:[0,0,0,0],strokeJoin:"round",strokeCap:"round"}),se.restore(),Ke=!0}})(fe.getContext("2d"),X.actions,{selectionColor:[1,0,1],scalar:Bt});const Qt=X.actions.length;mt[X.id]={total:Qt,last:{...X.actions[Qt-1]},element:fe}}return{x:0,y:0,...jt,fillColor:X.color||[1,1,1],backgroundImage:fe}};let oe;const Rt=()=>{cancelAnimationFrame(oe),oe=requestAnimationFrame(()=>{He=!0,di=0,r()})},Ut=new Map([]),Ot=new Map([]),U=(X,jt)=>({filterParam:X==="pixelated"?N.textureFilterNearest:N.textureFilterLinear,wrapParam:jt==="repeat"?N.textureRepeat:N.textureClamp}),wt=(X,jt,G)=>{if(!Ut.has(X)){Ut.set(X,X);const Qt=U(jt,G);if(!Oe(Bt=X)&&(ly(Bt)||Il(Bt)||Oc(Bt)||au(Bt))){const se=N.textureCreate();N.textureUpdate(se,X,Qt),Ut.set(X,se)}else f(X).then(se=>{if(!N||!se)return;const zt=N.textureCreate();N.textureUpdate(zt,se,Qt),Ut.set(X,zt),Rt()}).catch(se=>{Ut.set(X,se)})}var Bt,fe;if(au(X)&&((fe=X).currentTime>0&&!fe.paused&&!fe.ended&&fe.readyState>2||X.dataset.redraw==="true")){const Qt=Ut.get(X),se=U(jt,G);return N.textureUpdate(Qt,X,se),X.dataset.redraw=!1,Qt}return Ut.get(X)},xt=(X,jt={})=>{const G=jt.id||X.id;if(!X.text.length)return void Ot.delete(G);let{text:Bt,textAlign:fe,fontFamily:Qt,fontSize:se=16,fontWeight:zt,fontVariant:We,fontStyle:Ee,letterSpacing:je,lineHeight:Ke=se,width:it,height:Xt}=X,{outline:Nt=0,blur:Zt=0,paddingTop:Yt=0,paddingRight:ot=Qr,paddingBottom:pe=0,paddingLeft:ee=Qr}=jt;it=$i(it)?Math.floor(it):it,Xt=$i(Xt)?Math.floor(Xt):Xt;const{textSize:ge,signature:Dt}=((ui="",Be)=>{let{width:yi=0,height:Mi="auto",fontSize:xe,fontFamily:he,lineHeight:Ie,fontWeight:an,fontStyle:Ui,fontVariant:yn,letterSpacing:mn}=Be;const $n=qd({text:ui,fontFamily:he,fontWeight:an,fontStyle:Ui,fontVariant:yn,fontSize:xe,lineHeight:Ie,letterSpacing:mn,width:yi,height:Mi});let tn=bm.get($n);if(tn)return tn;let Yi=1;xe>1e3&&xa()&&(Yi=xe/1e3,xe=1e3,Ie*=Yi);const Fn=mh(hn("pre",{contenteditable:"true",spellcheck:"false",style:`${$y}${xh({fontFamily:he,fontWeight:an,fontStyle:Ui,fontVariant:yn,fontSize:xe,letterSpacing:mn,lineHeight:Ie})};${bh(ui,Be)}"`,innerHTML:ui})),Xn=Fn.getBoundingClientRect();return tn={signature:my(Fn).flat().map(jn=>jn.text).join("_;_"),textSize:Xa(Aa(Xn),jn=>Math.ceil(jn*Yi))},bm.set($n,tn),Fn.remove(),tn})(Bt,{...X,width:it,height:void 0}),Se=qd({text:Bt,textAlign:fe,fontFamily:Qt,fontSize:se,fontWeight:zt,fontVariant:We,fontStyle:Ee,lineHeight:Ke,letterSpacing:je,outline:Nt,blur:Zt,signature:Dt});if(!Ut.has(Se)){Ut.set(Se,Bt);const ui=Math.ceil(ge.width),Be=Math.ceil(ge.height/Ke)*Ke;if(ui===0||Be===0)return;const yi=Fh(),Mi=Math.min(1,(yi-(ee+ot)*O)/(ui*O),(yi-(Yt+pe)*O)/(Be*O));fy(Bt,{fontSize:se,fontFamily:Qt,fontWeight:zt,fontVariant:We,fontStyle:Ee,letterSpacing:je,textAlign:fe,lineHeight:Ke,width:it,height:Xt,imageWidth:ui,imageHeight:Be,paddingLeft:ee,paddingTop:Yt,paddingRight:ot,paddingBottom:pe,pixelRatio:O*Mi,willRequest:B,outline:Nt,blur:Zt,color:[1,0,1]}).then(xe=>{if(!N)return;const he=N.textureCreate();N.textureUpdate(he,xe,{filterParam:N.textureFilterLinear,wrapParam:N.textureClamp,scalar:Mi}),Ut.set(Se,he),Ot.set(G,he),Rt()}).catch(console.error)}const fi=Ut.get(Se);return vp(fi)?fi:Ot.get(G)},Gt=new Map,de=(X,jt)=>{let G;if(X.backgroundImage)G=wt(X.backgroundImage,X.backgroundImageRendering,X.backgroundRepeat==="repeat"?"repeat":void 0);else if(Oe(X.text)){if(X.width&&X.width<1||X.height&&X.height<1)return;G=xt(X,jt)}else X.bitmap&&X.points&&(G=(Bt=>{const{id:fe,points:Qt,strokeWidth:se,strokeCap:zt,strokeJoin:We,strokeColor:Ee}=Bt;let je=Ut.get(fe),Ke=Gt.get(fe);const it=qd({points:Qt.map(Dt=>`${Dt.x},${Dt.y}`).join(","),strokeWidth:se,strokeCap:zt,strokeJoin:We,strokeColor:Ee});if(Ke){const{hash:Dt}=Ke;if(Ut.has(fe)){if(it===Dt)return Ut.get(fe)}else Ke=void 0}if(!Ke){const Dt=hn("canvas",{width:1,height:1});Ke={canvas:Dt,hash:void 0},Gt.set(Bt.id,Ke),je=N.textureCreate(),N.textureUpdate(je,Dt,{filterParam:N.textureFilterLinear,wrapParam:N.textureClamp}),Ut.set(fe,je)}const{canvas:Xt}=Ke,Nt=Math.ceil(Bt.strokeWidth),Zt=ar(Qt),Yt=Math.floor(Zt.x)-.5*Nt,ot=Math.floor(Zt.y)-.5*Nt,pe=Math.ceil(Zt.width+Nt),ee=Math.ceil(Zt.height+Nt);Xt.width=Math.max(pe,1),Xt.height=Math.max(ee,1);const ge=Xt.getContext("2d");return ge.clearRect(0,0,Xt.width,Xt.height),pe>=1&&ee>=1&&(ge.translate(-Yt,-ot),Np(ge,Bt),ge.resetTransform()),N.textureUpdate(je,Xt,{filterParam:N.textureFilterLinear,wrapParam:N.textureClamp}),Gt.set(fe,{canvas:Xt,hash:it}),Ut.get(fe)})(X));return G},ue=({texture:X,size:jt,origin:G,translation:Bt,rotation:fe,scale:Qt,colorMatrix:se,opacity:zt,convolutionMatrix:We,gamma:Ee,vignette:je,maskFeather:Ke,maskCornerRadius:it,overlayColor:Xt,enableOverlay:Nt,enableManipulation:Zt,enableAntialiasing:Yt})=>{let ot=0,pe=0;if(R===1){const ee=Math.abs(1-Qt)<Number.EPSILON;ot=ee&&ft%2!=0?.5:0,pe=ee&&$t%2!=0?.5:0}return N.drawImage(X,jt,G.x,G.y,Bt.x+ot,Bt.y+pe,fe.x,fe.y,fe.z,Qt,se,Xi(zt,0,1),We,Ee,je,Ke,it,Xt,Nt,Zt,Yt),X},be=(X,jt,G,Bt,fe,Qt,se,zt,We)=>{const Ee={...jt},je={width:fe.width/O*G,height:fe.height/O*G},Ke=rt(0,0),it={width:je.width,height:je.height};return Ee.x-=We*G,Ee.y-=Qt*G,X.width?(Ee.height=Ee.height?Ee.height+Qt*G/Bt:je.height,Ee.width+=(We+se)*G/Bt,X.textAlign==="center"?Ke.x=.5*(Ee.width-it.width/Bt):X.textAlign==="right"&&(Ke.x=Ee.width-it.width/Bt)):(Ee.width=je.width,Ee.height=je.height),{rect:Ee,backgroundPosition:Ke,backgroundSize:it}},$e=(X=[],jt)=>{X.forEach(G=>{let Bt=de(G);const fe=G.status==="loading"||G.backgroundImage&&Bt===G.backgroundImage;fe&&Rt();const Qt=G.status==="error"||G.backgroundImage&&Bt instanceof Error;let se=vp(Bt)?Bt:void 0;const zt=G._scale||1,We=G._translate||u,Ee=G.strokeWidth&&G.strokeWidth*zt,je=!!G.width,Ke=!je&&Oe(G.text)&&se,it=Ln(G.points),Xt=Jn(G);if(it){const Nt=G.points.map(Zt=>rt(Zt.x*zt+We.x,Zt.y*zt+We.y));if(G.bitmap){Bt&&jt.push(Bt);const Zt=ar(Nt),Yt=Math.ceil(G.strokeWidth*zt);N.drawRect({x:Math.floor(Zt.x)-.5*Yt,y:Math.floor(Zt.y)-.5*Yt,width:Math.ceil(Zt.width+Yt),height:Math.ceil(Zt.height+Yt)},G.rotation,G.flipX,G.flipY,[0,0,0,0],void 0,se,void 0,void 0,void 0,void 0,void 0,void 0,G.opacity,void 0,void 0,!1,!1)}else N.drawPath(Nt,G.rotation,G.flipX,G.flipY,Ee,G.strokeColor,G.pathClose,G.backgroundColor,G.opacity)}else if(Xt){let Nt=G.x,Zt=G.y;Nt*=zt,Zt*=zt,Nt+=We.x,Zt+=We.y;const Yt=rt(Nt,Zt);N.drawEllipse(Yt,G.rx*zt,G.ry*zt,G.rotation,G.flipX,G.flipY,G.backgroundColor,se,void 0,void 0,G.backgroundCorners&&m$(G.backgroundCorners),Ee,G.strokeColor,G.opacity,G.inverted),Bt&&jt.push(Bt),(fe||Qt)&&(G.backgroundColor||G.strokeColor&&G.strokeWidth||N.drawEllipse(Yt,G.rx*zt,G.ry*zt,G.rotation,G.flipX,G.flipY,Qt?[1,0,0,.25*G.opacity]:[0,0,0,.25*G.opacity]),Qt&&Ce(Yt),fe&&Vt(Yt))}else if(Ke||je){const Nt=se&&N.textureGetSize(se);let Zt,Yt,ot,pe=G.fillColor,ee=G.backgroundColor,ge=G.strokeColor,Dt=[G.cornerRadius,G.cornerRadius,G.cornerRadius,G.cornerRadius].map(fi=>fi*zt);Zt=G.width?ls(G):{x:G.x,y:G.y,...Nt},zt&&We&&(Zt.x*=zt,Zt.y*=zt,Zt.x+=We.x,Zt.y+=We.y,Zt.width*=zt,Zt.height*=zt),Bt&&jt.push(Bt);const{backgroundRepeat:Se="no-repeat"}=G;if(Nt){if(G.backgroundImage&&(G.backgroundSize||G.backgroundPosition||G.backgroundRepeat)){const fi=Ko(Nt.width,Nt.height);if(G.backgroundRepeat==="repeat"&&(Yt={...Nt},ot={x:0,y:0}),G.backgroundSize==="contain"){const ui=to(Zt,fi,Zt);Yt=Qs(ui),ot=G.backgroundPosition?G.backgroundPosition:rt(.5*(Zt.width-Yt.width),.5*(Zt.height-Yt.height))}else if(G.backgroundSize==="cover"){const ui=qa(Zt,fi,Zt);Yt=Qs(ui),G.backgroundPosition?ot=G.backgroundPosition:(ot=rt(ui.x,ui.y),ot=rt(.5*(Zt.width-Yt.width),.5*(Zt.height-Yt.height)))}else G.backgroundSize?(Yt=G.backgroundSize,ot=G.backgroundPosition||{x:0,y:0}):G.backgroundPosition&&(Yt={...Nt},ot=G.backgroundPosition)}else if(G.text){const fi={...Zt};if(G.backgroundColor||G.strokeColor){ee=void 0,ge=void 0;const he={width:Nt.width/O,height:Nt.height/O},Ie=(G.width||he.width-2*Qr)*zt,an=(G.height||he.height)*zt;N.drawRect({...Zt,width:Ie,height:an},G.rotation,G.flipX,G.flipY,Dt,G.backgroundColor,void 0,void 0,void 0,!1,void 0,Ee,G.strokeColor,G.opacity,void 0,void 0,void 0,G.inverted)}let ui=1;G.fontSize>1e3&&xa()&&(ui=G.fontSize/1e3),pe=G.color||[0,0,0],G._prerender&&(pe[3]=0);const Be=be(G,fi,zt,ui,Nt,0,Qr,0,Qr);Zt=Be.rect,ot=Be.backgroundPosition,Yt=Be.backgroundSize;const{textShadowX:yi,textShadowY:Mi,textShadowBlur:xe}=G;if(yi||Mi||xe){const he=Math.ceil(.5*xe),Ie=he,an=Math.max(Qr,he),Ui=he,yn=Math.max(Qr,he),mn=de(G,{id:G.id+"shadow",blur:xe,paddingTop:Ie,paddingRight:an,paddingBottom:Ui,paddingLeft:yn});if(mn&&!G._prerender){jt.push(mn);const $n=N.textureGetSize(mn),{rect:tn,backgroundPosition:Yi,backgroundSize:Fn}=be(G,fi,zt,ui,$n,Ie,an,0,yn),Xn=Ti(Zt),jn=Ti(tn);jn.x+=yi,jn.y+=Mi;const vr=Jr(jn,G.rotation,Xn),Un={x:vr.x-.5*tn.width,y:vr.y-.5*tn.height,width:tn.width,height:tn.height};G.height&&(Un.height-=Mi),N.drawRect(Un,G.rotation,G.flipX,G.flipY,[0,0,0,0],void 0,mn,Fn,Yi,!1,void 0,void 0,void 0,G.opacity,void 0,0,G.textShadowColor)}}if(G.textOutlineWidth){const he=Math.ceil(.5*G.textOutlineWidth),Ie=he,an=Qr+he,Ui=he,yn=Qr+he,mn=de(G,{id:G.id+"outline",outline:G.textOutlineWidth,paddingTop:Ie,paddingRight:an,paddingBottom:Ui,paddingLeft:yn});if(mn&&!G._prerender){const $n=N.textureGetSize(mn);jt.push(mn);const{rect:tn,backgroundPosition:Yi,backgroundSize:Fn}=be(G,fi,zt,ui,$n,Ie,an,0,yn);N.drawRect(tn,G.rotation,G.flipX,G.flipY,[0,0,0,0],void 0,mn,Fn,Yi,!1,void 0,void 0,void 0,G.opacity,void 0,0,G.textOutlineColor)}}}}if(N.drawRect(Zt,G.rotation,G.flipX,G.flipY,Dt,ee,se,Yt,ot,Se==="repeat",G.backgroundCorners&&m$(G.backgroundCorners),Ee,ge,G.opacity,void 0,G.feather,pe,G.inverted),fe||Qt){G.backgroundColor&&G.backgroundColor[3]!==0||G.strokeColor&&G.strokeWidth||N.drawRect(Zt,G.rotation,G.flipX,G.flipY,Dt,Qt?[1,.2549,.2118,.25*G.opacity]:[0,0,0,.25*G.opacity]);const fi=Ti(Zt);Qt&&Ce(fi),fe&&Vt(fi)}}else Bt&&jt.push(Bt)})};let _=0;const ve=[{x:-5,y:-5},{x:5,y:5}],gi=[{x:5,y:-5},{x:-5,y:5}],ye=ou({x:0,y:0},10,10,0,!1,!1,16);ye.length=9;const Vt=X=>{_=Date.now()/50,N.drawEllipse(X,15,15,0,!1,!1,[0,0,0,.5]);const jt=Js(ye.map(G=>({x:G.x+X.x,y:G.y+X.y})),_,X.x,X.y);N.drawPath(jt,0,!1,!1,2,[1,1,1])},Ce=X=>{N.drawEllipse(X,13,13,0,!1,!1,[1,.2549,.2118,.75]);const jt=ve.map(Bt=>({x:Bt.x+X.x,y:Bt.y+X.y})),G=gi.map(Bt=>({x:Bt.x+X.x,y:Bt.y+X.y}));N.drawPath(jt,0,!1,!1,3,[1,1,1]),N.drawPath(G,0,!1,!1,3,[1,1,1])},Re=(X,jt,G,Bt,fe,Qt)=>N.drawRect(jt,0,!1,!1,d,d,X,Bt,G,!0,void 0,0,void 0,Qt,void 0,void 0,fe);let He=!1,bi=!0,vt=!1;const bt=[],Ge=[],Me=[],ni=X=>!X.aboveFrame,Ue=X=>X.aboveFrame,ei=()=>{Me.length=0;const X=K[0],{manipulationShapes:jt,manipulationShapesDirty:G,annotationShapes:Bt,annotationShapesDirty:fe,interfaceShapes:Qt,decorationShapes:se,frameShapes:zt,selectionShapes:We}=z({opacity:X.opacity,rotation:X.rotation,scale:X.scale,images:K,size:Hn(ft,$t),backgroundColor:[...c],selectionRect:l}),Ee=[...c],je=l,Ke=Xi(s,0,1),it=a,Xt=Math.abs(X.rotation.x/Math.PI*2-1),Nt=Math.abs(X.rotation.y/Math.PI*2-1),Zt=Xt<.99||Nt<.99,Yt={...X.size},ot=X.backgroundColor,pe=X.backgroundImage,ee=jt.length>0,ge=Bt.length>0,Dt=Bt.filter(Ue).length>0,Se=se.filter(Ue).length>0,fi=ot[3]>0,ui=!!M&&C>=1;if(Ke<1&&fi){const Be=Ee[0],yi=Ee[1],Mi=Ee[2],xe=1-Ke,he=ot[0]*xe,Ie=ot[1]*xe,an=ot[2]*xe,Ui=1-xe;Ee[0]=he+Be*Ui,Ee[1]=Ie+yi*Ui,Ee[2]=an+Mi*Ui,Ee[3]=1}if(N.setCanvasColor(y?d:Ee),ee&&(G||He)?(N.disableMask(),N.drawToImageBlendBuffer(Yt),bt.length=0,$e(jt,bt)):ee||(bt.length=0),Me.push(...bt),bi&&(N.drawToImageOverlayBuffer(Yt,O),bi=!1),Zt){if(ge&&(fe||He)||!vt){N.disableMask(),N.drawToImageOverlayBuffer(Yt,O),Ge.length=0;const Be=Dt?Bt.filter(ni):Bt;$e(Be,Ge)}else ge||(Ge.length=0);vt=!0}else vt=!1;if(N.drawToCanvas(),N.enableMask(je,Ke),V&&S>=1&&J.length===2&&j&&((Be,yi,Mi,xe,he)=>{const Ie=Hn(yi,yi),an=wt(p,"pixelated","repeat"),Ui=rt(-Be.x%yi,-Be.y%yi),yn=rt(Ui.x+.5*Ie.width,Ui.y);Re(an,Be,Ui,Ie,Mi,he),Re(an,Be,yn,Ie,xe,he)})(je,S,J[0],J[1],j),fi&&N.drawRect(je,0,!1,!1,d,ot),pe){N.enableMask(je,1);const Be=Math.max(x.width/pe.width,x.height/pe.height),yi=pe.width*Be,Mi=pe.height*Be,xe={x:x.x+.5*x.width-.5*yi,y:x.y+.5*x.height-.5*Mi,width:yi,height:Mi};N.drawRect(xe,0,!1,!1,d,d,wt(pe,"linear")),N.enableMask(je,Ke)}if(ui&&N.enablePreviewStencil(),Me.push(...[...K].reverse().map(Be=>ue({...Be,texture:wt(Be.data),enableOverlay:Zt&&ge,enableManipulation:ee,enableAntialiasing:!0,mask:je,maskOpacity:Ke,overlayColor:it}))),N.enableMask(je,C),!Zt){ui&&N.applyPreviewStencil(),N.resetCanvasMatrix(),N.updateCanvasMatrix(Yt,X.origin,X.translation,X.scale,X.rotation),Ge.length=0;const Be=Dt?Bt.filter(ni):Bt;$e(Be,Ge),ui&&N.disablePreviewStencil()}if(Me.push(...Ge),N.resetCanvasMatrix(),N.enableMask(je,C),$e(se,Se?se.filter(ni):se),zt.length){N.enableMask(je,1);const Be=zt.filter(Mi=>!Mi.expandsCanvas),yi=zt.filter(Mi=>Mi.expandsCanvas);Be.length&&$e(Be,Me),yi.length&&(N.enableMask({x:je.x+.5,y:je.y+.5,width:je.width-1,height:je.height-1},o),$e(yi,Me))}if(Dt&&(N.resetCanvasMatrix(),N.updateCanvasMatrix(Yt,X.origin,X.translation,X.scale,X.rotation),$e(Bt.filter(Ue),Me),N.resetCanvasMatrix()),Se&&(N.resetCanvasMatrix(),$e(se.filter(Ue),Me),N.resetCanvasMatrix()),lt&&We.length&&!Zt){N.resetCanvasMatrix(),N.updateCanvasMatrix(Yt,X.origin,X.translation,X.scale,X.rotation);const Be=[...lt];Be[3]=.5;const yi=[{id:"selection",color:Be,actions:[...We]}].map(Mi=>Ft(Mi,Yt));$e(yi,Me),N.resetCanvasMatrix()}N.disableMask(),$e(Qt,Me),dt.forEach(Be=>{if(N.enableMask(Be.mask,Be.maskOpacity),Be.backgroundColor){const Mi=pe&&qa({...Be.mask},pe.width/pe.height),xe=pe&&wt(pe,"linear");N.drawRect(Be.mask,0,!1,!1,Be.maskCornerRadius,Be.backgroundColor,xe,Mi,Mi,void 0,void 0,void 0,void 0,Be.opacity,Be.maskFeather),xe&&Me.push(xe)}const yi=ue({...Be,texture:wt(Be.data),enableAntialiasing:!1,translation:{x:Be.translation.x+Be.offset.x-.5*ft,y:Be.translation.y+Be.offset.y-.5*$t}});Me.push(yi)}),N.disableMask(),(Be=>{Ut.forEach((yi,Mi)=>{!Be.find(xe=>xe===yi)&&vp(yi)&&(Array.from(Ot.values()).includes(yi)||(Ut.delete(Mi),N.textureDelete(yi)))})})(Me),F(),He=!1};let vi,di=0;const Li=()=>{clearTimeout(vi);const X=Date.now();X-di<48?vi=setTimeout(Li,48):(di=X,ei())};return Vb(()=>r()),ws(()=>i(30,N=E4(g,{alpha:y}))),No(()=>{N&&(Gt.forEach(({canvas:X})=>Qn(X)),Gt.clear(),N.release(),i(30,N=void 0),i(0,g=void 0))}),t.$$set=X=>{"isAnimated"in X&&i(9,m=X.isAnimated),"isTransparent"in X&&i(10,y=X.isTransparent),"maskRect"in X&&i(11,x=X.maskRect),"maskOpacity"in X&&i(12,k=X.maskOpacity),"maskFrameOpacity"in X&&i(13,w=X.maskFrameOpacity),"maskMarkupOpacity"in X&&i(14,C=X.maskMarkupOpacity),"clipAnnotationsToImage"in X&&i(15,M=X.clipAnnotationsToImage),"pixelRatio"in X&&i(16,R=X.pixelRatio),"textPixelRatio"in X&&i(17,O=X.textPixelRatio),"backgroundColor"in X&&i(18,T=X.backgroundColor),"willRender"in X&&i(19,z=X.willRender),"didRender"in X&&i(20,F=X.didRender),"willRequest"in X&&i(21,B=X.willRequest),"loadImageData"in X&&i(22,f=X.loadImageData),"enableGrid"in X&&i(23,V=X.enableGrid),"gridColors"in X&&i(24,J=X.gridColors),"gridSize"in X&&i(25,S=X.gridSize),"gridOpacity"in X&&i(26,j=X.gridOpacity),"images"in X&&i(27,K=X.images),"interfaceImages"in X&&i(28,dt=X.interfaceImages),"selectionColor"in X&&i(29,lt=X.selectionColor)},t.$$.update=()=>{if(1&t.$$.dirty[0]&&g){const X=getComputedStyle(g).getPropertyValue("--color-transition-duration");i(31,et=(jt=>{let G=parseFloat(jt);return/^[0-9]+s$/.test(jt)?1e3*G:G})(X))}262656&t.$$.dirty[0]|1&t.$$.dirty[1]&&T&&ht.set(T,{duration:m?et:0}),4096&t.$$.dirty[0]&&Lt(Y,$i(k)?k:1),8192&t.$$.dirty[0]&&Lt(Z,$i(w)?w:1),2048&t.$$.dirty[0]&&x&&St.set(x),24&t.$$.dirty[1]&&c&&nt.set([c[0],c[1],c[2],Xi(s,0,1)]),1207959558&t.$$.dirty[0]&&i(33,n=!!(N&&ft&&$t&&K.length)),1073807366&t.$$.dirty[0]&&ft&&$t&&N&&(di=0,N.resize(ft,$t,R)),4&t.$$.dirty[1]&&i(32,r=n?Oh()?Li:ei:me),6&t.$$.dirty[1]&&n&&r&&r()},[g,ft,$t,h,ht,Y,Z,St,nt,m,y,x,k,w,C,M,R,O,T,z,F,B,f,V,J,S,j,K,dt,lt,N,et,r,n,s,c,function(X){Ai[X?"unshift":"push"](()=>{g=X,i(0,g)})},X=>{i(1,ft=X.detail.width),i(2,$t=X.detail.height),h("measure",{width:ft,height:$t})}]}class V4 extends si{constructor(e){super(),ai(this,e,_4,W4,ti,{isAnimated:9,isTransparent:10,maskRect:11,maskOpacity:12,maskFrameOpacity:13,maskMarkupOpacity:14,clipAnnotationsToImage:15,pixelRatio:16,textPixelRatio:17,backgroundColor:18,willRender:19,didRender:20,willRequest:21,loadImageData:22,enableGrid:23,gridColors:24,gridSize:25,gridOpacity:26,images:27,interfaceImages:28,selectionColor:29},null,[-1,-1,-1])}}var ci=(t,e=Boolean,i=" ")=>t.filter(e).join(i);function $$(t,e,i){const n=t.slice();return n[17]=e[i],n}const N4=t=>({tab:4&t}),g$=t=>({tab:t[17]});function f$(t){let e,i,n,r=[],o=new Map,a=t[2];const s=l=>l[17].id;for(let l=0;l<a.length;l+=1){let c=$$(t,a,l),d=s(c);o.set(d,r[l]=y$(d,c))}return{c(){e=pt("ul");for(let l=0;l<r.length;l+=1)r[l].c();v(e,"class",i=ci(["PinturaTabList",t[0]])),v(e,"role","tablist"),v(e,"data-layout",t[1])},m(l,c){tt(l,e,c);for(let d=0;d<r.length;d+=1)r[d].m(e,null);t[14](e),n=!0},p(l,c){1124&c&&(a=l[2],ze(),r=La(r,c,s,1,l,a,o,e,Ss,y$,null,$$),Fe()),(!n||1&c&&i!==(i=ci(["PinturaTabList",l[0]])))&&v(e,"class",i),(!n||2&c)&&v(e,"data-layout",l[1])},i(l){if(!n){for(let c=0;c<a.length;c+=1)P(r[c]);n=!0}},o(l){for(let c=0;c<r.length;c+=1)D(r[c]);n=!1},d(l){l&&Q(e);for(let c=0;c<r.length;c+=1)r[c].d();t[14](null)}}}function y$(t,e){let i,n,r,o,a,s,l,c,d,u;const p=e[11].default,h=cr(p,e,e[10],g$);function g(...y){return e[12](e[17],...y)}function m(...y){return e[13](e[17],...y)}return{key:t,first:null,c(){i=pt("li"),n=pt("button"),h&&h.c(),o=ce(),v(n,"type","button"),n.disabled=r=e[17].disabled,v(i,"role","tab"),v(i,"aria-controls",a=e[17].href.substr(1)),v(i,"id",s=e[17].tabId),v(i,"aria-selected",l=e[17].selected),this.first=i},m(y,x){tt(y,i,x),Tt(i,n),h&&h.m(n,null),Tt(i,o),c=!0,d||(u=[Mt(n,"keydown",g),Mt(n,"click",m)],d=!0)},p(y,x){e=y,h&&h.p&&(!c||1028&x)&&ur(h,p,e,e[10],c?dr(p,e[10],x,N4):pr(e[10]),g$),(!c||4&x&&r!==(r=e[17].disabled))&&(n.disabled=r),(!c||4&x&&a!==(a=e[17].href.substr(1)))&&v(i,"aria-controls",a),(!c||4&x&&s!==(s=e[17].tabId))&&v(i,"id",s),(!c||4&x&&l!==(l=e[17].selected))&&v(i,"aria-selected",l)},i(y){c||(P(h,y),c=!0)},o(y){D(h,y),c=!1},d(y){y&&Q(i),h&&h.d(y),d=!1,_i(u)}}}function H4(t){let e,i,n=t[4]&&f$(t);return{c(){n&&n.c(),e=Tn()},m(r,o){n&&n.m(r,o),tt(r,e,o),i=!0},p(r,[o]){r[4]?n?(n.p(r,o),16&o&&P(n,1)):(n=f$(r),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(ze(),D(n,1,1,()=>{n=null}),Fe())},i(r){i||(P(n),i=!0)},o(r){D(n),i=!1},d(r){n&&n.d(r),r&&Q(e)}}}function j4(t,e,i){let n,r,o,{$$slots:a={},$$scope:s}=e,{class:l}=e,{name:c}=e,{selected:d}=e,{tabs:u=[]}=e,{layout:p}=e;const h=va(),g=x=>{const k=o.querySelectorAll('[role="tab"] button')[x];k&&k.focus()},m=(x,k)=>{x.preventDefault(),x.stopPropagation(),h("select",k)},y=({key:x},k)=>{if(!/arrow/i.test(x))return;const w=u.findIndex(C=>C.id===k);return/right|down/i.test(x)?g(w<u.length-1?w+1:0):/left|up/i.test(x)?g(w>0?w-1:u.length-1):void 0};return t.$$set=x=>{"class"in x&&i(0,l=x.class),"name"in x&&i(7,c=x.name),"selected"in x&&i(8,d=x.selected),"tabs"in x&&i(9,u=x.tabs),"layout"in x&&i(1,p=x.layout),"$$scope"in x&&i(10,s=x.$$scope)},t.$$.update=()=>{896&t.$$.dirty&&i(2,n=u.map(x=>{const k=x.id===d;return{...x,tabId:`tab-${c}-${x.id}`,href:`#panel-${c}-${x.id}`,selected:k}})),4&t.$$.dirty&&i(4,r=n.length>1)},[l,p,n,o,r,m,y,c,d,u,s,a,(x,k)=>y(k,x.id),(x,k)=>m(k,x.id),function(x){Ai[x?"unshift":"push"](()=>{o=x,i(3,o)})}]}class Su extends si{constructor(e){super(),ai(this,e,j4,H4,ti,{class:0,name:7,selected:8,tabs:9,layout:1})}}const U4=t=>({panel:16&t}),x$=t=>({panel:t[4][0].id,panelIsActive:!0});function b$(t,e,i){const n=t.slice();return n[14]=e[i].id,n[15]=e[i].shouldDraw,n[16]=e[i].panelId,n[17]=e[i].tabindex,n[18]=e[i].labelledBy,n[19]=e[i].isActive,n[20]=e[i].hidden,n[3]=e[i].visible,n}const G4=t=>({panel:16&t,panelIsActive:16&t}),v$=t=>({panel:t[14],panelIsActive:t[19]});function Z4(t){let e,i,n,r,o,a;const s=t[11].default,l=cr(s,t,t[10],x$);return{c(){e=pt("div"),i=pt("div"),l&&l.c(),v(i,"class",n=ci([t[1]])),v(e,"class",t[0]),v(e,"style",t[2])},m(c,d){tt(c,e,d),Tt(e,i),l&&l.m(i,null),r=!0,o||(a=[Mt(e,"measure",t[13]),ji(Er.call(null,e))],o=!0)},p(c,d){l&&l.p&&(!r||1040&d)&&ur(l,s,c,c[10],r?dr(s,c[10],d,U4):pr(c[10]),x$),(!r||2&d&&n!==(n=ci([c[1]])))&&v(i,"class",n),(!r||1&d)&&v(e,"class",c[0]),(!r||4&d)&&v(e,"style",c[2])},i(c){r||(P(l,c),r=!0)},o(c){D(l,c),r=!1},d(c){c&&Q(e),l&&l.d(c),o=!1,_i(a)}}}function X4(t){let e,i,n,r,o,a=[],s=new Map,l=t[4];const c=d=>d[14];for(let d=0;d<l.length;d+=1){let u=b$(t,l,d),p=c(u);s.set(p,a[d]=S$(p,u))}return{c(){e=pt("div");for(let d=0;d<a.length;d+=1)a[d].c();v(e,"class",i=ci(["PinturaTabPanels",t[0]])),v(e,"style",t[2])},m(d,u){tt(d,e,u);for(let p=0;p<a.length;p+=1)a[p].m(e,null);n=!0,r||(o=[Mt(e,"measure",t[12]),ji(Er.call(null,e,{observePosition:!0}))],r=!0)},p(d,u){1042&u&&(l=d[4],ze(),a=La(a,u,c,1,d,l,s,e,Ss,S$,null,b$),Fe()),(!n||1&u&&i!==(i=ci(["PinturaTabPanels",d[0]])))&&v(e,"class",i),(!n||4&u)&&v(e,"style",d[2])},i(d){if(!n){for(let u=0;u<l.length;u+=1)P(a[u]);n=!0}},o(d){for(let u=0;u<a.length;u+=1)D(a[u]);n=!1},d(d){d&&Q(e);for(let u=0;u<a.length;u+=1)a[u].d();r=!1,_i(o)}}}function w$(t){let e;const i=t[11].default,n=cr(i,t,t[10],v$);return{c(){n&&n.c()},m(r,o){n&&n.m(r,o),e=!0},p(r,o){n&&n.p&&(!e||1040&o)&&ur(n,i,r,r[10],e?dr(i,r[10],o,G4):pr(r[10]),v$)},i(r){e||(P(n,r),e=!0)},o(r){D(n,r),e=!1},d(r){n&&n.d(r)}}}function S$(t,e){let i,n,r,o,a,s,l,c,d,u=e[15]&&w$(e);return{key:t,first:null,c(){i=pt("div"),u&&u.c(),n=ce(),v(i,"class",r=ci(["PinturaTabPanel",e[1]])),i.hidden=o=e[20],v(i,"id",a=e[16]),v(i,"tabindex",s=e[17]),v(i,"aria-labelledby",l=e[18]),v(i,"data-inert",c=!e[3]),this.first=i},m(p,h){tt(p,i,h),u&&u.m(i,null),Tt(i,n),d=!0},p(p,h){(e=p)[15]?u?(u.p(e,h),16&h&&P(u,1)):(u=w$(e),u.c(),P(u,1),u.m(i,n)):u&&(ze(),D(u,1,1,()=>{u=null}),Fe()),(!d||2&h&&r!==(r=ci(["PinturaTabPanel",e[1]])))&&v(i,"class",r),(!d||16&h&&o!==(o=e[20]))&&(i.hidden=o),(!d||16&h&&a!==(a=e[16]))&&v(i,"id",a),(!d||16&h&&s!==(s=e[17]))&&v(i,"tabindex",s),(!d||16&h&&l!==(l=e[18]))&&v(i,"aria-labelledby",l),(!d||16&h&&c!==(c=!e[3]))&&v(i,"data-inert",c)},i(p){d||(P(u),d=!0)},o(p){D(u),d=!1},d(p){p&&Q(i),u&&u.d()}}}function Y4(t){let e,i,n,r;const o=[X4,Z4],a=[];function s(l,c){return l[5]?0:1}return e=s(t),i=a[e]=o[e](t),{c(){i.c(),n=Tn()},m(l,c){a[e].m(l,c),tt(l,n,c),r=!0},p(l,[c]){let d=e;e=s(l),e===d?a[e].p(l,c):(ze(),D(a[d],1,1,()=>{a[d]=null}),Fe(),i=a[e],i?i.p(l,c):(i=a[e]=o[e](l),i.c()),P(i,1),i.m(n.parentNode,n))},i(l){r||(P(i),r=!0)},o(l){D(i),r=!1},d(l){a[e].d(l),l&&Q(n)}}}function q4(t,e,i){let n,r,{$$slots:o={},$$scope:a}=e,{class:s}=e,{name:l}=e,{selected:c}=e,{panelClass:d}=e,{panels:u=[]}=e,{visible:p}=e,{style:h}=e;const g={};return t.$$set=m=>{"class"in m&&i(0,s=m.class),"name"in m&&i(6,l=m.name),"selected"in m&&i(7,c=m.selected),"panelClass"in m&&i(1,d=m.panelClass),"panels"in m&&i(8,u=m.panels),"visible"in m&&i(3,p=m.visible),"style"in m&&i(2,h=m.style),"$$scope"in m&&i(10,a=m.$$scope)},t.$$.update=()=>{968&t.$$.dirty&&i(4,n=u.map(m=>{const y=m===c;y&&i(9,g[m]=!0,g);const x=p?p.indexOf(m)!==-1:y;return{id:m,panelId:`panel-${l}-${m}`,labelledBy:`tab-${l}-${m}`,isActive:y,hidden:!y,visible:x,tabindex:y?0:-1,shouldDraw:y||g[m]}})),16&t.$$.dirty&&i(5,r=n.length>1)},[s,d,h,p,n,r,l,c,u,g,a,o,function(m){Gr.call(this,t,m)},function(m){Gr.call(this,t,m)}]}class ku extends si{constructor(e){super(),ai(this,e,q4,Y4,ti,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}}var Wh=t=>{const e=Object.getOwnPropertyDescriptors(t.prototype);return Object.keys(e).filter(i=>!!e[i].get)};function k$(t){let e,i,n,r;const o=[t[4]];function a(c){t[22](c)}var s=t[10];function l(c){let d={};for(let u=0;u<o.length;u+=1)d=Cn(d,o[u]);return c[2]!==void 0&&(d.name=c[2]),{props:d}}return s&&(e=uu(s,l(t)),Ai.push(()=>go(e,"name",a)),t[23](e),e.$on("measure",t[11])),{c(){e&&At(e.$$.fragment),n=Tn()},m(c,d){e&&It(e,c,d),tt(c,n,d),r=!0},p(c,d){const u=16&d[0]?Ir(o,[Or(c[4])]):{};if(!i&&4&d[0]&&(i=!0,u.name=c[2],Po(()=>i=!1)),s!==(s=c[10])){if(e){ze();const p=e;D(p.$$.fragment,1,0,()=>{Et(p,1)}),Fe()}s?(e=uu(s,l(c)),Ai.push(()=>go(e,"name",a)),c[23](e),e.$on("measure",c[11]),At(e.$$.fragment),P(e.$$.fragment,1),It(e,n.parentNode,n)):e=null}else s&&e.$set(u)},i(c){r||(e&&P(e.$$.fragment,c),r=!0)},o(c){e&&D(e.$$.fragment,c),r=!1},d(c){t[23](null),c&&Q(n),e&&Et(e,c)}}}function K4(t){let e,i,n,r=t[5]&&k$(t);return{c(){e=pt("div"),r&&r.c(),v(e,"data-util",t[2]),v(e,"class",i=ci(["PinturaUtilPanel",t[1]])),v(e,"style",t[6])},m(o,a){tt(o,e,a),r&&r.m(e,null),t[24](e),n=!0},p(o,a){o[5]?r?(r.p(o,a),32&a[0]&&P(r,1)):(r=k$(o),r.c(),P(r,1),r.m(e,null)):r&&(ze(),D(r,1,1,()=>{r=null}),Fe()),(!n||4&a[0])&&v(e,"data-util",o[2]),(!n||2&a[0]&&i!==(i=ci(["PinturaUtilPanel",o[1]])))&&v(e,"class",i),(!n||64&a[0])&&v(e,"style",o[6])},i(o){n||(P(r),n=!0)},o(o){D(r),n=!1},d(o){o&&Q(e),r&&r.d(),t[24](null)}}}function J4(t,e,i){let n,r,o,a,s,l;const c=va();let{isActive:d=!0}=e,{stores:u}=e,{content:p}=e,{component:h}=e,{locale:g}=e,{class:m}=e;const y=ln("isAnimated");let x;E(t,y,j=>i(21,l=j));const k=oi(0),w=Ri(k,j=>Xi(j,0,1));E(t,w,j=>i(20,s=j));let C=!d;const M=le(d);E(t,M,j=>i(25,a=j));const R={isActive:Ri(M,async(j,K)=>{if(!j)return K(j);await Wy(),K(j)}),isActiveFraction:Ri(w,j=>j),isVisible:Ri(w,j=>j>0)},O=p.view,T=Wh(O),z=Object.keys(p.props||{}).reduce((j,K)=>(T.includes(K)&&(j[K]=p.props[K]),j),{}),F=Object.keys(R).reduce((j,K)=>(T.includes(K)&&(j[K]=R[K]),j),{});let B,f;const V=j=>{i(17,x={...j.detail}),S&&d&&c("measure",{...x})};ko("measurable",Er);const J=il().$$.context;let S=!1;return ws(()=>{if(i(19,S=!0),o)return;i(0,h=new O({target:f,props:{...r},context:J})),i(2,B=h.name);const j=h.$on("measure",V);return()=>{j(),h.$destroy()}}),t.$$set=j=>{"isActive"in j&&i(12,d=j.isActive),"stores"in j&&i(13,u=j.stores),"content"in j&&i(14,p=j.content),"component"in j&&i(0,h=j.component),"locale"in j&&i(15,g=j.locale),"class"in j&&i(1,m=j.class)},t.$$.update=()=>{135169&t.$$.dirty[0]&&x&&d&&h&&c("measure",x),2101248&t.$$.dirty[0]&&k.set(d?1:0,{hard:l===!1}),1310720&t.$$.dirty[0]&&(s<=0&&!C?i(18,C=!0):s>0&&C&&i(18,C=!1)),786432&t.$$.dirty[0]&&S&&c(C?"hide":"show"),1048576&t.$$.dirty[0]&&c("fade",s),1048576&t.$$.dirty[0]&&i(6,n=s<1?"opacity: "+s:void 0),4096&t.$$.dirty[0]&&kt(M,a=d,a),40960&t.$$.dirty[0]&&i(4,r={...z,...F,stores:u,locale:g})},i(5,o=!T.includes("external")),[h,m,B,f,r,o,n,y,w,M,O,V,d,u,p,g,k,x,C,S,s,l,function(j){B=j,i(2,B)},function(j){Ai[j?"unshift":"push"](()=>{h=j,i(0,h)})},function(j){Ai[j?"unshift":"push"](()=>{f=j,i(3,f)})}]}class d2 extends si{constructor(e){super(),ai(this,e,J4,K4,ti,{isActive:12,stores:13,content:14,component:0,locale:15,class:1,opacity:16},null,[-1,-1])}get opacity(){return this.$$.ctx[16]}}function Q4(t){let e,i,n;const r=t[5].default,o=cr(r,t,t[4],null);return{c(){e=Rr("svg"),o&&o.c(),v(e,"class",t[3]),v(e,"style",t[2]),v(e,"width",t[0]),v(e,"height",t[1]),v(e,"viewBox",i="0 0 "+t[0]+`
    `+t[1]),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"aria-hidden","true"),v(e,"focusable","false"),v(e,"stroke-linecap","round"),v(e,"stroke-linejoin","round")},m(a,s){tt(a,e,s),o&&o.m(e,null),n=!0},p(a,[s]){o&&o.p&&(!n||16&s)&&ur(o,r,a,a[4],n?dr(r,a[4],s,null):pr(a[4]),null),(!n||8&s)&&v(e,"class",a[3]),(!n||4&s)&&v(e,"style",a[2]),(!n||1&s)&&v(e,"width",a[0]),(!n||2&s)&&v(e,"height",a[1]),(!n||3&s&&i!==(i="0 0 "+a[0]+`
    `+a[1]))&&v(e,"viewBox",i)},i(a){n||(P(o,a),n=!0)},o(a){D(o,a),n=!1},d(a){a&&Q(e),o&&o.d(a)}}}function tv(t,e,i){let{$$slots:n={},$$scope:r}=e,{width:o=24}=e,{height:a=24}=e,{style:s}=e,{class:l}=e;return t.$$set=c=>{"width"in c&&i(0,o=c.width),"height"in c&&i(1,a=c.height),"style"in c&&i(2,s=c.style),"class"in c&&i(3,l=c.class),"$$scope"in c&&i(4,r=c.$$scope)},[o,a,s,l,r,n]}class Ro extends si{constructor(e){super(),ai(this,e,tv,Q4,ti,{width:0,height:1,style:2,class:3})}}var u2=(t,e)=>e===t.target||e.contains(t.target),C$=(t,e,i)=>{const n=Oe(e)?e:t;return i?`${n} (${r=i,r.map(o=>o==="CMD"?xu()?"â":"Ctrl":o).join("+")})`:n;var r};function T$(t){let e,i;return e=new Ro({props:{class:"PinturaButtonIcon",$$slots:{default:[ev]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};536870920&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function ev(t){let e;return{c(){e=Rr("g")},m(i,n){tt(i,e,n),e.innerHTML=t[3]},p(i,n){8&n&&(e.innerHTML=i[3])},d(i){i&&Q(e)}}}function M$(t){let e;return{c(){e=pt("span"),v(e,"class",t[11])},m(i,n){tt(i,e,n),e.innerHTML=t[0]},p(i,n){1&n&&(e.innerHTML=i[0]),2048&n&&v(e,"class",i[11])},d(i){i&&Q(e)}}}function iv(t){let e,i,n,r,o;const a=t[27].default,s=cr(a,t,t[29],null),l=s||function(c){let d,u,p,h=c[3]&&T$(c),g=c[0]&&M$(c);return{c(){d=pt("span"),h&&h.c(),u=ce(),g&&g.c(),v(d,"class",c[13])},m(m,y){tt(m,d,y),h&&h.m(d,null),Tt(d,u),g&&g.m(d,null),p=!0},p(m,y){m[3]?h?(h.p(m,y),8&y&&P(h,1)):(h=T$(m),h.c(),P(h,1),h.m(d,u)):h&&(ze(),D(h,1,1,()=>{h=null}),Fe()),m[0]?g?g.p(m,y):(g=M$(m),g.c(),g.m(d,null)):g&&(g.d(1),g=null),(!p||8192&y)&&v(d,"class",m[13])},i(m){p||(P(h),p=!0)},o(m){D(h),p=!1},d(m){m&&Q(d),h&&h.d(),g&&g.d()}}}(t);return{c(){e=pt("button"),l&&l.c(),v(e,"type",t[6]),v(e,"style",t[4]),e.disabled=t[5],v(e,"class",t[12]),v(e,"title",i=C$(t[0],t[1],t[2]))},m(c,d){tt(c,e,d),l&&l.m(e,null),t[28](e),n=!0,r||(o=[Mt(e,"keydown",function(){Hi(t[8])&&t[8].apply(this,arguments)}),Mt(e,"click",function(){Hi(t[7])&&t[7].apply(this,arguments)}),Mt(e,"pointerdown",function(){Hi(t[14])&&t[14].apply(this,arguments)}),ji(t[9].call(null,e))],r=!0)},p(c,[d]){t=c,s?s.p&&(!n||536870912&d)&&ur(s,a,t,t[29],n?dr(a,t[29],d,null):pr(t[29]),null):l&&l.p&&(!n||10249&d)&&l.p(t,n?d:-1),(!n||64&d)&&v(e,"type",t[6]),(!n||16&d)&&v(e,"style",t[4]),(!n||32&d)&&(e.disabled=t[5]),(!n||4096&d)&&v(e,"class",t[12]),(!n||7&d&&i!==(i=C$(t[0],t[1],t[2])))&&v(e,"title",i)},i(c){n||(P(l,c),n=!0)},o(c){D(l,c),n=!1},d(c){c&&Q(e),l&&l.d(c),t[28](null),r=!1,_i(o)}}}function nv(t,e,i){let n,r,o,a,s,l,{$$slots:c={},$$scope:d}=e,{class:u}=e,{label:p}=e,{title:h}=e,{shortcut:g}=e,{labelClass:m}=e,{innerClass:y}=e,{hideLabel:x=!1}=e,{icon:k}=e,{style:w}=e,{disabled:C}=e,{type:M="button"}=e,{onclick:R}=e,{onkeydown:O}=e,{onhold:T}=e,{action:z=()=>{}}=e,{holdThreshold:F=500}=e,{holdSpeedUpFactor:B=.5}=e,{holdSpeedMin:f=20}=e;const V=S=>{i(25,l=setTimeout(()=>{T(),V(Math.max(S*B,f))},S))};let J;return t.$$set=S=>{"class"in S&&i(15,u=S.class),"label"in S&&i(0,p=S.label),"title"in S&&i(1,h=S.title),"shortcut"in S&&i(2,g=S.shortcut),"labelClass"in S&&i(16,m=S.labelClass),"innerClass"in S&&i(17,y=S.innerClass),"hideLabel"in S&&i(18,x=S.hideLabel),"icon"in S&&i(3,k=S.icon),"style"in S&&i(4,w=S.style),"disabled"in S&&i(5,C=S.disabled),"type"in S&&i(6,M=S.type),"onclick"in S&&i(7,R=S.onclick),"onkeydown"in S&&i(8,O=S.onkeydown),"onhold"in S&&i(19,T=S.onhold),"action"in S&&i(9,z=S.action),"holdThreshold"in S&&i(20,F=S.holdThreshold),"holdSpeedUpFactor"in S&&i(21,B=S.holdSpeedUpFactor),"holdSpeedMin"in S&&i(22,f=S.holdSpeedMin),"$$scope"in S&&i(29,d=S.$$scope)},t.$$.update=()=>{101187584&t.$$.dirty&&i(26,r=T?()=>{l&&(clearTimeout(l),i(25,l=void 0),document.documentElement.removeEventListener("pointerup",r))}:me),68681728&t.$$.dirty&&i(14,n=T?()=>{document.documentElement.addEventListener("pointerup",r),V(F)}:me),131072&t.$$.dirty&&i(13,o=ci(["PinturaButtonInner",y])),294912&t.$$.dirty&&i(12,a=ci(["PinturaButton",x&&"PinturaButtonIconOnly",u])),327680&t.$$.dirty&&i(11,s=ci([x?"implicit":"PinturaButtonLabel",m]))},[p,h,g,k,w,C,M,R,O,z,J,s,a,o,n,u,m,y,x,T,F,B,f,S=>u2(S,J),()=>J,l,r,c,function(S){Ai[S?"unshift":"push"](()=>{J=S,i(10,J)})},d]}class ks extends si{constructor(e){super(),ai(this,e,nv,iv,ti,{class:15,label:0,title:1,shortcut:2,labelClass:16,innerClass:17,hideLabel:18,icon:3,style:4,disabled:5,type:6,onclick:7,onkeydown:8,onhold:19,action:9,holdThreshold:20,holdSpeedUpFactor:21,holdSpeedMin:22,isEventTarget:23,getElement:24})}get isEventTarget(){return this.$$.ctx[23]}get getElement(){return this.$$.ctx[24]}}var p2=(t,e)=>{const i=t.findIndex(e);if(i>=0)return t.splice(i,1)};const rv=80;var Cs=(t,e={})=>{const{inertia:i=!1,inertiaDurationMultiplier:n=rv,shouldStartInteraction:r=()=>!0,pinch:o=!1,multiTouch:a,getEventPosition:s=ct=>rt(ct.clientX,ct.clientY),observeKeys:l=!1}=e;function c(ct,et){t.dispatchEvent(new CustomEvent(ct,{detail:et}))}function d(){R&&R(),R=void 0}const u=[],p=ct=>ct.timeStamp===0?Date.now():ct.timeStamp,h=()=>{const ct=_e(u[0].position);if(u[1]){const et=.5*(u[1].position.x-ct.x),ht=.5*(u[1].position.y-ct.y);ct.x+=et,ct.y+=ht}return ct},g=ct=>{ct.origin.x=ct.position.x,ct.origin.y=ct.position.y,ct.translation.x=0,ct.translation.y=0},m=ct=>{const et=(ht=>u.findIndex(Y=>Y.event.pointerId===ht.pointerId))(ct);if(!(et<0))return u[et]},y=()=>u.length===1,x=()=>u.length===2,k=ct=>{const et=Oo(ct.map(ht=>ht.position));return{center:et,distance:((ht,Y)=>ht.reduce((Z,St)=>Z+$o(Y,St.position),0)/ht.length)(ct,et),velocity:Oo(ct.map(ht=>ht.velocity)),translation:Oo(ct.map(ht=>ht.translation))}};let w,C,M,R,O,T,z,F,B=0,f;t.addEventListener("pointerdown",K);const V=["Meta","Control","Alt","Shift"];function J(ct){if(!V.includes(ct.key))return;const{metaKey:et,ctrlKey:ht,altKey:Y,shiftKey:Z}=ct;j({metaKey:et,ctrlKey:ht,altKey:Y,shiftKey:Z})}let S=Date.now();const j=ct=>{const et=_e(u[0].translation);let ht=z;o&&x()&&(ht*=$o(u[0].position,u[1].position)/O,Bn(et,u[1].translation)),Bn(et,T);const Y=Date.now();Y-S<16||(S=Y,c("interactionupdate",{position:h(),translation:et,scalar:o?ht:void 0,isMultiTouching:x(),...ct}))};function K(ct){if(!x()&&!(et=>$i(et.button)&&et.button!==0)(ct)&&r(ct,t)){if(d(),(et=>{const ht=p(et),Y={timeStamp:ht,timeStampInitial:ht,position:s(et),origin:s(et),velocity:Ji(),velocityHistory:[],velocityAverage:Ji(),translation:Ji(),interactionState:void 0,event:et};u.push(Y),Y.interactionState=k(u)})(ct),l&&(window.addEventListener("keydown",J),window.addEventListener("keyup",J)),y())document.documentElement.addEventListener("pointermove",dt),document.documentElement.addEventListener("pointerup",lt),document.documentElement.addEventListener("pointercancel",lt),document.addEventListener("visibilitychange",ft),F=!1,z=1,T=Ji(),O=void 0,c("interactionstart",{origin:_e(m(ct).origin)});else if(o)F=!0,O=$o(u[0].position,u[1].position),T.x+=u[0].translation.x,T.y+=u[0].translation.y,g(u[0]);else if(a===!1)return u.length=0,Lt(),c("interactioncancel")}}function dt(ct){ct.preventDefault(),(St=>{const nt=m(St);if(!nt)return;const mt=p(St),Ft=s(St),oe=Math.max(1,mt-nt.timeStamp);nt.velocity.x=(Ft.x-nt.position.x)/oe,nt.velocity.y=(Ft.y-nt.position.y)/oe,nt.velocityHistory.push(_e(nt.velocity)),nt.velocityHistory=nt.velocityHistory.slice(-3),nt.velocityAverage=nt.velocityHistory.reduce((Rt,Ut,Ot,U)=>(Rt.x+=Ut.x/U.length,Rt.y+=Ut.y/U.length,Rt),Ji()),nt.translation.x=Ft.x-nt.origin.x,nt.translation.y=Ft.y-nt.origin.y,nt.timeStamp=mt,nt.position.x=Ft.x,nt.position.y=Ft.y,nt.event=St})(ct);const{metaKey:et=!1,ctrlKey:ht=!1,altKey:Y=!1,shiftKey:Z=!1}=l?ct:{};j({metaKey:et,ctrlKey:ht,altKey:Y,shiftKey:Z})}function lt(ct){if(!m(ct))return;const et=h(),ht=(oe=>{const Rt=p2(u,Ut=>Ut.event.pointerId===oe.pointerId);if(Rt)return Rt[0]})(ct);if(o&&y()){const oe=$o(u[0].position,ht.position);z*=oe/O,T.x+=u[0].translation.x+ht.translation.x,T.y+=u[0].translation.y+ht.translation.y,g(u[0])}let Y=!1,Z=!1;if(!F&&ht){const oe=performance.now(),Rt=oe-ht.timeStampInitial;Y=Bo(ht.translation)<64&&Rt<300,Z=!!(f&&Y&&oe-B<700&&Bo(f,ht.position)<128),Y&&(f=_e(ht.position),B=oe)}if(u.length>0)return;Lt();const St=_e(ht.translation),nt=_e(ht.velocityAverage);let mt=!1;c("interactionrelease",{isTap:Y,isDoubleTap:Z,position:et,translation:St,scalar:z,preventInertia:()=>mt=!0});const Ft=$o(nt);if(mt||!i||Ft<.25)return $t(St,{isTap:Y,isDoubleTap:Z});C=_e(et),M=_e(St),w=Bh(_e(St),{easing:z4,duration:Ft*n}),w.set({x:St.x+50*nt.x,y:St.y+50*nt.y}).then(()=>{R&&$t(fa(w),{isTap:Y,isDoubleTap:Z})}),R=w.subscribe(N)}function N(ct){ct&&c("interactionupdate",{position:rt(C.x+(ct.x-M.x),C.y+(ct.y-M.y)),translation:ct,scalar:o?z:void 0})}function ft(ct){if(document.visibilityState==="visible"||!u.length)return;const et=k(u);d(),c("interactionend",{...et}),u.length=0,Lt()}function $t(ct,et){d(),c("interactionend",{...et,translation:ct,scalar:o?z:void 0})}function Lt(){l&&window.removeEventListener("keydown",J),l&&window.removeEventListener("keyup",J),document.documentElement.removeEventListener("pointermove",dt),document.documentElement.removeEventListener("pointerup",lt),document.documentElement.removeEventListener("pointercancel",lt),document.addEventListener("visibilitychange",ft)}return{destroy(){d(),t.removeEventListener("pointerdown",K)}}},Ts=(t,e={})=>{const{direction:i,shiftMultiplier:n=10,bubbles:r=!1,preventDefault:o=!1,stopKeydownPropagation:a=!0}=e,s=i==="horizontal",l=i==="vertical",c=d=>{const{key:u}=d,p=d.shiftKey,h=/up|down/i.test(u),g=/left|right/i.test(u);if(!g&&!h||s&&h||l&&g)return;const m=p?n:1;a&&d.stopPropagation(),o&&d.preventDefault(),t.dispatchEvent(new CustomEvent("nudge",{bubbles:r,detail:rt((/left/i.test(u)?-1:/right/i.test(u)?1:0)*m,(/up/i.test(u)?-1:/down/i.test(u)?1:0)*m)}))};return t.addEventListener("keydown",c),{destroy(){t.removeEventListener("keydown",c)}}};function us(t,e){return e?e*Math.sign(t)*Math.log10(1+Math.abs(t)/e):t}const P$=(t,e,i)=>{if(!e||!i)return{...t};const n=t.x+us(e.x-t.x,i),r=t.x+t.width+us(e.x+e.width-(t.x+t.width),i),o=t.y+us(e.y-t.y,i);return{x:n,y:o,width:r-n,height:t.y+t.height+us(e.y+e.height-(t.y+t.height),i)-o}},ov=(t,e,i)=>e&&i?rt(t.x+us(e.x-t.x,i),t.y+us(e.y-t.y,i)):{...t};var h2=(t,e)=>{if(t)return/em/.test(t)?16*parseInt(t,10):/px/.test(t)?parseInt(t,10):void 0},Cu=(t,e)=>{let i=t.detail||0;const{deltaX:n,deltaY:r,wheelDelta:o,wheelDeltaX:a,wheelDeltaY:s}=t,{fixScrollDirection:l=!1}=e||{};return $i(a)&&Math.abs(a)>Math.abs(s)?i=a/-120:$i(n)&&Math.abs(n)>Math.abs(r)?i=n/20:(o||s)&&(i=(o||s)/-120),i||(i=r/20),(xa()||Ea())&&(i*=2),l&&xu()&&(i*=-1),i};function av(t){let e,i,n,r,o,a,s;const l=t[37].default,c=cr(l,t,t[36],null);return{c(){e=pt("div"),i=pt("div"),c&&c.c(),v(i,"style",t[5]),v(e,"class",n=ci(["PinturaScrollable",t[0]])),v(e,"style",t[4]),v(e,"data-direction",t[1]),v(e,"data-state",t[6])},m(d,u){tt(d,e,u),Tt(e,i),c&&c.m(i,null),t[39](e),o=!0,a||(s=[Mt(i,"interactionstart",t[9]),Mt(i,"interactionupdate",t[11]),Mt(i,"interactionend",t[12]),Mt(i,"interactionrelease",t[10]),ji(Cs.call(null,i,{inertia:!0})),Mt(i,"measure",t[38]),ji(Er.call(null,i)),Mt(e,"wheel",t[14],{passive:!1}),Mt(e,"scroll",t[16]),Mt(e,"focusin",t[15]),Mt(e,"nudge",t[17]),Mt(e,"measure",t[13]),ji(Er.call(null,e,{observePosition:!0})),ji(r=Ts.call(null,e,{direction:t[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1}))],a=!0)},p(d,u){c&&c.p&&(!o||32&u[1])&&ur(c,l,d,d[36],o?dr(l,d[36],u,null):pr(d[36]),null),(!o||32&u[0])&&v(i,"style",d[5]),(!o||1&u[0]&&n!==(n=ci(["PinturaScrollable",d[0]])))&&v(e,"class",n),(!o||16&u[0])&&v(e,"style",d[4]),(!o||2&u[0])&&v(e,"data-direction",d[1]),(!o||64&u[0])&&v(e,"data-state",d[6]),r&&Hi(r.update)&&2&u[0]&&r.update.call(null,{direction:d[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1})},i(d){o||(P(c,d),o=!0)},o(d){D(c,d),o=!1},d(d){d&&Q(e),c&&c.d(d),t[39](null),a=!1,_i(s)}}}function sv(t,e,i){let n,r,o,a,s,l,c,d,u,{$$slots:p={},$$scope:h}=e;const g=va();let m,y,x,k,w="idle",C=oi(0);E(t,C,Y=>i(35,d=Y));let{class:M}=e,{scrollBlockInteractionDist:R=5}=e,{scrollStep:O=10}=e,{scrollFocusMargin:T=64}=e,{scrollDirection:z="x"}=e,{scrollAutoCancel:F=!1}=e,{elasticity:B=0}=e,{onscroll:f=me}=e,{maskFeatherSize:V}=e,{maskFeatherStartOpacity:J}=e,{maskFeatherEndOpacity:S}=e,{scroll:j}=e;const K=ln("fixScrollDirection");let dt;E(t,K,Y=>i(46,u=Y));let lt="",N=!0;const ft=C.subscribe(Y=>{const Z=Ji();Z[z]=Y,f(Z)}),$t=Y=>Math.max(Math.min(0,Y),x[n]-y[n]);let Lt,ct,et;const ht=(Y,Z={})=>{const{elastic:St=!1,animate:nt=!1,preventScrollState:mt=!1}=Z;Math.abs(Y-m)>R&&w==="idle"&&!k&&!mt&&i(28,w="scrolling");const Ft=$t(Y),oe=St&&B&&!k?Ft+us(Y-Ft,B):Ft;let Rt=!0;nt?Rt=!1:N||(Rt=!k),N=!1,C.set(oe,{hard:Rt}).then(Ut=>{k&&(N=!0)})};return No(()=>{ft()}),t.$$set=Y=>{"class"in Y&&i(0,M=Y.class),"scrollBlockInteractionDist"in Y&&i(21,R=Y.scrollBlockInteractionDist),"scrollStep"in Y&&i(22,O=Y.scrollStep),"scrollFocusMargin"in Y&&i(23,T=Y.scrollFocusMargin),"scrollDirection"in Y&&i(1,z=Y.scrollDirection),"scrollAutoCancel"in Y&&i(24,F=Y.scrollAutoCancel),"elasticity"in Y&&i(25,B=Y.elasticity),"onscroll"in Y&&i(26,f=Y.onscroll),"maskFeatherSize"in Y&&i(20,V=Y.maskFeatherSize),"maskFeatherStartOpacity"in Y&&i(18,J=Y.maskFeatherStartOpacity),"maskFeatherEndOpacity"in Y&&i(19,S=Y.maskFeatherEndOpacity),"scroll"in Y&&i(27,j=Y.scroll),"$$scope"in Y&&i(36,h=Y.$$scope)},t.$$.update=()=>{if(2&t.$$.dirty[0]&&i(32,n=z==="x"?"width":"height"),2&t.$$.dirty[0]&&i(30,r=z.toUpperCase()),8&t.$$.dirty[0]&&i(34,o=dt&&getComputedStyle(dt)),8&t.$$.dirty[0]|8&t.$$.dirty[1]&&i(33,a=o&&h2(o.getPropertyValue("--scrollable-feather-size"))),537657348&t.$$.dirty[0]|22&t.$$.dirty[1]&&d!=null&&x&&a!=null&&y){const Y=-1*d/a,Z=-(x[n]-y[n]-d)/a;i(18,J=Xi(1-Y,0,1)),i(19,S=Xi(1-Z,0,1)),i(20,V=a),i(4,lt=`--scrollable-feather-start-opacity: ${J};--scrollable-feather-end-opacity: ${S}`)}134217736&t.$$.dirty[0]&&dt&&j!==void 0&&($i(j)?ht(j):ht(j.scrollOffset,j)),536870916&t.$$.dirty[0]|2&t.$$.dirty[1]&&i(31,s=x&&y?y[n]>x[n]:void 0),268435456&t.$$.dirty[0]|1&t.$$.dirty[1]&&i(6,l=ci([w,s?"overflows":void 0])),1073741824&t.$$.dirty[0]|17&t.$$.dirty[1]&&i(5,c=s?`transform: translate${r}(${d}px)`:void 0)},[M,z,y,dt,lt,c,l,C,K,()=>{s&&(ct=!1,Lt=!0,et=rt(0,0),k=!1,i(28,w="idle"),m=fa(C))},({detail:Y})=>{s&&(k=!0,i(28,w="idle"))},({detail:Y})=>{s&&(ct||Lt&&(Lt=!1,Bo(Y.translation)<.1)||(!F||z!=="x"||(Z=>{const St=Mo(rt(Z.x-et.x,Z.y-et.y),Math.abs);et=_e(Z);const nt=Bo(St),mt=St.x-St.y;return!(nt>1&&mt<-.5)})(Y.translation)?ht(m+Y.translation[z],{elastic:!0}):ct=!0))},({detail:Y})=>{if(!s||ct)return;const Z=m+Y.translation[z],St=$t(Z);N=!1,C.set(St).then(nt=>{k&&(N=!0)})},({detail:Y})=>{i(29,x=Y),g("measure",{x:Y.x,y:Y.y,width:Y.width,height:Y.height})},Y=>{if(!s)return;Y.preventDefault(),Y.stopPropagation();const Z=Y.shiftKey,St=Cu(Y,{fixScrollDirection:u})*(Z?-1:1),nt=fa(C);ht(nt+St*O,{animate:!0})},Y=>{if(!s||!k)return;let Z=Y.target;Y.target.classList.contains("implicit")&&(Z=Z.parentNode);const St=Z[z==="x"?"offsetLeft":"offsetTop"],nt=St+Z[z==="x"?"offsetWidth":"offsetHeight"],mt=fa(C),Ft=T+V;mt+St<Ft?ht(-St+Ft):mt+nt>x[n]-Ft&&ht(x[n]-nt-Ft,{animate:!0})},()=>{i(3,dt[z==="x"?"scrollLeft":"scrollTop"]=0,dt)},({detail:Y})=>{if(dt.querySelector("[data-focus-visible]"))return;const Z=-2*Y[z],St=fa(C);ht(St+Z*O,{animate:!0,preventScrollState:!0})},J,S,V,R,O,T,F,B,f,j,w,x,r,s,n,a,o,d,h,p,Y=>i(2,y=Y.detail),function(Y){Ai[Y?"unshift":"push"](()=>{dt=Y,i(3,dt)})}]}class wa extends si{constructor(e){super(),ai(this,e,sv,av,ti,{class:0,scrollBlockInteractionDist:21,scrollStep:22,scrollFocusMargin:23,scrollDirection:1,scrollAutoCancel:24,elasticity:25,onscroll:26,maskFeatherSize:20,maskFeatherStartOpacity:18,maskFeatherEndOpacity:19,scroll:27},null,[-1,-1])}}function R$(t,{delay:e=0,duration:i=400,easing:n=Mh}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:i,easing:n,css:o=>"opacity: "+o*r}}function lv(t){let e,i,n,r,o;return{c(){e=pt("span"),v(e,"class","PinturaStatusMessage")},m(a,s){tt(a,e,s),e.innerHTML=t[0],n=!0,r||(o=[Mt(e,"measure",function(){Hi(t[1])&&t[1].apply(this,arguments)}),ji(Er.call(null,e))],r=!0)},p(a,[s]){t=a,(!n||1&s)&&(e.innerHTML=t[0])},i(a){n||(zl(()=>{i||(i=Um(e,R$,{duration:500},!0)),i.run(1)}),n=!0)},o(a){i||(i=Um(e,R$,{duration:500},!1)),i.run(0),n=!1},d(a){a&&Q(e),a&&i&&i.end(),r=!1,_i(o)}}}function cv(t,e,i){let{text:n}=e,{onmeasure:r=me}=e;return t.$$set=o=>{"text"in o&&i(0,n=o.text),"onmeasure"in o&&i(1,r=o.onmeasure)},[n,r]}class m2 extends si{constructor(e){super(),ai(this,e,cv,lv,ti,{text:0,onmeasure:1})}}function dv(t){let e,i,n,r,o,a,s,l,c;return{c(){e=pt("span"),i=Rr("svg"),n=Rr("g"),r=Rr("circle"),o=Rr("circle"),a=ce(),s=pt("span"),l=cn(t[3]),v(r,"class","PinturaProgressIndicatorBar"),v(r,"r","8.5"),v(r,"cx","10"),v(r,"cy","10"),v(r,"stroke-linecap","round"),v(r,"opacity",".25"),v(o,"class","PinturaProgressIndicatorFill"),v(o,"r","8.5"),v(o,"stroke-dasharray",t[2]),v(o,"cx","10"),v(o,"cy","10"),v(o,"transform","rotate(-90) translate(-20)"),v(n,"fill","none"),v(n,"stroke","currentColor"),v(n,"stroke-width","2.5"),v(n,"stroke-linecap","round"),v(n,"opacity",t[1]),v(i,"width","20"),v(i,"height","20"),v(i,"viewBox","0 0 20 20"),v(i,"xmlns","http://www.w3.org/2000/svg"),v(i,"aria-hidden","true"),v(i,"focusable","false"),v(s,"class","implicit"),v(e,"class","PinturaProgressIndicator"),v(e,"data-status",t[0]),v(e,"style",c="opacity:"+t[4])},m(d,u){tt(d,e,u),Tt(e,i),Tt(i,n),Tt(n,r),Tt(n,o),Tt(e,a),Tt(e,s),Tt(s,l)},p(d,[u]){4&u&&v(o,"stroke-dasharray",d[2]),2&u&&v(n,"opacity",d[1]),8&u&&zn(l,d[3]),1&u&&v(e,"data-status",d[0]),16&u&&c!==(c="opacity:"+d[4])&&v(e,"style",c)},i:Je,o:Je,d(d){d&&Q(e)}}}function uv(t,e,i){let n,r,o,a,s,l,c;const d=va();let{progress:u}=e,{min:p=0}=e,{max:h=100}=e,{labelBusy:g="Busy"}=e,{opacity:m}=e;const y=oi(m,{precision:.01});E(t,y,M=>i(4,c=M));const x=oi(0,{precision:.01}),k=oi(0,{precision:.01});E(t,k,M=>i(13,s=M));const w=Ri([x],M=>Xi(M,p,h));E(t,w,M=>i(14,l=M));const C=w.subscribe(M=>{u===1&&Math.round(M)>=100&&d("complete")});return ws(()=>{k.set(1)}),No(()=>{C()}),t.$$set=M=>{"progress"in M&&i(8,u=M.progress),"min"in M&&i(9,p=M.min),"max"in M&&i(10,h=M.max),"labelBusy"in M&&i(11,g=M.labelBusy),"opacity"in M&&i(12,m=M.opacity)},t.$$.update=()=>{4096&t.$$.dirty&&$i(m)&&y.set(m),256&t.$$.dirty&&u&&u!==1/0&&x.set(100*u),18688&t.$$.dirty&&i(3,n=u===1/0?g:Math.round(l)+"%"),16640&t.$$.dirty&&i(2,r=u===1/0?"26.5 53":l/100*53+" 53"),8192&t.$$.dirty&&i(1,o=s),256&t.$$.dirty&&i(0,a=u===1/0?"busy":"loading")},[a,o,r,n,c,y,k,w,u,p,h,g,m,s,l]}class $2 extends si{constructor(e){super(),ai(this,e,uv,dv,ti,{progress:8,min:9,max:10,labelBusy:11,opacity:12})}}function pv(t){let e,i,n;const r=t[5].default,o=cr(r,t,t[4],null);return{c(){e=pt("span"),o&&o.c(),v(e,"class",i="PinturaStatusAside "+t[0]),v(e,"style",t[1])},m(a,s){tt(a,e,s),o&&o.m(e,null),n=!0},p(a,[s]){o&&o.p&&(!n||16&s)&&ur(o,r,a,a[4],n?dr(r,a[4],s,null):pr(a[4]),null),(!n||1&s&&i!==(i="PinturaStatusAside "+a[0]))&&v(e,"class",i),(!n||2&s)&&v(e,"style",a[1])},i(a){n||(P(o,a),n=!0)},o(a){D(o,a),n=!1},d(a){a&&Q(e),o&&o.d(a)}}}function hv(t,e,i){let n,{$$slots:r={},$$scope:o}=e,{offset:a=0}=e,{opacity:s=0}=e,{class:l}=e;return t.$$set=c=>{"offset"in c&&i(2,a=c.offset),"opacity"in c&&i(3,s=c.opacity),"class"in c&&i(0,l=c.class),"$$scope"in c&&i(4,o=c.$$scope)},t.$$.update=()=>{12&t.$$.dirty&&i(1,n=`transform:translateX(${a}px);opacity:${s}`)},[l,n,a,s,o,r]}class g2 extends si{constructor(e){super(),ai(this,e,hv,pv,ti,{offset:2,opacity:3,class:0})}}const{document:I$}=_y;function mv(t){let e,i,n,r;return{c(){e=ce(),i=pt("button"),v(i,"class","PinturaImageButton"),v(i,"type","button"),v(i,"title",t[1]),i.disabled=t[2]},m(o,a){tt(o,e,a),tt(o,i,a),i.innerHTML=t[0],t[11](i),n||(r=[Mt(I$.body,"load",t[5],!0),Mt(I$.body,"error",t[6],!0),Mt(i,"pointerdown",t[4])],n=!0)},p(o,[a]){1&a&&(i.innerHTML=o[0]),2&a&&v(i,"title",o[1]),4&a&&(i.disabled=o[2])},i:Je,o:Je,d(o){o&&Q(e),o&&Q(i),t[11](null),n=!1,_i(r)}}}function $v(t,e,i){let n,{html:r}=e,{title:o}=e,{onclick:a}=e,{disabled:s=!1}=e,{ongrab:l=me}=e,{ondrag:c=me}=e,{ondrop:d=me}=e;const u=y=>Bo(p,rt(y.pageX,y.pageY))<256;let p;const h=y=>{document.documentElement.removeEventListener("pointermove",g),document.documentElement.removeEventListener("pointerup",h);const x=rt(y.pageX,y.pageY);if(Bo(p,x)<32)return a(y);u(y)||d(y)},g=y=>{u(y)||c(y)},m=y=>n&&n.contains(y)&&y.nodeName==="IMG";return t.$$set=y=>{"html"in y&&i(0,r=y.html),"title"in y&&i(1,o=y.title),"onclick"in y&&i(7,a=y.onclick),"disabled"in y&&i(2,s=y.disabled),"ongrab"in y&&i(8,l=y.ongrab),"ondrag"in y&&i(9,c=y.ondrag),"ondrop"in y&&i(10,d=y.ondrop)},t.$$.update=()=>{8&t.$$.dirty&&n&&n.querySelector("img")&&i(3,n.dataset.loader=!0,n)},[r,o,s,n,y=>{p=rt(y.pageX,y.pageY),l(y),document.documentElement.addEventListener("pointermove",g),document.documentElement.addEventListener("pointerup",h)},({target:y})=>{m(y)&&i(3,n.dataset.load=!0,n)},({target:y})=>{m(y)&&i(3,n.dataset.error=!0,n)},a,l,c,d,function(y){Ai[y?"unshift":"push"](()=>{n=y,i(3,n)})}]}class f2 extends si{constructor(e){super(),ai(this,e,$v,mv,ti,{html:0,title:1,onclick:7,disabled:2,ongrab:8,ondrag:9,ondrop:10})}}function E$(t,e,i){const n=t.slice();return n[14]=e[i],n}function A$(t,e){let i,n,r,o,a,s,l;function c(){return e[10](e[14])}function d(...h){return e[11](e[14],...h)}function u(...h){return e[12](e[14],...h)}function p(...h){return e[13](e[14],...h)}return n=new f2({props:{onclick:c,ongrab:d,ondrag:u,ondrop:p,disabled:e[1]||e[14].disabled,title:e[14].title,html:e[14].thumb}}),{key:t,first:null,c(){i=pt("li"),At(n.$$.fragment),r=ce(),v(i,"style",e[6]),this.first=i},m(h,g){tt(h,i,g),It(n,i,null),Tt(i,r),a=!0,s||(l=ji(o=e[8].call(null,i,e[14])),s=!0)},p(h,g){e=h;const m={};5&g&&(m.onclick=c),9&g&&(m.ongrab=d),17&g&&(m.ondrag=u),33&g&&(m.ondrop=p),3&g&&(m.disabled=e[1]||e[14].disabled),1&g&&(m.title=e[14].title),1&g&&(m.html=e[14].thumb),n.$set(m),(!a||64&g)&&v(i,"style",e[6]),o&&Hi(o.update)&&1&g&&o.update.call(null,e[14])},i(h){a||(P(n.$$.fragment,h),a=!0)},o(h){D(n.$$.fragment,h),a=!1},d(h){h&&Q(i),Et(n),s=!1,l()}}}function gv(t){let e,i,n=[],r=new Map,o=t[0];const a=s=>s[14].id;for(let s=0;s<o.length;s+=1){let l=E$(t,o,s),c=a(l);r.set(c,n[s]=A$(c,l))}return{c(){e=pt("ul");for(let s=0;s<n.length;s+=1)n[s].c();v(e,"class","PinturaImageButtonList")},m(s,l){tt(s,e,l);for(let c=0;c<n.length;c+=1)n[c].m(e,null);i=!0},p(s,[l]){127&l&&(o=s[0],ze(),n=La(n,l,a,1,s,o,r,e,Ss,A$,null,E$),Fe())},i(s){if(!i){for(let l=0;l<o.length;l+=1)P(n[l]);i=!0}},o(s){for(let l=0;l<n.length;l+=1)D(n[l]);i=!1},d(s){s&&Q(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function fv(t,e,i){let n,r,{items:o}=e,{disabled:a}=e,{onclickitem:s}=e,{ongrabitem:l}=e,{ondragitem:c}=e,{ondropitem:d}=e;const u=oi(0,{stiffness:.25,damping:.9});return E(t,u,p=>i(9,r=p)),ws(()=>u.set(1)),t.$$set=p=>{"items"in p&&i(0,o=p.items),"disabled"in p&&i(1,a=p.disabled),"onclickitem"in p&&i(2,s=p.onclickitem),"ongrabitem"in p&&i(3,l=p.ongrabitem),"ondragitem"in p&&i(4,c=p.ondragitem),"ondropitem"in p&&i(5,d=p.ondropitem)},t.$$.update=()=>{512&t.$$.dirty&&i(6,n="opacity:"+r)},[o,a,s,l,c,d,n,u,(p,h)=>h.mount&&h.mount(p.firstChild,h),r,p=>s(p.id),(p,h)=>l&&l(p.id,h),(p,h)=>c&&c(p.id,h),(p,h)=>d&&d(p.id,h)]}class _h extends si{constructor(e){super(),ai(this,e,fv,gv,ti,{items:0,disabled:1,onclickitem:2,ongrabitem:3,ondragitem:4,ondropitem:5})}}var xc=()=>Br()&&window.devicePixelRatio||1;let wp=null;var Ec=t=>(wp===null&&(wp=xc()===1?Math.round:e=>e),wp(t)),Yp=(t,e={})=>{if(t){if(e.preventScroll&&Ea()){const i=document.body.scrollTop;return t.focus(),void(document.body.scrollTop=i)}t.focus(e)}},y2=t=>/date|email|number|search|text|url/.test(t.type),Ac=t=>(e=>/textarea/i.test(e.nodeName))(t)||y2(t)||t.isContentEditable;const yv=t=>({}),L$=t=>({}),xv=t=>({}),z$=t=>({});function bv(t){let e,i;const n=[t[7]];let r={$$slots:{default:[wv]},$$scope:{ctx:t}};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new ks({props:r}),t[46](e),{c(){At(e.$$.fragment)},m(o,a){It(e,o,a),i=!0},p(o,a){const s=128&a[0]?Ir(n,[Or(o[7])]):{};524288&a[1]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),i=!1},d(o){t[46](null),Et(e,o)}}}function vv(t){let e,i;const n=[t[7]];let r={};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new ks({props:r}),t[45](e),{c(){At(e.$$.fragment)},m(o,a){It(e,o,a),i=!0},p(o,a){const s=128&a[0]?Ir(n,[Or(o[7])]):{};e.$set(s)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),i=!1},d(o){t[45](null),Et(e,o)}}}function wv(t){let e;const i=t[44].label,n=cr(i,t,t[50],z$);return{c(){n&&n.c()},m(r,o){n&&n.m(r,o),e=!0},p(r,o){n&&n.p&&(!e||524288&o[1])&&ur(n,i,r,r[50],e?dr(i,r[50],o,xv):pr(r[50]),z$)},i(r){e||(P(n,r),e=!0)},o(r){D(n,r),e=!1},d(r){n&&n.d(r)}}}function F$(t){let e,i,n,r,o,a,s;const l=t[44].details,c=cr(l,t,t[50],L$);return{c(){e=pt("div"),c&&c.c(),i=ce(),n=pt("span"),v(n,"class","PinturaPanelTip"),v(n,"style",t[10]),v(e,"class",r=ci(["PinturaPanel","pintura-editor-panel",t[2]])),v(e,"tabindex","-1"),v(e,"style",t[11])},m(d,u){tt(d,e,u),c&&c.m(e,null),Tt(e,i),Tt(e,n),t[47](e),o=!0,a||(s=[Mt(e,"close",t[48]),Mt(e,"keydown",t[18]),Mt(e,"measure",t[49]),ji(Er.call(null,e))],a=!0)},p(d,u){c&&c.p&&(!o||524288&u[1])&&ur(c,l,d,d[50],o?dr(l,d[50],u,yv):pr(d[50]),L$),(!o||1024&u[0])&&v(n,"style",d[10]),(!o||4&u[0]&&r!==(r=ci(["PinturaPanel","pintura-editor-panel",d[2]])))&&v(e,"class",r),(!o||2048&u[0])&&v(e,"style",d[11])},i(d){o||(P(c,d),o=!0)},o(d){D(c,d),o=!1},d(d){d&&Q(e),c&&c.d(d),t[47](null),a=!1,_i(s)}}}function Sv(t){let e,i,n,r,o,a,s,l,c;const d=[vv,bv],u=[];function p(g,m){return g[1]?0:1}i=p(t),n=u[i]=d[i](t);let h=t[6]&&F$(t);return{c(){e=ce(),n.c(),r=ce(),h&&h.c(),o=ce(),a=Tn()},m(g,m){tt(g,e,m),u[i].m(g,m),tt(g,r,m),h&&h.m(g,m),tt(g,o,m),tt(g,a,m),s=!0,l||(c=[Mt(document.body,"pointerdown",function(){Hi(t[9])&&t[9].apply(this,arguments)}),Mt(document.body,"pointerup",function(){Hi(t[8])&&t[8].apply(this,arguments)})],l=!0)},p(g,m){let y=i;i=p(t=g),i===y?u[i].p(t,m):(ze(),D(u[y],1,1,()=>{u[y]=null}),Fe(),n=u[i],n?n.p(t,m):(n=u[i]=d[i](t),n.c()),P(n,1),n.m(r.parentNode,r)),t[6]?h?(h.p(t,m),64&m[0]&&P(h,1)):(h=F$(t),h.c(),P(h,1),h.m(o.parentNode,o)):h&&(ze(),D(h,1,1,()=>{h=null}),Fe())},i(g){s||(P(n),P(h),P(!1),s=!0)},o(g){D(n),D(h),D(!1),s=!1},d(g){g&&Q(e),u[i].d(g),g&&Q(r),h&&h.d(g),g&&Q(o),g&&Q(a),l=!1,_i(c)}}}function kv(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,y,x,k,w,C,M,{$$slots:R={},$$scope:O}=e,{buttonClass:T}=e,{buttonLabel:z}=e,{buttonLabelClass:F}=e,{buttonHideLabel:B}=e,{buttonIcon:f}=e,{buttonTitle:V}=e,{panelClass:J}=e,{isActive:S=!1}=e,{onshow:j=({panel:U})=>Yp(U,{preventScroll:!0})}=e,{onhide:K=me}=e;const dt=ln("isAnimated");E(t,dt,U=>i(43,M=U));const lt=ln("rootPortal");E(t,lt,U=>i(38,y=U));const N=ln("rootRect");let ft,$t,Lt;E(t,N,U=>i(41,w=U));const ct=()=>i(26,Lt=n&&n.getBoundingClientRect());let et=Ji(),ht=oi(0);E(t,ht,U=>i(40,k=U));let Y=Ji();const Z=le({x:0,y:0});E(t,Z,U=>i(39,x=U));const St=oi(-5,{stiffness:.1,damping:.35,precision:.001});E(t,St,U=>i(42,C=U));let nt=!0;const mt=U=>u2(U,y)||$t.isEventTarget(U);let Ft,oe,Rt=!1;const Ut=U=>{Ac(U.target)||(S||ct(),i(31,oe=U),i(0,S=!S))},Ot=U=>{/down/i.test(U.key)&&(i(0,S=!0),i(31,oe=U))};return No(()=>{if(!y||!Ft)return;const U=Ft;Wy().then(()=>{U.parentNode&&U.remove()})}),t.$$set=U=>{"buttonClass"in U&&i(19,T=U.buttonClass),"buttonLabel"in U&&i(1,z=U.buttonLabel),"buttonLabelClass"in U&&i(20,F=U.buttonLabelClass),"buttonHideLabel"in U&&i(21,B=U.buttonHideLabel),"buttonIcon"in U&&i(22,f=U.buttonIcon),"buttonTitle"in U&&i(23,V=U.buttonTitle),"panelClass"in U&&i(2,J=U.panelClass),"isActive"in U&&i(0,S=U.isActive),"onshow"in U&&i(24,j=U.onshow),"onhide"in U&&i(25,K=U.onhide),"$$scope"in U&&i(50,O=U.$$scope)},t.$$.update=()=>{if(16&t.$$.dirty[0]&&(n=$t&&$t.getElement()),1073741825&t.$$.dirty[0]&&i(8,g=S?U=>{Rt&&(i(30,Rt=!1),mt(U)||i(0,S=!1))}:void 0),1&t.$$.dirty[0]|4096&t.$$.dirty[1]&&ht.set(S?1:0,{hard:M===!1}),1&t.$$.dirty[0]|4096&t.$$.dirty[1]&&St.set(S?0:-5,{hard:M===!1}),2048&t.$$.dirty[1]&&i(34,r=1-C/-5),1&t.$$.dirty[0]|1024&t.$$.dirty[1]&&w&&S&&ct(),67108873&t.$$.dirty[0]|1024&t.$$.dirty[1]&&w&&ft&&Lt&&S){i(29,nt=!0);let U=Lt.x-w.x+.5*Lt.width-.5*ft.width,wt=Lt.y-w.y+Lt.height;const xt=12,Gt=12,de=w.width-12,ue=w.height-12,be=U,$e=wt,_=be+ft.width,ve=$e+ft.height;be<xt&&(i(28,Y.x=be-xt,Y),U=xt),_>de&&(i(28,Y.x=_-de,Y),U=de-ft.width),ve>ue?(i(27,et.y=-1,et),Gt<wt-ft.height-Lt.height?(i(28,Y.y=0,Y),wt-=ft.height+Lt.height):(i(28,Y.y=wt-(ve-ue),Y),wt-=ve-ue-12,i(29,nt=!1))):i(27,et.y=1,et),kt(Z,x=Mo(rt(U,wt),Ec),x)}512&t.$$.dirty[1]&&i(6,o=k>0),512&t.$$.dirty[1]&&i(37,a=k<1),134217728&t.$$.dirty[0]|2304&t.$$.dirty[1]&&i(36,s=`translateX(${Math.round(x.x)+12*et.x}px) translateY(${Math.round(x.y)+12*et.y+et.y*C}px)`),1024&t.$$.dirty[1]&&i(35,l=`--panel-max-height:${w.height-24}px`),624&t.$$.dirty[1]&&i(11,c=a?`opacity: ${k}; pointer-events: ${k<1?"none":"all"}; transform: ${s};${l}`:`transform: ${s};${l}`),8&t.$$.dirty[1]&&i(32,d=.5+.5*r),8&t.$$.dirty[1]&&i(33,u=r),939524104&t.$$.dirty[0]|262&t.$$.dirty[1]&&i(10,p=x&&ft&&`opacity:${nt?u:0};transform:scaleX(${d})rotate(45deg);top:${et.y<0?Y.y+ft.height:0}px;left:${Y.x+.5*ft.width}px`),1&t.$$.dirty[0]&&i(9,h=S?U=>{mt(U)||i(30,Rt=!0)}:void 0),96&t.$$.dirty[0]|128&t.$$.dirty[1]&&o&&y&&Ft&&Ft.parentNode!==y&&y.append(Ft),1&t.$$.dirty[0]&&(S||i(31,oe=void 0)),16777313&t.$$.dirty[0]|1&t.$$.dirty[1]&&S&&o&&Ft&&j({e:oe,panel:Ft}),33554497&t.$$.dirty[0]&&o&&!S&&K(),16252930&t.$$.dirty[0]&&i(7,m={label:z,icon:f,class:ci(["PinturaPanelButton",T]),onkeydown:Ot,onclick:Ut,hideLabel:B,labelClass:F,title:V})},[S,z,J,ft,$t,Ft,o,m,g,h,p,c,dt,lt,N,ht,Z,St,U=>{/esc/i.test(U.key)&&(i(0,S=!1),n.focus())},T,F,B,f,V,j,K,Lt,et,Y,nt,Rt,oe,d,u,r,l,s,a,y,x,k,w,C,M,R,function(U){Ai[U?"unshift":"push"](()=>{$t=U,i(4,$t)})},function(U){Ai[U?"unshift":"push"](()=>{$t=U,i(4,$t)})},function(U){Ai[U?"unshift":"push"](()=>{Ft=U,i(5,Ft)})},U=>{U.stopPropagation(),i(0,S=!1)},U=>i(3,ft=Aa(U.detail)),O]}class Tu extends si{constructor(e){super(),ai(this,e,kv,Sv,ti,{buttonClass:19,buttonLabel:1,buttonLabelClass:20,buttonHideLabel:21,buttonIcon:22,buttonTitle:23,panelClass:2,isActive:0,onshow:24,onhide:25},null,[-1,-1])}}var Cv={Up:38,Down:40,Left:37,Right:39};function Tv(t){let e,i,n,r,o,a,s,l;const c=t[15].default,d=cr(c,t,t[14],null);return{c(){e=pt("li"),i=pt("input"),n=ce(),r=pt("label"),d&&d.c(),v(i,"type","radio"),v(i,"class","implicit"),v(i,"id",t[7]),v(i,"name",t[0]),i.value=t[3],i.disabled=t[6],i.hidden=t[5],i.checked=t[4],v(r,"for",t[7]),v(r,"title",t[2]),v(e,"class",o=ci(["PinturaRadioGroupOption",t[1]])),v(e,"data-hidden",t[5]),v(e,"data-disabled",t[6]),v(e,"data-selected",t[4])},m(u,p){tt(u,e,p),Tt(e,i),Tt(e,n),Tt(e,r),d&&d.m(r,null),a=!0,s||(l=[Mt(i,"change",Wb(t[16])),Mt(i,"keydown",t[9]),Mt(i,"click",t[10])],s=!0)},p(u,[p]){(!a||128&p)&&v(i,"id",u[7]),(!a||1&p)&&v(i,"name",u[0]),(!a||8&p)&&(i.value=u[3]),(!a||64&p)&&(i.disabled=u[6]),(!a||32&p)&&(i.hidden=u[5]),(!a||16&p)&&(i.checked=u[4]),d&&d.p&&(!a||16384&p)&&ur(d,c,u,u[14],a?dr(c,u[14],p,null):pr(u[14]),null),(!a||128&p)&&v(r,"for",u[7]),(!a||4&p)&&v(r,"title",u[2]),(!a||2&p&&o!==(o=ci(["PinturaRadioGroupOption",u[1]])))&&v(e,"class",o),(!a||32&p)&&v(e,"data-hidden",u[5]),(!a||64&p)&&v(e,"data-disabled",u[6]),(!a||16&p)&&v(e,"data-selected",u[4])},i(u){a||(P(d,u),a=!0)},o(u){D(d,u),a=!1},d(u){u&&Q(e),d&&d.d(u),s=!1,_i(l)}}}function Mv(t,e,i){let n,r,{$$slots:o={},$$scope:a}=e,{name:s}=e,{class:l}=e,{label:c}=e,{id:d}=e,{value:u}=e,{checked:p}=e,{onkeydown:h}=e,{onclick:g}=e,{hidden:m=!1}=e,{disabled:y=!1}=e;const x=Object.values(Cv),k=ln("keysPressed");return E(t,k,w=>i(17,r=w)),t.$$set=w=>{"name"in w&&i(0,s=w.name),"class"in w&&i(1,l=w.class),"label"in w&&i(2,c=w.label),"id"in w&&i(11,d=w.id),"value"in w&&i(3,u=w.value),"checked"in w&&i(4,p=w.checked),"onkeydown"in w&&i(12,h=w.onkeydown),"onclick"in w&&i(13,g=w.onclick),"hidden"in w&&i(5,m=w.hidden),"disabled"in w&&i(6,y=w.disabled),"$$scope"in w&&i(14,a=w.$$scope)},t.$$.update=()=>{2049&t.$$.dirty&&i(7,n=`${s}-${d}`)},[s,l,c,u,p,m,y,n,k,w=>{h(w)},w=>{r.some(C=>x.includes(C))||g(w)},d,h,g,a,o,function(w){Gr.call(this,t,w)}]}class x2 extends si{constructor(e){super(),ai(this,e,Mv,Tv,ti,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}}var $s=(t=[])=>t.reduce((e,i)=>(Ln(i)?Ln(i[1]):i.options)?e.concat(Ln(i)?i[1]:i.options):(e.push(i),e),[]);const Nd=(t,e,i)=>{let n;return Ln(t)?n={id:e,value:t[0],label:t[1],...t[2]||{}}:(n=t,n.id=n.id!=null?n.id:e),i?i(n):n};var lr=(t,e,i)=>Qi(t)?t(e,i):t;const b2=(t,e)=>t.map(([i,n,r])=>{if(Ln(n))return[lr(i,e),b2(n,e)];{const o=[i,lr(n,e)];if(r){let a={...r};r.icon&&(a.icon=lr(r.icon,e)),o.push(a)}return o}});var v2=(t,e)=>b2(t,e),w2=(t,e)=>Array.isArray(t)&&Array.isArray(e)?Ka(t,e):t===e;function D$(t,e,i){const n=t.slice();return n[27]=e[i],n}const Pv=t=>({option:1024&t[0]}),B$=t=>({option:t[27]});function O$(t,e,i){const n=t.slice();return n[27]=e[i],n}const Rv=t=>({option:1024&t[0]}),W$=t=>({option:t[27]}),Iv=t=>({option:1024&t[0]}),_$=t=>({option:t[27]});function V$(t){let e,i,n,r,o,a=[],s=new Map,l=t[1]&&N$(t),c=t[10];const d=u=>u[27].id;for(let u=0;u<c.length;u+=1){let p=D$(t,c,u),h=d(p);s.set(h,a[u]=X$(h,p))}return{c(){e=pt("fieldset"),l&&l.c(),i=ce(),n=pt("ul");for(let u=0;u<a.length;u+=1)a[u].c();v(n,"class","PinturaRadioGroupOptions"),v(e,"class",r=ci(["PinturaRadioGroup",t[3]])),v(e,"data-layout",t[5]),v(e,"title",t[7])},m(u,p){tt(u,e,p),l&&l.m(e,null),Tt(e,i),Tt(e,n);for(let h=0;h<a.length;h+=1)a[h].m(n,null);o=!0},p(u,p){u[1]?l?l.p(u,p):(l=N$(u),l.c(),l.m(e,i)):l&&(l.d(1),l=null),8419153&p[0]&&(c=u[10],ze(),a=La(a,p,d,1,u,c,s,n,Ss,X$,null,D$),Fe()),(!o||8&p[0]&&r!==(r=ci(["PinturaRadioGroup",u[3]])))&&v(e,"class",r),(!o||32&p[0])&&v(e,"data-layout",u[5]),(!o||128&p[0])&&v(e,"title",u[7])},i(u){if(!o){for(let p=0;p<c.length;p+=1)P(a[p]);o=!0}},o(u){for(let p=0;p<a.length;p+=1)D(a[p]);o=!1},d(u){u&&Q(e),l&&l.d();for(let p=0;p<a.length;p+=1)a[p].d()}}}function N$(t){let e,i,n;return{c(){e=pt("legend"),i=cn(t[1]),v(e,"class",n=t[2]&&"implicit")},m(r,o){tt(r,e,o),Tt(e,i)},p(r,o){2&o[0]&&zn(i,r[1]),4&o[0]&&n!==(n=r[2]&&"implicit")&&v(e,"class",n)},d(r){r&&Q(e)}}}function Ev(t){let e,i;return e=new x2({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[zv]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};16&r[0]&&(o.name=n[4]),1024&r[0]&&(o.label=n[27].label),1024&r[0]&&(o.id=n[27].id),1024&r[0]&&(o.value=n[27].value),1024&r[0]&&(o.disabled=n[27].disabled),1024&r[0]&&(o.hidden=n[27].hidden),256&r[0]&&(o.class=n[8]),1025&r[0]&&(o.checked=n[12](n[27])===n[0]),1024&r[0]&&(o.onkeydown=n[13](n[27])),1024&r[0]&&(o.onclick=n[14](n[27])),8389696&r[0]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function Av(t){let e,i,n,r,o,a,s=[],l=new Map;const c=t[22].group,d=cr(c,t,t[23],_$),u=d||function(g){let m,y,x=g[27].label+"";return{c(){m=pt("span"),y=cn(x),v(m,"class","PinturaRadioGroupOptionGroupLabel")},m(k,w){tt(k,m,w),Tt(m,y)},p(k,w){1024&w[0]&&x!==(x=k[27].label+"")&&zn(y,x)},d(k){k&&Q(m)}}}(t);let p=t[27].options;const h=g=>g[27].id;for(let g=0;g<p.length;g+=1){let m=O$(t,p,g),y=h(m);l.set(y,s[g]=Z$(y,m))}return{c(){e=pt("li"),u&&u.c(),i=ce(),n=pt("ul");for(let g=0;g<s.length;g+=1)s[g].c();r=ce(),v(n,"class","PinturaRadioGroupOptions"),v(e,"class",o=ci(["PinturaRadioGroupOptionGroup",t[9]]))},m(g,m){tt(g,e,m),u&&u.m(e,null),Tt(e,i),Tt(e,n);for(let y=0;y<s.length;y+=1)s[y].m(n,null);Tt(e,r),a=!0},p(g,m){d?d.p&&(!a||8389632&m[0])&&ur(d,c,g,g[23],a?dr(c,g[23],m,Iv):pr(g[23]),_$):u&&u.p&&(!a||1024&m[0])&&u.p(g,a?m:[-1,-1]),8418641&m[0]&&(p=g[27].options,ze(),s=La(s,m,h,1,g,p,l,n,Ss,Z$,null,O$),Fe()),(!a||512&m[0]&&o!==(o=ci(["PinturaRadioGroupOptionGroup",g[9]])))&&v(e,"class",o)},i(g){if(!a){P(u,g);for(let m=0;m<p.length;m+=1)P(s[m]);a=!0}},o(g){D(u,g);for(let m=0;m<s.length;m+=1)D(s[m]);a=!1},d(g){g&&Q(e),u&&u.d(g);for(let m=0;m<s.length;m+=1)s[m].d()}}}function H$(t){let e,i;return e=new Ro({props:{$$slots:{default:[Lv]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};8389632&r[0]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function Lv(t){let e,i=t[27].icon+"";return{c(){e=Rr("g")},m(n,r){tt(n,e,r),e.innerHTML=i},p(n,r){1024&r[0]&&i!==(i=n[27].icon+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function j$(t){let e,i,n=t[27].label+"";return{c(){e=pt("span"),i=cn(n),v(e,"class",t[6])},m(r,o){tt(r,e,o),Tt(e,i)},p(r,o){1024&o[0]&&n!==(n=r[27].label+"")&&zn(i,n),64&o[0]&&v(e,"class",r[6])},d(r){r&&Q(e)}}}function zv(t){let e;const i=t[22].option,n=cr(i,t,t[23],B$),r=n||function(o){let a,s,l,c=o[27].icon&&H$(o),d=!o[27].hideLabel&&j$(o);return{c(){c&&c.c(),a=ce(),d&&d.c(),s=ce()},m(u,p){c&&c.m(u,p),tt(u,a,p),d&&d.m(u,p),tt(u,s,p),l=!0},p(u,p){u[27].icon?c?(c.p(u,p),1024&p[0]&&P(c,1)):(c=H$(u),c.c(),P(c,1),c.m(a.parentNode,a)):c&&(ze(),D(c,1,1,()=>{c=null}),Fe()),u[27].hideLabel?d&&(d.d(1),d=null):d?d.p(u,p):(d=j$(u),d.c(),d.m(s.parentNode,s))},i(u){l||(P(c),l=!0)},o(u){D(c),l=!1},d(u){c&&c.d(u),u&&Q(a),d&&d.d(u),u&&Q(s)}}}(t);return{c(){r&&r.c()},m(o,a){r&&r.m(o,a),e=!0},p(o,a){n?n.p&&(!e||8389632&a[0])&&ur(n,i,o,o[23],e?dr(i,o[23],a,Pv):pr(o[23]),B$):r&&r.p&&(!e||1088&a[0])&&r.p(o,e?a:[-1,-1])},i(o){e||(P(r,o),e=!0)},o(o){D(r,o),e=!1},d(o){r&&r.d(o)}}}function U$(t){let e,i;return e=new Ro({props:{$$slots:{default:[Fv]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};8389632&r[0]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function Fv(t){let e,i=t[27].icon+"";return{c(){e=Rr("g")},m(n,r){tt(n,e,r),e.innerHTML=i},p(n,r){1024&r[0]&&i!==(i=n[27].icon+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function G$(t){let e,i,n=t[27].label+"";return{c(){e=pt("span"),i=cn(n),v(e,"class",t[6])},m(r,o){tt(r,e,o),Tt(e,i)},p(r,o){1024&o[0]&&n!==(n=r[27].label+"")&&zn(i,n),64&o[0]&&v(e,"class",r[6])},d(r){r&&Q(e)}}}function Dv(t){let e;const i=t[22].option,n=cr(i,t,t[23],W$),r=n||function(o){let a,s,l,c=o[27].icon&&U$(o),d=!o[27].hideLabel&&G$(o);return{c(){c&&c.c(),a=ce(),d&&d.c(),s=ce()},m(u,p){c&&c.m(u,p),tt(u,a,p),d&&d.m(u,p),tt(u,s,p),l=!0},p(u,p){u[27].icon?c?(c.p(u,p),1024&p[0]&&P(c,1)):(c=U$(u),c.c(),P(c,1),c.m(a.parentNode,a)):c&&(ze(),D(c,1,1,()=>{c=null}),Fe()),u[27].hideLabel?d&&(d.d(1),d=null):d?d.p(u,p):(d=G$(u),d.c(),d.m(s.parentNode,s))},i(u){l||(P(c),l=!0)},o(u){D(c),l=!1},d(u){c&&c.d(u),u&&Q(a),d&&d.d(u),u&&Q(s)}}}(t);return{c(){r&&r.c()},m(o,a){r&&r.m(o,a),e=!0},p(o,a){n?n.p&&(!e||8389632&a[0])&&ur(n,i,o,o[23],e?dr(i,o[23],a,Rv):pr(o[23]),W$):r&&r.p&&(!e||1088&a[0])&&r.p(o,e?a:[-1,-1])},i(o){e||(P(r,o),e=!0)},o(o){D(r,o),e=!1},d(o){r&&r.d(o)}}}function Z$(t,e){let i,n,r;return n=new x2({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[Dv]},$$scope:{ctx:e}}}),{key:t,first:null,c(){i=Tn(),At(n.$$.fragment),this.first=i},m(o,a){tt(o,i,a),It(n,o,a),r=!0},p(o,a){e=o;const s={};16&a[0]&&(s.name=e[4]),1024&a[0]&&(s.label=e[27].label),1024&a[0]&&(s.id=e[27].id),1024&a[0]&&(s.value=e[27].value),1024&a[0]&&(s.disabled=e[27].disabled),1024&a[0]&&(s.hidden=e[27].hidden),256&a[0]&&(s.class=e[8]),1025&a[0]&&(s.checked=e[12](e[27])===e[0]),1024&a[0]&&(s.onkeydown=e[13](e[27])),1024&a[0]&&(s.onclick=e[14](e[27])),8389696&a[0]&&(s.$$scope={dirty:a,ctx:e}),n.$set(s)},i(o){r||(P(n.$$.fragment,o),r=!0)},o(o){D(n.$$.fragment,o),r=!1},d(o){o&&Q(i),Et(n,o)}}}function X$(t,e){let i,n,r,o,a;const s=[Av,Ev],l=[];function c(d,u){return d[27].options?0:1}return n=c(e),r=l[n]=s[n](e),{key:t,first:null,c(){i=Tn(),r.c(),o=Tn(),this.first=i},m(d,u){tt(d,i,u),l[n].m(d,u),tt(d,o,u),a=!0},p(d,u){let p=n;n=c(e=d),n===p?l[n].p(e,u):(ze(),D(l[p],1,1,()=>{l[p]=null}),Fe(),r=l[n],r?r.p(e,u):(r=l[n]=s[n](e),r.c()),P(r,1),r.m(o.parentNode,o))},i(d){a||(P(r),a=!0)},o(d){D(r),a=!1},d(d){d&&Q(i),l[n].d(d),d&&Q(o)}}}function Bv(t){let e,i,n,r=t[11].length&&V$(t);return{c(){r&&r.c(),e=ce(),i=Tn()},m(o,a){r&&r.m(o,a),tt(o,e,a),tt(o,i,a),n=!0},p(o,a){o[11].length?r?(r.p(o,a),2048&a[0]&&P(r,1)):(r=V$(o),r.c(),P(r,1),r.m(e.parentNode,e)):r&&(ze(),D(r,1,1,()=>{r=null}),Fe())},i(o){n||(P(r),P(!1),n=!0)},o(o){D(r),D(!1),n=!1},d(o){r&&r.d(o),o&&Q(e),o&&Q(i)}}}function Ov(t,e,i){let n,r,o,{$$slots:a={},$$scope:s}=e;const l=va();let{label:c}=e,{hideLabel:d=!0}=e,{class:u}=e,{name:p="radio-group-"+ia()}=e,{selectedIndex:h=-1}=e,{options:g=[]}=e,{onchange:m}=e,{layout:y}=e,{optionMapper:x}=e,{optionFilter:k}=e,{value:w}=e,{optionLabelClass:C}=e,{title:M}=e,{locale:R}=e,{optionClass:O}=e,{optionGroupClass:T}=e;const z=B=>o.findIndex(f=>f.id===B.id),F=(B,f)=>{i(0,h=z(B));const V={index:h,...B};((J,...S)=>{J&&J(...S)})(m,V,f),l("change",V)};return t.$$set=B=>{"label"in B&&i(1,c=B.label),"hideLabel"in B&&i(2,d=B.hideLabel),"class"in B&&i(3,u=B.class),"name"in B&&i(4,p=B.name),"selectedIndex"in B&&i(0,h=B.selectedIndex),"options"in B&&i(15,g=B.options),"onchange"in B&&i(16,m=B.onchange),"layout"in B&&i(5,y=B.layout),"optionMapper"in B&&i(17,x=B.optionMapper),"optionFilter"in B&&i(18,k=B.optionFilter),"value"in B&&i(19,w=B.value),"optionLabelClass"in B&&i(6,C=B.optionLabelClass),"title"in B&&i(7,M=B.title),"locale"in B&&i(20,R=B.locale),"optionClass"in B&&i(8,O=B.optionClass),"optionGroupClass"in B&&i(9,T=B.optionGroupClass),"$$scope"in B&&i(23,s=B.$$scope)},t.$$.update=()=>{1343488&t.$$.dirty[0]&&i(11,n=v2(k?g.filter(k):g,R)),133120&t.$$.dirty[0]&&i(10,r=((B=[],f)=>{let V=0;return B.map(J=>(V++,Ln(J)?Ln(J[1])?{id:V,label:J[0],options:J[1].map(S=>Nd(S,++V,f))}:Nd(J,V,f):J.options?{id:J.id||V,label:J.label,options:J.options.map(S=>Nd(S,++V,f))}:Nd(J,V,f)))})(n,x)),1024&t.$$.dirty[0]&&i(21,o=$s(r)),2654209&t.$$.dirty[0]&&h<0&&(i(0,h=o.findIndex(B=>w2(B.value,w))),h<0&&i(0,h=(B=>B.findIndex(f=>f[0]===void 0))(g)))},[h,c,d,u,p,y,C,M,O,T,r,n,z,B=>f=>{var V;V=f.key,/enter| /i.test(V)&&F(B,f)},B=>f=>{F(B,f)},g,m,x,k,w,R,o,a,s]}class Ja extends si{constructor(e){super(),ai(this,e,Ov,Bv,ti,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},null,[-1,-1])}}function Y$(t){let e,i,n,r,o,a,s,l,c,d;return{c(){e=pt("div"),i=pt("button"),n=cn("â²"),o=ce(),a=pt("button"),s=cn("â¼"),v(i,"type","button"),v(i,"tabindex","-1"),v(i,"aria-label",r="increase "+t[7]),v(a,"type","button"),v(a,"tabindex","-1"),v(a,"aria-label",l="decrease "+t[7]),v(e,"class","PinturaInputSpinners")},m(u,p){tt(u,e,p),Tt(e,i),Tt(i,n),Tt(e,o),Tt(e,a),Tt(a,s),c||(d=[Mt(i,"click",t[17]),Mt(a,"click",t[18])],c=!0)},p(u,p){128&p&&r!==(r="increase "+u[7])&&v(i,"aria-label",r),128&p&&l!==(l="decrease "+u[7])&&v(a,"aria-label",l)},d(u){u&&Q(e),c=!1,_i(d)}}}function Wv(t){let e,i,n,r,o,a,s=t[1]==="number"&&t[9]&&Y$(t);return{c(){e=pt("div"),i=pt("input"),r=ce(),s&&s.c(),v(i,"class","PinturaInputField"),v(i,"title",t[7]),v(i,"type",t[1]),v(i,"min",t[4]),v(i,"max",t[5]),v(i,"step",t[6]),v(i,"inputmode",t[3]),i.value=n=t[14]?t[13]:t[0],v(i,"style",t[11]),v(i,"placeholder",t[8]),v(i,"maxlength",t[12]),i.disabled=t[2],v(i,"spellcheck","false"),v(i,"autocorrect","off"),v(i,"autocapitalize","off"),v(e,"class","PinturaInput")},m(l,c){tt(l,e,c),Tt(e,i),t[27](i),Tt(e,r),s&&s.m(e,null),o||(a=[Mt(i,"input",t[16]),Mt(i,"blur",function(){Hi(t[14]&&t[15])&&(t[14]&&t[15]).apply(this,arguments)}),Mt(i,"keydown",t[19]),Mt(i,"keyup",t[20])],o=!0)},p(l,[c]){t=l,128&c&&v(i,"title",t[7]),2&c&&v(i,"type",t[1]),16&c&&v(i,"min",t[4]),32&c&&v(i,"max",t[5]),64&c&&v(i,"step",t[6]),8&c&&v(i,"inputmode",t[3]),24577&c&&n!==(n=t[14]?t[13]:t[0])&&i.value!==n&&(i.value=n),2048&c&&v(i,"style",t[11]),256&c&&v(i,"placeholder",t[8]),4096&c&&v(i,"maxlength",t[12]),4&c&&(i.disabled=t[2]),t[1]==="number"&&t[9]?s?s.p(t,c):(s=Y$(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:Je,o:Je,d(l){l&&Q(e),t[27](null),s&&s.d(),o=!1,_i(a)}}}function _v(t,e,i){let n,r,o,a,s,l,c,{value:d}=e,{type:u="text"}=e,{disabled:p=!1}=e,{inputmode:h}=e,{min:g}=e,{max:m}=e,{step:y}=e,{onchange:x=me}=e,{onkeydown:k=me}=e,{title:w}=e,{stepMultiplier:C=10}=e,{placeholder:M}=e,{enableSpinButtons:R=!0}=e,{enableStopPropagation:O=!1}=e;const T=()=>{let f=l.value;return u==="number"&&(f=h==="numeric"?parseInt(f,10):parseFloat(f),!$i(f)||Number.isNaN(f)?f=g||0:n&&(f=Xi(f,g,m))),f};let z=d;const F=()=>{const f=Xi(T()+(c?y*C:y),g,m);f!==d&&(i(25,z=f),i(0,d=f),x(d))},B=()=>{const f=Xi(T()-(c?y*C:y),g,m);f!==d&&(i(25,z=f),i(0,d=f),x(d))};return t.$$set=f=>{"value"in f&&i(0,d=f.value),"type"in f&&i(1,u=f.type),"disabled"in f&&i(2,p=f.disabled),"inputmode"in f&&i(3,h=f.inputmode),"min"in f&&i(4,g=f.min),"max"in f&&i(5,m=f.max),"step"in f&&i(6,y=f.step),"onchange"in f&&i(21,x=f.onchange),"onkeydown"in f&&i(22,k=f.onkeydown),"title"in f&&i(7,w=f.title),"stepMultiplier"in f&&i(23,C=f.stepMultiplier),"placeholder"in f&&i(8,M=f.placeholder),"enableSpinButtons"in f&&i(9,R=f.enableSpinButtons),"enableStopPropagation"in f&&i(24,O=f.enableStopPropagation)},t.$$.update=()=>{48&t.$$.dirty&&i(14,n=$i(g)&&$i(m)),33555457&t.$$.dirty&&i(13,r=l===document.activeElement?z:d),32&t.$$.dirty&&i(26,o=m?(m+"").length:void 0),67108872&t.$$.dirty&&i(12,a=h==="numeric"&&o?o:void 0),67108864&t.$$.dirty&&i(11,s=o?`min-width:${o}em`:void 0)},[d,u,p,h,g,m,y,w,M,R,l,s,a,r,n,()=>{i(25,z=T()),x(d)},()=>{i(25,z=l.value),x(T())},F,B,f=>{c=f.shiftKey,k(f);const{key:V}=f;O&&f.stopPropagation(),/up|down/i.test(V)&&(/up/i.test(V)&&F(),/down/i.test(V)&&B(),f.preventDefault(),f.stopPropagation())},f=>{const{key:V}=f;/up|down/i.test(V)&&(f.preventDefault(),f.stopPropagation())},x,k,C,O,z,o,function(f){Ai[f?"unshift":"push"](()=>{l=f,i(10,l)})}]}class S2 extends si{constructor(e){super(),ai(this,e,_v,Wv,ti,{value:0,type:1,disabled:2,inputmode:3,min:4,max:5,step:6,onchange:21,onkeydown:22,title:7,stepMultiplier:23,placeholder:8,enableSpinButtons:9,enableStopPropagation:24})}}const Vv=t=>({}),q$=t=>({});function Nv(t){let e,i,n,r,o=(t[2]||t[21])+"",a=t[6]&&K$(t);return{c(){a&&a.c(),e=ce(),i=pt("span"),v(i,"class",n=ci(["PinturaButtonLabel",t[3],t[5]&&"implicit"]))},m(s,l){a&&a.m(s,l),tt(s,e,l),tt(s,i,l),i.innerHTML=o,r=!0},p(s,l){s[6]?a?(a.p(s,l),64&l[0]&&P(a,1)):(a=K$(s),a.c(),P(a,1),a.m(e.parentNode,e)):a&&(ze(),D(a,1,1,()=>{a=null}),Fe()),(!r||2097156&l[0])&&o!==(o=(s[2]||s[21])+"")&&(i.innerHTML=o),(!r||40&l[0]&&n!==(n=ci(["PinturaButtonLabel",s[3],s[5]&&"implicit"])))&&v(i,"class",n)},i(s){r||(P(a),r=!0)},o(s){D(a),r=!1},d(s){a&&a.d(s),s&&Q(e),s&&Q(i)}}}function Hv(t){let e,i;return e=new S2({props:{value:t[10],onchange:t[17],enableStopPropagation:!0,type:"number",inputmode:"numeric",min:t[8].reduce(eg,1/0),max:t[8].reduce(ig,-1/0),enableSpinButtons:!1}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};1024&r[0]&&(o.value=n[10]),131072&r[0]&&(o.onchange=n[17]),256&r[0]&&(o.min=n[8].reduce(eg,1/0)),256&r[0]&&(o.max=n[8].reduce(ig,-1/0)),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function K$(t){let e,i;return e=new Ro({props:{class:"PinturaButtonIcon",$$slots:{default:[jv]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};536870976&r[0]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function jv(t){let e;return{c(){e=Rr("g")},m(i,n){tt(i,e,n),e.innerHTML=t[6]},p(i,n){64&n[0]&&(e.innerHTML=i[6])},d(i){i&&Q(e)}}}function Uv(t){let e,i,n,r,o,a;const s=[Hv,Nv],l=[];function c(d,u){return d[18]?0:1}return i=c(t),n=l[i]=s[i](t),{c(){e=pt("span"),n.c(),v(e,"slot","label"),v(e,"title",r=lr(t[1],t[16])),v(e,"class",o=ci(["PinturaButtonInner",t[18]&&"PinturaComboBox",t[4]]))},m(d,u){tt(d,e,u),l[i].m(e,null),a=!0},p(d,u){let p=i;i=c(d),i===p?l[i].p(d,u):(ze(),D(l[p],1,1,()=>{l[p]=null}),Fe(),n=l[i],n?n.p(d,u):(n=l[i]=s[i](d),n.c()),P(n,1),n.m(e,null)),(!a||65538&u[0]&&r!==(r=lr(d[1],d[16])))&&v(e,"title",r),(!a||262160&u[0]&&o!==(o=ci(["PinturaButtonInner",d[18]&&"PinturaComboBox",d[4]])))&&v(e,"class",o)},i(d){a||(P(n),a=!0)},o(d){D(n),a=!1},d(d){d&&Q(e),l[i].d()}}}function Gv(t){let e,i,n=t[31].label+"";return{c(){e=pt("span"),i=cn(n),v(e,"slot","group")},m(r,o){tt(r,e,o),Tt(e,i)},p(r,o){1&o[1]&&n!==(n=r[31].label+"")&&zn(i,n)},d(r){r&&Q(e)}}}function J$(t){let e,i;return e=new Ro({props:{style:Qi(t[14])?t[14](t[31].value):t[14],$$slots:{default:[Zv]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};16384&r[0]|1&r[1]&&(o.style=Qi(n[14])?n[14](n[31].value):n[14]),536870912&r[0]|1&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function Zv(t){let e,i=t[31].icon+"";return{c(){e=Rr("g")},m(n,r){tt(n,e,r),e.innerHTML=i},p(n,r){1&r[1]&&i!==(i=n[31].icon+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function Q$(t){let e,i,n,r,o,a=t[31].label+"",s=t[31].sublabel&&tg(t);return{c(){e=pt("span"),i=new vu(!1),n=ce(),s&&s.c(),i.a=n,v(e,"style",r=Qi(t[15])?t[15](t[31].value):t[15]),v(e,"class",o=ci(["PinturaDropdownOptionLabel",t[11]]))},m(l,c){tt(l,e,c),i.m(a,e),Tt(e,n),s&&s.m(e,null)},p(l,c){1&c[1]&&a!==(a=l[31].label+"")&&i.p(a),l[31].sublabel?s?s.p(l,c):(s=tg(l),s.c(),s.m(e,null)):s&&(s.d(1),s=null),32768&c[0]|1&c[1]&&r!==(r=Qi(l[15])?l[15](l[31].value):l[15])&&v(e,"style",r),2048&c[0]&&o!==(o=ci(["PinturaDropdownOptionLabel",l[11]]))&&v(e,"class",o)},d(l){l&&Q(e),s&&s.d()}}}function tg(t){let e,i=t[31].sublabel+"";return{c(){e=pt("span"),v(e,"class","PinturaDropdownOptionSublabel")},m(n,r){tt(n,e,r),e.innerHTML=i},p(n,r){1&r[1]&&i!==(i=n[31].sublabel+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function Xv(t){let e,i,n,r=t[31].icon&&J$(t),o=!t[31].hideLabel&&Q$(t);return{c(){e=pt("span"),r&&r.c(),i=ce(),o&&o.c(),v(e,"slot","option")},m(a,s){tt(a,e,s),r&&r.m(e,null),Tt(e,i),o&&o.m(e,null),n=!0},p(a,s){a[31].icon?r?(r.p(a,s),1&s[1]&&P(r,1)):(r=J$(a),r.c(),P(r,1),r.m(e,i)):r&&(ze(),D(r,1,1,()=>{r=null}),Fe()),a[31].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=Q$(a),o.c(),o.m(e,null))},i(a){n||(P(r),n=!0)},o(a){D(r),n=!1},d(a){a&&Q(e),r&&r.d(),o&&o.d()}}}function Yv(t){let e,i,n,r,o,a;const s=t[27].controls,l=cr(s,t,t[29],q$);return n=new Ja({props:{class:"PinturaOptionsList PinturaScrollableContent",name:t[7],value:t[10],selectedIndex:t[9],optionFilter:t[12],optionMapper:t[13],optionLabelClass:ci(["PinturaDropdownOptionLabel",t[11]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[19],onchange:t[22],$$slots:{option:[Xv,({option:c})=>({31:c}),({option:c})=>[0,c?1:0]],group:[Gv,({option:c})=>({31:c}),({option:c})=>[0,c?1:0]]},$$scope:{ctx:t}}}),{c(){e=pt("div"),l&&l.c(),i=ce(),At(n.$$.fragment),v(e,"slot","details"),v(e,"class","PinturaOptionsListWrapper")},m(c,d){tt(c,e,d),l&&l.m(e,null),Tt(e,i),It(n,e,null),r=!0,o||(a=Mt(e,"keydown",t[24]),o=!0)},p(c,d){l&&l.p&&(!r||536870912&d[0])&&ur(l,s,c,c[29],r?dr(s,c[29],d,Vv):pr(c[29]),q$);const u={};128&d[0]&&(u.name=c[7]),1024&d[0]&&(u.value=c[10]),512&d[0]&&(u.selectedIndex=c[9]),4096&d[0]&&(u.optionFilter=c[12]),8192&d[0]&&(u.optionMapper=c[13]),2048&d[0]&&(u.optionLabelClass=ci(["PinturaDropdownOptionLabel",c[11]])),524288&d[0]&&(u.options=c[19]),536922112&d[0]|1&d[1]&&(u.$$scope={dirty:d,ctx:c}),n.$set(u)},i(c){r||(P(l,c),P(n.$$.fragment,c),r=!0)},o(c){D(l,c),D(n.$$.fragment,c),r=!1},d(c){c&&Q(e),l&&l.d(c),Et(n),o=!1,a()}}}function qv(t){let e,i,n;function r(a){t[28](a)}let o={onshow:t[23],buttonClass:ci(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"]),$$slots:{details:[Yv],label:[Uv]},$$scope:{ctx:t}};return t[20]!==void 0&&(o.isActive=t[20]),e=new Tu({props:o}),Ai.push(()=>go(e,"isActive",r)),{c(){At(e.$$.fragment)},m(a,s){It(e,a,s),n=!0},p(a,s){const l={};33&s[0]&&(l.buttonClass=ci(["PinturaDropdownButton",a[0],a[5]&&"PinturaDropdownIconOnly"])),540016638&s[0]&&(l.$$scope={dirty:s,ctx:a}),!i&&1048576&s[0]&&(i=!0,l.isActive=a[20],Po(()=>i=!1)),e.$set(l)},i(a){n||(P(e.$$.fragment,a),n=!0)},o(a){D(e.$$.fragment,a),n=!1},d(a){Et(e,a)}}}const eg=(t,[e])=>e<t?e:t,ig=(t,[e])=>e>t?e:t;function Kv(t,e,i){let n,r,{$$slots:o={},$$scope:a}=e,{class:s}=e,{title:l}=e,{label:c}=e,{labelClass:d}=e,{innerClass:u}=e,{hideLabel:p=!1}=e,{icon:h}=e,{name:g}=e,{options:m=[]}=e,{selectedIndex:y=-1}=e,{value:x}=e,{optionLabelClass:k}=e,{optionFilter:w}=e,{optionMapper:C}=e,{optionIconStyle:M}=e,{optionLabelStyle:R}=e,{locale:O}=e,{onchange:T=me}=e,{onload:z=me}=e,{ondestroy:F=me}=e,{enableInput:B=!1}=e,f;return ws(()=>z({options:m})),No(()=>F({options:m})),t.$$set=V=>{"class"in V&&i(0,s=V.class),"title"in V&&i(1,l=V.title),"label"in V&&i(2,c=V.label),"labelClass"in V&&i(3,d=V.labelClass),"innerClass"in V&&i(4,u=V.innerClass),"hideLabel"in V&&i(5,p=V.hideLabel),"icon"in V&&i(6,h=V.icon),"name"in V&&i(7,g=V.name),"options"in V&&i(8,m=V.options),"selectedIndex"in V&&i(9,y=V.selectedIndex),"value"in V&&i(10,x=V.value),"optionLabelClass"in V&&i(11,k=V.optionLabelClass),"optionFilter"in V&&i(12,w=V.optionFilter),"optionMapper"in V&&i(13,C=V.optionMapper),"optionIconStyle"in V&&i(14,M=V.optionIconStyle),"optionLabelStyle"in V&&i(15,R=V.optionLabelStyle),"locale"in V&&i(16,O=V.locale),"onchange"in V&&i(17,T=V.onchange),"onload"in V&&i(25,z=V.onload),"ondestroy"in V&&i(26,F=V.ondestroy),"enableInput"in V&&i(18,B=V.enableInput),"$$scope"in V&&i(29,a=V.$$scope)},t.$$.update=()=>{65792&t.$$.dirty[0]&&i(19,n=O?v2(m,O):m),525312&t.$$.dirty[0]&&i(21,r=n.reduce((V,J)=>{if(V)return V;const S=Array.isArray(J)?J:[J,J],[j,K]=S;return w2(j,x)?K:void 0},void 0)||(V=>{const J=V.find(S=>S[0]===void 0);if(J)return J[1]})(n)||x)},[s,l,c,d,u,p,h,g,m,y,x,k,w,C,M,R,O,T,B,n,f,r,V=>{i(21,r=V.value),T(V),i(20,f=!1)},({e:V,panel:J})=>{if(V&&V.key&&/up|down/i.test(V.key))return Yp(J.querySelector("input:not([disabled])"));Yp(J.querySelector("fieldset"))},V=>{/tab/i.test(V.key)&&V.preventDefault()},z,F,o,function(V){f=V,i(20,f)},a]}class k2 extends si{constructor(e){super(),ai(this,e,Kv,qv,ti,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:8,selectedIndex:9,value:10,optionLabelClass:11,optionFilter:12,optionMapper:13,optionIconStyle:14,optionLabelStyle:15,locale:16,onchange:17,onload:25,ondestroy:26,enableInput:18},null,[-1,-1])}}function Jv(t){let e;return{c(){e=pt("div"),v(e,"slot","details")},m(i,n){tt(i,e,n),t[14](e)},p:Je,d(i){i&&Q(e),t[14](null)}}}function Qv(t){let e,i,n;function r(a){t[15](a)}let o={buttonLabel:t[0],buttonClass:t[1],buttonIcon:t[2],buttonHideLabel:t[3],buttonTitle:t[4],buttonLabelClass:t[5],onshow:t[6],onhide:t[7],$$slots:{details:[Jv]},$$scope:{ctx:t}};return t[9]!==void 0&&(o.isActive=t[9]),e=new Tu({props:o}),Ai.push(()=>go(e,"isActive",r)),{c(){At(e.$$.fragment)},m(a,s){It(e,a,s),n=!0},p(a,[s]){const l={};1&s&&(l.buttonLabel=a[0]),2&s&&(l.buttonClass=a[1]),4&s&&(l.buttonIcon=a[2]),8&s&&(l.buttonHideLabel=a[3]),16&s&&(l.buttonTitle=a[4]),32&s&&(l.buttonLabelClass=a[5]),64&s&&(l.onshow=a[6]),128&s&&(l.onhide=a[7]),65792&s&&(l.$$scope={dirty:s,ctx:a}),!i&&512&s&&(i=!0,l.isActive=a[9],Po(()=>i=!1)),e.$set(l)},i(a){n||(P(e.$$.fragment,a),n=!0)},o(a){D(e.$$.fragment,a),n=!1},d(a){Et(e,a)}}}function t5(t,e,i){let{buttonLabel:n}=e,{buttonClass:r}=e,{buttonIcon:o}=e,{buttonHideLabel:a}=e,{buttonTitle:s}=e,{buttonLabelClass:l}=e,{root:c}=e,{ondestroy:d=me}=e,{onshow:u=me}=e,{onhide:p=me}=e,h,g=!1;return No(d),t.$$set=m=>{"buttonLabel"in m&&i(0,n=m.buttonLabel),"buttonClass"in m&&i(1,r=m.buttonClass),"buttonIcon"in m&&i(2,o=m.buttonIcon),"buttonHideLabel"in m&&i(3,a=m.buttonHideLabel),"buttonTitle"in m&&i(4,s=m.buttonTitle),"buttonLabelClass"in m&&i(5,l=m.buttonLabelClass),"root"in m&&i(10,c=m.root),"ondestroy"in m&&i(11,d=m.ondestroy),"onshow"in m&&i(6,u=m.onshow),"onhide"in m&&i(7,p=m.onhide)},t.$$.update=()=>{1280&t.$$.dirty&&h&&c&&h.firstChild!==c&&(h.hasChildNodes()?h.replaceChild(c,h.firstChild):h.append(c))},[n,r,o,a,s,l,u,p,h,g,c,d,()=>i(9,g=!1),()=>i(9,g=!0),function(m){Ai[m?"unshift":"push"](()=>{h=m,i(8,h)})},function(m){g=m,i(9,g)}]}class e5 extends si{constructor(e){super(),ai(this,e,t5,Qv,ti,{buttonLabel:0,buttonClass:1,buttonIcon:2,buttonHideLabel:3,buttonTitle:4,buttonLabelClass:5,root:10,ondestroy:11,onshow:6,onhide:7,hide:12,show:13})}get hide(){return this.$$.ctx[12]}get show(){return this.$$.ctx[13]}}var bc=(t,e,i)=>(t-e)/(i-e);const i5=t=>({}),ng=t=>({});function rg(t){let e,i,n,r,o,a,s,l;return i=new Ro({props:{$$slots:{default:[n5]},$$scope:{ctx:t}}}),o=new Ro({props:{$$slots:{default:[r5]},$$scope:{ctx:t}}}),{c(){e=pt("button"),At(i.$$.fragment),n=ce(),r=pt("button"),At(o.$$.fragment),v(e,"type","button"),v(e,"aria-label","Increase"),v(r,"type","button"),v(r,"aria-label","Decrease")},m(c,d){tt(c,e,d),It(i,e,null),tt(c,n,d),tt(c,r,d),It(o,r,null),a=!0,s||(l=[Mt(e,"pointerdown",t[20](1)),Mt(r,"pointerdown",t[20](-1))],s=!0)},p(c,d){const u={};128&d[1]&&(u.$$scope={dirty:d,ctx:c}),i.$set(u);const p={};128&d[1]&&(p.$$scope={dirty:d,ctx:c}),o.$set(p)},i(c){a||(P(i.$$.fragment,c),P(o.$$.fragment,c),a=!0)},o(c){D(i.$$.fragment,c),D(o.$$.fragment,c),a=!1},d(c){c&&Q(e),Et(i),c&&Q(n),c&&Q(r),Et(o),s=!1,_i(l)}}}function n5(t){let e;return{c(){e=Rr("path"),v(e,"d","M8 12 h8 M12 8 v8")},m(i,n){tt(i,e,n)},p:Je,d(i){i&&Q(e)}}}function r5(t){let e;return{c(){e=Rr("path"),v(e,"d","M9 12 h6")},m(i,n){tt(i,e,n)},p:Je,d(i){i&&Q(e)}}}function o5(t){let e,i,n,r,o,a,s,l,c,d,u,p,h,g,m,y,x;const k=t[36].default,w=cr(k,t,t[38],null),C=t[36].knob,M=cr(C,t,t[38],ng);let R=t[9]&&rg(t);return{c(){e=pt("div"),i=pt("div"),n=pt("input"),o=ce(),a=pt("div"),w&&w.c(),l=ce(),c=pt("div"),d=pt("div"),M&&M.c(),h=ce(),R&&R.c(),v(n,"type","range"),v(n,"id",t[3]),v(n,"min",t[0]),v(n,"max",t[1]),v(n,"step",t[2]),n.value=t[14],v(n,"style",r=t[10]?"pointer-events:none":""),v(a,"class",s=ci(["PinturaSliderTrack",t[5]])),v(a,"style",t[4]),v(d,"class",u=ci(["PinturaSliderKnob",t[7]])),v(d,"style",t[6]),v(c,"class","PinturaSliderKnobController"),v(c,"style",t[17]),v(i,"class","PinturaSliderControl"),v(i,"style",p="--slider-position:"+Math.round(t[15])),v(e,"class",g=ci(["PinturaSlider",t[12]])),v(e,"data-direction",t[8])},m(O,T){tt(O,e,T),Tt(e,i),Tt(i,n),t[37](n),Tt(i,o),Tt(i,a),w&&w.m(a,null),Tt(i,l),Tt(i,c),Tt(c,d),M&&M.m(d,null),Tt(e,h),R&&R.m(e,null),m=!0,y||(x=[Mt(n,"input",t[18]),Mt(n,"nudge",t[19]),ji(Ts.call(null,n)),Mt(i,"pointerdown",function(){Hi(t[11]&&t[13])&&(t[11]&&t[13]).apply(this,arguments)})],y=!0)},p(O,T){t=O,(!m||8&T[0])&&v(n,"id",t[3]),(!m||1&T[0])&&v(n,"min",t[0]),(!m||2&T[0])&&v(n,"max",t[1]),(!m||4&T[0])&&v(n,"step",t[2]),(!m||16384&T[0])&&(n.value=t[14]),(!m||1024&T[0]&&r!==(r=t[10]?"pointer-events:none":""))&&v(n,"style",r),w&&w.p&&(!m||128&T[1])&&ur(w,k,t,t[38],m?dr(k,t[38],T,null):pr(t[38]),null),(!m||32&T[0]&&s!==(s=ci(["PinturaSliderTrack",t[5]])))&&v(a,"class",s),(!m||16&T[0])&&v(a,"style",t[4]),M&&M.p&&(!m||128&T[1])&&ur(M,C,t,t[38],m?dr(C,t[38],T,i5):pr(t[38]),ng),(!m||128&T[0]&&u!==(u=ci(["PinturaSliderKnob",t[7]])))&&v(d,"class",u),(!m||64&T[0])&&v(d,"style",t[6]),(!m||131072&T[0])&&v(c,"style",t[17]),(!m||32768&T[0]&&p!==(p="--slider-position:"+Math.round(t[15])))&&v(i,"style",p),t[9]?R?(R.p(t,T),512&T[0]&&P(R,1)):(R=rg(t),R.c(),P(R,1),R.m(e,null)):R&&(ze(),D(R,1,1,()=>{R=null}),Fe()),(!m||4096&T[0]&&g!==(g=ci(["PinturaSlider",t[12]])))&&v(e,"class",g),(!m||256&T[0])&&v(e,"data-direction",t[8])},i(O){m||(P(w,O),P(M,O),P(R),m=!0)},o(O){D(w,O),D(M,O),D(R),m=!1},d(O){O&&Q(e),t[37](null),w&&w.d(O),M&&M.d(O),R&&R.d(),y=!1,_i(x)}}}function a5(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,y,x,{$$slots:k={},$$scope:w}=e,{min:C=0}=e,{max:M=100}=e,{step:R=1}=e,{id:O}=e,{value:T=0}=e,{valueMin:z}=e,{valueMax:F}=e,{trackStyle:B}=e,{trackClass:f}=e,{knobStyle:V}=e,{knobClass:J}=e,{ongrab:S=me}=e,{onchange:j=me}=e,{onrelease:K=me}=e,{onexceed:dt=me}=e,{direction:lt="x"}=e,{getValue:N=Zi}=e,{setValue:ft=Zi}=e,{enableSpinButtons:$t=!0}=e,{enableForceUseKnob:Lt=!1}=e,{enableStopPropagation:ct=!0}=e,{enablePointerdownListener:et=!0}=e,{maxInteractionDistance:ht=6}=e,{class:Y}=e;const Z=wt=>ft(((xt,Gt)=>(Gt=1/Gt,Math.round(xt*Gt)/Gt))(Xi(wt,C,M),R),T),St=(wt,xt,Gt={})=>{const{grabbed:de=!1,released:ue=!1}=Gt,be=Z(C+wt/xt*r),$e=z||C,_=F||M;i(21,T=Oe(be)?be:Xi(be,$e,_)),x!==be&&(x=be,!Oe(be)&&(be<$e||be>_)&&dt(T,be),T!==y&&(y=T,de&&S(T),j(T),ue&&K(T)))};let nt;const mt=wt=>{const xt=wt[d]-m;St(g+xt,h)},Ft=wt=>{h=void 0,document.documentElement.removeEventListener("pointermove",mt),document.documentElement.removeEventListener("pointerup",Ft),j(T),K(T)},oe=()=>{i(21,T=Z(n+Ut*R)),j(T)};let Rt,Ut=1,Ot=!1;const U=wt=>{clearTimeout(Rt),Ot||oe(),K(T),document.removeEventListener("pointerup",U)};return t.$$set=wt=>{"min"in wt&&i(0,C=wt.min),"max"in wt&&i(1,M=wt.max),"step"in wt&&i(2,R=wt.step),"id"in wt&&i(3,O=wt.id),"value"in wt&&i(21,T=wt.value),"valueMin"in wt&&i(22,z=wt.valueMin),"valueMax"in wt&&i(23,F=wt.valueMax),"trackStyle"in wt&&i(4,B=wt.trackStyle),"trackClass"in wt&&i(5,f=wt.trackClass),"knobStyle"in wt&&i(6,V=wt.knobStyle),"knobClass"in wt&&i(7,J=wt.knobClass),"ongrab"in wt&&i(24,S=wt.ongrab),"onchange"in wt&&i(25,j=wt.onchange),"onrelease"in wt&&i(26,K=wt.onrelease),"onexceed"in wt&&i(27,dt=wt.onexceed),"direction"in wt&&i(8,lt=wt.direction),"getValue"in wt&&i(28,N=wt.getValue),"setValue"in wt&&i(29,ft=wt.setValue),"enableSpinButtons"in wt&&i(9,$t=wt.enableSpinButtons),"enableForceUseKnob"in wt&&i(10,Lt=wt.enableForceUseKnob),"enableStopPropagation"in wt&&i(30,ct=wt.enableStopPropagation),"enablePointerdownListener"in wt&&i(11,et=wt.enablePointerdownListener),"maxInteractionDistance"in wt&&i(31,ht=wt.maxInteractionDistance),"class"in wt&&i(12,Y=wt.class),"$$scope"in wt&&i(38,w=wt.$$scope)},t.$$.update=()=>{270532608&t.$$.dirty[0]&&i(14,n=T!==void 0?N(T):0),3&t.$$.dirty[0]&&(r=M-C),16387&t.$$.dirty[0]&&i(33,o=bc(n,C,M)),4&t.$$.dirty[1]&&i(15,a=100*o),256&t.$$.dirty[0]&&i(34,s=lt.toUpperCase()),256&t.$$.dirty[0]&&i(35,l=lt==="x"?"Width":"Height"),16&t.$$.dirty[1]&&(c="offset"+l),t.$$.dirty[1],8&t.$$.dirty[1]&&(d="page"+s),32768&t.$$.dirty[0]|8&t.$$.dirty[1]&&i(17,u=`transform: translate${s}(${a}%)`)},[C,M,R,O,B,f,V,J,lt,$t,Lt,et,Y,wt=>{let xt=!1;ct&&wt.stopPropagation(),clearTimeout(nt);const Gt=p.getBoundingClientRect();if(h=p[c],m=wt[d],g=m-Gt[lt],Lt){if(Math.abs(g-o*h)>ht)return;xt=!0,wt.stopPropagation()}return document.activeElement!==p&&p.focus(),St(g,h,{grabbed:!0}),document.documentElement.addEventListener("pointermove",mt),document.documentElement.addEventListener("pointerup",Ft),xt},n,a,p,u,wt=>{h||(i(21,T=ft(parseFloat(wt.target.value))),T!==y&&(y=T,j(T)))},wt=>{const xt=p[c];St(n/r*xt+wt.detail[lt],xt),clearTimeout(nt),nt=setTimeout(()=>{K(T)},250)},wt=>xt=>{clearTimeout(nt),Ut=wt,Ot=!1,Rt=setInterval(()=>{Ot=!0,oe()},100),document.addEventListener("pointercancel",U),document.addEventListener("pointerup",U)},T,z,F,S,j,K,dt,N,ft,ct,ht,wt=>{const xt=p.getBoundingClientRect(),Gt=wt[d]-xt[lt],de=p[c];return Math.abs(Gt-o*de)},o,s,l,k,function(wt){Ai[wt?"unshift":"push"](()=>{p=wt,i(16,p)})},w]}class Vh extends si{constructor(e){super(),ai(this,e,a5,o5,ti,{min:0,max:1,step:2,id:3,value:21,valueMin:22,valueMax:23,trackStyle:4,trackClass:5,knobStyle:6,knobClass:7,ongrab:24,onchange:25,onrelease:26,onexceed:27,direction:8,getValue:28,setValue:29,enableSpinButtons:9,enableForceUseKnob:10,enableStopPropagation:30,enablePointerdownListener:11,maxInteractionDistance:31,class:12,eventDistanceToKnob:32,handlePointerDown:13},null,[-1,-1])}get eventDistanceToKnob(){return this.$$.ctx[32]}get handlePointerDown(){return this.$$.ctx[13]}}function og(t){let e,i;return e=new Ro({props:{class:"PinturaButtonIcon",$$slots:{default:[s5]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};1048580&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function s5(t){let e;return{c(){e=Rr("g")},m(i,n){tt(i,e,n),e.innerHTML=t[2]},p(i,n){4&n&&(e.innerHTML=i[2])},d(i){i&&Q(e)}}}function ag(t){let e,i,n=lr(t[8],t[6])+"";return{c(){e=pt("span"),i=cn(n),v(e,"class","PinturaButtonLabelPrefix")},m(r,o){tt(r,e,o),Tt(e,i)},p(r,o){320&o&&n!==(n=lr(r[8],r[6])+"")&&zn(i,n)},d(r){r&&Q(e)}}}function l5(t){let e,i,n,r,o,a,s,l,c,d=t[2]&&og(t),u=t[8]&&ag(t);return{c(){e=pt("span"),d&&d.c(),i=ce(),u&&u.c(),n=ce(),r=pt("span"),o=cn(t[9]),v(r,"class",a=ci(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),v(e,"slot","label"),v(e,"title",s=lr(t[1],t[6])),v(e,"class",l=ci(["PinturaButtonInner",t[4]]))},m(p,h){tt(p,e,h),d&&d.m(e,null),Tt(e,i),u&&u.m(e,null),Tt(e,n),Tt(e,r),Tt(r,o),c=!0},p(p,h){p[2]?d?(d.p(p,h),4&h&&P(d,1)):(d=og(p),d.c(),P(d,1),d.m(e,i)):d&&(ze(),D(d,1,1,()=>{d=null}),Fe()),p[8]?u?u.p(p,h):(u=ag(p),u.c(),u.m(e,n)):u&&(u.d(1),u=null),(!c||512&h)&&zn(o,p[9]),(!c||40&h&&a!==(a=ci(["PinturaButtonLabel",p[3],p[5]&&"implicit"])))&&v(r,"class",a),(!c||66&h&&s!==(s=lr(p[1],p[6])))&&v(e,"title",s),(!c||16&h&&l!==(l=ci(["PinturaButtonInner",p[4]])))&&v(e,"class",l)},i(p){c||(P(d),c=!0)},o(p){D(d),c=!1},d(p){p&&Q(e),d&&d.d(),u&&u.d()}}}function c5(t){let e,i,n,r,o;const a=[t[12],{value:t[7]},{onchange:t[11]}];let s={};for(let l=0;l<a.length;l+=1)s=Cn(s,a[l]);return i=new Vh({props:s}),{c(){e=pt("div"),At(i.$$.fragment),v(e,"slot","details")},m(l,c){tt(l,e,c),It(i,e,null),n=!0,r||(o=Mt(e,"keydown",t[10]),r=!0)},p(l,c){const d=6272&c?Ir(a,[4096&c&&Or(l[12]),128&c&&{value:l[7]},2048&c&&{onchange:l[11]}]):{};i.$set(d)},i(l){n||(P(i.$$.fragment,l),n=!0)},o(l){D(i.$$.fragment,l),n=!1},d(l){l&&Q(e),Et(i),r=!1,o()}}}function d5(t){let e,i;return e=new Tu({props:{panelClass:"PinturaSliderPanel",buttonClass:ci(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[c5],label:[l5]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,[r]){const o={};33&r&&(o.buttonClass=ci(["PinturaSliderButton",n[0],n[5]&&"PinturaSliderIconOnly"])),1053694&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function u5(t,e,i){const n=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange","labelPrefix"];let r=_m(e,n),{class:o}=e,{title:a}=e,{label:s=Math.round}=e,{icon:l}=e,{labelClass:c}=e,{innerClass:d}=e,{hideLabel:u=!1}=e,{locale:p}=e,{value:h}=e,{onchange:g=me}=e,{labelPrefix:m}=e;const{min:y,max:x,getValue:k=Zi}=r;let w;const C=M=>i(9,w=(R=>Qi(s)?s(k(R),y,x,R):s)(M));return t.$$set=M=>{e=Cn(Cn({},e),Rc(M)),i(12,r=_m(e,n)),"class"in M&&i(0,o=M.class),"title"in M&&i(1,a=M.title),"label"in M&&i(13,s=M.label),"icon"in M&&i(2,l=M.icon),"labelClass"in M&&i(3,c=M.labelClass),"innerClass"in M&&i(4,d=M.innerClass),"hideLabel"in M&&i(5,u=M.hideLabel),"locale"in M&&i(6,p=M.locale),"value"in M&&i(7,h=M.value),"onchange"in M&&i(14,g=M.onchange),"labelPrefix"in M&&i(8,m=M.labelPrefix)},t.$$.update=()=>{8320&t.$$.dirty&&C(h)},[o,a,l,c,d,u,p,h,m,w,M=>{/tab/i.test(M.key)&&M.preventDefault()},M=>{C(M),g(M)},r,s,g]}class p5 extends si{constructor(e){super(),ai(this,e,u5,d5,ti,{class:0,title:1,label:13,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:14,labelPrefix:8})}}function sg(t){let e,i,n=lr(t[0],t[1])+"";return{c(){e=pt("span"),i=cn(n),v(e,"class",t[3])},m(r,o){tt(r,e,o),Tt(e,i)},p(r,o){3&o&&n!==(n=lr(r[0],r[1])+"")&&zn(i,n),8&o&&v(e,"class",r[3])},d(r){r&&Q(e)}}}function h5(t){let e,i,n,r,o=t[0]&&sg(t);return n=new fo({props:{items:t[2]}}),{c(){e=pt("li"),o&&o.c(),i=ce(),At(n.$$.fragment),v(e,"class","PinturaShapeStyle")},m(a,s){tt(a,e,s),o&&o.m(e,null),Tt(e,i),It(n,e,null),r=!0},p(a,[s]){a[0]?o?o.p(a,s):(o=sg(a),o.c(),o.m(e,i)):o&&(o.d(1),o=null);const l={};4&s&&(l.items=a[2]),n.$set(l)},i(a){r||(P(n.$$.fragment,a),r=!0)},o(a){D(n.$$.fragment,a),r=!1},d(a){a&&Q(e),o&&o.d(),Et(n)}}}function m5(t,e,i){let n,{title:r}=e,{locale:o}=e,{items:a}=e,{hideTitle:s=!1}=e;return t.$$set=l=>{"title"in l&&i(0,r=l.title),"locale"in l&&i(1,o=l.locale),"items"in l&&i(2,a=l.items),"hideTitle"in l&&i(4,s=l.hideTitle)},t.$$.update=()=>{16&t.$$.dirty&&i(3,n="PinturaShapeStyleLabel"+(s?" implicit":""))},[r,o,a,n,s]}class $5 extends si{constructor(e){super(),ai(this,e,m5,h5,ti,{title:0,locale:1,items:2,hideTitle:4})}}var lg=(t,e,i)=>{let n,r,o;const a=Math.floor(6*t),s=6*t-a,l=i*(1-e),c=i*(1-s*e),d=i*(1-(1-s)*e);switch(a%6){case 0:n=i,r=d,o=l;break;case 1:n=c,r=i,o=l;break;case 2:n=l,r=i,o=d;break;case 3:n=l,r=c,o=i;break;case 4:n=d,r=l,o=i;break;case 5:n=i,r=l,o=c}return[n,r,o]};function g5(t){let e,i,n;return{c(){e=pt("div"),i=pt("span"),v(e,"class","PinturaColorPreview"),v(e,"title",t[0]),v(e,"style",n="--color:"+t[1])},m(r,o){tt(r,e,o),Tt(e,i)},p(r,[o]){1&o&&v(e,"title",r[0]),2&o&&n!==(n="--color:"+r[1])&&v(e,"style",n)},i:Je,o:Je,d(r){r&&Q(e)}}}function f5(t,e,i){let n,{color:r}=e,{title:o}=e;return t.$$set=a=>{"color"in a&&i(2,r=a.color),"title"in a&&i(0,o=a.title)},t.$$.update=()=>{4&t.$$.dirty&&i(1,n=r?Pr(r):"transparent")},[o,n,r]}class Nh extends si{constructor(e){super(),ai(this,e,f5,g5,ti,{color:2,title:0})}}var C2=t=>(t=t.trim(),/^rgba/.test(t)?t.substr(5).split(",").map(parseFloat).map((e,i)=>e/(i===3?1:255)):/^rgb/.test(t)?t.substr(4).split(",").map(parseFloat).map(e=>e/255):/^#/.test(t)?(e=>{const[,i,n,r,o]=e.split("");e=e.length>=4&&e.length<=5?`#${i}${i}${n}${n}${r}${r}${o?`${o}${o}`:""}`:e;const[a,s,l,c,d]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e)||[];if(a)return[s,l,c,d].filter(u=>u!==void 0).map(u=>parseInt(u,16)/255)})(t):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(t)?t.split(",").map(e=>parseInt(e,10)).map(e=>e/255):void 0);function cg(t){let e,i;return{c(){e=pt("span"),i=cn(t[0])},m(n,r){tt(n,e,r),Tt(e,i)},p(n,r){1&r[0]&&zn(i,n[0])},d(n){n&&Q(e)}}}function y5(t){let e,i,n,r;i=new Nh({props:{color:t[4],title:lr(t[8],t[10])}});let o=!t[9]&&cg(t);return{c(){e=pt("span"),At(i.$$.fragment),n=ce(),o&&o.c(),v(e,"slot","label"),v(e,"class","PinturaButtonLabel")},m(a,s){tt(a,e,s),It(i,e,null),Tt(e,n),o&&o.m(e,null),r=!0},p(a,s){const l={};16&s[0]&&(l.color=a[4]),1280&s[0]&&(l.title=lr(a[8],a[10])),i.$set(l),a[9]?o&&(o.d(1),o=null):o?o.p(a,s):(o=cg(a),o.c(),o.m(e,null))},i(a){r||(P(i.$$.fragment,a),r=!0)},o(a){D(i.$$.fragment,a),r=!1},d(a){a&&Q(e),Et(i),o&&o.d()}}}function dg(t){let e,i,n,r,o,a,s,l,c,d,u,p,h,g;c=new Vh({props:{class:"PinturaHuePicker",knobStyle:"background-color:"+t[20],onchange:t[26],value:t[15],min:0,max:1,step:.01}});let m=t[11]&&ug(t),y=t[14]&&pg(t);return{c(){e=pt("div"),i=pt("div"),n=pt("div"),r=pt("div"),l=ce(),At(c.$$.fragment),d=ce(),m&&m.c(),u=ce(),y&&y.c(),v(r,"role","button"),v(r,"aria-label","Saturation slider"),v(r,"class","PinturaPickerKnob"),v(r,"tabindex","0"),v(r,"style",o=`background-color:${t[19]};`),v(n,"class","PinturaPickerKnobController"),v(n,"style",a=`transform:translate(${t[24]}%,${t[23]}%)`),v(i,"class","PinturaSaturationPicker"),v(i,"style",s="background-color: "+t[20]),v(e,"class","PinturaPicker")},m(x,k){tt(x,e,k),Tt(e,i),Tt(i,n),Tt(n,r),t[38](i),Tt(e,l),It(c,e,null),Tt(e,d),m&&m.m(e,null),Tt(e,u),y&&y.m(e,null),p=!0,h||(g=[Mt(r,"nudge",t[29]),ji(Ts.call(null,r,{preventDefault:!0})),Mt(i,"pointerdown",t[28])],h=!0)},p(x,k){(!p||524288&k[0]&&o!==(o=`background-color:${x[19]};`))&&v(r,"style",o),(!p||25165824&k[0]&&a!==(a=`transform:translate(${x[24]}%,${x[23]}%)`))&&v(n,"style",a),(!p||1048576&k[0]&&s!==(s="background-color: "+x[20]))&&v(i,"style",s);const w={};1048576&k[0]&&(w.knobStyle="background-color:"+x[20]),32768&k[0]&&(w.value=x[15]),c.$set(w),x[11]?m?(m.p(x,k),2048&k[0]&&P(m,1)):(m=ug(x),m.c(),P(m,1),m.m(e,u)):m&&(ze(),D(m,1,1,()=>{m=null}),Fe()),x[14]?y?y.p(x,k):(y=pg(x),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},i(x){p||(P(c.$$.fragment,x),P(m),p=!0)},o(x){D(c.$$.fragment,x),D(m),p=!1},d(x){x&&Q(e),t[38](null),Et(c),m&&m.d(),y&&y.d(),h=!1,_i(g)}}}function ug(t){let e,i;return e=new Vh({props:{class:"PinturaOpacityPicker",knobStyle:"background-color:"+t[17],trackStyle:`background-image:linear-gradient(to right,${t[18]},${t[19]})`,onchange:t[27],value:t[16],min:0,max:1,step:.01}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};131072&r[0]&&(o.knobStyle="background-color:"+n[17]),786432&r[0]&&(o.trackStyle=`background-image:linear-gradient(to right,${n[18]},${n[19]})`),65536&r[0]&&(o.value=n[16]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function pg(t){let e,i,n;return{c(){e=pt("input"),v(e,"class","PinturaColorPickerInput"),v(e,"type","text"),e.value=t[22]},m(r,o){tt(r,e,o),i||(n=[Mt(e,"keydown",t[31]),Mt(e,"input",t[30])],i=!0)},p(r,o){4194304&o[0]&&e.value!==r[22]&&(e.value=r[22])},d(r){r&&Q(e),i=!1,_i(n)}}}function hg(t){let e,i;return e=new Ja({props:{label:lr(t[10].labelColorPalette,t[10]),class:ci(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:t[1],value:t[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[2].map(t[39]),selectedIndex:t[3],optionMapper:t[7],optionLabelClass:t[6],onchange:t[40],$$slots:{option:[b5,({option:n})=>({52:n}),({option:n})=>[0,n?2097152:0]],group:[x5,({option:n})=>({52:n}),({option:n})=>[0,n?2097152:0]]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};1024&r[0]&&(o.label=lr(n[10].labelColorPalette,n[10])),512&r[0]&&(o.class=ci(["PinturaColorPresets",n[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&r[0]&&(o.name=n[1]),16&r[0]&&(o.value=n[4]),1028&r[0]&&(o.options=n[2].map(n[39])),8&r[0]&&(o.selectedIndex=n[3]),128&r[0]&&(o.optionMapper=n[7]),64&r[0]&&(o.optionLabelClass=n[6]),512&r[0]|6291456&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function x5(t){let e,i,n=t[52].label+"";return{c(){e=pt("span"),i=cn(n),v(e,"slot","group")},m(r,o){tt(r,e,o),Tt(e,i)},p(r,o){2097152&o[1]&&n!==(n=r[52].label+"")&&zn(i,n)},d(r){r&&Q(e)}}}function mg(t){let e,i,n=t[52].label+"";return{c(){e=pt("span"),i=cn(n),v(e,"class","PinturaButtonLabel")},m(r,o){tt(r,e,o),Tt(e,i)},p(r,o){2097152&o[1]&&n!==(n=r[52].label+"")&&zn(i,n)},d(r){r&&Q(e)}}}function b5(t){let e,i,n,r;i=new Nh({props:{title:t[52].label,color:t[52].value}});let o=!t[9]&&mg(t);return{c(){e=pt("span"),At(i.$$.fragment),n=ce(),o&&o.c(),v(e,"slot","option")},m(a,s){tt(a,e,s),It(i,e,null),Tt(e,n),o&&o.m(e,null),r=!0},p(a,s){const l={};2097152&s[1]&&(l.title=a[52].label),2097152&s[1]&&(l.color=a[52].value),i.$set(l),a[9]?o&&(o.d(1),o=null):o?o.p(a,s):(o=mg(a),o.c(),o.m(e,null))},i(a){r||(P(i.$$.fragment,a),r=!0)},o(a){D(i.$$.fragment,a),r=!1},d(a){a&&Q(e),Et(i),o&&o.d()}}}function v5(t){let e,i,n,r=t[13]&&dg(t),o=t[12]&&hg(t);return{c(){e=pt("div"),r&&r.c(),i=ce(),o&&o.c(),v(e,"slot","details"),v(e,"class","PinturaColorPickerPanel")},m(a,s){tt(a,e,s),r&&r.m(e,null),Tt(e,i),o&&o.m(e,null),n=!0},p(a,s){a[13]?r?(r.p(a,s),8192&s[0]&&P(r,1)):(r=dg(a),r.c(),P(r,1),r.m(e,i)):r&&(ze(),D(r,1,1,()=>{r=null}),Fe()),a[12]?o?(o.p(a,s),4096&s[0]&&P(o,1)):(o=hg(a),o.c(),P(o,1),o.m(e,null)):o&&(ze(),D(o,1,1,()=>{o=null}),Fe())},i(a){n||(P(r),P(o),n=!0)},o(a){D(r),D(o),n=!1},d(a){a&&Q(e),r&&r.d(),o&&o.d()}}}function w5(t){let e,i;return e=new Tu({props:{buttonClass:ci(["PinturaColorPickerButton",t[5]]),$$slots:{details:[v5],label:[y5]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};32&r[0]&&(o.buttonClass=ci(["PinturaColorPickerButton",n[5]])),33554399&r[0]|4194304&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function S5(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,y,{label:x}=e,{name:k}=e,{options:w=[]}=e,{selectedIndex:C=-1}=e,{value:M}=e,{buttonClass:R}=e,{optionLabelClass:O}=e,{optionMapper:T}=e,{onchange:z}=e,{title:F}=e,{hidePresetLabel:B=!0}=e,{locale:f}=e,{enableOpacity:V=!0}=e,{enablePresets:J=!0}=e,{enablePicker:S=!0}=e,{enableInput:j=!1}=e;const K=(Z,St)=>{if(u=[Z[0],Z[1],Z[2]],St){let nt=((mt,Ft,oe)=>{let Rt=Math.max(mt,Ft,oe),Ut=Rt-Math.min(mt,Ft,oe),Ot=Ut&&(Rt==mt?(Ft-oe)/Ut:Rt==Ft?2+(oe-mt)/Ut:4+(mt-Ft)/Ut);return[60*(Ot<0?Ot+6:Ot)/360,Rt&&Ut/Rt,Rt]})(...u);i(15,s=nt[0]),i(33,l=nt[1]),i(34,c=nt[2]),i(16,d=$i(Z[3])?Z[3]:1)}i(17,p=Pr(Z)),i(18,h=Pr([...u,0])),i(19,g=Pr([...u,1])),i(20,m=Pr(lg(s,1,1)))},dt=()=>{const Z=[...lg(s,l,c),d];K(Z),z(Z)},lt=Z=>{const St=Z.length===3?[...Z,1]:Z;K(St,!0),z(St)},N=(Z,St)=>{const nt=Xi(Z.x/St.width,0,1),mt=Xi(Z.y/St.height,0,1);var Ft;Ft=1-mt,i(33,l=nt),i(34,c=Ft),d===0&&i(16,d=1),dt()};let ft,$t,Lt,ct;const et=Z=>{const St=On(sm(Z),ct);N(Bn(_e(Lt),St),$t)},ht=Z=>{$t=void 0,document.documentElement.removeEventListener("pointermove",et),document.documentElement.removeEventListener("pointerup",ht)};let Y;return t.$$set=Z=>{"label"in Z&&i(0,x=Z.label),"name"in Z&&i(1,k=Z.name),"options"in Z&&i(2,w=Z.options),"selectedIndex"in Z&&i(3,C=Z.selectedIndex),"value"in Z&&i(4,M=Z.value),"buttonClass"in Z&&i(5,R=Z.buttonClass),"optionLabelClass"in Z&&i(6,O=Z.optionLabelClass),"optionMapper"in Z&&i(7,T=Z.optionMapper),"onchange"in Z&&i(32,z=Z.onchange),"title"in Z&&i(8,F=Z.title),"hidePresetLabel"in Z&&i(9,B=Z.hidePresetLabel),"locale"in Z&&i(10,f=Z.locale),"enableOpacity"in Z&&i(11,V=Z.enableOpacity),"enablePresets"in Z&&i(12,J=Z.enablePresets),"enablePicker"in Z&&i(13,S=Z.enablePicker),"enableInput"in Z&&i(14,j=Z.enableInput)},t.$$.update=()=>{16&t.$$.dirty[0]|16&t.$$.dirty[1]&&(!M||y&&Ka(M,y)||(i(35,y=[...M]),K(M,!0))),4&t.$$.dirty[1]&&i(24,n=100*l),8&t.$$.dirty[1]&&i(23,r=100-100*c),32&t.$$.dirty[1]&&i(37,o=!!Y&&Y.length>=4&&Y.length<=5),18448&t.$$.dirty[0]|64&t.$$.dirty[1]&&i(22,a=j&&M?((Z,St,nt)=>{let mt=Z.map(Ft=>Math.round(255*Ft).toString(16).toLowerCase().padStart(2,"0"));return(!St&&mt.length>3||mt[3]==="ff")&&mt.pop(),nt&&(mt=mt.map(Ft=>Ft.substring(0,1))),"#"+mt.join("")})(M,V,o):void 0)},[x,k,w,C,M,R,O,T,F,B,f,V,J,S,j,s,d,p,h,g,m,ft,a,r,n,lt,Z=>{i(15,s=Z),d===0&&i(16,d=1),dt()},Z=>{i(16,d=Z),dt()},Z=>{Z.stopPropagation(),$t=Hn(ft.offsetWidth,ft.offsetHeight),Lt=(St=>rt(St.offsetX,St.offsetY))(Z),ct=sm(Z),N(Lt,$t),document.documentElement.addEventListener("pointermove",et),document.documentElement.addEventListener("pointerup",ht)},Z=>{$t=Hn(ft.offsetWidth,ft.offsetHeight);const St=n/100*$t.width,nt=r/100*$t.height;N({x:St+Z.detail.x,y:nt+Z.detail.y},$t)},Z=>{const{value:St}=Z.target,nt=St.length;if(!St.startsWith("#")||nt<4||nt===6||nt===8||nt>9||!V&&nt>7)return;const mt=C2(St);mt&&(i(36,Y=St),K(mt),z(mt))},Z=>{Z.stopPropagation()},z,l,c,y,Y,o,function(Z){Ai[Z?"unshift":"push"](()=>{ft=Z,i(21,ft)})},([Z,St])=>[Z,Qi(St)?St(f):St],Z=>lt(Z.value)]}class k5 extends si{constructor(e){super(),ai(this,e,S5,w5,ti,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:32,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13,enableInput:14},null,[-1,-1])}}function C5(t){let e,i,n;return i=new fo({props:{items:t[0]}}),{c(){e=pt("div"),At(i.$$.fragment),v(e,"class","PinturaShorthandControl PinturaShapeStyle")},m(r,o){tt(r,e,o),It(i,e,null),n=!0},p(r,[o]){const a={};1&o&&(a.items=r[0]),i.$set(a)},i(r){n||(P(i.$$.fragment,r),n=!0)},o(r){D(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Et(i)}}}function T5(t,e,i){let n,r,{value:o}=e,{onchange:a}=e,{controls:s=[]}=e;return t.$$set=l=>{i(6,e=Cn(Cn({},e),Rc(l))),"value"in l&&i(1,o=l.value),"onchange"in l&&i(2,a=l.onchange),"controls"in l&&i(3,s=l.controls)},t.$$.update=()=>{i(4,n=(l=>{const{controls:c,...d}=l;return d})(e)),30&t.$$.dirty&&i(0,r=s.map((l,c)=>{const[d,u,p]=l;return[d,u,{...n,...p,value:o[c],onchange:h=>{const g=[...o];g[c]=h,a(g)}}]}))},e=Rc(e),[r,o,a,s,n]}class M5 extends si{constructor(e){super(),ai(this,e,T5,C5,ti,{value:1,onchange:2,controls:3})}}function $g(t,e,i){const n=t.slice();return n[9]=e[i][0],n[0]=e[i][1],n[10]=e[i][2],n[2]=e[i][3],n}function P5(t){let e,i,n;const r=[t[10]];var o=t[3][t[9]]||t[9];function a(s){let l={};for(let c=0;c<r.length;c+=1)l=Cn(l,r[c]);return{props:l}}return o&&(e=uu(o,a())),{c(){e&&At(e.$$.fragment),i=Tn()},m(s,l){e&&It(e,s,l),tt(s,i,l),n=!0},p(s,l){const c=4&l?Ir(r,[Or(s[10])]):{};if(o!==(o=s[3][s[9]]||s[9])){if(e){ze();const d=e;D(d.$$.fragment,1,0,()=>{Et(d,1)}),Fe()}o?(e=uu(o,a()),At(e.$$.fragment),P(e.$$.fragment,1),It(e,i.parentNode,i)):e=null}else o&&e.$set(c)},i(s){n||(e&&P(e.$$.fragment,s),n=!0)},o(s){e&&D(e.$$.fragment,s),n=!1},d(s){s&&Q(i),e&&Et(e,s)}}}function R5(t){let e,i=t[9],n=t[9]&&Sp(t);return{c(){n&&n.c(),e=Tn()},m(r,o){n&&n.m(r,o),tt(r,e,o)},p(r,o){r[9]?i?ti(i,r[9])?(n.d(1),n=Sp(r),n.c(),n.m(e.parentNode,e)):n.p(r,o):(n=Sp(r),n.c(),n.m(e.parentNode,e)):i&&(n.d(1),n=null),i=r[9]},i:Je,o(r){D(n)},d(r){r&&Q(e),n&&n.d(r)}}}function I5(t){let e,i,n=t[10].innerHTML+"";return{c(){e=new vu(!1),i=Tn(),e.a=i},m(r,o){e.m(n,r,o),tt(r,i,o)},p(r,o){4&o&&n!==(n=r[10].innerHTML+"")&&e.p(n)},i:Je,o:Je,d(r){r&&Q(i),r&&e.d()}}}function E5(t){let e,i=t[10].textContent+"";return{c(){e=cn(i)},m(n,r){tt(n,e,r)},p(n,r){4&r&&i!==(i=n[10].textContent+"")&&zn(e,i)},i:Je,o:Je,d(n){n&&Q(e)}}}function A5(t){let e,i;return e=new fo({props:{items:t[2],discardEmptyItems:!0}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};4&r&&(o.items=n[2]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function Sp(t){let e,i,n,r,o;const a=[A5,E5,I5],s=[];function l(u,p){return u[2]&&u[2].length?0:u[10].textContent?1:u[10].innerHTML?2:-1}~(i=l(t))&&(n=s[i]=a[i](t));let c=[t[4](t[10])],d={};for(let u=0;u<c.length;u+=1)d=Cn(d,c[u]);return{c(){e=pt(t[9]),n&&n.c(),r=ce(),/-/.test(t[9])?Nm(e,d):Vm(e,d)},m(u,p){tt(u,e,p),~i&&s[i].m(e,null),Tt(e,r),o=!0},p(u,p){let h=i;i=l(u),i===h?~i&&s[i].p(u,p):(n&&(ze(),D(s[h],1,1,()=>{s[h]=null}),Fe()),~i?(n=s[i],n?n.p(u,p):(n=s[i]=a[i](u),n.c()),P(n,1),n.m(e,r)):n=null),d=Ir(c,[4&p&&u[4](u[10])]),/-/.test(u[9])?Nm(e,d):Vm(e,d)},i(u){o||(P(n),o=!0)},o(u){D(n),o=!1},d(u){u&&Q(e),~i&&s[i].d()}}}function gg(t,e){let i,n,r,o,a,s;const l=[R5,P5],c=[];function d(u,p){return 4&p&&(n=null),n==null&&(n=!u[5](u[9])),n?0:1}return r=d(e,-1),o=c[r]=l[r](e),{key:t,first:null,c(){i=Tn(),o.c(),a=Tn(),this.first=i},m(u,p){tt(u,i,p),c[r].m(u,p),tt(u,a,p),s=!0},p(u,p){let h=r;r=d(e=u,p),r===h?c[r].p(e,p):(ze(),D(c[h],1,1,()=>{c[h]=null}),Fe(),o=c[r],o?o.p(e,p):(o=c[r]=l[r](e),o.c()),P(o,1),o.m(a.parentNode,a))},i(u){s||(P(o),s=!0)},o(u){D(o),s=!1},d(u){u&&Q(i),c[r].d(u),u&&Q(a)}}}function L5(t){let e,i,n=[],r=new Map,o=t[2];const a=s=>s[0]+s[1];for(let s=0;s<o.length;s+=1){let l=$g(t,o,s),c=a(l);r.set(c,n[s]=gg(c,l))}return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Tn()},m(s,l){for(let c=0;c<n.length;c+=1)n[c].m(s,l);tt(s,e,l),i=!0},p(s,[l]){62&l&&(o=s[2],ze(),n=La(n,l,a,1,s,o,r,e.parentNode,Ss,gg,e,$g),Fe())},i(s){if(!i){for(let l=0;l<o.length;l+=1)P(n[l]);i=!0}},o(s){for(let l=0;l<n.length;l+=1)D(n[l]);i=!1},d(s){for(let l=0;l<n.length;l+=1)n[l].d(s);s&&Q(e)}}}function z5(t,e,i){let n,r,{items:o}=e,{discardEmptyItems:a=!0}=e,{key:s=""}=e;const l={Button:ks,ImageButton:f2,ImageButtonList:_h,Dropdown:k2,RadioGroup:Ja,Input:S2,Panel:e5,ProgressIndicator:$2,ShapeStyle:$5,ToggleSlider:p5,ColorPicker:k5,ShorthandControl:M5},c=u=>!Oe(u)||!!l[u],d=u=>{if(!u)return!1;const[p,,h,g=[]]=u;return!!c(p)||g.some(d)||h.textContent||h.innerHTML};return t.$$set=u=>{"items"in u&&i(6,o=u.items),"discardEmptyItems"in u&&i(7,a=u.discardEmptyItems),"key"in u&&i(0,s=u.key)},t.$$.update=()=>{1&t.$$.dirty&&i(1,n=s),192&t.$$.dirty&&i(2,r=(o&&a?o.filter(d):o)||[])},[s,n,r,l,(u={})=>{const{textContent:p,innerHTML:h,...g}=u;return g},c,o,a]}class fo extends si{constructor(e){super(),ai(this,e,z5,L5,ti,{items:6,discardEmptyItems:7,key:0})}}let kp=null;var F5=t=>{if(kp===null&&(kp=Br()&&"visualViewport"in window),!kp)return!1;const e=visualViewport.height,i=()=>{t(visualViewport.height<e?"visible":"hidden")};return visualViewport.addEventListener("resize",i),()=>visualViewport.removeEventListener("resize",i)};function fg(t){let e,i;const n=[{onclick:t[1]},t[3]];let r={};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new ks({props:r}),{c(){At(e.$$.fragment)},m(o,a){It(e,o,a),i=!0},p(o,a){const s=10&a[0]?Ir(n,[2&a[0]&&{onclick:o[1]},8&a[0]&&Or(o[3])]):{};e.$set(s)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),i=!1},d(o){Et(e,o)}}}function yg(t){let e,i;const n=[{onclick:t[0]},{class:"PinturaInputFormButtonConfirm"},t[2]];let r={};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new ks({props:r}),{c(){At(e.$$.fragment)},m(o,a){It(e,o,a),i=!0},p(o,a){const s=5&a[0]?Ir(n,[1&a[0]&&{onclick:o[0]},n[1],4&a[0]&&Or(o[2])]):{};e.$set(s)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),i=!1},d(o){Et(e,o)}}}function D5(t){let e,i,n,r,o,a,s,l,c=t[3]&&fg(t);const d=t[24].default,u=cr(d,t,t[23],null);let p=t[2]&&yg(t);return{c(){e=pt("div"),i=pt("div"),c&&c.c(),n=ce(),r=pt("div"),u&&u.c(),o=ce(),p&&p.c(),v(r,"class","PinturaInputFormFields"),v(i,"class","PinturaInputFormInner"),v(e,"class","PinturaInputForm"),v(e,"data-layout",t[4]),v(e,"style",t[6])},m(h,g){tt(h,e,g),Tt(e,i),c&&c.m(i,null),Tt(i,n),Tt(i,r),u&&u.m(r,null),Tt(i,o),p&&p.m(i,null),t[25](e),a=!0,s||(l=[Mt(r,"keydown",t[10]),Mt(e,"focusin",t[7]),Mt(e,"focusout",t[8]),Mt(e,"measure",t[9]),ji(Er.call(null,e))],s=!0)},p(h,g){h[3]?c?(c.p(h,g),8&g[0]&&P(c,1)):(c=fg(h),c.c(),P(c,1),c.m(i,n)):c&&(ze(),D(c,1,1,()=>{c=null}),Fe()),u&&u.p&&(!a||8388608&g[0])&&ur(u,d,h,h[23],a?dr(d,h[23],g,null):pr(h[23]),null),h[2]?p?(p.p(h,g),4&g[0]&&P(p,1)):(p=yg(h),p.c(),P(p,1),p.m(i,null)):p&&(ze(),D(p,1,1,()=>{p=null}),Fe()),(!a||16&g[0])&&v(e,"data-layout",h[4]),(!a||64&g[0])&&v(e,"style",h[6])},i(h){a||(P(c),P(u,h),P(p),a=!0)},o(h){D(c),D(u,h),D(p),a=!1},d(h){h&&Q(e),c&&c.d(),u&&u.d(h),p&&p.d(),t[25](null),s=!1,_i(l)}}}function B5(t,e,i){let n,r,o,a,s,{$$slots:l={},$$scope:c}=e,{onconfirm:d}=e,{oncancel:u}=e,{autoFocus:p=!0}=e,{autoPositionCursor:h=!0}=e,{buttonConfirm:g}=e,{buttonCancel:m}=e,{layout:y="stack"}=e,{parentRect:x}=e,{align:k}=e,{justify:w}=e,{parentMargin:C=16}=e,{panelOffset:M=Ji()}=e,R=!1,O,T,z="",F=0;const B=()=>{const S=s.querySelector("input, textarea");S.focus(),F>=1||S.select()},f=()=>{R=!0,J||!ya()&&!gu()||i(19,z="top:1em;bottom:auto;"),ya()&&(S=>{let j;const K=lt=>j=lt.touches[0].screenY,dt=lt=>{const N=lt.touches[0].screenY,ft=lt.target;/textarea/i.test(ft.nodeName)?(N>j?ft.scrollTop==0&&lt.preventDefault():N<j?ft.scrollTop+ft.offsetHeight==ft.scrollHeight&&lt.preventDefault():lt.preventDefault(),j=N):lt.preventDefault()};S.addEventListener("touchstart",K),S.addEventListener("touchmove",dt)})(s),i(20,F=1)};let V;const J=F5(S=>{o?S!=="hidden"||R?(clearTimeout(T),T=void 0,i(19,z=`top:${visualViewport.height-O.height-M.y}px`),S==="visible"?(i(5,s.dataset.stick=!0,s),B(),f()):(R=!1,i(20,F=0))):B():i(19,z="top: 4.5em; bottom: auto")});return ws(()=>{p&&B()}),No(()=>{J&&J()}),t.$$set=S=>{"onconfirm"in S&&i(0,d=S.onconfirm),"oncancel"in S&&i(1,u=S.oncancel),"autoFocus"in S&&i(11,p=S.autoFocus),"autoPositionCursor"in S&&i(12,h=S.autoPositionCursor),"buttonConfirm"in S&&i(2,g=S.buttonConfirm),"buttonCancel"in S&&i(3,m=S.buttonCancel),"layout"in S&&i(4,y=S.layout),"parentRect"in S&&i(13,x=S.parentRect),"align"in S&&i(14,k=S.align),"justify"in S&&i(15,w=S.justify),"parentMargin"in S&&i(16,C=S.parentMargin),"panelOffset"in S&&i(17,M=S.panelOffset),"$$scope"in S&&i(23,c=S.$$scope)},t.$$.update=()=>{385024&t.$$.dirty[0]&&i(21,n=x&&O?((S,j,K,dt,lt)=>{let N,ft;return N=dt==="center"?S.x+.5*S.width-.5*j.width:dt==="right"?S.x+S.width-j.width-lt:S.x+lt,ft=K==="center"?S.y+.5*S.height-.5*j.height:K==="bottom"?S.y+S.height-j.height-lt:S.y+lt,`left:${N}px;top:${ft}px;right:auto;bottom:auto;`})(x,O,k,w,C):void 0),32&t.$$.dirty[0]&&i(22,r=s&&getComputedStyle(s)),4194304&t.$$.dirty[0]&&(o=r&&r.getPropertyValue("--editor-modal")==="1"),3670016&t.$$.dirty[0]&&i(6,a=`opacity:${F};${n||z}`)},[d,u,g,m,y,s,a,S=>{var j;((K=>/textarea/i.test(K))(S.target)||y2(S.target))&&(V=Date.now(),h&&((j=S.target).selectionStart=j.selectionEnd=j.value.length),clearTimeout(T),T=setTimeout(f,200))},S=>{Date.now()-V>50||(S.stopPropagation(),B())},({detail:S})=>{i(18,O={width:S.width,height:S.height})},S=>S.key==="Enter"?d():S.key==="Escape"?u():void 0,p,h,x,k,w,C,M,O,z,F,n,r,c,l,function(S){Ai[S?"unshift":"push"](()=>{s=S,i(5,s)})}]}class T2 extends si{constructor(e){super(),ai(this,e,B5,D5,ti,{onconfirm:0,oncancel:1,autoFocus:11,autoPositionCursor:12,buttonConfirm:2,buttonCancel:3,layout:4,parentRect:13,align:14,justify:15,parentMargin:16,panelOffset:17},null,[-1,-1])}}var xg=(t,e)=>{t.fastSeek&&t.fastSeek(e),t.currentTime=e};const O5=["aspectRatio","isRotatedSideways","flip","cropSize"],bg=Eh.map(([t])=>t).filter(t=>!O5.includes(t));var ss=(t,e)=>new CustomEvent("ping",{detail:{type:t,data:e},cancelable:!0,bubbles:!0}),M2=(t,e)=>(e?zh(t,e):t).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),vg=(t,e=Zi)=>{const{subscribe:i,set:n}=le(void 0);return{subscribe:i,destroy:((r,o)=>{const a=matchMedia(r);return a.addListener(o),o(a),{get matches(){return a.matches},destroy:()=>a.removeListener(o)}})(t,({matches:r})=>n(e(r))).destroy}},wg=(t,e,i)=>new Promise((n,r)=>{(async()=>{nl(t)&&n(await t2(t));const o=await e.read(t),a=l=>Uf(l,i).then(c=>e.apply(c,o)).then(n).catch(r);if(jf(t)||!Hf()||Ea()||ya())return a(t);let s;try{s=await Dc((l,c)=>createImageBitmap(l).then(d=>c(null,d)).catch(c),[t])}catch{}s&&s.width?await $u()?Dh()&&o>1?n(await(async l=>Fc(await Bl(l)))(s)):n(s):n(e.apply(s,o)):a(t)})()}),Sg=(t,e)=>new Promise(async i=>{if(t.width<e.width&&t.height<e.height)return i(t);const n=Math.min(e.width/t.width,e.height/t.height),r=n*t.width,o=n*t.height,a=hn("canvas",{width:r,height:o}),s=a.getContext("2d",{willReadFrequently:!0}),l=Il(t)?await Bl(t):t;s.drawImage(l,0,0,r,o),i(Fc(a))});let Cp=null;var W5=()=>{if(Cp===null){let t=hn("canvas");Cp=!!wu(t),Qn(t),t=void 0}return Cp};const kg=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],qs={precision:1e-4},Hd={precision:.01*qs.precision};var _5=()=>{const t=[],e=[],i=[],n=()=>{e.forEach(o=>o(i))},r=o=>{o.unsub=o.subscribe(a=>((s,l)=>{const c=t.indexOf(s);c<0||(i[c]=l,n())})(o,a)),n()};return{get length(){return t.length},clear:()=>{t.forEach(o=>o.unsub()),t.length=0,i.length=0},unshift:o=>{t.unshift(o),r(o)},get:o=>t[o],push:o=>{t.push(o),r(o)},remove:o=>{o.unsub();const a=t.indexOf(o);t.splice(a,1),i.splice(a,1)},forEach:o=>t.forEach(o),filter:o=>t.filter(o),subscribe:o=>(e.push(o),o(i),()=>{e.splice(e.indexOf(o),1)})}},Tp=t=>t[0]<.25&&t[1]<.25&&t[2]<.25,P2=(t={})=>new Promise(e=>{const{accept:i="image/*"}=t,n=hn("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:i}),r=()=>{const[o]=n.files;n.parentNode&&n.remove(),n.removeEventListener("change",r),e(o)};n.addEventListener("change",r),ya()&&document.body.append(n),n.click()}),Lc=t=>{try{return t()}catch(e){console.error(e)}},V5=([t,e])=>t+.5*(e-t),gs=t=>Math.round(100*t),Hh=t=>rt(t.clientX,t.clientY),qp=(t,e,i)=>{const n=Hh(t);return On(On(n,e),i)};function N5(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,y,x,k,w,C,M,R,O,{root:T}=e,{locale:z}=e,{stores:F}=e,{allowPan:B=!0}=e,{allowZoom:f=!0}=e,{enablePan:V=!0}=e,{enableZoom:J=!0}=e,{enableZoomControls:S=J}=e,{enableZoomInput:j=!0}=e,{enablePanInput:K=!0}=e,{enablePanLimit:dt=!0}=e,{panLimitGutterScalar:lt=0}=e,{zoomOptions:N=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:ft=.25}=e,{zoomAdjustFactor:$t=.1}=e,{zoomAdjustWheelFactor:Lt=1}=e,{elasticity:ct=5}=e,{imageSelectionRectCentered:et}=e,{imageSelectionRectScalar:ht}=e,{zoomLevel:Y=null}=e,{zoomControls:Z}=e,{zoomMultiTouching:St=!1}=e;const{isAnimated:nt,isInteracting:mt,rootRect:Ft,stageRect:oe,stageScalar:Rt,imageSelectionPan:Ut,imageSelectionZoom:Ot,imageSelectionStageFitScalar:U,imageSelectionRect:wt,imageSelectionStoredState:xt,imagePreviewUpscale:Gt}=F;E(t,nt,ot=>i(70,R=ot)),E(t,mt,ot=>i(69,C=ot)),E(t,Ft,ot=>i(66,x=ot)),E(t,oe,ot=>i(65,y=ot)),E(t,Rt,ot=>i(46,M=ot)),E(t,Ut,ot=>i(64,h=ot)),E(t,Ot,ot=>i(43,p=ot)),E(t,U,ot=>i(44,g=ot)),E(t,wt,ot=>i(67,k=ot)),E(t,xt,ot=>i(71,O=ot)),E(t,Gt,ot=>i(45,m=ot));const de=ln("fixScrollDirection");E(t,de,ot=>i(68,w=ot));let ue=!1,be,$e,_,ve;const gi=ot=>{const pe=T.querySelector(".PinturaMain > .PinturaUtilMain")||T.querySelector('div[tabindex="0"] .PinturaUtilMain');return!!pe&&!!pe.contains(ot.target)&&!Ac(ot.target)},ye=(ot={})=>{const{pan:pe=h,zoom:ee=p}=ot;kt(xt,O={translation:pe,zoom:ee},O)},Vt=()=>h&&h.x===0&&h.y===0,Ce=()=>{kt(Ot,p=void 0,p),Vt()||kt(Ut,h=Ji(),h),He.set(void 0,{hard:!0})},Re=()=>{Ce(),ye()},He=oi(void 0,{precision:.01});He.subscribe(ot=>{if(ot===void 0)return kt(Ot,p=void 0,p),void(Vt()||kt(Ut,h=Ji(),h));const pe=p;ot<=1?Vt()||kt(Ut,h=Ji(),h):ot<=pe&&kt(Ut,h=Dr(h,.8),h),kt(Ot,p=ot,p)});const bi=ot=>{He.update(pe=>{const ee=ot(pe||g);return ye({zoom:ee}),ee})},vt=ot=>{ot?He.set(ot,{hard:R===!1}):(ot=void 0,He.set(void 0,{hard:!0})),kt(Ot,p=ot,p),ye({zoom:ot})},bt=(ot,pe)=>{const ee=ht*pe,ge={...et},Dt=1-Xi(lt,0,1);Fr(ge,ee<Dt?ee:Dt);const Se={...et};Fr(Se,ee),Qo(Se,ot);const fi={...Se};return Se.x>ge.x&&(fi.x=ge.x),Se.y>ge.y&&(fi.y=ge.y),Se.x+Se.width<ge.x+ge.width&&(fi.x=ge.x+ge.width-Se.width),Se.y+Se.height<ge.y+ge.height&&(fi.y=ge.y+ge.height-Se.height),On(Ti(fi),Ti(ge))},Ge=({translation:ot,zoom:pe=1,elastify:ee=!0})=>{if(!be)return;let ge=ot;const Dt=rt(be.x+ge.x,be.y+ge.y);if(!dt)return Dt;const Se=bt(Dt,pe);return ee?ov(Se,Dt,ct):Se};let Me,ni;const Ue=()=>{ni=void 0,kt(mt,C=!0,C),i(34,ue=K),Me=!1,_=!1,be={...h},$e=m?p||g:o?p||1:p||g},ei=ot=>{const{scalar:pe,translation:ee,isMultiTouching:ge}=ot.detail;if(!be||!ge&&!K)return;ge&&Dr(ee,.5),(K||ge)&&(Me=!0),St||i(13,St=ge);const Dt=n?Xi($e*pe,s,l):1,Se=Ge({translation:ee,zoom:Dt,elastify:!0}),fi=ps(Se);ve=ps(h),_=fi<ve,n&&Ot.set(Dt),Ut.set(Se),ni=St&&{translation:ot.detail.translation,scalar:pe}},vi=ot=>{kt(mt,C=!1,C),i(34,ue=!1),i(13,St=!1),_&&ve<50&&(be=void 0,$e=void 0,Ut.set(Ji()))},di=ot=>{kt(mt,C=!1,C),i(34,ue=!1),i(13,St=!1),Promise.resolve().then(()=>{if(Me&&be){const pe=ni||ot.detail,ee=n?Xi($e*pe.scalar,s,l):1,ge=Ge({elastify:!1,translation:pe.translation,zoom:ee});Ut.set(ge)}be=void 0,$e=void 0,K&&ot.detail.isDoubleTap&&Re(),ye()})};let Li,X=Date.now(),jt=0,G=!1,Bt=!1;const fe=ot=>{if(!gi(ot)||(ot.preventDefault(),ot.stopPropagation(),Bt))return;clearTimeout(Li);const pe=Cu(ot,{fixScrollDirection:w}),ee=Date.now(),ge=ee-X;X=ee;const Dt=Math.abs(pe/ge)>.2;jt=Dt?jt+1:0;const Se=1+-1*pe*Lt/(Dt?50:100),fi=qp(ot,x,y);Qt(fi,Se,{isZoomingFast:Dt})},Qt=(ot,pe,{isZoomingFast:ee})=>{const ge=m?p||g:o?p||1:p||g,Dt=ge*pe,Se=Ji(),fi=h,ui=m?g:o?1:g,Be=Math.abs(Dt-ui),yi=Dt<ge,Mi=ge>ui&&yi||ge<ui&&Dt>ge,xe=jt>=5;if(ee||(G=!1),jt>0&&!G&&(G=Mi),xe&&G)return Re(),Bt=!0,void setTimeout(()=>{Bt=!1},100);if(xe)return;!ee&&Mi&&Be<=.05&&(Li=setTimeout(()=>{Re()},250)),kt(Ot,p=Xi(Dt,s,l),p);const he=Ci(k);Fr(he,ge),Qo(he,fi);const Ie=Ti(he),an=Ci(he);Fr(an,p-ge+1,ot);const Ui=Ti(an),yn=lm(On(Ui,Ie),ge);((mn,$n,tn)=>{mn.x=$n,mn.y=tn})(Se,fi.x+yn.x,fi.y+yn.y),kt(Ut,h=yi&&ee?Dr(_e(h),.85):bt(Se,ge),h),ye()},se=ot=>(ot?"add":"remove")+"EventListener";let zt,We,Ee,je;const Ke=ot=>{ot.preventDefault(),We={...h},je=Ci(k),Ee=qp(ot,x,y),zt=m?p||g:o?p||1:p||g},it=ot=>{ot.preventDefault(),kt(Ot,p=Xi(ot.scale*zt,s,l),p);const pe=Ci(je);Fr(pe,zt),Qo(pe,We);const ee=Ti(pe),ge=Ci(pe);Fr(ge,p-zt+1,Ee);const Dt=Ti(ge),Se=lm(On(Dt,ee),zt),fi={x:We.x+Se.x,y:We.y+Se.y};kt(Ut,h=bt(fi,p),h)},Xt=ot=>{ot.preventDefault()},Nt=ot=>{T[se(ot)]("wheel",fe),ya()||(T[se(ot)]("gesturestart",Ke),T[se(ot)]("gesturechange",it),T[se(ot)]("gestureend",Xt))},Zt=ot=>{const pe=se(ot);T[pe]("interactionstart",Ue),T[pe]("interactionupdate",ei),T[pe]("interactionrelease",vi),T[pe]("interactionend",di)};let Yt;return ws(()=>{Yt=Cs(T,{drag:!0,pinch:!0,inertia:!0,inertiaDurationMultiplier:10,shouldStartInteraction:gi})}),No(()=>{Nt(!1),Zt(!1),Yt.destroy(),Yt=void 0}),t.$$set=ot=>{"root"in ot&&i(14,T=ot.root),"locale"in ot&&i(15,z=ot.locale),"stores"in ot&&i(16,F=ot.stores),"allowPan"in ot&&i(17,B=ot.allowPan),"allowZoom"in ot&&i(18,f=ot.allowZoom),"enablePan"in ot&&i(19,V=ot.enablePan),"enableZoom"in ot&&i(20,J=ot.enableZoom),"enableZoomControls"in ot&&i(21,S=ot.enableZoomControls),"enableZoomInput"in ot&&i(22,j=ot.enableZoomInput),"enablePanInput"in ot&&i(23,K=ot.enablePanInput),"enablePanLimit"in ot&&i(24,dt=ot.enablePanLimit),"panLimitGutterScalar"in ot&&i(25,lt=ot.panLimitGutterScalar),"zoomOptions"in ot&&i(26,N=ot.zoomOptions),"zoomAdjustStep"in ot&&i(27,ft=ot.zoomAdjustStep),"zoomAdjustFactor"in ot&&i(28,$t=ot.zoomAdjustFactor),"zoomAdjustWheelFactor"in ot&&i(29,Lt=ot.zoomAdjustWheelFactor),"elasticity"in ot&&i(30,ct=ot.elasticity),"imageSelectionRectCentered"in ot&&i(31,et=ot.imageSelectionRectCentered),"imageSelectionRectScalar"in ot&&i(32,ht=ot.imageSelectionRectScalar),"zoomLevel"in ot&&i(33,Y=ot.zoomLevel),"zoomControls"in ot&&i(12,Z=ot.zoomControls),"zoomMultiTouching"in ot&&i(13,St=ot.zoomMultiTouching)},t.$$.update=()=>{var ot,pe;5505024&t.$$.dirty[0]&&i(36,n=f&&J&&j),655360&t.$$.dirty[0]&&i(35,r=B&&V),393216&t.$$.dirty[0]&&(B||f?(kt(Ot,p=J?O.zoom:void 0,p),kt(Ut,h=V?_e(O.translation):Vt()?h:Ji(),h),He.set(p)):Ce()),32768&t.$$.dirty[1]&&(o=M>=1),67141632&t.$$.dirty[0]|57344&t.$$.dirty[1]&&i(40,a=[(m||M<1)&&[g,gs(g)+"%",{sublabel:z.labelZoomFit}],...N.map(ee=>[ee,gs(ee)+"%"])].filter(Boolean).map(ee=>(ee[0]===1&&(ee[2]={sublabel:z.labelZoomActual}),ee)).sort((ee,ge)=>{const Dt=ee[0]||g,Se=ge[0]||g;return Dt<Se?-1:Se<Dt?1:0})),8704&t.$$.dirty[1]&&i(38,s=Math.min(a.reduce((ee,[ge])=>ge<ee?ge:ee,Number.MAX_SAFE_INTEGER),g)),512&t.$$.dirty[1]&&i(37,l=a.reduce((ee,[ge])=>ge>ee?ge:ee,Number.MIN_SAFE_INTEGER)),4&t.$$.dirty[1]&&Y!==null&&vt(Y),61440&t.$$.dirty[1]&&i(42,d=p||(m||M<1?g:1)),2560&t.$$.dirty[1]&&i(39,(ot=a.map(([ee])=>ee),pe=d,c=ot.findIndex(ee=>ee===pe))),2048&t.$$.dirty[1]&&i(41,u=gs(d)+"%"),405045248&t.$$.dirty[0]|6080&t.$$.dirty[1]&&i(12,Z=(f||f)&&S?[["Button","zoom-out",{hideLabel:!0,label:z.labelZoomOut,icon:z.iconZoomOut,disabled:p===s,onclick:()=>bi(ee=>Math.max(s,ee-ft)),onhold:()=>bi(ee=>Math.max(s,ee*(1-$t)))}],["Dropdown","zoom-level",{label:u,labelClass:"PinturaFixedWidthCharacters",options:a,selectedIndex:c,onchange:ee=>vt(ee.value)}],["Button","zoom-in",{hideLabel:!0,label:z.labelZoomIn,icon:z.iconZoomIn,disabled:p===l,onclick:()=>bi(ee=>Math.min(l,ee+ft)),onhold:()=>bi(ee=>Math.min(l,ee*(1+$t)))}]]:[]),16384&t.$$.dirty[0]|32&t.$$.dirty[1]&&T&&Nt(n),16384&t.$$.dirty[0]|16&t.$$.dirty[1]&&T&&Zt(r),8404992&t.$$.dirty[0]|24&t.$$.dirty[1]&&T&&T.style.setProperty("--cursor",r&&K?ue?"grabbing":"grab":"")},[nt,mt,Ft,oe,Rt,Ut,Ot,U,wt,xt,Gt,de,Z,St,T,z,F,B,f,V,J,S,j,K,dt,lt,N,ft,$t,Lt,ct,et,ht,Y,ue,r,n,l,s,c,a,u,d,p,g,m,M]}class H5 extends si{constructor(e){super(),ai(this,e,N5,null,ti,{root:14,locale:15,stores:16,allowPan:17,allowZoom:18,enablePan:19,enableZoom:20,enableZoomControls:21,enableZoomInput:22,enablePanInput:23,enablePanLimit:24,panLimitGutterScalar:25,zoomOptions:26,zoomAdjustStep:27,zoomAdjustFactor:28,zoomAdjustWheelFactor:29,elasticity:30,imageSelectionRectCentered:31,imageSelectionRectScalar:32,zoomLevel:33,zoomControls:12,zoomMultiTouching:13},null,[-1,-1,-1,-1])}}const{window:Ks}=_y;function Cg(t){let e,i,n,r=t[42]&&Tg(t),o=t[39]&&Ig(t);return{c(){r&&r.c(),e=ce(),o&&o.c(),i=Tn()},m(a,s){r&&r.m(a,s),tt(a,e,s),o&&o.m(a,s),tt(a,i,s),n=!0},p(a,s){a[42]?r?(r.p(a,s),2048&s[1]&&P(r,1)):(r=Tg(a),r.c(),P(r,1),r.m(e.parentNode,e)):r&&(ze(),D(r,1,1,()=>{r=null}),Fe()),a[39]?o?(o.p(a,s),256&s[1]&&P(o,1)):(o=Ig(a),o.c(),P(o,1),o.m(i.parentNode,i)):o&&(ze(),D(o,1,1,()=>{o=null}),Fe())},i(a){n||(P(r),P(o),n=!0)},o(a){D(r),D(o),n=!1},d(a){r&&r.d(a),a&&Q(e),o&&o.d(a),a&&Q(i)}}}function Tg(t){let e,i,n,r,o,a;const s=[U5,j5],l=[];function c(d,u){return d[40]?0:d[35]?1:-1}return~(n=c(t))&&(r=l[n]=s[n](t)),{c(){e=pt("div"),i=pt("p"),r&&r.c(),v(i,"style",t[74]),v(e,"class","PinturaStatus"),v(e,"style",o="opacity: "+t[56])},m(d,u){tt(d,e,u),Tt(e,i),~n&&l[n].m(i,null),a=!0},p(d,u){let p=n;n=c(d),n===p?~n&&l[n].p(d,u):(r&&(ze(),D(l[p],1,1,()=>{l[p]=null}),Fe()),~n?(r=l[n],r?r.p(d,u):(r=l[n]=s[n](d),r.c()),P(r,1),r.m(i,null)):r=null),(!a||4096&u[2])&&v(i,"style",d[74]),(!a||33554432&u[1]&&o!==(o="opacity: "+d[56]))&&v(e,"style",o)},i(d){a||(P(r),a=!0)},o(d){D(r),a=!1},d(d){d&&Q(e),~n&&l[n].d()}}}function j5(t){let e,i,n,r;e=new m2({props:{text:t[35].text||"",onmeasure:t[216]}});let o=t[35].aside&&Mg(t);return{c(){At(e.$$.fragment),i=ce(),o&&o.c(),n=Tn()},m(a,s){It(e,a,s),tt(a,i,s),o&&o.m(a,s),tt(a,n,s),r=!0},p(a,s){const l={};16&s[1]&&(l.text=a[35].text||""),e.$set(l),a[35].aside?o?(o.p(a,s),16&s[1]&&P(o,1)):(o=Mg(a),o.c(),P(o,1),o.m(n.parentNode,n)):o&&(ze(),D(o,1,1,()=>{o=null}),Fe())},i(a){r||(P(e.$$.fragment,a),P(o),r=!0)},o(a){D(e.$$.fragment,a),D(o),r=!1},d(a){Et(e,a),a&&Q(i),o&&o.d(a),a&&Q(n)}}}function U5(t){let e,i,n,r;return e=new m2({props:{text:t[40],onmeasure:t[216]}}),n=new g2({props:{class:"PinturaStatusIcon",offset:t[84],opacity:t[85],$$slots:{default:[X5]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment),i=ce(),At(n.$$.fragment)},m(o,a){It(e,o,a),tt(o,i,a),It(n,o,a),r=!0},p(o,a){const s={};512&a[1]&&(s.text=o[40]),e.$set(s);const l={};4194304&a[2]&&(l.offset=o[84]),8388608&a[2]&&(l.opacity=o[85]),8&a[0]|16&a[19]&&(l.$$scope={dirty:a,ctx:o}),n.$set(l)},i(o){r||(P(e.$$.fragment,o),P(n.$$.fragment,o),r=!0)},o(o){D(e.$$.fragment,o),D(n.$$.fragment,o),r=!1},d(o){Et(e,o),o&&Q(i),Et(n,o)}}}function Mg(t){let e,i;return e=new g2({props:{class:"PinturaStatusButton",offset:t[84],opacity:t[85],$$slots:{default:[G5]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};4194304&r[2]&&(o.offset=n[84]),8388608&r[2]&&(o.opacity=n[85]),16&r[1]|16&r[19]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function Pg(t){let e,i;return e=new $2({props:{progress:t[35].progressIndicator.progress}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};16&r[1]&&(o.progress=n[35].progressIndicator.progress),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function Rg(t){let e,i;const n=[t[35].closeButton,{hideLabel:!0}];let r={};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new ks({props:r}),{c(){At(e.$$.fragment)},m(o,a){It(e,o,a),i=!0},p(o,a){const s=16&a[1]?Ir(n,[Or(o[35].closeButton),n[1]]):{};e.$set(s)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),i=!1},d(o){Et(e,o)}}}function G5(t){let e,i,n,r=t[35].progressIndicator.visible&&Pg(t),o=t[35].closeButton&&t[35].text&&Rg(t);return{c(){r&&r.c(),e=ce(),o&&o.c(),i=Tn()},m(a,s){r&&r.m(a,s),tt(a,e,s),o&&o.m(a,s),tt(a,i,s),n=!0},p(a,s){a[35].progressIndicator.visible?r?(r.p(a,s),16&s[1]&&P(r,1)):(r=Pg(a),r.c(),P(r,1),r.m(e.parentNode,e)):r&&(ze(),D(r,1,1,()=>{r=null}),Fe()),a[35].closeButton&&a[35].text?o?(o.p(a,s),16&s[1]&&P(o,1)):(o=Rg(a),o.c(),P(o,1),o.m(i.parentNode,i)):o&&(ze(),D(o,1,1,()=>{o=null}),Fe())},i(a){n||(P(r),P(o),n=!0)},o(a){D(r),D(o),n=!1},d(a){r&&r.d(a),a&&Q(e),o&&o.d(a),a&&Q(i)}}}function Z5(t){let e,i=t[3].iconSupportError+"";return{c(){e=Rr("g")},m(n,r){tt(n,e,r),e.innerHTML=i},p(n,r){8&r[0]&&i!==(i=n[3].iconSupportError+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function X5(t){let e,i;return e=new Ro({props:{$$slots:{default:[Z5]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};8&r[0]|16&r[19]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function Ig(t){let e,i,n,r,o,a,s,l,c,d,u,p,h,g,m=t[10]&&Eg(t),y=t[47]&&t[46]&&Ag(t);const x=[ew,tw],k=[];function w(T,z){return T[47]?0:1}function C(T){t[432](T)}function M(T){t[433](T)}function R(T){t[434](T)}n=w(t),r=k[n]=x[n](t),a=new V4({props:{isAnimated:t[55],isTransparent:t[20],pixelRatio:t[59],textPixelRatio:t[6],backgroundColor:t[58],maskRect:t[60],maskOpacity:t[75]?t[75].maskOpacity:1,maskMarkupOpacity:t[7],maskFrameOpacity:t[5],clipAnnotationsToImage:t[87],images:t[57],interfaceImages:t[88],loadImageData:t[28],enableGrid:t[11],gridSize:t[89],gridColors:[t[90],t[91]],gridOpacity:t[92],selectionColor:t[93],willRequest:t[83]||t[94],willRender:t[429],didRender:t[430]}});let O={root:t[2],locale:t[3],stores:t[202],allowPan:t[96],enablePan:t[17],enablePanLimit:t[21],panLimitGutterScalar:t[22],enablePanInput:t[97],allowZoom:t[98],enableZoom:t[18],enableZoomInput:t[19]!==void 0?t[19]:t[99],enableZoomControls:t[100],zoomOptions:t[13]||t[23],zoomAdjustStep:t[14]||t[24],zoomAdjustFactor:t[15]||t[25],zoomAdjustWheelFactor:t[16]||t[26],imageSelectionRectCentered:t[101],imageSelectionRectScalar:t[102],elasticity:Kp*t[8]};return t[0]!==void 0&&(O.zoomLevel=t[0]),t[33]!==void 0&&(O.zoomControls=t[33]),t[34]!==void 0&&(O.zoomMultiTouching=t[34]),d=new H5({props:O}),Ai.push(()=>go(d,"zoomLevel",C)),Ai.push(()=>go(d,"zoomControls",M)),Ai.push(()=>go(d,"zoomMultiTouching",R)),{c(){m&&m.c(),e=ce(),y&&y.c(),i=ce(),r.c(),o=ce(),At(a.$$.fragment),s=ce(),l=pt("div"),c=ce(),At(d.$$.fragment),v(l,"class","PinturaRootPortal")},m(T,z){m&&m.m(T,z),tt(T,e,z),y&&y.m(T,z),tt(T,i,z),k[n].m(T,z),tt(T,o,z),It(a,T,z),tt(T,s,z),tt(T,l,z),t[431](l),tt(T,c,z),It(d,T,z),g=!0},p(T,z){T[10]?m?(m.p(T,z),1024&z[0]&&P(m,1)):(m=Eg(T),m.c(),P(m,1),m.m(e.parentNode,e)):m&&(ze(),D(m,1,1,()=>{m=null}),Fe()),T[47]&&T[46]?y?(y.p(T,z),98304&z[1]&&P(y,1)):(y=Ag(T),y.c(),P(y,1),y.m(i.parentNode,i)):y&&(ze(),D(y,1,1,()=>{y=null}),Fe());let F=n;n=w(T),n===F?k[n].p(T,z):(ze(),D(k[F],1,1,()=>{k[F]=null}),Fe(),r=k[n],r?r.p(T,z):(r=k[n]=x[n](T),r.c()),P(r,1),r.m(o.parentNode,o));const B={};16777216&z[1]&&(B.isAnimated=T[55]),1048576&z[0]&&(B.isTransparent=T[20]),268435456&z[1]&&(B.pixelRatio=T[59]),64&z[0]&&(B.textPixelRatio=T[6]),134217728&z[1]&&(B.backgroundColor=T[58]),536870912&z[1]&&(B.maskRect=T[60]),8192&z[2]&&(B.maskOpacity=T[75]?T[75].maskOpacity:1),128&z[0]&&(B.maskMarkupOpacity=T[7]),32&z[0]&&(B.maskFrameOpacity=T[5]),33554432&z[2]&&(B.clipAnnotationsToImage=T[87]),67108864&z[1]&&(B.images=T[57]),67108864&z[2]&&(B.interfaceImages=T[88]),268435456&z[0]&&(B.loadImageData=T[28]),2048&z[0]&&(B.enableGrid=T[11]),134217728&z[2]&&(B.gridSize=T[89]),805306368&z[2]&&(B.gridColors=[T[90],T[91]]),1073741824&z[2]&&(B.gridOpacity=T[92]),1&z[3]&&(B.selectionColor=T[93]),2097152&z[2]|2&z[3]&&(B.willRequest=T[83]||T[94]),512&z[0]|1083965504&z[1]|4&z[3]&&(B.willRender=T[429]),248&z[2]&&(B.didRender=T[430]),a.$set(B);const f={};4&z[0]&&(f.root=T[2]),8&z[0]&&(f.locale=T[3]),8&z[3]&&(f.allowPan=T[96]),131072&z[0]&&(f.enablePan=T[17]),2097152&z[0]&&(f.enablePanLimit=T[21]),4194304&z[0]&&(f.panLimitGutterScalar=T[22]),16&z[3]&&(f.enablePanInput=T[97]),32&z[3]&&(f.allowZoom=T[98]),262144&z[0]&&(f.enableZoom=T[18]),524288&z[0]|64&z[3]&&(f.enableZoomInput=T[19]!==void 0?T[19]:T[99]),128&z[3]&&(f.enableZoomControls=T[100]),8396800&z[0]&&(f.zoomOptions=T[13]||T[23]),16793600&z[0]&&(f.zoomAdjustStep=T[14]||T[24]),33587200&z[0]&&(f.zoomAdjustFactor=T[15]||T[25]),67174400&z[0]&&(f.zoomAdjustWheelFactor=T[16]||T[26]),256&z[3]&&(f.imageSelectionRectCentered=T[101]),512&z[3]&&(f.imageSelectionRectScalar=T[102]),256&z[0]&&(f.elasticity=Kp*T[8]),!u&&1&z[0]&&(u=!0,f.zoomLevel=T[0],Po(()=>u=!1)),!p&&4&z[1]&&(p=!0,f.zoomControls=T[33],Po(()=>p=!1)),!h&&8&z[1]&&(h=!0,f.zoomMultiTouching=T[34],Po(()=>h=!1)),d.$set(f)},i(T){g||(P(m),P(y),P(r),P(a.$$.fragment,T),P(d.$$.fragment,T),g=!0)},o(T){D(m),D(y),D(r),D(a.$$.fragment,T),D(d.$$.fragment,T),g=!1},d(T){m&&m.d(T),T&&Q(e),y&&y.d(T),T&&Q(i),k[n].d(T),T&&Q(o),Et(a,T),T&&Q(s),T&&Q(l),t[431](null),T&&Q(c),Et(d,T)}}}function Eg(t){let e,i,n,r,o;return i=new fo({props:{items:t[71]}}),{c(){e=pt("div"),At(i.$$.fragment),v(e,"class","PinturaNav PinturaNavTools")},m(a,s){tt(a,e,s),It(i,e,null),n=!0,r||(o=[Mt(e,"measure",t[416]),ji(Er.call(null,e))],r=!0)},p(a,s){const l={};512&s[2]&&(l.items=a[71]),i.$set(l)},i(a){n||(P(i.$$.fragment,a),n=!0)},o(a){D(i.$$.fragment,a),n=!1},d(a){a&&Q(e),Et(i),r=!1,_i(o)}}}function Ag(t){let e,i,n;return i=new wa({props:{elasticity:t[8]*Jp,scrollDirection:t[78]?"y":"x",$$slots:{default:[Q5]},$$scope:{ctx:t}}}),{c(){e=pt("div"),At(i.$$.fragment),v(e,"class","PinturaNav PinturaNavMain")},m(r,o){tt(r,e,o),It(i,e,null),n=!0},p(r,o){const a={};256&o[0]&&(a.elasticity=r[8]*Jp),65536&o[2]&&(a.scrollDirection=r[78]?"y":"x"),24576&o[1]|540672&o[2]|16&o[19]&&(a.$$scope={dirty:o,ctx:r}),i.$set(a)},i(r){n||(P(i.$$.fragment,r),n=!0)},o(r){D(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Et(i)}}}function Y5(t){let e,i;const n=[t[81],{tabs:t[45]}];let r={$$slots:{default:[J5,({tab:o})=>({592:o}),({tab:o})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o?8:0]]},$$scope:{ctx:t}};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new Su({props:r}),e.$on("select",t[417]),{c(){At(e.$$.fragment)},m(o,a){It(e,o,a),i=!0},p(o,a){const s=16384&a[1]|524288&a[2]?Ir(n,[524288&a[2]&&Or(o[81]),16384&a[1]&&{tabs:o[45]}]):{};24&a[19]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),i=!1},d(o){Et(e,o)}}}function q5(t){let e,i;return e=new fo({props:{items:t[45]}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};16384&r[1]&&(o.items=n[45]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function K5(t){let e,i=t[592].icon+"";return{c(){e=Rr("g")},m(n,r){tt(n,e,r),e.innerHTML=i},p(n,r){8&r[19]&&i!==(i=n[592].icon+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function J5(t){let e,i,n,r,o,a=t[592].label+"";return e=new Ro({props:{$$slots:{default:[K5]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment),i=ce(),n=pt("span"),r=cn(a)},m(s,l){It(e,s,l),tt(s,i,l),tt(s,n,l),Tt(n,r),o=!0},p(s,l){const c={};24&l[19]&&(c.$$scope={dirty:l,ctx:s}),e.$set(c),(!o||8&l[19])&&a!==(a=s[592].label+"")&&zn(r,a)},i(s){o||(P(e.$$.fragment,s),o=!0)},o(s){D(e.$$.fragment,s),o=!1},d(s){Et(e,s),s&&Q(i),s&&Q(n)}}}function Q5(t){let e,i,n,r;const o=[q5,Y5],a=[];function s(l,c){return l[76]?0:1}return e=s(t),i=a[e]=o[e](t),{c(){i.c(),n=Tn()},m(l,c){a[e].m(l,c),tt(l,n,c),r=!0},p(l,c){let d=e;e=s(l),e===d?a[e].p(l,c):(ze(),D(a[d],1,1,()=>{a[d]=null}),Fe(),i=a[e],i?i.p(l,c):(i=a[e]=o[e](l),i.c()),P(i,1),i.m(n.parentNode,n))},i(l){r||(P(i),r=!0)},o(l){D(i),r=!1},d(l){a[e].d(l),l&&Q(n)}}}function tw(t){let e,i,n;function r(a){t[425](a)}let o={class:"PinturaMain",content:{...t[48].find(t[424]),props:t[27][t[44]]},locale:t[3],stores:t[202]};return t[1][t[44]]!==void 0&&(o.component=t[1][t[44]]),e=new d2({props:o}),Ai.push(()=>go(e,"component",r)),e.$on("measure",t[228]),e.$on("show",t[426]),e.$on("hide",t[427]),e.$on("fade",t[428]),{c(){At(e.$$.fragment)},m(a,s){It(e,a,s),n=!0},p(a,s){const l={};134217728&s[0]|139264&s[1]&&(l.content={...a[48].find(a[424]),props:a[27][a[44]]}),8&s[0]&&(l.locale=a[3]),!i&&2&s[0]|8192&s[1]&&(i=!0,l.component=a[1][a[44]],Po(()=>i=!1)),e.$set(l)},i(a){n||(P(e.$$.fragment,a),n=!0)},o(a){D(e.$$.fragment,a),n=!1},d(a){Et(e,a)}}}function ew(t){let e,i;const n=[{class:"PinturaMain"},{visible:t[64]},t[81],{panels:t[80]}];let r={$$slots:{default:[iw,({panel:o,panelIsActive:a})=>({590:o,591:a}),({panel:o,panelIsActive:a})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(o?2:0)|(a?4:0)]]},$$scope:{ctx:t}};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new ku({props:r}),e.$on("measure",t[423]),{c(){At(e.$$.fragment)},m(o,a){It(e,o,a),i=!0},p(o,a){const s=786436&a[2]?Ir(n,[n[0],4&a[2]&&{visible:o[64]},524288&a[2]&&Or(o[81]),262144&a[2]&&{panels:o[80]}]):{};134217738&a[0]|131200&a[1]|4&a[2]|22&a[19]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),i=!1},d(o){Et(e,o)}}}function iw(t){let e,i,n;function r(...s){return t[418](t[590],...s)}function o(s){t[419](s,t[590])}let a={content:{...t[48].find(r),props:t[27][t[590]]},locale:t[3],isActive:t[591],stores:t[202]};return t[1][t[590]]!==void 0&&(a.component=t[1][t[590]]),e=new d2({props:a}),Ai.push(()=>go(e,"component",o)),e.$on("measure",t[228]),e.$on("show",function(){return t[420](t[590])}),e.$on("hide",function(){return t[421](t[590])}),e.$on("fade",function(...s){return t[422](t[590],...s)}),{c(){At(e.$$.fragment)},m(s,l){It(e,s,l),n=!0},p(s,l){t=s;const c={};134217728&l[0]|131072&l[1]|2&l[19]&&(c.content={...t[48].find(r),props:t[27][t[590]]}),8&l[0]&&(c.locale=t[3]),4&l[19]&&(c.isActive=t[591]),!i&&2&l[0]|2&l[19]&&(i=!0,c.component=t[1][t[590]],Po(()=>i=!1)),e.$set(c)},i(s){n||(P(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){Et(e,s)}}}function Lg(t){let e,i;return{c(){e=pt("span"),v(e,"class","PinturaEditorOverlay"),v(e,"style",i="opacity:"+t[103])},m(n,r){tt(n,e,r)},p(n,r){1024&r[3]&&i!==(i="opacity:"+n[103])&&v(e,"style",i)},d(n){n&&Q(e)}}}function zg(t){let e,i;const n=[{layout:"row"},{parentRect:t[52]},t[62]];let r={$$slots:{default:[nw]},$$scope:{ctx:t}};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new T2({props:r}),{c(){At(e.$$.fragment)},m(o,a){It(e,o,a),i=!0},p(o,a){const s=2097152&a[1]|1&a[2]?Ir(n,[n[0],2097152&a[1]&&{parentRect:o[52]},1&a[2]&&Or(o[62])]):{};3&a[2]|16&a[19]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),i=!1},d(o){Et(e,o)}}}function nw(t){let e,i,n;return{c(){e=pt("input"),e.value=i=t[62].text,v(e,"placeholder",n=t[62].placeholder),v(e,"type","text"),v(e,"spellcheck","false"),v(e,"autocorrect","off"),v(e,"autocapitalize","off")},m(r,o){tt(r,e,o),t[435](e)},p(r,o){1&o[2]&&i!==(i=r[62].text)&&e.value!==i&&(e.value=i),1&o[2]&&n!==(n=r[62].placeholder)&&v(e,"placeholder",n)},d(r){r&&Q(e),t[435](null)}}}function rw(t){let e,i,n,r,o,a;zl(t[415]);let s=t[41]&&Cg(t),l=t[103]>0&&Lg(t),c=t[62]&&zg(t);return{c(){e=pt("div"),s&&s.c(),i=ce(),l&&l.c(),n=ce(),c&&c.c(),v(e,"id",t[4]),v(e,"class",t[79]),v(e,"data-env",t[77]),v(e,"dir",t[12])},m(d,u){tt(d,e,u),s&&s.m(e,null),Tt(e,i),l&&l.m(e,null),Tt(e,n),c&&c.m(e,null),t[436](e),r=!0,o||(a=[Mt(Ks,"keydown",t[219]),Mt(Ks,"keyup",t[220]),Mt(Ks,"blur",t[221]),Mt(Ks,"paste",t[225]),Mt(Ks,"resize",t[415]),Mt(e,"ping",function(){Hi(t[70])&&t[70].apply(this,arguments)}),Mt(e,"contextmenu",t[222]),Mt(e,"touchstart",t[217],{passive:!1}),Mt(e,"touchmove",function(){Hi(t[73])&&t[73].apply(this,arguments)}),Mt(e,"pointermove",function(){Hi(t[72])&&t[72].apply(this,arguments)}),Mt(e,"transitionend",t[207]),Mt(e,"dropfiles",t[223]),Mt(e,"measure",t[437]),Mt(e,"click",function(){Hi(t[43]?t[224]:me)&&(t[43]?t[224]:me).apply(this,arguments)}),ji(Er.call(null,e,{observeViewRect:!0,isMeasureRoot:!0})),ji(B4.call(null,e)),ji(c2.call(null,e))],o=!0)},p(d,u){(t=d)[41]?s?(s.p(t,u),1024&u[1]&&P(s,1)):(s=Cg(t),s.c(),P(s,1),s.m(e,i)):s&&(ze(),D(s,1,1,()=>{s=null}),Fe()),t[103]>0?l?l.p(t,u):(l=Lg(t),l.c(),l.m(e,n)):l&&(l.d(1),l=null),t[62]?c?(c.p(t,u),1&u[2]&&P(c,1)):(c=zg(t),c.c(),P(c,1),c.m(e,null)):c&&(ze(),D(c,1,1,()=>{c=null}),Fe()),(!r||16&u[0])&&v(e,"id",t[4]),(!r||131072&u[2])&&v(e,"class",t[79]),(!r||32768&u[2])&&v(e,"data-env",t[77]),(!r||4096&u[0])&&v(e,"dir",t[12])},i(d){r||(P(s),P(c),r=!0)},o(d){D(s),D(c),r=!1},d(d){d&&Q(e),s&&s.d(),l&&l.d(),c&&c.d(),t[436](null),o=!1,_i(a)}}}const Kp=1,Jp=10;function ow(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,y,x,k,w,C,M,R,O,T,z,F,B,f,V,J,S,j,K,dt,lt,N,ft,$t,Lt,ct,et,ht,Y,Z,St,nt,mt,Ft,oe,Rt,Ut,Ot,U,wt,xt,Gt,de,ue,be,$e,_,ve,gi,ye,Vt,Ce,Re,He,bi,vt,bt,Ge,Me,ni,Ue,ei,vi,di,Li,X,jt,G,Bt,fe,Qt,se,zt,We,Ee,je,Ke,it,Xt,Nt,Zt,Yt,ot,pe,ee,ge,Dt,Se,fi,ui,Be,yi,Mi,xe,he,Ie,an,Ui,yn,mn,$n,tn,Yi,Fn,Xn,jn,vr,Un,vn,_n,Vn,Pi,so,Dn,yo,lo,Ar,wr,Mn,qi,Zr,eo,xo,bo,Io,co,uo,vo,wo,Wr,Sr,io,dn,tr,So,_r,wi,Pn,Yn,gn,no,Xr,un,Yr,hr,po,mr,Gn,ho,kr,ro,qr,Wn,wn,li,W,ne,Ii,ri,Kt,we,Ei,Vi,pn,en,Oi,Vr,Ho,za,jo,$r,Cr,Eo,Sa,Rn,A,Pe,De,Si,Ni,zi,Ze,xi,Ye,Fi,fn,In,rn,xn,ki,gr,mo,Ms,Ps,Rs,Is,Fa,Qa,ol,ka=Je,Ca=Je;E(t,F4,$=>i(403,we=$)),t.$$.on_destroy.push(()=>ka()),t.$$.on_destroy.push(()=>Ca());const Lr=Ya(),fr=va();let{class:er}=e,{layout:Nr}=e,{stores:on}=e,{locale:Di}=e,{id:Es}=e,{util:yr}=e,{utils:al}=e,{animations:Uo="auto"}=e,{disabled:b=!1}=e,{status:H}=e,{previewUpscale:L=!1}=e,{previewPad:st=!1}=e,{previewMaskOpacity:ut=.95}=e,{previewImageDataMaxSize:Wt}=e,{previewImageTextPixelRatio:Pt}=e,{markupMaskOpacity:ie=1}=e,{zoomMaskOpacity:Ht=.85}=e,{elasticityMultiplier:_t=10}=e,{willRevert:re=()=>Promise.resolve(!0)}=e,{willProcessImage:te=()=>Promise.resolve(!0)}=e,{willRenderCanvas:Ve=Zi}=e,{willRenderToolbar:ae=Zi}=e,{willRenderUtilTabs:Te=Zi}=e,{willSetHistoryInitialState:ke=Zi}=e,{enableButtonExport:Jt=!0}=e,{enableButtonRevert:Ae=!0}=e,{enableNavigateHistory:pi=!0}=e,{enableToolbar:Bi=!0}=e,{enableUtils:hi=!0}=e,{enableButtonClose:mi=!1}=e,{enableDropImage:Qe=!1}=e,{enablePasteImage:nn=!1}=e,{enableBrowseImage:Wi=!1}=e,{enableTransparencyGrid:Tr=!1}=e,{layoutDirectionPreference:ir="auto"}=e,{layoutHorizontalUtilsPreference:Sn="left"}=e,{layoutVerticalUtilsPreference:En="bottom"}=e,{layoutVerticalToolbarPreference:xr="top"}=e,{layoutVerticalControlGroupsPreference:Kr="bottom"}=e,{layoutVerticalControlTabsPreference:Ta="bottom"}=e,{textDirection:As}=e,{markupEditorZoomLevel:Da=null}=e,{markupEditorZoomLevels:Ma}=e,{markupEditorZoomAdjustStep:Go}=e,{markupEditorZoomAdjustFactor:Ao}=e,{markupEditorZoomAdjustWheelFactor:ts}=e,{markupEditorInteractionMode:la=!1}=e,{muteAudio:Ba=!0}=e,{willSetMediaInitialTimeOffset:Lo=($,q)=>$*V5(q[0])}=e,{enablePan:Oa=!0}=e,{enableZoom:es=!0}=e,{enableZoomControls:is=!0}=e,{enableZoomInput:Wl}=e,{enablePanInput:ca}=e,{enableCanvasAlpha:da=!1}=e,{enablePanLimit:nr}=e,{panLimitGutterScalar:ua}=e,{zoomPresetOptions:Yh=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:qh=.25}=e,{zoomAdjustFactor:Kh=.1}=e,{zoomAdjustWheelFactor:Jh=1}=e,{zoomLevel:Ls=null}=e,{fixScrollDirection:Wc=!1}=e;const Qh=le(Wc);let _l,_c;ko("fixScrollDirection",Qh);let{imagePreviewSrc:Eu}=e,{imageOrienter:Vc={read:()=>1,apply:$=>$}}=e,{pluginComponents:sl}=e,{pluginOptions:zs={}}=e;const Z2=Lr.sub,zo={};let{root:br}=e;const Au=()=>{Dt.setAttribute("data-redraw","true"),Ds.set({})},Lu=le(!0);E(t,Lu,$=>i(469,vr=$));const Vl=le(void 0);E(t,Vl,$=>i(413,De=$));const Wa=le(0);E(t,Wa,$=>i(410,Rn=$));const t0=le(!1),Nc=$=>{t0.set($.type==="play"),Lr.pub($.type)};let e0,zu,i0,Fu,Du=!1;const Bu=()=>{if(!r||!ll())return;Fu=d,kt(Vl,De=void 0,De);const $=Dt;Du=!1;const q=1/24,gt=_a();(Math.abs(l*gt-Rn*gt)<=q||gt-gt*Rn<=q)&&kt(Wa,Rn=s,Rn),Hc(Rn*_a()),$.play().catch(()=>{});let Ct=Hl();const at=()=>{if(ll())return;i0=requestAnimationFrame(at);let yt=Hl();yt-Ct<=0&&(yt=Ct+.01),Ct=yt,kt(Wa,Rn=yt/_a(),Rn),Fu>=0&&Rn>=l&&(kt(Wa,Rn=l,Rn),Fs()),d>-1&&(Du=!0),Du&&d===-1&&u>0&&(kt(Wa,Rn=a[u][0],Rn),Hc(Rn*_a())),kt(Uc,$r=Rn*_a(),$r),Au()};at()},Fs=()=>{r&&!ll()&&(kt(Vl,De=void 0,De),Fu=void 0,Dt.pause(),cancelAnimationFrame(i0),Au())},ll=()=>Dt&&Dt.paused,Ou=()=>{if(r)return ll()?Bu():Fs()},Wu=()=>{r&&(Dt.muted=!0)},_u=()=>{r&&(Dt.muted=!1)},n0=()=>{r&&kt(Nl,Pe=!Pe,Pe)},Nl=le(Ba);E(t,Nl,$=>i(412,Pe=$));const _a=()=>{if(r)return Dt.duration},Hl=()=>{if(r)return Dt.currentTime},Hc=$=>{r&&(xg(Dt,$),kt(Wa,Rn=$/A,Rn))},Ds=le({});E(t,Ds,$=>i(54,_n=$)),ko("redrawTrigger",Ds);const jc=le(_t);E(t,jc,$=>i(486,Eo=$)),ko("elasticityMultiplier",jc);let jl=[];const Vu=oi();E(t,Vu,$=>i(103,ol=$));const r0=Fh()||1024,o0=Hn(r0,r0),a0=Yy(),X2=$=>Promise.resolve(Cr&&Cr($,{resourceType:"image"})).then(q=>{if(q===!1)return;const{headers:gt,credentials:Ct}=q||{};return fetch($,{headers:gt,credentials:Ct}).then(at=>{if(at.status!==200)throw`${at.status} (${at.statusText})`;return at.blob()}).then(at=>wg(at,Vc,a0)).then(at=>Sg(at,g))});let{imageSourceToImageData:Nu=$=>Oe($)?X2($):Al($)?new Promise(q=>q(Fc($))):gh($)||Bc($)?wg($,Vc,a0).then(q=>Sg(q,g)):void 0}=e;const Hu=(()=>{let $,q;const gt=bg.reduce((Ct,at)=>(Ct[at]=function(yt,qt,Xe){let qe=[];return{set:qt,update:Xe,publish:Ne=>{qe.forEach(sn=>sn(Ne))},subscribe:Ne=>(qe.push(Ne),yt(Ne),()=>{qe=qe.filter(sn=>sn!==Ne)})}}(yt=>{if(!q)return yt();q.stores[at].subscribe(yt)()},yt=>{q&&q.stores[at].set(yt)},yt=>{q&&q.stores[at].update(yt)}),Ct),{});return{update:Ct=>{if(q=Ct,$&&($.forEach(at=>at()),$=void 0),!Ct)return gt.file.publish(void 0),void gt.loadState.publish(void 0);$=bg.map(at=>Ct.stores[at].subscribe(yt=>{gt[at].publish(yt)}))},stores:gt,destroy:()=>{$&&$.forEach(Ct=>Ct())}}})(),{file:ju,size:Bs,duration:Uu,currentTime:Uc,trim:Gu,volume:s0,minDuration:Y2,maxDuration:Zu,loadState:Gc,processState:Xu,cropAspectRatio:Zc,cropLimitToImage:Yu,crop:pa,cropMinSize:q2,cropMaxSize:K2,cropRange:J2,cropOrigin:Q2,cropRectAspectRatio:tx,rotation:cl,rotationRange:ex,targetSize:ix,flipX:Xc,flipY:Yc,backgroundColor:qc,backgroundImage:l0,colorMatrix:c0,convolutionMatrix:d0,gamma:u0,vignette:p0,noise:h0,decoration:qu,annotation:Ku,manipulation:Ju,redaction:Qu,frame:Os,selection:t1,state:Kc}=Hu.stores;E(t,ju,$=>i(387,Wr=$)),E(t,Bs,$=>i(360,ui=$)),E(t,Uu,$=>i(411,A=$)),E(t,Uc,$=>i(485,$r=$)),E(t,Gu,$=>i(408,jo=$)),E(t,s0,$=>i(409,Sa=$)),E(t,Zu,$=>i(414,Si=$)),E(t,Gc,$=>i(379,qi=$)),E(t,Xu,$=>i(378,Mn=$)),E(t,Zc,$=>i(482,Vi=$)),E(t,Yu,$=>i(87,xi=$)),E(t,pa,$=>i(398,Gn=$)),E(t,cl,$=>i(363,Mi=$)),E(t,Xc,$=>i(362,yi=$)),E(t,Yc,$=>i(361,Be=$)),E(t,qc,$=>i(369,Fn=$)),E(t,qu,$=>i(50,fi=$)),E(t,Ku,$=>i(51,xe=$)),E(t,Ju,$=>i(366,$n=$)),E(t,Qu,$=>i(367,tn=$)),E(t,Os,$=>i(49,Se=$)),E(t,t1,$=>i(61,Vr=$)),E(t,Kc,$=>i(471,dn=$)),ko("previewcontrols",{play:Bu,pause:Fs,togglePlayPause:Ou,mute:Wu,unmute:_u,toggleMute:n0,setCurrentTime:Hc,getCurrentTime:Hl,getDuration:_a,frameOffset:Wa,framePeekOffset:Vl,isPlaying:t0,isMuted:Nl});const m0=($,q,gt=0)=>new Promise((Ct,at)=>{if(nl($))return void Jy($).then(qe=>{const Ne=$i($r)?$r:Lo(qe.duration,jo||[[0,1]]);Qy(qe,Ne).then(Ct)});let yt,qt=!1;q.cancel=()=>qt=!0;const Xe=Date.now();Nu($).then(qe=>{const Ne=Date.now()-Xe;clearTimeout(yt),yt=setTimeout(()=>{qt||Ct(qe)},Math.max(0,gt-Ne))}).catch(at)}),{images:$0,shapePreprocessor:g0,imageScrambler:f0,imageRedactionRendering:y0,willRequest:x0,willRequestResource:b0}=on;let Ul;E(t,$0,$=>i(407,za=$)),E(t,g0,$=>i(406,Ho=$)),E(t,f0,$=>i(370,Xn=$)),E(t,y0,$=>i(368,Yi=$)),E(t,x0,$=>i(83,Cr=$)),E(t,b0,$=>i(94,ki=$));const nx=Ri(l0,($,q)=>{if(!$)return q(void 0);Ul&&(Ul.cancel(),Ul=void 0),Ul={cancel:me},m0($,Ul).then(q).catch(gt=>{})}),rx=Kc.subscribe($=>Lr.pub("update",$)),ox=le();ko("ui",le({})),ko("selection",t1);const e1=le(!0);E(t,e1,$=>i(96,mo=$));const i1=le(!0);E(t,i1,$=>i(98,Ps=$));const n1=le(!0);E(t,n1,$=>i(405,Oi=$));const Jc=le(!0);E(t,Jc,$=>i(483,pn=$));const r1=le(!0);E(t,r1,$=>i(99,Rs=$));const o1=le();E(t,o1,$=>i(100,Is=$));const Qc=le();E(t,Qc,$=>i(484,en=$));const a1=Ri([Qc,Jc],()=>en!==void 0?en:pn);E(t,a1,$=>i(97,Ms=$));const Gl=le([0,0,0]);E(t,Gl,$=>i(58,Pn=$));const td=le([1,1,1]);E(t,td,$=>i(467,mn=$));const Zl=oi([1,1,1]);E(t,Zl,$=>i(466,yn=$));const s1=le();E(t,s1,$=>i(93,xn=$));const v0=le(),l1=le();E(t,l1,$=>i(53,Un=$));const dl=le();E(t,dl,$=>i(364,Ie=$));const ul=le(hs());E(t,ul,$=>i(82,tr=$));const c1=le(0);E(t,c1,$=>i(404,Ei=$));const Xl=le(hs());E(t,Xl,$=>i(86,Ze=$));const Ws=le();E(t,Ws,$=>i(464,ge=$));const ed=vg("(pointer: fine)",$=>$?"pointer-fine":"pointer-coarse");E(t,ed,$=>i(385,vo=$));const id=vg("(hover: hover)",$=>$?"pointer-hover":"pointer-no-hover");E(t,id,$=>i(384,uo=$));const w0=le(!1),Yl=le(!1);E(t,Yl,$=>i(365,Ui=$));const d1=kl(void 0,$=>{const q=oi(0),gt=[Yl.subscribe(Ct=>{q.set(Ct?1:0)}),q.subscribe($)];return()=>gt.forEach(Ct=>Ct())});E(t,d1,$=>i(465,an=$));const nd=le();E(t,nd,$=>i(470,bo=$));const rd=le();let u1;E(t,rd,$=>i(55,Pi=$)),ko("isAnimated",rd);const od=le(L);E(t,od,$=>i(388,Sr=$));const _s=le(!1);E(t,_s,$=>i(476,ro=$)),ko("imageIsStatic",_s);const ql=le();E(t,ql,$=>i(477,qr=$));const p1=le();E(t,p1,$=>i(474,ho=$));const S0=kl(void 0,$=>{const q=le(void 0),gt=[pa.subscribe(()=>{if(!Gn)return;if(ro)return q.set(Ci(Gn));const Ct=P$(Gn,ho,5*_t);q.set(Ct)}),q.subscribe($)];return()=>gt.forEach(Ct=>Ct())}),Zo=le();E(t,Zo,$=>i(473,mr=$));const ad=le();E(t,ad,$=>i(475,kr=$));const h1=le(void 0);E(t,h1,$=>i(480,Ii=$));const k0=le(Ji());E(t,k0,$=>i(481,ri=$));const C0=($,q)=>{if(!q||!$)return{top:0,right:0,bottom:0,left:0};const gt=wy(q,$,m),Ct=vy(gt,$);return{top:Math.abs(Ct.top),right:Math.abs(Ct.right),bottom:Math.abs(Ct.bottom),left:Math.abs(Ct.left)}},T0=le({}),m1=Ri([Ws,ul,Xl,T0],([$,q,gt,Ct],at)=>{if(!$)return at(void 0);let yt=0;J.length!==1||p||xr==="bottom"||(yt=gt.y+gt.height),at(An($.x+q.x,$.y+q.y+yt,$.width,$.height))});let Kl={left:0,right:0,top:0,bottom:0};const sd=le(!1),pl=Ri([sd,Os,m1,Yl],([$,q,gt,Ct],at)=>{if(!gt)return at({left:0,right:0,top:0,bottom:0});if(!$)return;const yt=Math.min(gt.width,gt.height),qt=C0({width:yt,height:yt},q);ii(Kl.top,4)===ii(qt.top,4)&&ii(Kl.bottom,4)===ii(qt.bottom,4)&&ii(Kl.right,4)===ii(qt.right,4)&&ii(Kl.left,4)===ii(qt.left,4)||(Kl=qt,at(qt))});E(t,pl,$=>i(396,Yr=$));const hl=Ri([sd,pl],([$,q],gt)=>{if(!$)return gt(!1);gt(Object.values(q).some(Ct=>Ct>0))});E(t,hl,$=>i(397,hr=$));const ax=Ri([sd,Ws,hl,pl],([$,q,gt,Ct],at)=>{if(q)return $&&gt?void at(An(q.x+Ct.left,q.y+Ct.top,q.width-Ct.left-Ct.right,q.height-Ct.top-Ct.bottom)):at({...q})}),Pa=Ri([m1,hl,pl],([$,q,gt],Ct)=>$?q?void Ct(An($.x+gt.left,$.y+gt.top,$.width-gt.left-gt.right,$.height-gt.top-gt.bottom)):Ct($):Ct(void 0));E(t,Pa,$=>i(52,he=$));const sx=Ri([_s,Bs,cl],([$,q,gt],Ct)=>{if(!$||!q)return Ct(void 0);const at=Ur(q);Ct(Mr(at,gt))}),$1=Ri([sx],([$],q)=>{if(!$)return q(void 0);const gt=ar($);q(Pc(gt))});E(t,$1,$=>i(400,li=$));const Va=Ri([Pa,pa,$1,od],([$,q,gt,Ct],at)=>{if(!$||!q||!(!qr&&!ho))return;const{width:yt,height:qt}=gt||q,Xe=Math.min($.width/yt,$.height/qt);at(Ct?Xe:Math.min(1,Xe))});E(t,Va,$=>i(399,wn=$)),ko("imageStaticVisualCorners",Ri([_s,Bs,cl,Pa,Ws,Va],([$,q,gt,Ct,at,yt],qt)=>{if(!($&&Ct&&at&&q))return qt(void 0);const Xe=Ur(q),qe=Pc(Fr(Xe,yt)),Ne=Yd(Ct,qe);qe.x=Ne.x,qe.y=Ne.y,qt(Mr(qe,gt))}));const ml=le(void 0);E(t,ml,$=>i(402,Kt=$));const M0=Ri([pa,Pa],([$,q])=>{if(q&&$)return Math.min(q.width/$.width,q.height/$.height)}),g1=Ri([pa,Zo],([$,q])=>$&&q?Math.min($.width/q.width,$.height/q.height):1);E(t,g1,$=>i(102,Qa=$));const Jl=Ri([ml,g1],([$,q])=>$&&q?q*$:1);E(t,Jl,$=>i(479,W=$));const $l=le(Ji());E(t,$l,$=>i(401,ne=$));const P0=le({scalar:W,translation:ne}),R0=()=>{P0.set({scalar:void 0,translation:Ji()})},ld=kl(void 0,$=>{const q=oi(void 0,{precision:1e-4}),gt=xc()===1?yt=>Wo(yt,Math.round):Zi,Ct=()=>{if(!mr)return;const yt=Ui||!bo;if(ro){const Xe=Ci(mr);return Qo(Xe,ri),Qo(Xe,he),q.set(Xe,{hard:yt})}const qt=P$(mr,Ii,Kp*_t);qt.width<0&&(qt.width=0,qt.x=mr.x),qt.height<0&&(qt.height=0,qt.y=mr.y),Qo(qt,he),Qo(qt,ne),Fr(qt,W),!yt&&gt(qt),q.set(qt,{hard:yt})},at=[Pa.subscribe(Ct),Zo.subscribe(Ct),Jl.subscribe(Ct),$l.subscribe(Ct),Os.subscribe(Ct),q.subscribe($)];return()=>at.forEach(yt=>yt())});E(t,ld,$=>i(60,un=$));const f1=le(1);E(t,f1,$=>i(472,po=$));const y1=()=>{if(!Gn||!he)return;let $=ms(Ci(Gn),wn||1);const q=Yd(he,ms(Ci(li),wn));Qo($,q);const gt=ge.width/$.width,Ct=ge.height/$.height,at=Math.min(1,gt,Ct);f1.set(at),Fr($,at),((yt,qt)=>{const[Xe,qe,Ne,sn]=tl(yt);Xe<qt.y&&(yt.y=Math.max(qt.y,yt.y)),qe>qt.width&&(yt.x=qt.width-yt.width),Ne>qt.height&&(yt.y=qt.height-yt.height),sn<qt.x&&(yt.x=Math.max(qt.x,yt.x))})($,{...ge,x:0,y:0}),Zo.set($)},I0=Ri([Pa,Va,pa,Bs],([$,q,gt,Ct],at)=>{$&&(gt||Ct)&&at(E0($,q||1,gt||Ct))});E(t,I0,$=>i(101,Fa=$));const E0=($,q,gt)=>gt.width<=$.width&&gt.height<=$.height?Yd($,ms(Ci(gt),q)):to($,sr(gt));let x1,A0;const b1=$=>{if(p&&x1&&ta(x1,$)&&A0===wn)return;if(ro)return y1();x1=$,A0=wn;const q=E0($,wn,Gn||ui);Zo.set(q)};let L0=!1;const lx=Va.subscribe($=>{!L0&&$!==void 0&&Gn&&(b1(he),L0=!0)}),cx=Pa.subscribe($=>{$&&wn!==void 0&&Gn&&b1($)}),dx=_s.subscribe($=>{!$&&he&&b1(he)});let v1;const ux=ad.subscribe($=>{if(!$)return v1=void 0,void kt(ql,qr=void 0,qr);v1=Wn;const q=Ci(Gn);ql.set(q)}),px=Zo.subscribe($=>{if(!$||!kr)return;const q=(gt=Ci($),Ct=kr,gt.x-=Ct.x,gt.y-=Ct.y,gt.width-=Ct.width,gt.height-=Ct.height,gt);var gt,Ct;((yt,qt)=>{yt.x/=qt,yt.y/=qt,yt.width/=qt,yt.height/=qt})(q,v1);const at=((yt,qt)=>(yt.x+=qt.x,yt.y+=qt.y,yt.width+=qt.width,yt.height+=qt.height,yt))(Ci(qr),q);pa.set(at)}),hx=pa.subscribe($=>{if(!$||!mr)return;if(ro)return void(kr||y1());if(Ui||kr||ho)return;const q=sr(mr),gt=sr($);if(ii(q,6)===ii(gt,6))return;const{width:Ct,height:at}=Gn,yt=Math.min(he.width/Ct,he.height/at),qt=Hn($.width*yt,$.height*yt),Xe=.5*(mr.width-qt.width),qe=.5*(mr.height-qt.height),Ne=An(Math.max(0,Math.min(he.width-qt.width,mr.x+Xe)),Math.max(0,Math.min(he.height-qt.height,mr.y+qe)),qt.width,qt.height);Zo.set(Ne)}),z0=Ri([Va,pa,Zo,_s],([$,q,gt,Ct],at)=>{if(!$||!q||!gt)return;if(Ct)return at(po);const yt=gt.width/q.width,qt=gt.height/q.height;at(Math.max(yt,qt)/$)}),cd=Ri([Va,z0],([$,q],gt)=>{q&&gt($*q)});E(t,cd,$=>i(478,Wn=$));let gl={left:0,right:0,top:0,bottom:0};const F0=Ri([Os,Zo],([$,q],gt)=>{if(!q)return gt(gl);const Ct=C0(q,$);ii(gl.top,4)===ii(Ct.top,4)&&ii(gl.bottom,4)===ii(Ct.bottom,4)&&ii(gl.right,4)===ii(Ct.right,4)&&ii(gl.left,4)===ii(Ct.left,4)||(gl=Ct,gt(Ct))}),mx=Ri([F0],([$],q)=>{q(Object.values($).some(gt=>gt>0))}),w1=oi(.075,{stiffness:.03,damping:.4,precision:.001}),$x=Ri([Zl,Gl,w1,ld,Jl,Os,mx,F0,hl],([$,q,gt,Ct,at,yt,qt,Xe,qe],Ne)=>{if(!Ct||p)return Ne([]);let{x:sn,y:kn,width:zr,height:Ki}=Ct;sn+=.5,kn+=.5,zr-=.5,Ki-=.5;const rr=[];if(yt){if(qt){let{left:Gi,right:Yo,top:Hs,bottom:yl}=Xe;Gi*=at,Yo*=at,Hs*=at,yl*=at;const G1=Tp(q)?[1,1,1,.125]:[0,0,0,.075];rr.push({x:sn-Gi-.5,y:kn-Hs-.5,width:zr+Gi+Yo+1,height:Ki+Hs+yl+1,strokeWidth:1,strokeColor:G1,opacity:qe?1:.5})}const Fo=Tp($);yt&&yt.frameColor&&Tp(yt.frameColor)||Fo||(rr.push({x:sn-1,y:kn-1,width:zr+2,height:Ki+2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:gt}),rr.push({x:sn+1,y:kn+1,width:zr-2,height:Ki-2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:gt}))}Ne([...rr,{x:sn,y:kn,width:zr,height:Ki,strokeWidth:1,strokeColor:$,opacity:gt}])}),Ql=le([]);E(t,Ql,$=>i(390,So=$));const D0=Ri([$x,Ql],([$,q],gt)=>{gt([...$,...q])});E(t,D0,$=>i(95,gr=$));const S1=oi(0,{precision:.001});E(t,S1,$=>i(392,wi=$));const k1=oi();E(t,k1,$=>i(395,no=$));const C1=oi();E(t,C1,$=>i(394,gn=$));const T1=oi();E(t,T1,$=>i(393,Yn=$));const M1=oi();E(t,M1,$=>i(391,_r=$));const tc=le(!1);E(t,tc,$=>i(377,wr=$));const ec=le();let ns;E(t,ec,$=>i(380,Zr=$));const P1=Ri([tc,ec],([$,q],gt)=>{if(!$||!q)return void gt(void 0);if(ns&&(ns.cancel(),i(286,ns=void 0)),Oc(q))return gt(_f(q));const Ct=Xo.length?0:Pi?250:0;i(286,ns={cancel:me}),m0(q,ns,Ct).then(gt).catch(at=>{kt(Gc,qi.error=at,qi)}).finally(()=>{i(286,ns=void 0)})});ka(),ka=jr(P1,$=>i(359,Dt=$));let{imagePreviewCurrent:ic}=e;const R1=le({});E(t,R1,$=>i(382,Io=$));const dd=le([]);E(t,dd,$=>i(88,Ye=$));const ud=Ri([Pa,dl,Bs,S0,Zo,cd,cl,Xc,Yc,Jl,$l,w0],([$,q,gt,Ct,at,yt,qt,Xe,qe,Ne,sn,kn],zr)=>{if(!$||!at)return;const Ki=b4($,q,gt,Ct,at,Ne,sn,yt,qt,Xe,qe);!kn&&B(Ki),zr(Ki)});E(t,ud,$=>i(383,co=$));const B0=Ri([c0,d0,u0,p0,h0],([$,q,gt,Ct,at],yt)=>{const qt=$&&Object.keys($).map(Xe=>$[Xe]).filter(Boolean);yt({gamma:gt||void 0,vignette:Ct||void 0,noise:at||void 0,convolutionMatrix:q||void 0,colorMatrix:qt&&qt.length&&Th(qt)})});let pd,I1;const O0=(()=>{if(!ya())return!1;const $=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[],[,q,gt]=$.map(Ct=>parseInt(Ct,10)||0);return q>13||q===13&&gt>=4})(),nc=le({});E(t,nc,$=>i(371,vn=$)),ko("env",nc);const W0=xc(),E1=kl(W0,$=>{const q=()=>$(xc()),gt=matchMedia(`(resolution: ${W0}dppx)`);return gt.addListener(q),()=>gt.removeListener(q)});E(t,E1,$=>i(59,Xr=$));const Ra=(($,q)=>{const{sub:gt,pub:Ct}=Ya(),at=[],yt=le(0),qt=[],Xe=()=>qt.forEach(Ne=>Ne({index:fa(yt),length:at.length})),qe={get index(){return fa(yt)},set index(Ne){Ne=Number.isInteger(Ne)?Ne:0,Ne=Xi(Ne,0,at.length-1),yt.set(Ne),q(at[qe.index]),Xe()},get state(){return at[at.length-1]},length:()=>at.length,undo(){const Ne=qe.index--;return Ct("undo",Ne),Ne},redo(){const Ne=qe.index++;return Ct("redo",qe.index),Ne},revert(){at.length=1,qe.index=0,Ct("revert")},write(Ne){Ne&&q({...$(),...Ne});const sn=$(),kn=at[at.length-1];JSON.stringify(sn)!==JSON.stringify(kn)&&(at.length=qe.index+1,at.push(sn),yt.set(at.length-1),Xe(),Ct("writehistory"))},set(Ne={}){at.length=0,qe.index=0;const sn=Array.isArray(Ne)?Ne:[Ne];at.push(...sn),qe.index=at.length-1},get:()=>[...at],subscribe:Ne=>(qt.push(Ne),Ne({index:qe.index,length:at.length}),()=>qt.splice(qt.indexOf(Ne),1)),on:gt};return qe})(()=>dn,$=>{kt(Kc,dn=$,dn),ul.set(tr)});Ca(),Ca=jr(Ra,$=>i(389,io=$));const _0=()=>{const $={x:0,y:0,...ui},q=Wo(to($,dn.cropAspectRatio),Math.round),gt=ke({...dn,rotation:0,crop:q},dn),Ct=[gt];JSON.stringify(gt)!==JSON.stringify(dn)&&Ct.push({...dn}),Ra.set(Ct)},gx=Gc.subscribe($=>{$&&$.complete&&_0()}),fx=()=>re().then($=>$&&Ra.revert()),rs=le(!1);E(t,rs,$=>i(372,Vn=$));const yx=()=>{kt(rs,Vn=!0,Vn),te().then($=>{if(!$)return void kt(rs,Vn=!1,Vn);let q;q=rc.subscribe(gt=>{gt===1&&(q&&q(),fr("processImage"))})})},xx=Xu.subscribe($=>{if(!$)return void kt(rs,Vn=!1,Vn);kt(rs,Vn=!0,Vn);const{complete:q,abort:gt}=$;(q||gt)&&kt(rs,Vn=!1,Vn)}),Xo=_5();E(t,Xo,$=>i(57,eo=$));const bx=Ri([Xo],([$],q)=>{if(!$.length)return q();const{origin:gt,translation:Ct,rotation:at,scale:yt}=$[0];q({origin:gt,translation:Ct,rotation:at,scale:yt})}),hd=le();E(t,hd,$=>i(386,wo=$));let md,$d=[];const V0=le(),A1=le(),vx=Ri([ml,A1,Va,M0],([$,q,gt,Ct])=>$||(q||gt<1?Ct:1)),N0={...on,imageFile:ju,imageSize:Bs,mediaDuration:Uu,mediaMinDuration:Y2,mediaMaxDuration:Zu,mediaTrim:Gu,imageBackgroundColor:qc,imageBackgroundImage:l0,imageCropAspectRatio:Zc,imageCropMinSize:q2,imageCropMaxSize:K2,imageCropLimitToImage:Yu,imageCropRect:pa,imageCropRectOrigin:Q2,imageCropRectSnapshot:ql,imageCropRectAspectRatio:tx,imageCropRange:J2,imageRotation:cl,imageRotationRange:ex,imageFlipX:Xc,imageFlipY:Yc,imageOutputSize:ix,imageColorMatrix:c0,imageConvolutionMatrix:d0,imageGamma:u0,imageVignette:p0,imageNoise:h0,imageManipulation:Ju,imageDecoration:qu,imageAnnotation:Ku,imageRedaction:Qu,imageFrame:Os,imagePreview:P1,imagePreviewSource:ec,imageTransforms:ud,imagePreviewModifiers:R1,history:Ra,animation:nd,pixelRatio:E1,elasticityMultiplier:_t,scrollElasticity:Jp,rangeInputElasticity:5,redrawTrigger:Ds,pointerAccuracy:ed,pointerHoverable:id,env:nc,rootRect:dl,stageRect:Pa,stageRectBase:m1,stageRecenter:T0,stageScalar:Va,stagePadding:pl,stagePadded:hl,presentationScalar:cd,imagePreviewUpscale:A1,utilRect:Ws,utilRectPadded:ax,allowPlayPause:Lu,allowPan:e1,allowZoom:i1,allowZoomControls:n1,enableZoomInput:r1,enablePanInput:Jc,enablePanInputStatus:a1,imageSelectionMultiTouching:V0,rootBackgroundColor:Gl,rootForegroundColor:td,rootLineColor:Zl,rootColorSecondary:v0,imageOutlineOpacity:w1,utilTools:hd,imageSelectionPan:$l,imageSelectionZoom:ml,imageSelectionZoomCurrent:vx,imageSelectionStageFitScalar:M0,imageSelectionStoredState:P0,imageOverlayMarkup:Ql,interfaceImages:dd,isInteracting:Yl,isTransformingImage:w0,isInteractingFraction:d1,imageCropRectIntent:p1,imageCropRectPresentation:S0,imageSelectionRect:Zo,imageSelectionRectIntent:h1,imageSelectionRectPresentation:ld,imageSelectionRectSnapshot:ad,imageScalar:z0,imageTransformsInterpolated:bx,imageEffects:B0};delete N0.image;const wx="util-"+ia();let L1=[];const H0=$=>S.find(([q])=>$===q);let Na=[],j0=ya();const U0=($,q,gt)=>{let Ct=_.getPropertyValue($);Ct=gt?gt(Ct):/^[0-9]+$/.test(Ct)?parseFloat(Ct):void 0,q.set(Ct,{hard:!Pi})},Vs=($,q,gt=!1)=>{const Ct=(at=>{const yt=_.getPropertyValue(at);return C2(yt)})($);Ct&&Ct[3]!==0&&(gt||(Ct.length=3),q.set(Ct,{hard:!Pi}))},z1=le();E(t,z1,$=>i(89,Fi=$));const F1=le();E(t,F1,$=>i(90,fn=$));const D1=le();E(t,D1,$=>i(91,In=$));const gd=oi(0,{damping:.9});E(t,gd,$=>i(92,rn=$));const G0=()=>{Vs("color",td),Vs(da?"--color-background":"background-color",Gl),Vs("outline-color",Zl),Vs("--color-primary",s1),Vs("--color-secondary",v0),Vs("--grid-color-even",F1,!0),Vs("--grid-color-odd",D1,!0),U0("--grid-size",z1),U0("--editor-inset-top",c1,$=>parseInt($,10))},Z0=Ri([ud,B0,qc,nx],([$,q,gt,Ct])=>$&&{...$,...q,backgroundColor:gt,backgroundImage:Ct});E(t,Z0,$=>i(381,xo=$));const Sx=()=>{const $=Xo.length?void 0:{resize:1.05},q=((gt,Ct,at={})=>{const{resize:yt=1,opacity:qt=0}=at,Xe={opacity:[oi(qt,{...qs,stiffness:.1}),Zi],resize:[oi(yt,{...qs,stiffness:.1}),Zi],translation:[oi(void 0,qs),Zi],rotation:[oi(void 0,Hd),Zi],origin:[oi(void 0,qs),Zi],scale:[oi(void 0,Hd),Zi],gamma:[oi(void 0,Hd),Ki=>Ki||1],vignette:[oi(void 0,Hd),Ki=>Ki||0],colorMatrix:[oi([...kg],qs),Ki=>Ki||[...kg]],convolutionMatrix:[le(void 0),Ki=>Ki&&Ki.clarity||void 0],backgroundColor:[oi(void 0,qs),(Ki,rr,Fo)=>{if(Array.isArray(Ki)){if(Array.isArray(rr)){const Gi=[...Ki];rr[3]===0?(Gi[3]=0,Fo(Gi)):Gi[3]===0&&((Ki=[...rr])[3]=0)}return Ki}}],backgroundImage:[le(void 0),Zi]},qe=Object.entries(Xe).map(([Ki,rr])=>[Ki,rr[0]]),Ne=qe.map(([,Ki])=>Ki),sn=Object.entries(Xe).reduce((Ki,[rr,Fo])=>{const[Gi,Yo]=Fo;return Ki[rr]=(Hs,yl)=>Gi.set(Yo(Hs,kn[rr],G1=>{Gi.set(G1,{hard:!0})}),yl),Ki},{});let kn;const zr=Ri(Ne,Ki=>(kn=Ki.reduce((rr,Fo,Gi)=>(rr[qe[Gi][0]]=Fo,rr),{}),kn.data=gt,kn.size=Ct,kn.scale*=Ki[1],kn));return zr.get=()=>kn,zr.set=(Ki,rr)=>{const Fo={hard:!rr};Object.entries(Ki).forEach(([Gi,Yo])=>{sn[Gi]&&sn[Gi](Yo,Fo)})},zr})(Dt,ui,$);Xo.unshift(q),X0(xo)},X0=$=>{Xo.forEach((q,gt)=>{const Ct=gt===0?1:0;q.set({...$,opacity:Ct,resize:1},bo)})};let fd;const rc=Bh(void 0,{duration:500});let B1;E(t,rc,$=>i(56,lo=$));const yd=le(!1);let Ha;E(t,yd,$=>i(376,Ar=$));const xd=oi(void 0,{stiffness:.1,damping:.7,precision:.25});E(t,xd,$=>i(84,Ni=$));const bd=oi(0,{stiffness:.1,precision:.05});E(t,bd,$=>i(85,zi=$));const oc=oi(0,{stiffness:.02,damping:.5,precision:.25});E(t,oc,$=>i(374,Dn=$));const O1=oi(void 0,{stiffness:.02,damping:.5,precision:.25});E(t,O1,$=>i(375,yo=$));const vd=oi(void 0,{stiffness:.02,damping:.5,precision:.25});let wd;E(t,vd,$=>i(373,so=$));const kx=()=>{fr("abortLoadImage")},Cx=()=>{fr("abortProcessImage"),kt(rs,Vn=!1,Vn)},Y0=$=>{$.target&&$.target.dataset.touchScroll==="true"||$.preventDefault()},Tx=O0?$=>{const q=$.touches?$.touches[0]:$;q.pageX>20&&q.pageX<window.innerWidth-20||Y0($)}:me,Ns=le([]);E(t,Ns,$=>i(468,jn=$)),ko("keysPressed",Ns);const W1=$=>{!$||Ll($)&&!(q=>/^image/.test(q.type)&&!/svg/.test(q.type))($)||!Ll($)&&!/^http/.test($)||fr("loadImage",$)},Mx=$=>{$&&W1($)};let fl,ac,_1=[];const q0=le();ko("rootPortal",q0),ko("rootRect",dl);const K0=()=>({foregroundColor:[...mn],lineColor:[...yn],utilVisibility:{...lt},isInteracting:Ui,isInteractingFraction:an,rootRect:Ci(Ie),stageRect:Ci(he),manipulationShapesDirty:Pd,annotationShapesDirty:kd,decorationShapesDirty:Td,frameShapesDirty:Md}),J0=($,q,gt)=>Zn($,Hn(Math.round(q.width/gt),Math.round(q.height/gt))),Q0=($,q,gt)=>{var Ct;return $._translate=rt((Ct=q).x,Ct.y),$._scale=gt,$},Sd=$=>{const q=[];return $.forEach(gt=>q.push(Px(gt))),q.filter(Boolean)},Px=$=>or($)?($.points=[rt($.x1,$.y1),rt($.x2,$.y2)],$):(!(q=>Kn(q)&&!q.text.length)($)||$.backgroundColor&&$.backgroundColor[3]!==0||(lu($)&&($.width=5,$.height=$.lineHeight),$.strokeWidth=1,$.strokeColor=[1,1,1,.5],$.backgroundColor=[0,0,0,.1]),$);let tm,V1=[],N1=[],H1=[],j1=[],U1=[],em={};const im=($,q,gt,Ct,at,yt,qt)=>{const{manipulationShapesDirty:Xe,annotationShapesDirty:qe,decorationShapesDirty:Ne,frameShapesDirty:sn,selectionRect:kn,scale:zr}=$,Ki=tm!==zr,rr=Ki||!ta(em,kn);rr&&(tm=zr,em=kn),Xe&&(H1=q.filter(Ld).map(Nn).map(Gi=>Zn(Gi,ui))),(qe||gt!==xe)&&(V1=gt.filter(Ld).map(Nn).sort((Gi,Yo)=>Gi.alwaysOnTop?1:Yo.alwaysOnTop?-1:0).map(Gi=>Zn(Gi,ui))),(Ki||Cd||qe||gt!==xe)&&(N1=Sd(V1.map(Gi=>m(Gi,{flipX:yi,flipY:Be,rotation:Mi,scale:zr,context:Ur(ui)})).flat())),(Ne||Ct!==fi||rr)&&(j1=Sd(Ct.filter(Ld).map(Nn).sort((Gi,Yo)=>Gi.alwaysOnTop?1:Yo.alwaysOnTop?-1:0).map(Gi=>J0(Gi,kn,zr)).map(Gi=>m(Gi,{context:kn})).flat().map(Gi=>Q0(Gi,kn,zr)))),(sn||yt!==Se||rr)&&(U1=yt?Sd([yt].map(Nn).map(Gi=>J0(Gi,kn,zr)).map(m).flat().map(Gi=>Q0(Gi,kn,zr))):[]);let Fo=Sd(at.filter(Ld));return typeof window<"u"&&(Gi=>{if(Gi&&Gi._yve10k0)return;const[Yo]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101]].map(Hs=>Hs.map(yl=>String.fromCharCode(yl)).join(""));Fo=[...Fo,{x:kn.x+.5*kn.width-82,y:kn.y+kn.height-16-12,width:164,height:16,text:Yo,fontWeight:900,fontSize:12,color:[1,1,1,.25]}]})(window),{manipulationShapesDirty:Xe,manipulationShapes:H1,annotationShapesDirty:qe,annotationShapes:N1,decorationShapesDirty:Ne,decorationShapes:j1,frameShapesDirty:sn,frameShapes:U1,interfaceShapes:Fo,selectionShapes:qt.map(Nn).map(Gi=>Zn(Gi,ui))}};let kd=!0,Cd=!0,Td=!0,Md=!0,Pd=!0;return No(()=>{Fs(),Dt&&Oe(Dt.src)&&/^blob:/.test(Dt.src)&&URL.revokeObjectURL(Dt.src),rx(),cx(),lx(),dx(),ux(),px(),hx(),gx(),xx(),ed.destroy(),id.destroy(),Hu.destroy(),Xo.clear(),V1.length=0,N1.length=0,H1.length=0,j1.length=0,U1.length=0;try{i(230,ic=void 0),i(287,fd=void 0)}catch{}}),t.$$set=$=>{"class"in $&&i(231,er=$.class),"layout"in $&&i(232,Nr=$.layout),"stores"in $&&i(233,on=$.stores),"locale"in $&&i(3,Di=$.locale),"id"in $&&i(4,Es=$.id),"util"in $&&i(234,yr=$.util),"utils"in $&&i(235,al=$.utils),"animations"in $&&i(236,Uo=$.animations),"disabled"in $&&i(237,b=$.disabled),"status"in $&&i(229,H=$.status),"previewUpscale"in $&&i(238,L=$.previewUpscale),"previewPad"in $&&i(239,st=$.previewPad),"previewMaskOpacity"in $&&i(5,ut=$.previewMaskOpacity),"previewImageDataMaxSize"in $&&i(240,Wt=$.previewImageDataMaxSize),"previewImageTextPixelRatio"in $&&i(6,Pt=$.previewImageTextPixelRatio),"markupMaskOpacity"in $&&i(7,ie=$.markupMaskOpacity),"zoomMaskOpacity"in $&&i(241,Ht=$.zoomMaskOpacity),"elasticityMultiplier"in $&&i(8,_t=$.elasticityMultiplier),"willRevert"in $&&i(242,re=$.willRevert),"willProcessImage"in $&&i(243,te=$.willProcessImage),"willRenderCanvas"in $&&i(9,Ve=$.willRenderCanvas),"willRenderToolbar"in $&&i(244,ae=$.willRenderToolbar),"willRenderUtilTabs"in $&&i(245,Te=$.willRenderUtilTabs),"willSetHistoryInitialState"in $&&i(246,ke=$.willSetHistoryInitialState),"enableButtonExport"in $&&i(247,Jt=$.enableButtonExport),"enableButtonRevert"in $&&i(248,Ae=$.enableButtonRevert),"enableNavigateHistory"in $&&i(249,pi=$.enableNavigateHistory),"enableToolbar"in $&&i(10,Bi=$.enableToolbar),"enableUtils"in $&&i(250,hi=$.enableUtils),"enableButtonClose"in $&&i(251,mi=$.enableButtonClose),"enableDropImage"in $&&i(252,Qe=$.enableDropImage),"enablePasteImage"in $&&i(253,nn=$.enablePasteImage),"enableBrowseImage"in $&&i(254,Wi=$.enableBrowseImage),"enableTransparencyGrid"in $&&i(11,Tr=$.enableTransparencyGrid),"layoutDirectionPreference"in $&&i(255,ir=$.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in $&&i(256,Sn=$.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in $&&i(257,En=$.layoutVerticalUtilsPreference),"layoutVerticalToolbarPreference"in $&&i(258,xr=$.layoutVerticalToolbarPreference),"layoutVerticalControlGroupsPreference"in $&&i(259,Kr=$.layoutVerticalControlGroupsPreference),"layoutVerticalControlTabsPreference"in $&&i(260,Ta=$.layoutVerticalControlTabsPreference),"textDirection"in $&&i(12,As=$.textDirection),"markupEditorZoomLevel"in $&&i(261,Da=$.markupEditorZoomLevel),"markupEditorZoomLevels"in $&&i(13,Ma=$.markupEditorZoomLevels),"markupEditorZoomAdjustStep"in $&&i(14,Go=$.markupEditorZoomAdjustStep),"markupEditorZoomAdjustFactor"in $&&i(15,Ao=$.markupEditorZoomAdjustFactor),"markupEditorZoomAdjustWheelFactor"in $&&i(16,ts=$.markupEditorZoomAdjustWheelFactor),"markupEditorInteractionMode"in $&&i(262,la=$.markupEditorInteractionMode),"muteAudio"in $&&i(263,Ba=$.muteAudio),"willSetMediaInitialTimeOffset"in $&&i(264,Lo=$.willSetMediaInitialTimeOffset),"enablePan"in $&&i(17,Oa=$.enablePan),"enableZoom"in $&&i(18,es=$.enableZoom),"enableZoomControls"in $&&i(265,is=$.enableZoomControls),"enableZoomInput"in $&&i(19,Wl=$.enableZoomInput),"enablePanInput"in $&&i(266,ca=$.enablePanInput),"enableCanvasAlpha"in $&&i(20,da=$.enableCanvasAlpha),"enablePanLimit"in $&&i(21,nr=$.enablePanLimit),"panLimitGutterScalar"in $&&i(22,ua=$.panLimitGutterScalar),"zoomPresetOptions"in $&&i(23,Yh=$.zoomPresetOptions),"zoomAdjustStep"in $&&i(24,qh=$.zoomAdjustStep),"zoomAdjustFactor"in $&&i(25,Kh=$.zoomAdjustFactor),"zoomAdjustWheelFactor"in $&&i(26,Jh=$.zoomAdjustWheelFactor),"zoomLevel"in $&&i(0,Ls=$.zoomLevel),"fixScrollDirection"in $&&i(267,Wc=$.fixScrollDirection),"imagePreviewSrc"in $&&i(270,Eu=$.imagePreviewSrc),"imageOrienter"in $&&i(271,Vc=$.imageOrienter),"pluginComponents"in $&&i(272,sl=$.pluginComponents),"pluginOptions"in $&&i(27,zs=$.pluginOptions),"root"in $&&i(2,br=$.root),"imageSourceToImageData"in $&&i(28,Nu=$.imageSourceToImageData),"imagePreviewCurrent"in $&&i(230,ic=$.imagePreviewCurrent)},t.$$.update=()=>{if(524288&t.$$.dirty[8]&&Qh.set(Wc),1&t.$$.dirty[0]|8192&t.$$.dirty[8]&&i(0,Ls=Ls===null?Da:Ls),2&t.$$.dirty[0]|16777216&t.$$.dirty[8]){let at=!1;sl.forEach(([yt])=>{zo[yt]||(i(1,zo[yt]={},zo),at=!0)}),at&&i(284,jl=[...sl])}var $,q,gt,Ct;if(8&t.$$.dirty[0]|262144&t.$$.dirty[7]|32&t.$$.dirty[9]&&i(340,J=Di&&jl.length?al||jl.map(([at])=>at):[]),134217728&t.$$.dirty[0]|32&t.$$.dirty[9]|1073741824&t.$$.dirty[10]|32768&t.$$.dirty[12]&&i(341,S=((at,yt,qt,Xe)=>{const qe=yt.filter(([Ne])=>at.includes(Ne)).filter(([Ne,{isSupported:sn}])=>sn({...Xe,...qt[Ne]})).map(([Ne,sn])=>[Ne,sn.Component]);return Ka(qe,L1,(Ne,sn)=>Ne[0]===sn[0]&&Ne[1]===sn[1])?L1:(L1=qe,qe)})(J,jl,zs,{src:Wr})),1&t.$$.dirty[11]&&i(295,j=S.length),8&t.$$.dirty[0]|65536&t.$$.dirty[9]|1073741824&t.$$.dirty[10]&&i(48,K=j&&J.map(at=>{const yt=H0(at);if(yt)return{id:at,view:yt[1],tabIcon:Di[at+"Icon"],tabLabel:Di[at+"Label"]}}).filter(Boolean)||[]),131072&t.$$.dirty[1]&&i(358,n=!!K.find(at=>at.id==="trim")),393216&t.$$.dirty[11]|256&t.$$.dirty[13]&&i(294,r=!!(A&&Dt&&n)),131072&t.$$.dirty[7]|65536&t.$$.dirty[9]&&i(44,dt=j&&yr&&typeof yr=="string"&&H0(yr)?yr:j>0?S[0][0]:void 0),8192&t.$$.dirty[1]|32768&t.$$.dirty[9]&&r&&dt&&Fs(),32768&t.$$.dirty[9]|262144&t.$$.dirty[11]&&(r?(Dt.addEventListener("play",Nc),Dt.addEventListener("pause",Nc)):Dt&&Dt.nodeName==="video"&&(Dt.removeEventListener("play",Nc),Dt.removeEventListener("pause",Nc))),32768&t.$$.dirty[9]&&r&&Wa.set(Hl()/_a()),1152&t.$$.dirty[13]&&(at=>{if(!ll())return;const yt=Date.now();if(zu&&yt-zu<16)return;zu=yt;const qt=A*at;if(qt.toFixed(1)===e0)return;e0=qt.toFixed(1);const Xe=Dt,qe=()=>{Xe.removeEventListener("seeked",qe),Au()};Xe.addEventListener("seeked",qe),xg(Xe,qt)})(De||Rn),128&t.$$.dirty[13]&&i(356,o=Rn&&ii(Rn,6)),2336&t.$$.dirty[13]&&i(354,a=jo||[[0,Math.min(A,Si)/A]]),8192&t.$$.dirty[11]&&(s=a[0][0]),8192&t.$$.dirty[11]&&(l=a[a.length-1][1]),8192&t.$$.dirty[11]&&i(357,c=a.map(([at,yt])=>[ii(at,6),ii(yt,6)])),98304&t.$$.dirty[11]&&i(355,d=c.findIndex(([at,yt])=>o>=at&&o<=yt)),114688&t.$$.dirty[11]&&(u=d===-1&&c.findIndex((at,yt,qt)=>{const Xe=qt[yt-1];return Xe?o<=at[0]&&o>=Xe[1]:o<=at[0]})),32768&t.$$.dirty[8]&&Nl.set(Ba),262144&t.$$.dirty[11]|512&t.$$.dirty[13]&&(Dt&&Pe?Wu():_u()),32768&t.$$.dirty[9]|128&t.$$.dirty[13]&&r&&Uc.set(_a()*Rn),262144&t.$$.dirty[11]|64&t.$$.dirty[13]&&Dt&&(at=>{r&&(Dt.volume=Math.min(1,at))})(Sa),256&t.$$.dirty[0]&&kt(jc,Eo=_t,Eo),32768&t.$$.dirty[7]&&i(350,p=Nr==="overlay"),4&t.$$.dirty[8]|512&t.$$.dirty[11]&&i(46,h=hi&&!p),134217730&t.$$.dirty[0]&&zs&&Object.entries(zs).forEach(([at,yt])=>{Object.entries(yt).forEach(([qt,Xe])=>{zo[at]&&i(1,zo[at][qt]=Xe,zo)})}),1048576&t.$$.dirty[7]&&Vu.set(b?1:0),8388608&t.$$.dirty[7]&&(g=Wt?($=Wt,q=o0,Hn(Math.min($.width,q.width),Math.min($.height,q.height))):o0),16&t.$$.dirty[13]&&Hu.update(za[0]),8&t.$$.dirty[13]&&(m=Ho?(at,yt)=>Ho(at,{flipX:void 0,flipY:void 0,rotation:void 0,...yt,isPreview:!0}):Zi),1073741824&t.$$.dirty[1]&&Array.isArray(Vr)&&fr("selectionchange",[...Vr]),131072&t.$$.dirty[8]|4&t.$$.dirty[13]&&o1.set(Oi&&is),278528&t.$$.dirty[8]&&Qc.set(la==="pan"||ca),4194304&t.$$.dirty[1]&&Un&&dl.set(An(Un.x,Un.y,Un.width,Un.height)),8389120&t.$$.dirty[11]|128&t.$$.dirty[12]&&Ie&&p&&qi&&qi.complete&&(()=>{const at=Vi,yt=sr(Ie);at&&at===yt||(Zc.set(sr(Ie)),_0())})(),1073741824&t.$$.dirty[10]&&i(47,Lt=J.length>1),65536&t.$$.dirty[1]&&(Lt||ul.set(hs())),1024&t.$$.dirty[0]|2&t.$$.dirty[13]&&(Bi||Xl.set(An(0,Ei,0,0))),16779264&t.$$.dirty[11]&&i(353,x=!Ui&&y),1&t.$$.dirty[13]&&i(351,k=!we),4194304&t.$$.dirty[1]&&i(296,Xt=Un&&Un.width>0&&Un.height>0),8&t.$$.dirty[0]|196608&t.$$.dirty[9]&&i(41,Nt=Xt&&Di&&!!j),1024&t.$$.dirty[1]&&setTimeout(()=>i(285,u1=Nt),1),524288&t.$$.dirty[7]|64&t.$$.dirty[9]|5120&t.$$.dirty[11]&&kt(nd,bo=Uo==="always"?x:Uo!=="never"&&x&&u1&&k,bo),524288&t.$$.dirty[7]|3072&t.$$.dirty[11]&&kt(rd,Pi=Uo==="always"?y:Uo!=="never"&&y&&k,Pi),2097152&t.$$.dirty[7]|512&t.$$.dirty[11]&&od.set(L||p),4194304&t.$$.dirty[7]&&sd.set(st),4&t.$$.dirty[0]|1207959552&t.$$.dirty[12]&&br&&(br.dispatchEvent(ss("markupzoom",Kt)),br.dispatchEvent(ss("zoom",$i(Kt)?Kt:wn))),4&t.$$.dirty[0]|536870912&t.$$.dirty[12]&&br&&(br.dispatchEvent(ss("markuppan",ne)),br.dispatchEvent(ss("pan",ne))),67108864&t.$$.dirty[12]&&Gn&&R0(),268435456&t.$$.dirty[12]&&li&&y1(),16785408&t.$$.dirty[1]&&dt&&w1.set(.075,{hard:!Pi}),16777216&t.$$.dirty[7]&&i(348,w=Ht),50331648&t.$$.dirty[12]&&i(349,C=hr?-Math.max(...Object.values(Yr)):0),555745280&t.$$.dirty[1]|384&t.$$.dirty[11]&&un){let at=un.x-he.x,yt=he.x+he.width-(un.x+un.width),qt=un.y-he.y,Xe=he.y+he.height-(un.y+un.height),qe=Math.min(at,qt,yt,Xe);S1.set(qe>C?0:Math.min(w,Math.abs(qe/64)),{hard:!Pi})}if(268435456&t.$$.dirty[1]&&i(347,M=.55/Xr),18874368&t.$$.dirty[1]|64&t.$$.dirty[11]&&he&&k1.set({x:0,y:he.y,width:he.x<64?0:he.x,height:he.height+M},{hard:!Pi}),18874368&t.$$.dirty[1]|8388672&t.$$.dirty[11]&&he&&C1.set({x:0,y:0,width:Ie.width,height:he.y+M},{hard:!Pi}),18874368&t.$$.dirty[1]|8388672&t.$$.dirty[11]&&he){let at=he.x+he.width,yt=Ie.width-(he.x+he.width);yt<64&&(at+=yt,yt=0),T1.set({x:at,y:he.y,width:yt,height:he.height+M},{hard:!Pi})}if(18874368&t.$$.dirty[1]|8388608&t.$$.dirty[11]&&he&&M1.set({x:0,y:he.y+he.height,width:Ie.width,height:Ie.height-(he.y+he.height)},{hard:!Pi}),134217728&t.$$.dirty[1]|9437184&t.$$.dirty[12]&&i(343,R=no&&{id:"stage-overlay",backgroundColor:Pn,opacity:wi,...no}),134217728&t.$$.dirty[1]|5242880&t.$$.dirty[12]&&i(346,O=gn&&{id:"stage-overlay",backgroundColor:Pn,opacity:wi,...gn}),134217728&t.$$.dirty[1]|3145728&t.$$.dirty[12]&&i(345,T=Yn&&{id:"stage-overlay",backgroundColor:Pn,opacity:wi,...Yn}),134217728&t.$$.dirty[1]|1572864&t.$$.dirty[12]&&i(344,z=_r&&{id:"stage-overlay",backgroundColor:Pn,opacity:wi,..._r}),60&t.$$.dirty[11]&&i(342,F=[O,T,z,R].filter(Boolean)),2&t.$$.dirty[11]|262144&t.$$.dirty[12]&&F&&So&&Ql.update(at=>[...at.filter(yt=>yt.id!=="stage-overlay"),...F]),4194304&t.$$.dirty[8]|32768&t.$$.dirty[12]&&ec.set(Eu||Wr||void 0),4&t.$$.dirty[0]|8192&t.$$.dirty[7]|262144&t.$$.dirty[11]&&(i(230,ic=Dt),Dt&&br.dispatchEvent(ss("loadpreview",ic))),256&t.$$.dirty[12]&&Zr&&($l.set(Ji()),ml.set(void 0),R0(),dd.set([])),131072&t.$$.dirty[12]&&i(300,f=io.index>0),131072&t.$$.dirty[12]&&i(299,V=io.index<io.length-1),8&t.$$.dirty[1]&&V0.set(md),65536&t.$$.dirty[12]&&A1.set(Sr),8192&t.$$.dirty[1]&&ox.set(dt),131200&t.$$.dirty[1]&&i(38,lt=K.reduce((at,yt)=>(at[yt.id]=lt&&lt[yt.id]||0,at),{})),8192&t.$$.dirty[1]&&i(81,N={name:wx,selected:dt}),131072&t.$$.dirty[1]&&i(322,ft=K.map(at=>({id:at.id,icon:at.tabIcon,label:at.tabLabel}))),131072&t.$$.dirty[1]&&i(80,$t=K.map(at=>at.id)),16384&t.$$.dirty[7]&&i(79,ct=ci(["PinturaRoot","PinturaRootComponent",er])),8388608&t.$$.dirty[11]&&i(336,et=Ie&&(Ie.width>1e3?"wide":Ie.width<600?"narrow":void 0)),8388608&t.$$.dirty[11]&&i(323,ht=Ie&&(Ie.width<=320||Ie.height<=460)),8388608&t.$$.dirty[11]&&i(335,Y=Ie&&(Ie.height>1e3?"tall":Ie.height<600?"short":void 0)),4&t.$$.dirty[0]&&i(302,Z=br&&br.parentNode&&br.parentNode.classList.contains("PinturaModal")),1&t.$$.dirty[1]|8388608&t.$$.dirty[9]|8388608&t.$$.dirty[11]&&i(328,St=Z&&Ie&&pd>Ie.width),2&t.$$.dirty[1]|8388608&t.$$.dirty[9]|8388608&t.$$.dirty[11]&&i(327,nt=Z&&Ie&&I1>Ie.height),393216&t.$$.dirty[10]&&i(329,mt=St&&nt),1048576&t.$$.dirty[0]&&i(326,Ft=da),67108864&t.$$.dirty[10]&&i(297,oe=et==="narrow"),128&t.$$.dirty[8]|8388608&t.$$.dirty[11]&&i(337,(gt=Ie,Ct=ir,Rt=Ie?Ct==="auto"?gt.width>gt.height?"landscape":"portrait":Ct==="horizontal"?gt.width<500?"portrait":"landscape":Ct==="vertical"?gt.height<400?"landscape":"portrait":void 0:"landscape")),134217728&t.$$.dirty[10]&&i(78,Ut=Rt==="landscape"),262144&t.$$.dirty[9]|33554432&t.$$.dirty[10]&&i(325,Ot=oe||Y==="short"),1&t.$$.dirty[1]|8388608&t.$$.dirty[11]&&i(324,U=j0&&Ie&&pd===Ie.width&&!O0),4&t.$$.dirty[1]|16384&t.$$.dirty[12]&&i(298,wt=[...wo||[],...$d].filter(Boolean)),256&t.$$.dirty[8]&&i(334,xt="has-navigation-preference-"+Sn),512&t.$$.dirty[8]&&i(333,Gt="has-navigation-preference-"+En),1024&t.$$.dirty[8]&&i(330,de="has-toolbar-preference-"+xr),2048&t.$$.dirty[8]&&i(332,ue="has-controlgroups-preference-"+Kr),4096&t.$$.dirty[8]&&i(331,be="has-controltabs-preference-"+Ta),8388608&t.$$.dirty[11]&&i(339,$e=Ie!==void 0&&Ie.width>0&&Ie.height>0),4&t.$$.dirty[0]|536870912&t.$$.dirty[10]&&i(338,_=$e&&br&&getComputedStyle(br)),268435456&t.$$.dirty[10]&&_&&G0(),1024&t.$$.dirty[0]|16875520&t.$$.dirty[1]|1081344&t.$$.dirty[7]|8388608&t.$$.dirty[9]|268427264&t.$$.dirty[10]|1073741824&t.$$.dirty[11]|12288&t.$$.dirty[12]&&nc.set({...vn,layoutMode:Nr,orientation:Rt,horizontalSpace:et,verticalSpace:Y,navigationHorizontalPreference:xt,navigationVerticalPreference:Gt,controlGroupsVerticalPreference:ue,controlTabsVerticalpreference:be,toolbarVerticalPreference:de,isModal:Z,isDisabled:b,isCentered:mt,isCenteredHorizontally:St,isCenteredVertically:nt,isAnimated:Pi,isTransparent:Ft,pointerAccuracy:vo,pointerHoverable:uo,isCompact:Ot,hasSwipeNavigation:U,hasLimitedSpace:ht,hasToolbar:Bi,hasNavigation:Lt&&h,isIOS:j0,browserVersion:Dh()?"chrome-"+(navigator.userAgent.match(/Chrome\/([0-9]+)/)||[])[1]:void 0}),1073741824&t.$$.dirty[11]&&i(77,ve=Object.entries(vn).map(([at,yt])=>/^is|has/.test(at)?yt?M2(at):void 0:yt).filter(Boolean).join(" ")),8192&t.$$.dirty[1]&&dt&&hd.set([]),8192&t.$$.dirty[1]|268435456&t.$$.dirty[7]|4096&t.$$.dirty[10]|1073741824&t.$$.dirty[11]&&i(45,gi=Te(ft.map(at=>({...at,selected:dt===at.id})),{...vn},()=>Ds.set({}))),16384&t.$$.dirty[1]&&i(76,ye=!!gi.find(at=>Array.isArray(at))),3072&t.$$.dirty[12]&&i(75,Vt=co&&Object.entries(Io).filter(([,at])=>at!=null).reduce((at,[,yt])=>at={...at,...yt},{})),128&t.$$.dirty[12]&&i(319,bi=qi&&qi.task==="any-to-file"),512&t.$$.dirty[10]&&bi&&Xo&&Xo.clear(),512&t.$$.dirty[12]&&i(321,Ce=!!xo&&!!xo.translation),256&t.$$.dirty[9]|2048&t.$$.dirty[10]|262144&t.$$.dirty[11]&&Ce&&Dt&&Dt!==fd&&(i(287,fd=Dt),Sx()),2048&t.$$.dirty[10]|512&t.$$.dirty[12]&&Ce&&X0(xo),67108864&t.$$.dirty[1]&&eo&&eo.length>1){let at=[];Xo.forEach((yt,qt)=>{qt!==0&&yt.get().opacity<=0&&at.push(yt)}),at.forEach(yt=>Xo.remove(yt))}if(8&t.$$.dirty[0]|1024&t.$$.dirty[10]&&i(40,He=Di&&Re.length&&Di.labelSupportError(Re)),128&t.$$.dirty[12]&&i(311,vt=qi&&!!qi.error),128&t.$$.dirty[12]&&i(43,bt=!qi||!qi.complete&&qi.task===void 0),128&t.$$.dirty[12]&&i(312,Ge=qi&&(qi.taskLengthComputable?qi.taskProgress:1/0)),512&t.$$.dirty[10]&&bi&&kt(tc,wr=!1,wr),16777216&t.$$.dirty[1]|512&t.$$.dirty[9]|128&t.$$.dirty[12]&&qi&&qi.complete){const at=Pi?250:0;clearTimeout(B1),i(288,B1=setTimeout(()=>{kt(tc,wr=!0,wr)},at))}if(4096&t.$$.dirty[1]|2&t.$$.dirty[10]|160&t.$$.dirty[12]&&i(316,Me=qi&&!vt&&!bt&&!wr),128&t.$$.dirty[9]|262144&t.$$.dirty[11]|256&t.$$.dirty[12]&&i(315,ni=!(!Zr||Dt&&!ns)),16777216&t.$$.dirty[1]|32&t.$$.dirty[12]&&(wr?setTimeout(()=>gd.set(1),Pi?500:0):gd.set(0)),65&t.$$.dirty[12]&&i(310,Ue=!!(Vn||Mn&&Mn.progress!==void 0&&!Mn.complete)),1&t.$$.dirty[10]&&Ue&&Fs(),4096&t.$$.dirty[1]|128&t.$$.dirty[12]&&i(313,ei=qi&&!(qi.error||bt)),8&t.$$.dirty[0]|128&t.$$.dirty[12]&&i(314,vi=Di&&(qi?!qi.complete||qi.error?zh(Di.statusLabelLoadImage(qi),qi.error&&qi.error.metadata,"{","}"):Di.statusLabelLoadImage({progress:1/0,task:"blob-to-bitmap"}):Di.statusLabelLoadImage(qi))),8&t.$$.dirty[0]|64&t.$$.dirty[12]&&i(309,di=Mn&&Di&&Di.statusLabelProcessImage(Mn)),64&t.$$.dirty[12]&&i(307,Li=Mn&&(Mn.taskLengthComputable?Mn.taskProgress:1/0)),64&t.$$.dirty[12]&&i(308,X=Mn&&!Mn.error),64&t.$$.dirty[12]&&i(306,jt=!(!Mn||!Mn.error)),8&t.$$.dirty[0]|4096&t.$$.dirty[1]|4096&t.$$.dirty[7]|2013265920&t.$$.dirty[9]|127&t.$$.dirty[10])if(H){let at,yt,qt,Xe,qe;Oe(H)&&(at=H),$i(H)?yt=H:Array.isArray(H)&&([at,yt,qe]=H,yt===!1&&(Xe=!0),$i(yt)&&(qt=!0)),i(35,Ha=(at||yt)&&{text:at,aside:Xe||qt,progressIndicator:{visible:qt,progress:yt},closeButton:Xe&&{label:Di.statusLabelButtonClose,icon:Di.statusIconButtonClose,onclick:qe||(()=>i(229,H=void 0))}})}else i(35,Ha=Di&&bt||vt||Me||ni?{text:vi,aside:vt||ei,progressIndicator:{visible:ei,progress:Ge},closeButton:vt&&{label:Di.statusLabelButtonClose,icon:Di.statusIconButtonClose,onclick:kx}}:Di&&Ue&&di?{text:di,aside:jt||X,progressIndicator:{visible:X,progress:Li},closeButton:jt&&{label:Di.statusLabelButtonClose,icon:Di.statusIconButtonClose,onclick:Cx}}:void 0);if(4096&t.$$.dirty[7]&&i(318,G=H!==void 0),16777216&t.$$.dirty[1]|8388608&t.$$.dirty[9]|64&t.$$.dirty[12]&&Z&&Mn&&Mn.complete&&(yd.set(!0),setTimeout(()=>yd.set(!1),Pi?100:0)),4&t.$$.dirty[0]|8192&t.$$.dirty[1]|32&t.$$.dirty[12]&&wr&&br&&br.dispatchEvent(ss("selectutil",dt)),4608&t.$$.dirty[1]|355&t.$$.dirty[10]|16&t.$$.dirty[12]&&i(317,Bt=Ar||He||bt||vt||Me||ni||Ue||G),128&t.$$.dirty[10]&&kt(rc,lo=Bt?1:0,lo),16777216&t.$$.dirty[1]|128&t.$$.dirty[10]&&rc.set(Bt?1:0,{duration:Pi?500:1}),33554432&t.$$.dirty[1]&&i(42,fe=lo>0),16&t.$$.dirty[1]&&i(305,Qt=!(!Ha||!Ha.aside)),16779280&t.$$.dirty[1]|67109888&t.$$.dirty[9]|8&t.$$.dirty[12]&&fe&&Ha){clearTimeout(wd);const at={hard:Pi===!1};if(Qt){const yt=!!Ha.error||!Pi;bd.set(1,at),xd.set(yo,{hard:yt}),i(289,wd=setTimeout(()=>{oc.set(16,at)},1))}else bd.set(0,at),i(289,wd=setTimeout(()=>{oc.set(0,at)},1))}if(2048&t.$$.dirty[1]&&(fe||(vd.set(void 0,{hard:!0}),xd.set(void 0,{hard:!0}),oc.set(0,{hard:!0}))),4&t.$$.dirty[12]&&i(304,se=.5*Dn),33554432&t.$$.dirty[9]|2&t.$$.dirty[12]&&i(74,zt=`transform: translateX(${so-se}px)`),512&t.$$.dirty[1]|262144&t.$$.dirty[11]&&i(39,ee=Dt&&!He),256&t.$$.dirty[1]|25165824&t.$$.dirty[9]&&i(301,Ee=We&&(ee||Z)?Y0:me),4194304&t.$$.dirty[9]&&i(73,je=Ee),4194304&t.$$.dirty[9]&&i(72,Ke=Ee),8&t.$$.dirty[0]|8388608&t.$$.dirty[1]|1207959552&t.$$.dirty[7]|11&t.$$.dirty[8]|3932160&t.$$.dirty[9]|1073741824&t.$$.dirty[11]&&i(71,it=Di&&_n&&Lc(()=>ae([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[mi&&["Button","close",{label:Di.labelClose,icon:Di.iconButtonClose,onclick:()=>fr("close"),hideLabel:!0}],Ae&&["Button","revert",{label:Di.labelButtonRevert,icon:Di.iconButtonRevert,disabled:!f,onclick:fx,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[pi&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:Di.labelButtonUndo,icon:Di.iconButtonUndo,disabled:!f,onclick:Ra.undo,hideLabel:!0}],["Button","redo",{label:Di.labelButtonRedo,icon:Di.iconButtonRedo,disabled:!V,onclick:Ra.redo,hideLabel:!0}]]],wt.length&&["div","plugin-tools",{class:"PinturaNavSet"},wt.filter(Boolean).map(([at,yt,qt])=>[at,yt,{...qt}])]]],["div","gamma",{class:"PinturaNavGroup"},[Jt&&["Button","export",{label:Di.labelButtonExport,icon:oe&&Di.iconButtonExport,class:"PinturaButtonExport",onclick:yx,hideLabel:oe}]]]],{...vn},()=>Ds.set({})))),67108864&t.$$.dirty[11]&&i(293,Zt=tn&&!!tn.length),16384&t.$$.dirty[9]|67633152&t.$$.dirty[11]&&i(292,Yt=Zt&&Ry(ui,tn)),24576&t.$$.dirty[9]|805568512&t.$$.dirty[11]&&Zt&&((at,yt,qt,Xe)=>{if(!yt)return;const qe={dataSizeScalar:qt};Xe&&Xe[3]>0&&(qe.backgroundColor=[...Xe]),yt(at,qe).then(Ne=>{fl&&Qn(fl),i(290,fl=Ne)})})(Dt,Xn,Yt,Fn),2048&t.$$.dirty[9]|201850880&t.$$.dirty[11]&&tn&&fl&&ui){const{width:at,height:yt}=ui,qt=Ea()?"pixelated":Yi==="auto"?"auto":"pixelated";i(291,_1=tn.map(Xe=>{const qe=An(Xe.x,Xe.y,Xe.width,Xe.height),Ne=Mr(Ci(qe),Xe.rotation).map(sn=>rt(sn.x/at,sn.y/yt));return{...Xe,id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0,0],backgroundImage:fl,backgroundImageRendering:qt,backgroundCorners:Ne}}))}4096&t.$$.dirty[9]|33554432&t.$$.dirty[11]&&i(37,ot=[..._1,...$n||[]]),32&t.$$.dirty[1]&&ac&&q0.set(ac),4&t.$$.dirty[0]|256&t.$$.dirty[1]&&ee&&br.dispatchEvent(ss("ready")),1048576&t.$$.dirty[1]&&i(65,kd=!0),7864320&t.$$.dirty[11]&&i(66,Cd=!0),524288&t.$$.dirty[1]&&i(67,Td=!0),262144&t.$$.dirty[1]&&i(68,Md=!0),64&t.$$.dirty[1]&&i(69,Pd=!0)},i(352,y=!Oh()),B=xc()===1?$=>{$&&(Mo($.origin,Math.round),Mo($.translation,Math.round))}:Zi,i(320,Re=[!W5()&&"WebGL"].filter(Boolean)),i(303,We=ya()||gu()&&xa()),i(70,pe=(($,q=!0)=>gt=>{gt.type==="ping"&&(q&&gt.stopPropagation(),$(gt.detail.type,gt.detail.data))})(Lr.pub)),[Ls,zo,br,Di,Es,ut,Pt,ie,_t,Ve,Bi,Tr,As,Ma,Go,Ao,ts,Oa,es,Wl,da,nr,ua,Yh,qh,Kh,Jh,zs,Nu,P1,Ra,pd,I1,$d,md,Ha,ac,ot,lt,ee,He,Nt,fe,bt,dt,gi,h,Lt,K,Se,fi,xe,he,Un,_n,Pi,lo,eo,Pn,Xr,un,Vr,_l,_c,Na,kd,Cd,Td,Md,Pd,pe,it,Ke,je,zt,Vt,ye,ve,Ut,ct,$t,N,tr,Cr,Ni,zi,Ze,xi,Ye,Fi,fn,In,rn,xn,ki,gr,mo,Ms,Ps,Rs,Is,Fa,Qa,ol,Lu,Vl,Wa,Nl,Ds,jc,Vu,ju,Bs,Uu,Uc,Gu,s0,Zu,Gc,Xu,Zc,Yu,pa,cl,Xc,Yc,qc,qu,Ku,Ju,Qu,Os,t1,Kc,$0,g0,f0,y0,x0,b0,e1,i1,n1,Jc,r1,o1,Qc,a1,Gl,td,Zl,s1,l1,dl,ul,c1,Xl,Ws,ed,id,Yl,d1,nd,rd,od,_s,ql,p1,Zo,ad,h1,k0,pl,hl,Pa,$1,Va,ml,g1,Jl,$l,ld,f1,I0,cd,Ql,D0,S1,k1,C1,T1,M1,tc,ec,R1,dd,ud,nc,E1,rs,Xo,hd,N0,z1,F1,D1,gd,({target:$,propertyName:q})=>{$===br&&/background|outline/.test(q)&&_&&G0()},Z0,rc,yd,xd,bd,oc,O1,vd,$=>{const q=!(!Ha||!Ha.closeButton)||!Pi;O1.set($.detail.width,{hard:q}),vd.set(Math.round(.5*-$.detail.width),{hard:q})},Tx,Ns,$=>{const{keyCode:q,metaKey:gt,ctrlKey:Ct,shiftKey:at}=$;if(q===9&&b)return void $.preventDefault();if($.target&&q===32&&br.contains($.target)&&!Ac($.target)&&(vr&&r&&Ou(),$.preventDefault()),q===90&&(gt||Ct))return void(at&&gt?Ra.redo():Ra.undo());if(q===89&&Ct)return void Ra.redo();if(q===229)return;const yt=new Set([...jn,q]);Ns.set(Array.from(yt))},({key:$,keyCode:q})=>{if($==="Meta")return Ns.set([]);Ns.set(jn.filter(gt=>gt!==q))},()=>{Ns.set([])},$=>{Ac($.target)||$.preventDefault()},$=>{Qe&&W1($.detail.resources[0])},()=>{Wi&&P2().then(Mx)},$=>{if(!nn)return;const q=Xi((window.innerWidth-Math.abs(Ie.x))/Ie.width,0,1),gt=Xi((window.innerHeight-Math.abs(Ie.y))/Ie.height,0,1);q<.75&&gt<.75||W1(($.clipboardData||window.clipboardData).files[0])},K0,im,$=>{ge&&ta($.detail,ge)||kt(Ws,ge=$.detail,ge)},H,ic,er,Nr,on,yr,al,Uo,b,L,st,Wt,Ht,re,te,ae,Te,ke,Jt,Ae,pi,hi,mi,Qe,nn,Wi,ir,Sn,En,xr,Kr,Ta,Da,la,Ba,Lo,is,ca,Wc,()=>i(62,_l=void 0),($,q,gt)=>{const{text:Ct="",placeholder:at="",autoClose:yt=!0,align:qt="top",justify:Xe="center",buttonConfirm:qe,buttonCancel:Ne}=gt;i(62,_l={align:qt,justify:Xe,text:Ct,placeholder:at,buttonConfirm:qe,buttonCancel:Ne,onconfirm:()=>{$(_c.value),yt&&i(62,_l=void 0)},oncancel:()=>{q(void 0),i(62,_l=void 0)}})},Eu,Vc,sl,Z2,Bu,Fs,ll,Ou,Wu,_u,n0,_a,Hl,Hc,jl,u1,ns,fd,B1,wd,fl,_1,Yt,Zt,r,j,Xt,oe,wt,V,f,Ee,Z,We,se,Qt,jt,Li,X,di,Ue,vt,Ge,ei,vi,ni,Me,Bt,G,bi,Re,Ce,ft,ht,U,Ot,Ft,nt,St,mt,de,be,ue,Gt,xt,Y,et,Rt,_,$e,J,S,F,R,z,T,O,M,w,C,p,k,y,x,a,d,o,c,n,Dt,ui,Be,yi,Mi,Ie,Ui,$n,tn,Yi,Fn,Xn,vn,Vn,so,Dn,yo,Ar,wr,Mn,qi,Zr,xo,Io,co,uo,vo,wo,Wr,Sr,io,So,_r,wi,Yn,gn,no,Yr,hr,Gn,wn,li,ne,Kt,we,Ei,Oi,Ho,za,jo,Sa,Rn,A,Pe,De,Si,function(){i(31,pd=Ks.innerWidth),i(32,I1=Ks.innerHeight)},$=>kt(Xl,Ze=$.detail,Ze),({detail:$})=>i(44,dt=$),($,q)=>q.id===$,function($,q){t.$$.not_equal(zo[q],$)&&(zo[q]=$,i(1,zo),i(272,sl),i(27,zs))},$=>i(64,Na=Na.concat($)),$=>i(64,Na=Na.filter(q=>q!==$)),($,{detail:q})=>i(38,lt[$]=q,lt),$=>kt(ul,tr=$.detail,tr),$=>$.id===dt,function($){t.$$.not_equal(zo[dt],$)&&(zo[dt]=$,i(1,zo),i(272,sl),i(27,zs))},()=>i(64,Na=Na.concat(dt)),()=>i(64,Na=Na.filter($=>$!==dt)),({detail:$})=>i(38,lt[dt]=$,lt),$=>{const q={...$,...K0()},{annotationShapes:gt,decorationShapes:Ct,interfaceShapes:at,frameShapes:yt,selectionShapes:qt}=Ve({annotationShapes:xe,decorationShapes:fi,interfaceShapes:gr,frameShapes:Se,selectionShapes:Vr},q);return im(q,ot,gt,Ct,at,yt,qt)},()=>{i(65,kd=!1),i(66,Cd=!1),i(67,Td=!1),i(68,Md=!1),i(69,Pd=!1)},function($){Ai[$?"unshift":"push"](()=>{ac=$,i(36,ac)})},function($){Ls=$,i(0,Ls),i(261,Da)},function($){$d=$,i(33,$d)},function($){md=$,i(34,md)},function($){Ai[$?"unshift":"push"](()=>{_c=$,i(63,_c)})},function($){Ai[$?"unshift":"push"](()=>{br=$,i(2,br)})},$=>kt(l1,Un=$.detail,Un)]}class Fg extends si{constructor(e){super(),ai(this,e,ow,rw,ti,{class:231,layout:232,stores:233,locale:3,id:4,util:234,utils:235,animations:236,disabled:237,status:229,previewUpscale:238,previewPad:239,previewMaskOpacity:5,previewImageDataMaxSize:240,previewImageTextPixelRatio:6,markupMaskOpacity:7,zoomMaskOpacity:241,elasticityMultiplier:8,willRevert:242,willProcessImage:243,willRenderCanvas:9,willRenderToolbar:244,willRenderUtilTabs:245,willSetHistoryInitialState:246,enableButtonExport:247,enableButtonRevert:248,enableNavigateHistory:249,enableToolbar:10,enableUtils:250,enableButtonClose:251,enableDropImage:252,enablePasteImage:253,enableBrowseImage:254,enableTransparencyGrid:11,layoutDirectionPreference:255,layoutHorizontalUtilsPreference:256,layoutVerticalUtilsPreference:257,layoutVerticalToolbarPreference:258,layoutVerticalControlGroupsPreference:259,layoutVerticalControlTabsPreference:260,textDirection:12,markupEditorZoomLevel:261,markupEditorZoomLevels:13,markupEditorZoomAdjustStep:14,markupEditorZoomAdjustFactor:15,markupEditorZoomAdjustWheelFactor:16,markupEditorInteractionMode:262,muteAudio:263,willSetMediaInitialTimeOffset:264,enablePan:17,enableZoom:18,enableZoomControls:265,enableZoomInput:19,enablePanInput:266,enableCanvasAlpha:20,enablePanLimit:21,panLimitGutterScalar:22,zoomPresetOptions:23,zoomAdjustStep:24,zoomAdjustFactor:25,zoomAdjustWheelFactor:26,zoomLevel:0,fixScrollDirection:267,hideTextInput:268,showTextInput:269,imagePreviewSrc:270,imageOrienter:271,pluginComponents:272,pluginOptions:27,sub:273,pluginInterface:1,root:2,play:274,pause:275,isPaused:276,togglePlayPause:277,mute:278,unmute:279,toggleMute:280,getDuration:281,getCurrentTime:282,setCurrentTime:283,imageSourceToImageData:28,imagePreview:29,imagePreviewCurrent:230,history:30},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get class(){return this.$$.ctx[231]}set class(e){this.$$set({class:e}),I()}get layout(){return this.$$.ctx[232]}set layout(e){this.$$set({layout:e}),I()}get stores(){return this.$$.ctx[233]}set stores(e){this.$$set({stores:e}),I()}get locale(){return this.$$.ctx[3]}set locale(e){this.$$set({locale:e}),I()}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),I()}get util(){return this.$$.ctx[234]}set util(e){this.$$set({util:e}),I()}get utils(){return this.$$.ctx[235]}set utils(e){this.$$set({utils:e}),I()}get animations(){return this.$$.ctx[236]}set animations(e){this.$$set({animations:e}),I()}get disabled(){return this.$$.ctx[237]}set disabled(e){this.$$set({disabled:e}),I()}get status(){return this.$$.ctx[229]}set status(e){this.$$set({status:e}),I()}get previewUpscale(){return this.$$.ctx[238]}set previewUpscale(e){this.$$set({previewUpscale:e}),I()}get previewPad(){return this.$$.ctx[239]}set previewPad(e){this.$$set({previewPad:e}),I()}get previewMaskOpacity(){return this.$$.ctx[5]}set previewMaskOpacity(e){this.$$set({previewMaskOpacity:e}),I()}get previewImageDataMaxSize(){return this.$$.ctx[240]}set previewImageDataMaxSize(e){this.$$set({previewImageDataMaxSize:e}),I()}get previewImageTextPixelRatio(){return this.$$.ctx[6]}set previewImageTextPixelRatio(e){this.$$set({previewImageTextPixelRatio:e}),I()}get markupMaskOpacity(){return this.$$.ctx[7]}set markupMaskOpacity(e){this.$$set({markupMaskOpacity:e}),I()}get zoomMaskOpacity(){return this.$$.ctx[241]}set zoomMaskOpacity(e){this.$$set({zoomMaskOpacity:e}),I()}get elasticityMultiplier(){return this.$$.ctx[8]}set elasticityMultiplier(e){this.$$set({elasticityMultiplier:e}),I()}get willRevert(){return this.$$.ctx[242]}set willRevert(e){this.$$set({willRevert:e}),I()}get willProcessImage(){return this.$$.ctx[243]}set willProcessImage(e){this.$$set({willProcessImage:e}),I()}get willRenderCanvas(){return this.$$.ctx[9]}set willRenderCanvas(e){this.$$set({willRenderCanvas:e}),I()}get willRenderToolbar(){return this.$$.ctx[244]}set willRenderToolbar(e){this.$$set({willRenderToolbar:e}),I()}get willRenderUtilTabs(){return this.$$.ctx[245]}set willRenderUtilTabs(e){this.$$set({willRenderUtilTabs:e}),I()}get willSetHistoryInitialState(){return this.$$.ctx[246]}set willSetHistoryInitialState(e){this.$$set({willSetHistoryInitialState:e}),I()}get enableButtonExport(){return this.$$.ctx[247]}set enableButtonExport(e){this.$$set({enableButtonExport:e}),I()}get enableButtonRevert(){return this.$$.ctx[248]}set enableButtonRevert(e){this.$$set({enableButtonRevert:e}),I()}get enableNavigateHistory(){return this.$$.ctx[249]}set enableNavigateHistory(e){this.$$set({enableNavigateHistory:e}),I()}get enableToolbar(){return this.$$.ctx[10]}set enableToolbar(e){this.$$set({enableToolbar:e}),I()}get enableUtils(){return this.$$.ctx[250]}set enableUtils(e){this.$$set({enableUtils:e}),I()}get enableButtonClose(){return this.$$.ctx[251]}set enableButtonClose(e){this.$$set({enableButtonClose:e}),I()}get enableDropImage(){return this.$$.ctx[252]}set enableDropImage(e){this.$$set({enableDropImage:e}),I()}get enablePasteImage(){return this.$$.ctx[253]}set enablePasteImage(e){this.$$set({enablePasteImage:e}),I()}get enableBrowseImage(){return this.$$.ctx[254]}set enableBrowseImage(e){this.$$set({enableBrowseImage:e}),I()}get enableTransparencyGrid(){return this.$$.ctx[11]}set enableTransparencyGrid(e){this.$$set({enableTransparencyGrid:e}),I()}get layoutDirectionPreference(){return this.$$.ctx[255]}set layoutDirectionPreference(e){this.$$set({layoutDirectionPreference:e}),I()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[256]}set layoutHorizontalUtilsPreference(e){this.$$set({layoutHorizontalUtilsPreference:e}),I()}get layoutVerticalUtilsPreference(){return this.$$.ctx[257]}set layoutVerticalUtilsPreference(e){this.$$set({layoutVerticalUtilsPreference:e}),I()}get layoutVerticalToolbarPreference(){return this.$$.ctx[258]}set layoutVerticalToolbarPreference(e){this.$$set({layoutVerticalToolbarPreference:e}),I()}get layoutVerticalControlGroupsPreference(){return this.$$.ctx[259]}set layoutVerticalControlGroupsPreference(e){this.$$set({layoutVerticalControlGroupsPreference:e}),I()}get layoutVerticalControlTabsPreference(){return this.$$.ctx[260]}set layoutVerticalControlTabsPreference(e){this.$$set({layoutVerticalControlTabsPreference:e}),I()}get textDirection(){return this.$$.ctx[12]}set textDirection(e){this.$$set({textDirection:e}),I()}get markupEditorZoomLevel(){return this.$$.ctx[261]}set markupEditorZoomLevel(e){this.$$set({markupEditorZoomLevel:e}),I()}get markupEditorZoomLevels(){return this.$$.ctx[13]}set markupEditorZoomLevels(e){this.$$set({markupEditorZoomLevels:e}),I()}get markupEditorZoomAdjustStep(){return this.$$.ctx[14]}set markupEditorZoomAdjustStep(e){this.$$set({markupEditorZoomAdjustStep:e}),I()}get markupEditorZoomAdjustFactor(){return this.$$.ctx[15]}set markupEditorZoomAdjustFactor(e){this.$$set({markupEditorZoomAdjustFactor:e}),I()}get markupEditorZoomAdjustWheelFactor(){return this.$$.ctx[16]}set markupEditorZoomAdjustWheelFactor(e){this.$$set({markupEditorZoomAdjustWheelFactor:e}),I()}get markupEditorInteractionMode(){return this.$$.ctx[262]}set markupEditorInteractionMode(e){this.$$set({markupEditorInteractionMode:e}),I()}get muteAudio(){return this.$$.ctx[263]}set muteAudio(e){this.$$set({muteAudio:e}),I()}get willSetMediaInitialTimeOffset(){return this.$$.ctx[264]}set willSetMediaInitialTimeOffset(e){this.$$set({willSetMediaInitialTimeOffset:e}),I()}get enablePan(){return this.$$.ctx[17]}set enablePan(e){this.$$set({enablePan:e}),I()}get enableZoom(){return this.$$.ctx[18]}set enableZoom(e){this.$$set({enableZoom:e}),I()}get enableZoomControls(){return this.$$.ctx[265]}set enableZoomControls(e){this.$$set({enableZoomControls:e}),I()}get enableZoomInput(){return this.$$.ctx[19]}set enableZoomInput(e){this.$$set({enableZoomInput:e}),I()}get enablePanInput(){return this.$$.ctx[266]}set enablePanInput(e){this.$$set({enablePanInput:e}),I()}get enableCanvasAlpha(){return this.$$.ctx[20]}set enableCanvasAlpha(e){this.$$set({enableCanvasAlpha:e}),I()}get enablePanLimit(){return this.$$.ctx[21]}set enablePanLimit(e){this.$$set({enablePanLimit:e}),I()}get panLimitGutterScalar(){return this.$$.ctx[22]}set panLimitGutterScalar(e){this.$$set({panLimitGutterScalar:e}),I()}get zoomPresetOptions(){return this.$$.ctx[23]}set zoomPresetOptions(e){this.$$set({zoomPresetOptions:e}),I()}get zoomAdjustStep(){return this.$$.ctx[24]}set zoomAdjustStep(e){this.$$set({zoomAdjustStep:e}),I()}get zoomAdjustFactor(){return this.$$.ctx[25]}set zoomAdjustFactor(e){this.$$set({zoomAdjustFactor:e}),I()}get zoomAdjustWheelFactor(){return this.$$.ctx[26]}set zoomAdjustWheelFactor(e){this.$$set({zoomAdjustWheelFactor:e}),I()}get zoomLevel(){return this.$$.ctx[0]}set zoomLevel(e){this.$$set({zoomLevel:e}),I()}get fixScrollDirection(){return this.$$.ctx[267]}set fixScrollDirection(e){this.$$set({fixScrollDirection:e}),I()}get hideTextInput(){return this.$$.ctx[268]}get showTextInput(){return this.$$.ctx[269]}get imagePreviewSrc(){return this.$$.ctx[270]}set imagePreviewSrc(e){this.$$set({imagePreviewSrc:e}),I()}get imageOrienter(){return this.$$.ctx[271]}set imageOrienter(e){this.$$set({imageOrienter:e}),I()}get pluginComponents(){return this.$$.ctx[272]}set pluginComponents(e){this.$$set({pluginComponents:e}),I()}get pluginOptions(){return this.$$.ctx[27]}set pluginOptions(e){this.$$set({pluginOptions:e}),I()}get sub(){return this.$$.ctx[273]}get pluginInterface(){return this.$$.ctx[1]}get root(){return this.$$.ctx[2]}set root(e){this.$$set({root:e}),I()}get play(){return this.$$.ctx[274]}get pause(){return this.$$.ctx[275]}get isPaused(){return this.$$.ctx[276]}get togglePlayPause(){return this.$$.ctx[277]}get mute(){return this.$$.ctx[278]}get unmute(){return this.$$.ctx[279]}get toggleMute(){return this.$$.ctx[280]}get getDuration(){return this.$$.ctx[281]}get getCurrentTime(){return this.$$.ctx[282]}get setCurrentTime(){return this.$$.ctx[283]}get imageSourceToImageData(){return this.$$.ctx[28]}set imageSourceToImageData(e){this.$$set({imageSourceToImageData:e}),I()}get imagePreview(){return this.$$.ctx[29]}get imagePreviewCurrent(){return this.$$.ctx[230]}set imagePreviewCurrent(e){this.$$set({imagePreviewCurrent:e}),I()}get history(){return this.$$.ctx[30]}}typeof window<"u"&&(t=>{if(t&&t._yve10k0)return;const[e,i,n]=[[99,111,110,115,111,108,101],[108,111,103],[84,104,105,115,32,118,101,114,115,105,111,110,32,111,102,32,80,105,110,116,117,114,97,32,105,115,32,102,111,114,32,116,101,115,116,105,110,103,32,112,117,114,112,111,115,101,115,32,111,110,108,121,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,32,116,111,32,112,117,114,99,104,97,115,101,32,97,32,108,105,99,101,110,115,101,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,47,99,104,97,116,32,105,102,32,121,111,117,32,104,97,118,101,32,97,110,121,32,113,117,101,115,116,105,111,110,115,46]].map(r=>r.map(o=>String.fromCharCode(o)).join(""));t&&t[e]&&t[e][i](n)})(window);const aw=["klass","stores","isVisible","isActive","isActiveFraction","locale"],sw=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"],lw=["locale"];let Mp;const R2=new Set([]),eu={},Qp=new Map,cw=(...t)=>{t.filter(e=>!!e.util).forEach(e=>{const[i,n,r=()=>!0]=e.util;Qp.has(i)||(Qp.set(i,{Component:n,isSupported:r}),Wh(n).filter(o=>!aw.includes(o)).forEach(o=>{R2.add(o),eu[o]?eu[o].push(i):eu[o]=[i]}))})};var I2=[...Zy,"init","update","undo","redo","revert","writehistory","destroy","show","hide","close","ready","zoom","pan","loadpreview","selectshape","blurshape","updateshape","addshape","removeshape","selectstyle","markuptap","markupzoom","markuppan","selectutil","selectcontrol","selectiondown","selectionup","selectionchange"],E2=(t,e,i={})=>{const{prefix:n="pintura:"}=i;return I2.map(r=>t.on(r,o=>Al(e)?((a,s,l)=>a.dispatchEvent(new CustomEvent(s,{detail:l,bubbles:!0,cancelable:!0})))(e,`${n}${r}`,o):e(r,o)))};const dw=t=>Oe(t[0]),uw=t=>!dw(t),A2=t=>t[1],th=t=>t[3]||[],pw=(t,e)=>{const i=eh(t,e);return p2(i,n=>A2(n)===t),i},eh=(t,e)=>{if(uw(e)){if(e.find(n=>A2(n)===t))return e;const i=e.find(n=>eh(t,th(n)));return i&&i[3]}return eh(t,th(e))},hw=()=>[.75,.25,.25,0,0,.25,.75,.25,0,0,.25,.25,.75,0,0,0,0,0,1,0],mw=()=>[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0],$w=()=>[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0],gw=()=>[1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0],fw=()=>[1.1,0,0,0,-.1,0,1.1,0,0,-.1,0,0,1.2,0,-.1,0,0,0,1,0],yw=()=>[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0],xw=()=>[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0],bw=()=>[.163,.518,.084,-.01,.208,.163,.529,.082,-.02,.21,.171,.529,.084,0,.214,0,0,0,1,0],vw=()=>[.338,.991,.117,.093,-.196,.302,1.049,.096,.078,-.196,.286,1.016,.146,.101,-.196,0,0,0,1,0],ww=()=>[.393,.768,.188,0,0,.349,.685,.167,0,0,.272,.533,.13,0,0,0,0,0,1,0],Sw=()=>[.289,.62,.185,0,.077,.257,.566,.163,0,.115,.2,.43,.128,0,.188,0,0,0,1,0],kw=()=>[.269,.764,.172,.05,.1,.239,.527,.152,0,.176,.186,.4,.119,0,.159,0,0,0,1,0],Cw=()=>[.547,.764,.134,0,-.147,.281,.925,.12,0,-.135,.225,.558,.33,0,-.113,0,0,0,1,0],Tw={chrome:mw,fade:$w,pastel:hw,cold:fw,warm:gw,monoDefault:yw,monoWash:bw,monoNoir:xw,monoStark:vw,sepiaDefault:ww,sepiaRust:kw,sepiaBlues:Sw,sepiaColor:Cw};var Mw={filterFunctions:Tw,filterOptions:[["Default",[[void 0,t=>t.labelDefault]]],["Classic",[["chrome",t=>t.filterLabelChrome],["fade",t=>t.filterLabelFade],["cold",t=>t.filterLabelCold],["warm",t=>t.filterLabelWarm],["pastel",t=>t.filterLabelPastel]]],["Monochrome",[["monoDefault",t=>t.filterLabelMonoDefault],["monoNoir",t=>t.filterLabelMonoNoir],["monoStark",t=>t.filterLabelMonoStark],["monoWash",t=>t.filterLabelMonoWash]]],["Sepia",[["sepiaDefault",t=>t.filterLabelSepiaDefault],["sepiaRust",t=>t.filterLabelSepiaRust],["sepiaBlues",t=>t.filterLabelSepiaBlues],["sepiaColor",t=>t.filterLabelSepiaColor]]]]};const Pw={base:0,min:-.25,max:.25,getLabel:t=>gs(t/.25),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.brightness)return t.brightness[4]},setValue:(t,e)=>t.update(i=>({...i,brightness:[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0]}))},Rw={base:1,min:.5,max:1.5,getLabel:t=>gs(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.contrast)return t.contrast[0]},setValue:(t,e)=>t.update(i=>({...i,contrast:[e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0]}))},Iw={base:1,min:0,max:2,getLabel:t=>gs(t-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.saturation)return(t.saturation[0]-.213)/.787},setValue:(t,e)=>t.update(i=>({...i,saturation:[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0]}))},Ew={base:1,min:.5,max:1.5,getLabel:t=>gs(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.exposure)return t.exposure[0]},setValue:(t,e)=>t.update(i=>({...i,exposure:[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0]}))},Aw={base:1,min:.15,max:4,getLabel:t=>gs(t<1?(t-.15)/.85-1:(t-1)/3),getStore:({imageGamma:t})=>t},Lw={base:0,min:-1,max:1,getStore:({imageVignette:t})=>t},zw={base:0,min:-1,max:1,getStore:({imageConvolutionMatrix:t})=>t,getValue:t=>{if(t.clarity)return t.clarity[0]===0?t.clarity[1]/-1:t.clarity[1]/-2},setValue:(t,e)=>{t.update(i=>({...i,clarity:e>=0?[0,-1*e,0,-1*e,1+4*e,-1*e,0,-1*e,0]:[-1*e,-2*e,-1*e,-2*e,1+-3*e,-2*e,-1*e,-2*e,-1*e]}))}},Fw={base:0,min:-1,max:1,getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(!t.temperature)return;const e=t.temperature[0];return e>=1?(e-1)/.1:(1-e)/-.15},setValue:(t,e)=>t.update(i=>({...i,temperature:e>0?[1+.1*e,0,0,0,0,0,1,0,0,0,0,0,1+.1*-e,0,0,0,0,0,1,0]:[1+.15*e,0,0,0,0,0,1+.05*e,0,0,0,0,0,1+.15*-e,0,0,0,0,0,1,0]}))};var Dw={finetuneControlConfiguration:{gamma:Aw,brightness:Pw,contrast:Rw,saturation:Iw,exposure:Ew,temperature:Fw,clarity:zw,vignette:Lw},finetuneOptions:[["brightness",t=>t.finetuneLabelBrightness],["contrast",t=>t.finetuneLabelContrast],["saturation",t=>t.finetuneLabelSaturation],["exposure",t=>t.finetuneLabelExposure],["temperature",t=>t.finetuneLabelTemperature],["gamma",t=>t.finetuneLabelGamma],!Oh()&&["clarity",t=>t.finetuneLabelClarity],["vignette",t=>t.finetuneLabelVignette]].filter(Boolean)};const Bw={shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%"},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%"/>'},Ow={shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%",frameRound:!0},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%" rx="12%"/>'},Ww={shape:{frameColor:[1,1,1],frameStyle:"line",frameInset:"2.5%",frameSize:".3125%",frameRadius:0},thumb:'<div style="top:.5em;left:.5em;right:.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},_w={shape:{frameColor:[1,1,1],frameStyle:"line",frameAmount:2,frameInset:"2.5%",frameSize:".3125%",frameOffset:"1.25%",frameRadius:0},thumb:'<div style="top:.75em;left:.75em;right:.75em;bottom:.75em; outline: 3px double"></div>'},Vw={shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameOffset:"5%",frameSize:".3125%"},thumb:'<div style="top:.75em;left:.5em;bottom:.75em;border-left:1px solid"></div><div style="top:.75em;right:.5em;bottom:.75em;border-right:1px solid"></div><div style="top:.5em;left:.75em;right:.75em;border-top:1px solid"></div><div style="bottom:.5em;left:.75em;right:.75em;border-bottom:1px solid"></div>'},Nw={shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameSize:".3125%"},thumb:'<div style="top:-.5em;left:.5em;right:.5em;bottom:-.5em; box-shadow: inset 0 0 0 1px currentColor"></div><div style="top:.5em;left:-.5em;right:-.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},Hw={shape:{frameColor:[1,1,1],frameStyle:"edge",frameOffset:"1.5%",frameSize:".3125%"},thumb:'<div style="top:.3125em;left:.5em;bottom:.3125em;border-left:1px solid"></div><div style="top:.3125em;right:.5em;bottom:.3125em;border-right:1px solid"></div><div style="top:.5em;left:.3125em;right:.3125em;border-top:1px solid"></div><div style="bottom:.5em;left:.3125em;right:.3125em;border-bottom:1px solid"></div>'},jw={shape:{frameColor:[1,1,1],frameStyle:"hook",frameInset:"2.5%",frameSize:".3125%",frameLength:"5%"},thumb:'<div style="top:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-top: 1px solid;"></div><div style="top:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-top: 1px solid;"></div><div style="bottom:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-bottom: 1px solid;"></div><div style="bottom:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-bottom: 1px solid;"></div>'},Uw={shape:{frameColor:[1,1,1],frameStyle:"polaroid"},thumb:'<rect stroke-width="20%" x="-5%" y="-5%" width="110%" height="96%"/>'};var Gw={frameStyles:{solidSharp:Bw,solidRound:Ow,lineSingle:Ww,lineMultiple:_w,edgeSeparate:Vw,edgeCross:Nw,edgeOverlap:Hw,hook:jw,polaroid:Uw},frameOptions:[[void 0,t=>t.labelNone],["solidSharp",t=>t.frameLabelMatSharp],["solidRound",t=>t.frameLabelMatRound],["lineSingle",t=>t.frameLabelLineSingle],["lineMultiple",t=>t.frameLabelLineMultiple],["edgeCross",t=>t.frameLabelEdgeCross],["edgeSeparate",t=>t.frameLabelEdgeSeparate],["edgeOverlap",t=>t.frameLabelEdgeOverlap],["hook",t=>t.frameLabelCornerHooks],["polaroid",t=>t.frameLabelPolaroid]]},Fl=t=>t.charAt(0).toUpperCase()+t.slice(1);let hc=null;var Pp=()=>{if(hc===null)if(Br())try{hc=document.fonts.check("16px TestNonExistingFont")===!1}catch{hc=!1}else hc=!1;return hc};const zc=(t,e)=>i=>i[e?`${e}${Fl(t)}`:t],Zw=t=>[t,""+t],Mu=(t,e)=>i=>[t[i],zc(i,e)],L2=t=>Array.isArray(t)&&t.every($i)?t.map(Zw):t,Xs=[1,.2549,.2118],Dg=[1,1,1,0],Xw=t=>{const{hideLabel:e=!0}=t||{};return l3(["new","add","subtract"].map(i=>[i,zc(i,"shapeLabelSelectionMode"),{icon:zc(i,"shapeIconSelectionMode"),hideLabel:e}]),{title:i=>i.shapeTitleSelectionMode,layout:"radio"})},Yw=t=>z2(t,{title:e=>e.shapeTitleBrushSize,layout:"radio",optionHideLabel:!0,optionIcon:(e,i)=>`<circle fill="currentColor" stroke-width=".05em" stroke="currentColor" fill-opacity=".25" cx="12" cy="12" r="${2+8*i}"/>`}),Bg={eraser:()=>({eraseRadius:8,cursorStyle:"ellipse",cursorSize:"eraseRadius"}),path:()=>({points:[]}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text"})},os=(t,e={},i)=>{if(!Bg[t])return;const{position:n="relative",inputMode:r="drag",isSelection:o=!1}=i||{};return[{...Bg[t](),...e},{position:n,inputMode:r,isSelection:o}]},qw=t=>({sharpie:os("path",{bitmap:!0,strokeJoin:"round",strokeCap:"round",strokeWidth:"0.5%",strokeColor:[...Xs],cursorStyle:"ellipse",cursorSize:"strokeWidth",disableErase:!1,disableResize:!0,disableMove:!0}),eraser:os("eraser"),path:os("path",{pathClose:void 0,strokeWidth:"0.5%",strokeColor:[...Xs],backgroundColor:[0,0,0,0]},{inputMode:"step"}),line:os("line",{strokeColor:[...Xs],strokeWidth:"0.5%"}),arrow:os("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...Xs],strokeWidth:"0.5%"}),rectangle:os("rectangle",{strokeColor:[...Dg],backgroundColor:[...Xs]}),ellipse:os("ellipse",{strokeColor:[...Dg],backgroundColor:[...Xs]}),text:os("text",{color:[...Xs],fontSize:"2%"}),...t}),Rp=(t,e,i)=>[t,e||zc(t,"shapeLabelTool"),{icon:zc(t,"shapeIconTool"),...i}],Kw=(t=["move","view","sharpie","eraser","path","line","arrow","rectangle","ellipse","text","preset"])=>t.map(e=>Oe(e)?Rp(e):Array.isArray(e)?el(e[1])?Rp(e[0],void 0,e[1]):Rp(e[0],e[1],e[2]):void 0).filter(Boolean),Jw=t=>Object.keys(t).map(Mu(t,"shapeTitleColor")),Qw=t=>Object.keys(t).map(Mu(t,"labelSize")),t3=t=>Object.keys(t).map(Mu(t,"labelSize")),Og=t=>Object.keys(t).map(Mu(t,"labelSize")),e3=t=>[...t],i3=t=>t.map(e=>[e,i=>i["shapeLabelFontStyle"+e.filter(n=>n!=="normal").map(Fl).join("")]]),n3=t=>t.map(e=>[M2(e),i=>i["shapeTitleLineDecoration"+Fl(e)],{icon:i=>i["shapeIconLineDecoration"+Fl(e)]}]),ba=(t,e)=>{const{defaultKey:i,defaultValue:n,defaultOptions:r}=e||{},o=[];return i&&(o[0]=[n,a=>a[i],{...r}]),[...o,...t]},Wg=t=>t.split(",").map(e=>e.trim()).some(e=>document.fonts.check("16px "+e)),_g=(t={})=>["ToggleSlider",{...t}],r3=(t,e={defaultKey:"labelDefault"})=>["Dropdown",{title:i=>i.shapeTitleFontFamily,onload:({options:i=[]})=>{Pp()&&i.map(([n])=>n).filter(Boolean).filter(n=>!Wg(n)).forEach(n=>{const r="PinturaFontTest-"+n.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase();document.getElementById(r)||document.body.append(hn("span",{textContent:" ",id:r,class:"PinturaFontTest",style:`font-family:${n};font-size:0;color:transparent;`}))})},ondestroy:()=>{Pp()&&document.querySelectorAll(".PinturaFontTest").forEach(i=>i.remove())},optionLabelStyle:i=>"font-family: "+i,options:ba(t,e),optionFilter:i=>{if(!Pp())return!0;const[n]=i;return n?Wg(n):!0}}],Pu=(t,e={})=>["ColorPicker",{options:ba(t),...e}],o3=(t,e={})=>Pu(t,{title:i=>i.labelColor,...e}),a3=(t,e={})=>Pu(t,{title:i=>i.shapeTitleBackgroundColor,...e}),s3=(t,e={})=>Pu(t,{title:i=>i.shapeTitleStrokeColor,options:ba(t),buttonClass:"PinturaColorPickerButtonStroke",onchange:(i,n)=>{const r=n.strokeWidth;($i(r)||Oe(r)?parseFloat(r):0)>0||(n.strokeWidth=e&&e.defaultStrokeWidth||"0.5%")},...e}),z2=(t,e)=>{const{title:i,optionHideLabel:n=!1,layout:r,optionIcon:o=!1}=e||{},a=L2(t),s=t.map(([u])=>Oe(u)?parseFloat(u):u),l=Math.max(...s),c=Math.min(...s),d=l-c;return[r==="radio"?"RadioGroup":"Dropdown",{title:i===!1?void 0:i||(u=>u.shapeTitleStrokeWidth),options:u=>{const p=e?a.map(h=>{const[g,m,y={}]=h,x=Oe(g)?parseFloat(g):g,k=(x-c)/d;let w;return o==="line"?w=`<path stroke="currentColor" stroke-linecap="square" stroke-width="${.1+.875*k}em" d="M3,12 H20"/>`:o==="dot"?w=`<circle fill="currentColor" cx="12" cy="12" r="${2+8*k}"/>`:Oe(o)?w=o:Qi(o)&&(w=o(x,k)),[g,m,{icon:w,hideLabel:n,...y}]}):a;return Le(u,"backgroundColor")?ba(p,{defaultKey:"shapeLabelStrokeNone"}):ba(p)},onchange:(u,p)=>{if(!u)return;const h=p.strokeColor||[];if(h[3])return;const g=[...h];g[3]=1,p.strokeColor=g}}]},l3=(t,e)=>{const{title:i,layout:n}=e||{};return[n==="radio"?"RadioGroup":"Dropdown",{title:i,options:ba(t)}]},F2=(t,e,i)=>["Dropdown",{title:n=>n[e],options:ba(t,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:i}],c3=t=>F2(t,"shapeTitleLineStart","transform: scaleX(-1)"),d3=t=>F2(t,"shapeTitleLineEnd"),u3=t=>Pu(t,{title:e=>e.shapeTitleTextColor,options:ba(t)}),p3=t=>["Dropdown",{title:e=>e.shapeTitleFontStyle,optionLabelStyle:e=>e&&`font-style:${e[0]};font-weight:${e[1]}`,options:ba(t,{defaultKey:"shapeLabelFontStyleNormal"})}],D2=t=>["ShorthandControl",t],B2=(t,e,i,n)=>{n||t.find(([o])=>o===i)||(n={defaultKey:"labelAuto",defaultValue:i});const r=L2(t);return["Dropdown",{title:e,options:ba(r,n),...n}]},h3=(t,e)=>B2(t,i=>i.shapeTitleFontSize,"4%",e),m3=(t,e)=>B2(t,i=>i.shapeTitleLineHeight,"120%",e),$3=t=>["RadioGroup",{title:e=>e.shapeTitleTextAlign,options:ba(t)}],Ip={colorOptions:()=>Jw({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]}),lineEndStyleOptions:()=>n3(["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"]),fontFamilyOptions:()=>e3([["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]]),fontStyleOptions:()=>i3([["normal","bold"],["italic","normal"],["italic","bold"]]),textAlignOptions:()=>["left","center","right"].map(t=>[t,e=>e["shapeTitleTextAlign"+Fl(t)],{hideLabel:!0,icon:e=>e["shapeIconTextAlign"+Fl(t)]}]),strokeWidthOptions:()=>Og({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),brushSizeOptions:()=>Og(Object.entries({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}).reduce((t,[e,i])=>(t[e]=2*parseFloat(i)+"%",t),{})),fontSizeOptions:()=>Qw({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),lineHeightOptions:()=>t3({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"})},g3=new Intl.NumberFormat("default",{minimumFractionDigits:1,maximumFractionDigits:1}),O2=(t,e)=>Oe(e)?t+"%":t,W2=(t,e,i,n)=>Oe(n)?Math.round(t/i*100)+"%":""+g3.format(t),Ep={getValue:t=>parseFloat(t),setValue:O2,label:W2,step:.05,labelClass:"PinturaPercentageLabel"},f3={factory:D2,options:{title:"Text shadow",controls:[["ToggleSlider","x",{...Ep,min:-100,max:100,labelPrefix:"X"}],["ToggleSlider","y",{...Ep,min:-100,max:100,labelPrefix:"Y"}],["ToggleSlider","blur",{...Ep,min:0,max:25,labelPrefix:t=>t.shapeTitleTextShadowBlur}],["ColorPicker","color",{enablePresets:!1}]]}},jd={defaultColor:{factory:o3,items:"colorOptions"},defaultNumber:{factory:_g},defaultPercentage:{factory:_g,options:{getValue:t=>parseFloat(t),setValue:t=>t+"%",step:.05,label:(t,e,i)=>Math.round(t/i*100)+"%",labelClass:"PinturaPercentageLabel"}},backgroundColor:{items:"colorOptions",factory:a3},strokeColor:{items:"colorOptions",factory:s3},strokeWidth:{items:"strokeWidthOptions",factory:z2},brushSize:{items:"brushSizeOptions",factory:Yw},drawMode:{factory:Xw},lineStart:{items:"lineEndStyleOptions",factory:c3},lineEnd:{items:"lineEndStyleOptions",factory:d3},color:{items:"colorOptions",factory:u3},fontFamily:{items:"fontFamilyOptions",factory:r3},fontStyle_fontWeight:{items:"fontStyleOptions",factory:p3},fontSize:{items:"fontSizeOptions",factory:h3},lineHeight:{items:"lineHeightOptions",factory:m3},textAlign:{items:"textAlignOptions",factory:$3},textShadowX_textShadowY_textShadowBlur_textShadowColor:f3,textOutlineWidth_textOutlineColor:{factory:D2,options:{title:"Text outline",controls:[["ToggleSlider","width",{getValue:t=>parseFloat(t),setValue:O2,label:W2,min:0,max:15,step:.05,labelClass:"PinturaPercentageLabel",labelPrefix:t=>t.shapeTitleTextOutlineWidth}],["ColorPicker","color",{enablePresets:!1}]]}},cornerRadius:{factory:"defaultPercentage",options:{min:0,max:50,title:t=>t.shapeTitleCornerRadius}},frameColor:{factory:"defaultColor"},frameSize:{factory:"defaultPercentage",options:{min:.2,max:10,title:t=>t.labelSize}},frameInset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameOffset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameRadius:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelRadius}},frameAmount:{factory:"defaultNumber",options:{min:1,max:5,step:1,title:t=>t.labelAmount}}},_2=(t={})=>{const e={...jd,...t},i={};return Object.entries(e).forEach(([n,r])=>{if(!/Options$/.test(n))if(jd[n]&&el(r)&&!Ln(r)){const{component:o,factory:a,items:s,options:l={}}=e[n];if(Oe(a))i[n]=[a,l];else{const c=jd[n].items;let d=Oe(c)?e[c]||Ip[c]():void 0;Oe(s)&&Ip[s]?d=e[s]?e[s].every(p=>!Array.isArray(p))?e[s].map(p=>[p,p]):e[s]:Ip[s]():(s||l.items)&&(d=s||l.items);let u=a||jd[n].factory;Qi(u)?i[n]=d?u(d,l):u(l):o&&(i[n]=[o,{...l,items:s}])}}else i[n]=r}),i};function y3(t){let e,i,n,r,o;const a=t[7].default,s=cr(a,t,t[6],null);return{c(){e=pt("div"),i=pt("div"),s&&s.c(),v(i,"class","PinturaToolbarInner"),v(e,"class","PinturaToolbar"),v(e,"data-layout",t[1]),v(e,"data-overflow",t[0])},m(l,c){tt(l,e,c),Tt(e,i),s&&s.m(i,null),n=!0,r||(o=[Mt(i,"measure",t[3]),ji(Er.call(null,i)),Mt(e,"measure",t[2]),ji(Er.call(null,e))],r=!0)},p(l,[c]){s&&s.p&&(!n||64&c)&&ur(s,a,l,l[6],n?dr(a,l[6],c,null):pr(l[6]),null),(!n||2&c)&&v(e,"data-layout",l[1]),(!n||1&c)&&v(e,"data-overflow",l[0])},i(l){n||(P(s,l),n=!0)},o(l){D(s,l),n=!1},d(l){l&&Q(e),s&&s.d(l),r=!1,_i(o)}}}function x3(t,e,i){let n,r,{$$slots:o={},$$scope:a}=e,s=0,l=0,c=0;const d=()=>{i(0,r=n==="compact"&&s>c?"overflow":void 0)};return t.$$set=u=>{"$$scope"in u&&i(6,a=u.$$scope)},t.$$.update=()=>{48&t.$$.dirty&&i(1,n=l>c?"compact":"default")},[r,n,({detail:u})=>{const{width:p}=u;i(5,c=p),d()},({detail:u})=>{const{width:p}=u;p>l&&i(4,l=p),s=p,r||d()},l,c,a,o]}class V2 extends si{constructor(e){super(),ai(this,e,x3,y3,ti,{})}}function b3(t){let e,i,n,r;const o=t[5].default,a=cr(o,t,t[4],null);return{c(){e=pt("div"),a&&a.c(),v(e,"class",t[0])},m(s,l){tt(s,e,l),a&&a.m(e,null),i=!0,n||(r=[Mt(e,"measure",function(){Hi(t[1]&&t[3])&&(t[1]&&t[3]).apply(this,arguments)}),ji(t[2].call(null,e))],n=!0)},p(s,[l]){t=s,a&&a.p&&(!i||16&l)&&ur(a,o,t,t[4],i?dr(o,t[4],l,null):pr(t[4]),null),(!i||1&l)&&v(e,"class",t[0])},i(s){i||(P(a,s),i=!0)},o(s){D(a,s),i=!1},d(s){s&&Q(e),a&&a.d(s),n=!1,_i(r)}}}function v3(t,e,i){let{$$slots:n={},$$scope:r}=e;const o=va();let{class:a=null}=e;const s=ln("measurable");let l=!1;return ws(()=>i(1,l=!0)),t.$$set=c=>{"class"in c&&i(0,a=c.class),"$$scope"in c&&i(4,r=c.$$scope)},[a,l,s,({detail:c})=>o("measure",c),r,n]}class w3 extends si{constructor(e){super(),ai(this,e,v3,b3,ti,{class:0})}}const S3=t=>({}),Vg=t=>({}),k3=t=>({}),Ng=t=>({}),C3=t=>({}),Hg=t=>({});function jg(t){let e,i;const n=t[4].header,r=cr(n,t,t[3],Hg);return{c(){e=pt("div"),r&&r.c(),v(e,"class","PinturaUtilHeader")},m(o,a){tt(o,e,a),r&&r.m(e,null),i=!0},p(o,a){r&&r.p&&(!i||8&a)&&ur(r,n,o,o[3],i?dr(n,o[3],a,C3):pr(o[3]),Hg)},i(o){i||(P(r,o),i=!0)},o(o){D(r,o),i=!1},d(o){o&&Q(e),r&&r.d(o)}}}function Ug(t){let e,i;const n=t[4].footer,r=cr(n,t,t[3],Vg);return{c(){e=pt("div"),r&&r.c(),v(e,"class","PinturaUtilFooter")},m(o,a){tt(o,e,a),r&&r.m(e,null),i=!0},p(o,a){r&&r.p&&(!i||8&a)&&ur(r,n,o,o[3],i?dr(n,o[3],a,S3):pr(o[3]),Vg)},i(o){i||(P(r,o),i=!0)},o(o){D(r,o),i=!1},d(o){o&&Q(e),r&&r.d(o)}}}function T3(t){let e,i,n,r,o,a,s=t[1]&&jg(t);const l=t[4].main,c=cr(l,t,t[3],Ng),d=c||function(p){let h,g;return h=new w3({props:{class:"PinturaStage"}}),h.$on("measure",p[5]),{c(){At(h.$$.fragment)},m(m,y){It(h,m,y),g=!0},p:Je,i(m){g||(P(h.$$.fragment,m),g=!0)},o(m){D(h.$$.fragment,m),g=!1},d(m){Et(h,m)}}}(t);let u=t[2]&&Ug(t);return{c(){s&&s.c(),e=ce(),i=pt("div"),d&&d.c(),n=ce(),u&&u.c(),r=ce(),o=Tn(),v(i,"class","PinturaUtilMain")},m(p,h){s&&s.m(p,h),tt(p,e,h),tt(p,i,h),d&&d.m(i,null),t[6](i),tt(p,n,h),u&&u.m(p,h),tt(p,r,h),tt(p,o,h),a=!0},p(p,[h]){p[1]?s?(s.p(p,h),2&h&&P(s,1)):(s=jg(p),s.c(),P(s,1),s.m(e.parentNode,e)):s&&(ze(),D(s,1,1,()=>{s=null}),Fe()),c&&c.p&&(!a||8&h)&&ur(c,l,p,p[3],a?dr(l,p[3],h,k3):pr(p[3]),Ng),p[2]?u?(u.p(p,h),4&h&&P(u,1)):(u=Ug(p),u.c(),P(u,1),u.m(r.parentNode,r)):u&&(ze(),D(u,1,1,()=>{u=null}),Fe())},i(p){a||(P(s),P(d,p),P(u),P(!1),a=!0)},o(p){D(s),D(d,p),D(u),D(!1),a=!1},d(p){s&&s.d(p),p&&Q(e),p&&Q(i),d&&d.d(p),t[6](null),p&&Q(n),u&&u.d(p),p&&Q(r),p&&Q(o)}}}function M3(t,e,i){let{$$slots:n={},$$scope:r}=e,{hasHeader:o=!!e.$$slots.header}=e,{hasFooter:a=!!e.$$slots.footer}=e,{root:s}=e;return t.$$set=l=>{i(7,e=Cn(Cn({},e),Rc(l))),"hasHeader"in l&&i(1,o=l.hasHeader),"hasFooter"in l&&i(2,a=l.hasFooter),"root"in l&&i(0,s=l.root),"$$scope"in l&&i(3,r=l.$$scope)},e=Rc(e),[s,o,a,r,n,function(l){Gr.call(this,t,l)},function(l){Ai[l?"unshift":"push"](()=>{s=l,i(0,s)})}]}class rl extends si{constructor(e){super(),ai(this,e,M3,T3,ti,{hasHeader:1,hasFooter:2,root:0})}}function Gg(t){let e,i;return{c(){e=pt("div"),v(e,"class","PinturaRangeInputMeter"),v(e,"style",i=`transform: translateX(${t[9].x-t[12].x}px) translateY(${t[9].y-t[12].y}px)`)},m(n,r){tt(n,e,r),e.innerHTML=t[7]},p(n,r){128&r[0]&&(e.innerHTML=n[7]),512&r[0]&&i!==(i=`transform: translateX(${n[9].x-n[12].x}px) translateY(${n[9].y-n[12].y}px)`)&&v(e,"style",i)},d(n){n&&Q(e)}}}function P3(t){let e,i,n,r,o,a,s,l,c,d,u,p=t[9]&&Gg(t);return{c(){e=pt("div"),i=pt("span"),n=ce(),r=pt("button"),o=cn(t[1]),s=ce(),l=pt("div"),p&&p.c(),v(i,"class","PinturaRangeInputValue"),v(r,"class","PinturaRangeInputReset"),v(r,"type","button"),r.disabled=a=t[0]===t[2],v(l,"class","PinturaRangeInputInner"),v(l,"style",t[8]),v(l,"data-value-limited",t[5]),v(e,"class","PinturaRangeInput"),v(e,"tabindex","0")},m(h,g){tt(h,e,g),Tt(e,i),i.innerHTML=t[3],Tt(e,n),Tt(e,r),Tt(r,o),Tt(e,s),Tt(e,l),p&&p.m(l,null),d||(u=[Mt(r,"click",t[17]),Mt(l,"interactionstart",t[13]),Mt(l,"interactionupdate",t[15]),Mt(l,"interactionend",t[16]),Mt(l,"interactionrelease",t[14]),ji(c=Cs.call(null,l,{inertia:t[6]})),Mt(l,"measure",t[37]),ji(Er.call(null,l)),Mt(e,"wheel",t[19],{passive:!1}),Mt(e,"nudge",t[20]),ji(Ts.call(null,e,{direction:"horizontal",preventDefault:!0}))],d=!0)},p(h,g){8&g[0]&&(i.innerHTML=h[3]),2&g[0]&&zn(o,h[1]),5&g[0]&&a!==(a=h[0]===h[2])&&(r.disabled=a),h[9]?p?p.p(h,g):(p=Gg(h),p.c(),p.m(l,null)):p&&(p.d(1),p=null),256&g[0]&&v(l,"style",h[8]),32&g[0]&&v(l,"data-value-limited",h[5]),c&&Hi(c.update)&&64&g[0]&&c.update.call(null,{inertia:h[6]})},i:Je,o:Je,d(h){h&&Q(e),p&&p.d(),d=!1,_i(u)}}}function R3(t,e,i){let n,r,o,a,s,l,c,d,u,p,{labelReset:h="Reset"}=e,{direction:g="x"}=e,{min:m=0}=e,{max:y=1}=e,{base:x=m}=e,{value:k=0}=e,{valueLabel:w=0}=e,{valueMin:C}=e,{valueMax:M}=e,{oninputstart:R=me}=e,{oninputmove:O=me}=e,{oninputend:T=me}=e,{elasticity:z=0}=e,{nudgeMultiplier:F}=e,{step:B=8}=e;const f=ln("isAnimated");E(t,f,nt=>i(6,d=nt));const V=ln("fixScrollDirection");E(t,V,nt=>i(43,u=nt));const J=(nt,mt,Ft)=>Math.ceil((nt-Ft)/mt)*mt+Ft;let S,j,K;const dt={x:2,y:0},lt=(nt,mt,Ft)=>`M ${nt-Ft} ${mt} a ${Ft} ${Ft} 0 1 0 0 -1`;let N,ft,$t=!1,Lt={snap:!1,elastic:!1};const ct=(nt,mt,Ft)=>{const oe=nt[g]+mt[g],Rt=Xi(oe,N[1][g],N[0][g]),Ut=z?Rt+us(oe-Rt,z):Rt,Ot=Ft.elastic?Ut:Rt,U=rt(0,0);return U[g]=Ot,et.set(U,{hard:Ft.snap}),Xi(Y(U,g),m,y)},et=oi();E(t,et,nt=>i(9,p=nt));const ht=(nt,mt)=>{const Ft=.5*(S[mt]-a[mt])-(bc(nt,m,y)*a[mt]-.5*a[mt]);return{x:mt==="x"?Ft:0,y:mt==="y"?Ft:0}},Y=(nt,mt)=>{const Ft=-(nt[mt]-.5*S[mt])/a[mt];return m+Ft*n},Z=et.subscribe(nt=>{nt&&ft&&O(Xi(Y(nt,g),m,y))}),St=nt=>{const mt=[ht(C??m,g),ht(M??y,g)],Ft={x:g==="x"?p.x+nt:0,y:g==="y"?p.y+nt:0},oe=Xi(Ft[g],mt[1][g],mt[0][g]),Rt={...p,[g]:oe};kt(et,p=Rt,p);const Ut=Xi(Y(Rt,g),m,y);R(),O(Ut),T(Ut)};return No(()=>{Z()}),t.$$set=nt=>{"labelReset"in nt&&i(1,h=nt.labelReset),"direction"in nt&&i(21,g=nt.direction),"min"in nt&&i(22,m=nt.min),"max"in nt&&i(23,y=nt.max),"base"in nt&&i(2,x=nt.base),"value"in nt&&i(0,k=nt.value),"valueLabel"in nt&&i(3,w=nt.valueLabel),"valueMin"in nt&&i(24,C=nt.valueMin),"valueMax"in nt&&i(25,M=nt.valueMax),"oninputstart"in nt&&i(26,R=nt.oninputstart),"oninputmove"in nt&&i(27,O=nt.oninputmove),"oninputend"in nt&&i(28,T=nt.oninputend),"elasticity"in nt&&i(29,z=nt.elasticity),"nudgeMultiplier"in nt&&i(30,F=nt.nudgeMultiplier),"step"in nt&&i(31,B=nt.step)},t.$$.update=()=>{if(12582912&t.$$.dirty[0]&&i(33,n=y-m),20971520&t.$$.dirty[0]&&i(35,r=C!=null?Math.max(C,m):m),41943040&t.$$.dirty[0]&&i(34,o=M!=null?Math.min(M,y):y),12582916&t.$$.dirty[0]&&i(36,s=bc(x,m,y)),16&t.$$.dirty[0]|32&t.$$.dirty[1]&&S){const nt=.5*S.y;let mt,Ft=40*s,oe="",Rt=S.y,Ut="";for(let Ot=0;Ot<=40;Ot++){const U=dt.x+10*Ot,wt=nt;oe+=lt(U,wt,Ot%5==0?2:.75)+" ",mt=U+dt.x,Ot===Ft&&(Ut=`<path d="M${U} ${wt-4} l2 3 l-2 -1 l-2 1 z"/>`)}i(7,j=`<svg width="${mt}" height="${Rt}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${mt} ${Rt}" aria-hidden="true" focusable="false">
        ${Ut}
        <rect rx="4" ry="4" y="${nt-4}"" height="8"/>
        <path fill-rule="evenodd" d="${oe.trim()}"/></svg>`),i(32,K={x:mt-2*dt.x,y:Rt})}16&t.$$.dirty[0]|2&t.$$.dirty[1]&&(a=S&&K),12582912&t.$$.dirty[0]|24&t.$$.dirty[1]&&i(5,l=r!==m||o!==y),32&t.$$.dirty[0]|24&t.$$.dirty[1]&&i(8,c=l?function(nt,mt){const oe=bc(nt,m,y),Rt=bc(mt,m,y);return`--range-mask-from:${100*ii(J(oe,.025,0)-.0125)}%;--range-mask-to:${100*ii(J(Rt,.025,0)-.0125)}%`}(r,o):""),2097233&t.$$.dirty[0]|4&t.$$.dirty[1]&&n&&S&&S.x&&S.y&&et.set(ht(k,g),{hard:d===!1})},[k,h,x,w,S,l,d,j,c,p,f,V,dt,()=>{$t=!1,ft=fa(et),N=[ht(C??m,g),ht(M??y,g)],R()},()=>{$t=!0},({detail:nt})=>{Lt.snap=!$t,Lt.elastic=!$t,ct(ft,nt.translation,Lt)},({detail:nt})=>{Lt.snap=!1,Lt.elastic=!1;const mt=ct(ft,nt.translation,Lt);if(ft=void 0,N=void 0,Math.abs(mt-x)<.01)return T(x);T(mt)},()=>{i(0,k=Xi(x,r,o)),R(),T(k)},et,nt=>{nt.preventDefault(),nt.stopPropagation();const mt=Cu(nt,{fixScrollDirection:u})*B;St(mt)},({detail:nt})=>{St(nt[g]*Math.abs(F||8))},g,m,y,C,M,R,O,T,z,F,B,K,n,o,r,s,nt=>i(4,S=(mt=>rt(mt.width,mt.height))(nt.detail))]}class jh extends si{constructor(e){super(),ai(this,e,R3,P3,ti,{labelReset:1,direction:21,min:22,max:23,base:2,value:0,valueLabel:3,valueMin:24,valueMax:25,oninputstart:26,oninputmove:27,oninputend:28,elasticity:29,nudgeMultiplier:30,step:31},null,[-1,-1])}}var I3={[fs]:t=>({x:t.x,y:t.y}),[ra]:t=>({x:t.x+t.width,y:t.y}),[ys]:t=>({x:t.x+t.width,y:t.y}),[oa]:t=>({x:t.x+t.width,y:t.y+t.height}),[xs]:t=>({x:t.x,y:t.y+t.height}),[aa]:t=>({x:t.x,y:t.y+t.height}),[bs]:t=>({x:t.x,y:t.y}),[na]:t=>({x:t.x,y:t.y})};function Zg(t,e,i){const n=t.slice();return n[14]=e[i].key,n[15]=e[i].translate,n[16]=e[i].scale,n[17]=e[i].type,n[18]=e[i].opacity,n}function Xg(t,e){let i,n,r,o,a,s,l,c;return{key:t,first:null,c(){i=pt("div"),v(i,"role","button"),v(i,"aria-label",n=`Drag ${e[17]} ${e[14]}`),v(i,"tabindex",r=e[17]==="edge"?-1:0),v(i,"class","PinturaRectManipulator"),v(i,"data-direction",o=e[14]),v(i,"data-shape",a=e[17]==="edge"?"edge":""+e[0]),v(i,"style",s=`--tx:${e[15].x};--ty:${e[15].y};--sx:${e[16].x};--sy:${e[16].y};opacity:${e[18]}`),this.first=i},m(d,u){tt(d,i,u),l||(c=[Mt(i,"nudge",function(){Hi(e[6](e[14]))&&e[6](e[14]).apply(this,arguments)}),ji(Ts.call(null,i,{preventDefault:!0})),Mt(i,"interactionstart",function(){Hi(e[5]("resizestart",e[14]))&&e[5]("resizestart",e[14]).apply(this,arguments)}),Mt(i,"interactionupdate",function(){Hi(e[5]("resizemove",e[14]))&&e[5]("resizemove",e[14]).apply(this,arguments)}),Mt(i,"interactionend",function(){Hi(e[5]("resizeend",e[14]))&&e[5]("resizeend",e[14]).apply(this,arguments)}),ji(Cs.call(null,i))],l=!0)},p(d,u){e=d,2&u&&n!==(n=`Drag ${e[17]} ${e[14]}`)&&v(i,"aria-label",n),2&u&&r!==(r=e[17]==="edge"?-1:0)&&v(i,"tabindex",r),2&u&&o!==(o=e[14])&&v(i,"data-direction",o),3&u&&a!==(a=e[17]==="edge"?"edge":""+e[0])&&v(i,"data-shape",a),2&u&&s!==(s=`--tx:${e[15].x};--ty:${e[15].y};--sx:${e[16].x};--sy:${e[16].y};opacity:${e[18]}`)&&v(i,"style",s)},d(d){d&&Q(i),l=!1,_i(c)}}}function E3(t){let e,i=[],n=new Map,r=t[1];const o=a=>a[14];for(let a=0;a<r.length;a+=1){let s=Zg(t,r,a),l=o(s);n.set(l,i[a]=Xg(l,s))}return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Tn()},m(a,s){for(let l=0;l<i.length;l+=1)i[l].m(a,s);tt(a,e,s)},p(a,[s]){99&s&&(r=a[1],i=La(i,s,o,1,a,r,n,e.parentNode,Vy,Xg,e,Zg))},i:Je,o:Je,d(a){for(let s=0;s<i.length;s+=1)i[s].d(a);a&&Q(e)}}}function A3(t,e,i){let n,r,o,a,{rect:s=null}=e,{visible:l=!1}=e,{style:c}=e;const d=ln("isAnimated");E(t,d,m=>i(11,a=m));const u=oi(void 0,{precision:1e-4,stiffness:.2,damping:.4});E(t,u,m=>i(10,o=m));const p=oi(0,{precision:.001});let h;E(t,p,m=>i(9,r=m));const g=va();return t.$$set=m=>{"rect"in m&&i(7,s=m.rect),"visible"in m&&i(8,l=m.visible),"style"in m&&i(0,c=m.style)},t.$$.update=()=>{2304&t.$$.dirty&&u.set(l?1:.5,{hard:a===!1}),2304&t.$$.dirty&&p.set(l?1:0,{hard:a===!1}),1664&t.$$.dirty&&i(1,n=Object.keys(Lp).map((m,y)=>{const x=Lp[m],k=I3[x](s),w=x.length===1?"edge":"corner",C=w==="corner";return{key:x,type:w,scale:{x:/^(t|b)$/.test(x)?s.width:C?Xi(o,.5,1.25):1,y:/^(r|l)$/.test(x)?s.height:C?Xi(o,.5,1.25):1},translate:{x:k.x,y:k.y},opacity:r}}))},[c,n,d,u,p,(m,y)=>({detail:x})=>{h&&y!==h||m!=="resizestart"&&h===void 0||(m==="resizestart"&&(h=y),m==="resizeend"&&(h=void 0),g(m,{direction:y,translation:x&&x.translation}))},m=>({detail:y})=>{g("resizestart",{direction:m,translation:{x:0,y:0}}),g("resizemove",{direction:m,translation:y}),g("resizeend",{direction:m,translation:{x:0,y:0}})},s,l,r,o,a]}class L3 extends si{constructor(e){super(),ai(this,e,A3,E3,ti,{rect:7,visible:8,style:0})}}var z3=t=>{function e(a,s){t.dispatchEvent(new CustomEvent(a,{detail:s}))}const i=a=>{a.preventDefault(),t.addEventListener("gesturechange",n),t.addEventListener("gestureend",r),e("gesturedown")},n=a=>{a.preventDefault(),e("gestureupdate",a.scale)},r=a=>{e("gestureup",a.scale),a.preventDefault(),o()},o=()=>{t.removeEventListener("gesturechange",n),t.removeEventListener("gestureend",r)};return t.addEventListener("gesturestart",i),{destroy:()=>{o(),t.removeEventListener("gesturestart",i)}}},Uh={[fs]:xs,[ys]:bs,[xs]:fs,[bs]:ys,[na]:oa,[ra]:aa,[oa]:na,[aa]:ra},Gh=t=>{const e=t===bs||t===ys,i=t===fs||t===xs;return[t===ys||t===ra||t===oa,t===bs||t===aa||t===na,t===fs||t===ra||t===na,t===xs||t===oa||t===aa,e,i,e||i]},Yg=(t,e,i,n={})=>{const{target:r,translate:o}=e,{aspectRatio:a,minSize:s,maxSize:l}=n,c=Tc[Uh[r]],d=Bn(rt(t.x,t.y),rt(c[0]*t.width,c[1]*t.height)),u=Tc[r],p=Bn(Ci(t),rt(u[0]*t.width,u[1]*t.height)),[h,g,m,y,x,k,w]=Gh(r);let C=o.x,M=o.y;x?M=0:k&&(C=0);const{inner:R,outer:O}=F3(d,r,i,{aspectRatio:a,minSize:s,maxSize:l});let[T,z,F,B]=tl(t);if(h?B=d.x:g&&(z=d.x),y?T=d.y:m&&(F=d.y),h){const f=R.x+R.width,V=O.x+O.width;z=Xi(p.x+C,f,V)}else if(g){const f=O.x,V=R.x;B=Xi(p.x+C,f,V)}if(y){const f=R.y+R.height,V=O.y+O.height;F=Xi(p.y+M,f,V)}else if(m){const f=O.y,V=R.y;T=Xi(p.y+M,f,V)}if(B>R.x&&(B=R.x),z<R.x+R.width&&(z=R.x+R.width),T>R.y&&(T=R.y),F<R.y+R.height&&(F=R.y+R.height),B<O.x){const f=O.x-B;B=O.x,z+=f}if(z>O.x+O.width){const f=z-(O.x+O.width);z=O.x+O.width,B-=f}if(T<O.y){const f=O.y-T;T=O.y,F+=f}if(F>O.y+O.height){const f=F-(O.y+O.height);F=O.y+O.height,T-=f}if(a)if(w){let f=z-B,V=F-T;x?(V=f/a,T=d.y-.5*V,F=d.y+.5*V):k&&(f=V*a,B=d.x-.5*f,z=d.x+.5*f)}else{const f=rt(p.x+C-d.x,p.y+M-d.y);r===ra?(f.x=Math.max(0,f.x),f.y=Math.min(0,f.y)):r===oa?(f.x=Math.max(0,f.x),f.y=Math.max(0,f.y)):r===aa?(f.x=Math.min(0,f.x),f.y=Math.max(0,f.y)):r===na&&(f.x=Math.min(0,f.x),f.y=Math.min(0,f.y));const V=ps(f),J=ps(rt(R.width,R.height)),S=ps(rt(O.width,O.height)),j=Xi(V,J,S),K=rt(a,1),dt=Dr(ao(K),j);r===ra?(z=d.x+dt.x,T=d.y-dt.y):r===oa?(z=d.x+dt.x,F=d.y+dt.y):r===aa?(B=d.x-dt.x,F=d.y+dt.y):r===na&&(B=d.x-dt.x,T=d.y-dt.y)}return An(B,T,z-B,F-T)};const F3=(t,e,i,n)=>{const{aspectRatio:r,minSize:o,maxSize:a}=n,s=e===ys||e===ra||e===oa,l=e===bs||e===aa||e===na,c=e===fs||e===ra||e===na,d=e===xs||e===oa||e===aa,u=e===bs||e===ys,p=e===fs||e===xs,h=Ci(i);s?(h.x=t.x,h.width-=t.x):l&&(h.width=t.x),d?(h.y=t.y,h.height-=t.y):c&&(h.height=t.y);const g=((R,O)=>sa(0,0,R,O))(Math.min(h.width,a.width),Math.min(h.height,a.height));if(r){if(u){const R=Math.min(t.y,i.height-t.y);g.height=Math.min(2*R,g.height)}else if(p){const R=Math.min(t.x,i.width-t.x);g.width=Math.min(2*R,g.width)}}const m=r?Qs(qa(Ur(o),r)):o,y=r?Qs(to(g,r)):g;let x,k,w,C;s?x=t.x:l&&(k=t.x),d?w=t.y:c&&(C=t.y),s?k=x+m.width:l&&(x=k-m.width),d?C=w+m.height:c&&(w=C-m.height),u?(w=t.y-.5*m.height,C=t.y+.5*m.height):p&&(x=t.x-.5*m.width,k=t.x+.5*m.width);const M=ar([rt(x,w),rt(k,C)]);return s?k=x+y.width:l&&(x=k-y.width),d?C=w+y.height:c&&(w=C-y.height),u?(w=t.y-.5*y.height,C=t.y+.5*y.height):p&&(x=t.x-.5*y.width,k=t.x+.5*y.width),x=Math.max(i.x,x),k=Math.min(i.x+i.width,k),w=Math.max(i.y,w),C=Math.min(i.y+i.height,C),{inner:M,outer:ar([rt(x,w),rt(k,C)])}};var qg=t=>180*t/Math.PI;function D3(t){let e,i,n;return i=new jh({props:{elasticity:t[5],min:t[9],max:t[10],value:t[11],valueMin:Math.max(t[9],t[0]),valueMax:Math.min(t[10],t[1]),labelReset:t[6],base:t[12],valueLabel:Math.round(qg(t[11]))+"&deg;",oninputstart:t[2],oninputmove:t[17],oninputend:t[18]}}),{c(){e=pt("div"),At(i.$$.fragment),v(e,"class","PinturaImageRotator")},m(r,o){tt(r,e,o),It(i,e,null),n=!0},p(r,[o]){const a={};32&o&&(a.elasticity=r[5]),512&o&&(a.min=r[9]),1024&o&&(a.max=r[10]),2048&o&&(a.value=r[11]),513&o&&(a.valueMin=Math.max(r[9],r[0])),1026&o&&(a.valueMax=Math.min(r[10],r[1])),64&o&&(a.labelReset=r[6]),4096&o&&(a.base=r[12]),2048&o&&(a.valueLabel=Math.round(qg(r[11]))+"&deg;"),4&o&&(a.oninputstart=r[2]),392&o&&(a.oninputmove=r[17]),400&o&&(a.oninputend=r[18]),i.$set(a)},i(r){n||(P(i.$$.fragment,r),n=!0)},o(r){D(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Et(i)}}}function B3(t,e,i){let n,r,o,a,s,l,c,{rotation:d}=e,{valueMin:u}=e,{valueMax:p}=e,{oninputstart:h=me}=e,{oninputmove:g=me}=e,{oninputend:m=me}=e,{elasticity:y=0}=e,{labelReset:x}=e,{rotationMin:k}=e,{rotationMax:w}=e;return t.$$set=C=>{"rotation"in C&&i(13,d=C.rotation),"valueMin"in C&&i(0,u=C.valueMin),"valueMax"in C&&i(1,p=C.valueMax),"oninputstart"in C&&i(2,h=C.oninputstart),"oninputmove"in C&&i(3,g=C.oninputmove),"oninputend"in C&&i(4,m=C.oninputend),"elasticity"in C&&i(5,y=C.elasticity),"labelReset"in C&&i(6,x=C.labelReset),"rotationMin"in C&&i(14,k=C.rotationMin),"rotationMax"in C&&i(15,w=C.rotationMax)},t.$$.update=()=>{16384&t.$$.dirty&&i(9,n=k+1e-9),32768&t.$$.dirty&&i(10,r=w-1e-9),1536&t.$$.dirty&&i(12,o=n+.5*(r-n)),32768&t.$$.dirty&&i(16,a=2*w),8192&t.$$.dirty&&i(8,s=Math.sign(d)),73728&t.$$.dirty&&i(7,l=Math.round(Math.abs(d)/a)*a),8576&t.$$.dirty&&i(11,c=d-s*l)},[u,p,h,g,m,y,x,l,s,n,r,c,o,d,k,w,a,C=>g(s*l+C),C=>m(s*l+C)]}class O3 extends si{constructor(e){super(),ai(this,e,B3,D3,ti,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6,rotationMin:14,rotationMax:15})}}function W3(t){let e,i,n,r,o;return{c(){e=pt("div"),i=pt("p"),n=cn(t[0]),r=cn(" Ã "),o=cn(t[1]),v(e,"class","PinturaImageInfo")},m(a,s){tt(a,e,s),Tt(e,i),Tt(i,n),Tt(i,r),Tt(i,o)},p(a,[s]){1&s&&zn(n,a[0]),2&s&&zn(o,a[1])},i:Je,o:Je,d(a){a&&Q(e)}}}function _3(t,e,i){let{width:n}=e,{height:r}=e;return t.$$set=o=>{"width"in o&&i(0,n=o.width),"height"in o&&i(1,r=o.height)},[n,r]}class V3 extends si{constructor(e){super(),ai(this,e,_3,W3,ti,{width:0,height:1})}}function N3(t){let e,i;return e=new Ja({props:{class:"PinturaPresetListFilter",layout:"row",options:t[8],selectedIndex:t[7],onchange:t[10]}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};256&r&&(o.options=n[8]),128&r&&(o.selectedIndex=n[7]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function H3(t){let e,i;return e=new k2({props:{icon:t[0],label:t[1],labelClass:t[2],hideLabel:t[3],options:t[9],selectedIndex:t[4],onchange:t[5],optionMapper:t[6],$$slots:{controls:[N3]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,[r]){const o={};1&r&&(o.icon=n[0]),2&r&&(o.label=n[1]),4&r&&(o.labelClass=n[2]),8&r&&(o.hideLabel=n[3]),512&r&&(o.options=n[9]),16&r&&(o.selectedIndex=n[4]),32&r&&(o.onchange=n[5]),64&r&&(o.optionMapper=n[6]),262528&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}const Kg='fill="none" stroke="currentColor"';function j3(t,e,i){let n,r,o,{icon:a}=e,{label:s}=e,{labelClass:l}=e,{hideLabel:c}=e,{options:d}=e,{selectedIndex:u}=e,{onchange:p}=e,{optionMapper:h}=e,{filter:g="landscape"}=e,{onfilterchange:m=me}=e;const y=(k,w,C,M,R)=>`
    <rect ${Kg} x="${k}" y="${w}" width="${C}" height="${M}" rx="${R}"/>`,x=(k,w)=>`<path ${Kg} d="M${k} ${w} l2 2 l3 -4"/>`;return t.$$set=k=>{"icon"in k&&i(0,a=k.icon),"label"in k&&i(1,s=k.label),"labelClass"in k&&i(2,l=k.labelClass),"hideLabel"in k&&i(3,c=k.hideLabel),"options"in k&&i(12,d=k.options),"selectedIndex"in k&&i(4,u=k.selectedIndex),"onchange"in k&&i(5,p=k.onchange),"optionMapper"in k&&i(6,h=k.optionMapper),"filter"in k&&i(11,g=k.filter),"onfilterchange"in k&&i(13,m=k.onfilterchange)},t.$$.update=()=>{6144&t.$$.dirty&&i(9,n=((k,w)=>(k||[]).map(C=>Oe(C[0])?(C[1]=C[1].map(w),C):w(C)))(d,(k=>w=>{const[C,M,R={}]=w;return $i(C)&&(R.hidden=k==="landscape"?C<1:C>1),[C,M,R]})(g))),2048&t.$$.dirty&&i(7,r=g==="landscape"?0:1),128&t.$$.dirty&&i(8,o=[["landscape","Landscape",{hideLabel:!0,icon:y(2,6,19,12,2)+(r===0?x(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:y(5,3,13,18,2)+(r===1?x(9,12):"")}]])},[a,s,l,c,u,p,h,r,o,n,k=>{i(11,g=k.value),m(k.value)},g,d,m]}class U3 extends si{constructor(e){super(),ai(this,e,j3,H3,ti,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}}const Jg=t=>Mo(t,e=>ii(e,6)),Qg=t=>Wo(t,e=>ii(e,6)),as=(t,e,i=1e-4)=>Math.abs(t-e)<i;var G3=(t,e,i,n,r={})=>{const{aspectRatio:o}=r;t=Qg(t),n=n.map(Jg);const a=um(t,Uh[i.target]),s=Mo(a,x=>ii(x,6)),l=o?qa(r.minSize,o):r.minSize,c=o?to(r.maxSize,o):r.maxSize,d=um(e,i.target);if($o(d,a)<1){e=Ci(t);const x=Math.min(l.width/t.width,l.height/t.height);Fr(e,x,a)}e=dm(Ci(e),l,c,a);let u=Ci(e);e=Qg(e);const p=iy(n,1),h=_o(t),g=_o(e),m=h.findIndex(x=>ds(Mo(x,k=>ii(k,6)),s)),y=x=>p.map(k=>uh(k,x)).filter(Boolean).pop();if(o){const x=g.map((k,w)=>{if(w===m)return;const C=rt(a.x-k.x,a.y-k.y);ao(C),Dr(C,.5);const M=rt(a.x-C.x,a.y-C.y),R=vs(M,Jg(k)),O=y(R);if(!O)return;const T=h[w];return{intersection:O,cornerDist:$o(a,T),intersectionDist:$o(a,O)}}).filter(Boolean);if(x.length){const k=x.reduce((w,C)=>{const M=C.intersectionDist/C.cornerDist;return M<w?M:w},Number.MAX_SAFE_INTEGER);u=Ci(t),Fr(u,k,a)}}else{const x=i.target.length===1,k=!(n[0].y===n[1].y||n[0].x===n[1].x),w=h.map((C,M)=>{if(M===m)return;const R=g[M],O=!as(R.x,s.x)&&!as(R.y,s.y);if(!x&&!k&&O||x&&(as(R.x,s.x)||as(R.y,s.y)))return;const T=_e(x?C:a),z=On(_e(T),R);ao(z),Dr(z,.5),x?Bn(T,z):On(T,z);const F=vs(T,R);return y(F)||void 0}).filter(Boolean);if(w.length){const[C,M,R,O]=Gh(i.target);let[T,z,F,B]=tl(e);w.forEach(({x:f,y:V})=>{const J=ii(f,6),S=ii(V,6);R&&!as(S,s.y)&&(T=Math.max(T,V)),C&&!as(J,s.x)&&(z=Math.min(z,f)),O&&!as(S,s.y)&&(F=Math.min(F,V)),M&&!as(J,s.x)&&(B=Math.max(B,f))}),u=Kx([T,z,F,B]),Fr(u,.9999,a)}}return dm(u,l,c,a),u};function Z3(t){let e,i;return e=new fo({props:{items:t[11]}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};2048&r[0]&&(o.items=n[11]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function X3(t){let e,i,n;return i=new V2({props:{$$slots:{default:[Z3]},$$scope:{ctx:t}}}),{c(){e=pt("div"),At(i.$$.fragment),v(e,"slot","header")},m(r,o){tt(r,e,o),It(i,e,null),n=!0},p(r,o){const a={};2048&o[0]|4&o[7]&&(a.$$scope={dirty:o,ctx:r}),i.$set(a)},i(r){n||(P(i.$$.fragment,r),n=!0)},o(r){D(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Et(i)}}}function tf(t){let e,i;return e=new ks({props:{onclick:t[88],label:t[4].cropLabelButtonRecenter,icon:t[4].cropIconButtonRecenter,class:"PinturaButtonCenter",disabled:!t[9],hideLabel:!0,style:`opacity: ${t[29]}; transform: translate3d(${t[30].x}px, ${t[30].y}px, 0)`}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};16&r[0]&&(o.label=n[4].cropLabelButtonRecenter),16&r[0]&&(o.icon=n[4].cropIconButtonRecenter),512&r[0]&&(o.disabled=!n[9]),1610612736&r[0]&&(o.style=`opacity: ${n[29]}; transform: translate3d(${n[30].x}px, ${n[30].y}px, 0)`),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function ef(t){let e,i;return e=new L3({props:{rect:t[8],visible:t[12],style:t[1]}}),e.$on("resizestart",t[68]),e.$on("resizemove",t[69]),e.$on("resizeend",t[70]),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};256&r[0]&&(o.rect=n[8]),4096&r[0]&&(o.visible=n[12]),2&r[0]&&(o.style=n[1]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function nf(t){let e,i;return e=new V3({props:{width:Math.round(t[13].width),height:Math.round(t[13].height)}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};8192&r[0]&&(o.width=Math.round(n[13].width)),8192&r[0]&&(o.height=Math.round(n[13].height)),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function Y3(t){let e,i,n,r,o,a,s,l,c=t[21]&&t[10]&&tf(t),d=t[21]&&ef(t),u=t[22]&&nf(t);return{c(){e=pt("div"),i=pt("div"),c&&c.c(),n=ce(),d&&d.c(),o=ce(),u&&u.c(),v(i,"class","PinturaStage"),v(e,"slot","main")},m(p,h){tt(p,e,h),Tt(e,i),c&&c.m(i,null),Tt(i,n),d&&d.m(i,null),t[162](i),Tt(e,o),u&&u.m(e,null),a=!0,s||(l=[ji(Er.call(null,i)),Mt(i,"measure",t[160]),Mt(i,"wheel",function(){Hi(t[2]&&t[87])&&(t[2]&&t[87]).apply(this,arguments)},{passive:!1}),Mt(i,"interactionstart",t[74]),Mt(i,"interactionupdate",t[75]),Mt(i,"interactionrelease",t[77]),Mt(i,"interactionend",t[76]),ji(r=Cs.call(null,i,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:of,getEventPosition:t[163]})),Mt(i,"gesturedown",t[84]),Mt(i,"gestureupdate",t[85]),Mt(i,"gestureup",t[86]),ji(z3.call(null,i))],s=!0)},p(p,h){(t=p)[21]&&t[10]?c?(c.p(t,h),2098176&h[0]&&P(c,1)):(c=tf(t),c.c(),P(c,1),c.m(i,n)):c&&(ze(),D(c,1,1,()=>{c=null}),Fe()),t[21]?d?(d.p(t,h),2097152&h[0]&&P(d,1)):(d=ef(t),d.c(),P(d,1),d.m(i,null)):d&&(ze(),D(d,1,1,()=>{d=null}),Fe()),r&&Hi(r.update)&&16777220&h[0]&&r.update.call(null,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:of,getEventPosition:t[163]}),t[22]?u?(u.p(t,h),4194304&h[0]&&P(u,1)):(u=nf(t),u.c(),P(u,1),u.m(e,null)):u&&(ze(),D(u,1,1,()=>{u=null}),Fe())},i(p){a||(P(c),P(d),P(u),a=!0)},o(p){D(c),D(d),D(u),a=!1},d(p){p&&Q(e),c&&c.d(),d&&d.d(),t[162](null),u&&u.d(),s=!1,_i(l)}}}function rf(t){let e,i,n,r;const o=[{class:"PinturaControlList"},{tabs:t[7]},t[18]];let a={$$slots:{default:[q3,({tab:c})=>({218:c}),({tab:c})=>[0,0,0,0,0,0,0,c?2:0]]},$$scope:{ctx:t}};for(let c=0;c<o.length;c+=1)a=Cn(a,o[c]);e=new Su({props:a}),e.$on("select",t[161]);const s=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[17]},t[18]];let l={$$slots:{default:[Q3,({panel:c})=>({217:c}),({panel:c})=>[0,0,0,0,0,0,0,c?1:0]]},$$scope:{ctx:t}};for(let c=0;c<s.length;c+=1)l=Cn(l,s[c]);return n=new ku({props:l}),{c(){At(e.$$.fragment),i=ce(),At(n.$$.fragment)},m(c,d){It(e,c,d),tt(c,i,d),It(n,c,d),r=!0},p(c,d){const u=262272&d[0]?Ir(o,[o[0],128&d[0]&&{tabs:c[7]},262144&d[0]&&Or(c[18])]):{};6&d[7]&&(u.$$scope={dirty:d,ctx:c}),e.$set(u);const p=393216&d[0]?Ir(s,[s[0],s[1],131072&d[0]&&{panels:c[17]},262144&d[0]&&Or(c[18])]):{};511721496&d[0]|5&d[7]&&(p.$$scope={dirty:d,ctx:c}),n.$set(p)},i(c){r||(P(e.$$.fragment,c),P(n.$$.fragment,c),r=!0)},o(c){D(e.$$.fragment,c),D(n.$$.fragment,c),r=!1},d(c){Et(e,c),c&&Q(i),Et(n,c)}}}function q3(t){let e,i,n=t[218].label+"";return{c(){e=pt("span"),i=cn(n)},m(r,o){tt(r,e,o),Tt(e,i)},p(r,o){2&o[7]&&n!==(n=r[218].label+"")&&zn(i,n)},d(r){r&&Q(e)}}}function K3(t){let e,i;return e=new jh({props:{elasticity:t[25]*t[44],base:nS,min:t[23],max:iS,valueMin:t[27][0],valueMax:t[27][1],value:t[28],labelReset:t[4].labelReset,valueLabel:Math.round(100*t[28])+"%",oninputstart:t[81],oninputmove:t[82],oninputend:t[83]}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};33554432&r[0]&&(o.elasticity=n[25]*n[44]),8388608&r[0]&&(o.min=n[23]),134217728&r[0]&&(o.valueMin=n[27][0]),134217728&r[0]&&(o.valueMax=n[27][1]),268435456&r[0]&&(o.value=n[28]),16&r[0]&&(o.labelReset=n[4].labelReset),268435456&r[0]&&(o.valueLabel=Math.round(100*n[28])+"%"),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function J3(t){let e,i;return e=new O3({props:{elasticity:t[25]*t[44],rotation:t[14],labelReset:t[4].labelReset,valueMin:t[26][0],valueMax:t[26][1],rotationMin:-t[3],rotationMax:t[3],oninputstart:t[71],oninputmove:t[72],oninputend:t[73]}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};33554432&r[0]&&(o.elasticity=n[25]*n[44]),16384&r[0]&&(o.rotation=n[14]),16&r[0]&&(o.labelReset=n[4].labelReset),67108864&r[0]&&(o.valueMin=n[26][0]),67108864&r[0]&&(o.valueMax=n[26][1]),8&r[0]&&(o.rotationMin=-n[3]),8&r[0]&&(o.rotationMax=n[3]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function Q3(t){let e,i,n,r;const o=[J3,K3],a=[];function s(l,c){return l[217]===l[93]+"-rotation"?0:l[217]===l[93]+"-zoom"?1:-1}return~(e=s(t))&&(i=a[e]=o[e](t)),{c(){i&&i.c(),n=Tn()},m(l,c){~e&&a[e].m(l,c),tt(l,n,c),r=!0},p(l,c){let d=e;e=s(l),e===d?~e&&a[e].p(l,c):(i&&(ze(),D(a[d],1,1,()=>{a[d]=null}),Fe()),~e?(i=a[e],i?i.p(l,c):(i=a[e]=o[e](l),i.c()),P(i,1),i.m(n.parentNode,n)):i=null)},i(l){r||(P(i),r=!0)},o(l){D(i),r=!1},d(l){~e&&a[e].d(l),l&&Q(n)}}}function tS(t){let e,i,n=t[19]&&rf(t);return{c(){e=pt("div"),n&&n.c(),v(e,"slot","footer"),v(e,"style",t[16])},m(r,o){tt(r,e,o),n&&n.m(e,null),i=!0},p(r,o){r[19]?n?(n.p(r,o),524288&o[0]&&P(n,1)):(n=rf(r),n.c(),P(n,1),n.m(e,null)):n&&(ze(),D(n,1,1,()=>{n=null}),Fe()),(!i||65536&o[0])&&v(e,"style",r[16])},i(r){i||(P(n),i=!0)},o(r){D(n),i=!1},d(r){r&&Q(e),n&&n.d()}}}function eS(t){let e,i,n;function r(a){t[164](a)}let o={hasHeader:t[20],$$slots:{footer:[tS],main:[Y3],header:[X3]},$$scope:{ctx:t}};return t[15]!==void 0&&(o.root=t[15]),e=new rl({props:o}),Ai.push(()=>go(e,"root",r)),e.$on("measure",t[165]),{c(){At(e.$$.fragment)},m(a,s){It(e,a,s),n=!0},p(a,s){const l={};1048576&s[0]&&(l.hasHeader=a[20]),2146402302&s[0]|4&s[7]&&(l.$$scope={dirty:s,ctx:a}),!i&&32768&s[0]&&(i=!0,l.root=a[15],Po(()=>i=!1)),e.$set(l)},i(a){n||(P(e.$$.fragment,a),n=!0)},o(a){D(e.$$.fragment,a),n=!1},d(a){Et(e,a)}}}const iS=1,nS=0,of=(t,e)=>t.target===e;function rS(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,y,x,k,w,C,M,R,O,T,z,F,B,f,V,J,S,j,K,dt,lt,N,ft,$t,Lt,ct,et,ht,Y,Z,St,nt,mt,Ft,oe,Rt,Ut,Ot,U,wt,xt,Gt,de,ue,be,$e,_,ve,gi,ye,Vt,Ce,Re,He,bi,vt,bt,Ge,Me,ni,Ue=Je,ei=()=>(Ue(),Ue=jr(vi,A=>i(12,S=A)),vi);t.$$.on_destroy.push(()=>Ue());let{isActive:vi}=e;ei();let{stores:di}=e,{cropImageSelectionCornerStyle:Li="circle"}=e,{cropWillRenderImageSelectionGuides:X=(A,Pe)=>{const De=A=="rotate";return{rows:De?5:3,cols:De?5:3,opacity:.25*Pe}}}=e,{cropAutoCenterImageSelectionTimeout:jt}=e,{cropEnableZoomMatchImageAspectRatio:G=!0}=e,{cropEnableRotateMatchImageAspectRatio:Bt="never"}=e,{cropEnableRotationInput:fe=!0}=e,{cropEnableZoom:Qt=!0}=e,{cropEnableZoomInput:se=!0}=e,{cropEnableZoomAutoHide:zt=!0}=e,{cropEnableImageSelection:We=!0}=e,{cropEnableInfoIndicator:Ee=!1}=e,{cropEnableZoomTowardsWheelPosition:je=!0}=e,{cropEnableLimitWheelInputToCropSelection:Ke=!0}=e,{cropEnableCenterImageSelection:it=!0}=e,{cropEnableButtonRotateLeft:Xt=!0}=e,{cropEnableButtonRotateRight:Nt=!1}=e,{cropEnableButtonFlipHorizontal:Zt=!0}=e,{cropEnableButtonFlipVertical:Yt=!1}=e,{cropSelectPresetOptions:ot}=e,{cropEnableSelectPreset:pe=!0}=e,{cropEnableFilterMatchAspectRatio:ee=!0}=e,{cropSelectPresetFilter:ge=!1}=e,{cropEnableButtonToggleCropLimit:Dt=!1}=e,{cropWillRenderTools:Se=Zi}=e,{cropActiveTransformTool:fi="rotation"}=e,{cropMinimizeToolbar:ui="auto"}=e,{cropInteractionFocus:Be="image"}=e,{cropRotationRange:yi=Jo}=e,{cropMaskOpacity:Mi=.85}=e,{locale:xe={}}=e;const he=ln("isAnimated");E(t,he,A=>i(139,j=A));const Ie=ln("elasticityMultiplier");E(t,Ie,A=>i(25,bi=A));const an=ln("redrawTrigger");E(t,an,A=>i(159,He=A));const Ui=ln("imageIsStatic");E(t,Ui,A=>i(145,Lt=A));const yn=ln("imageStaticVisualCorners");E(t,yn,A=>i(181,$e=A));const mn=ln("fixScrollDirection");E(t,mn,A=>i(175,U=A));let $n="idle";const tn=le();E(t,tn,A=>i(156,Vt=A));const Yi=()=>ue===void 0,Fn=A=>1/A,Xn=A=>{ee&&ge!==A&&(i(95,ge=A),ue&&ue!==1&&jn()&&kt(un,ue=Fn(ue),ue))},jn=()=>{if(ue===1||!n)return!1;const A=Fn(ue);return!!$s(Vt).find(([Pe])=>Pe===A)},vr=(A,Pe,De)=>Ia(De)?Pe.width===Math.round(A.height)||Pe.height===Math.round(A.width):Pe.width===Math.round(A.width)||Pe.height===Math.round(A.height),Un=()=>(Yi()||Bt==="always"&&jn())&&((A,Pe,De)=>{const Si=Xa(Yf(oo(Pe),De),Ze=>Math.abs(Math.round(Ze))),Ni=El(Si),zi=Ti(A);return ds(Ni,zi)})(ct,oe,Rt)&&vr(ct,oe,Rt),vn=A=>{if(Bt!=="never"&&Un()){kt(Wr,Rt+=A,Rt);const Pe=Ia(Rt),De=Pe?oe.height:oe.width,Si=Pe?oe.width:oe.height;kt(Yn,ct=An(0,0,De,Si),ct),Yi()||kt(un,ue=Ko(De,Si),ue)}else kt(Wr,Rt+=A,Rt)},{history:_n,env:Vn,isInteracting:Pi,isInteractingFraction:so,isTransformingImage:Dn,rootRect:yo,stageRect:lo,utilRect:Ar,utilRectPadded:wr,rootLineColor:Mn,allowPan:qi,allowZoom:Zr,allowPlayPause:eo,rangeInputElasticity:xo,presentationScalar:bo,utilTools:Io,imagePreviewModifiers:co,imageOutlineOpacity:uo,imageFlipX:vo,imageFlipY:wo,imageRotation:Wr,imageRotationRange:Sr,imageOutputSize:io,imageSelectionRect:dn,imageSelectionRectSnapshot:tr,imageSelectionRectIntent:So,imageSelectionRectPresentation:_r,imageCropRectIntent:wi,imageCropRectOrigin:Pn,imageCropRect:Yn,imageCropMinSize:gn,imageCropMaxSize:no,imageCropRange:Xr,imageCropAspectRatio:un,imageCropLimitToImage:Yr,imageSize:hr,imageScalar:po,imageOverlayMarkup:mr,stagePadded:Gn,stageRecenter:ho}=di;let kr;E(t,Vn,A=>i(140,K=A)),E(t,Pi,A=>i(144,$t=A)),E(t,Dn,A=>i(173,mt=A)),E(t,yo,A=>i(24,wt=A)),E(t,lo,A=>i(151,nt=A)),E(t,wr,A=>i(148,Y=A)),E(t,bo,A=>i(147,ht=A)),E(t,Io,A=>i(183,ve=A)),E(t,co,A=>i(172,N=A)),E(t,vo,A=>i(158,Re=A)),E(t,wo,A=>i(157,Ce=A)),E(t,Wr,A=>i(14,Rt=A)),E(t,Sr,A=>i(26,vt=A)),E(t,io,A=>i(184,gi=A)),E(t,dn,A=>i(150,St=A)),E(t,tr,A=>i(149,Z=A)),E(t,So,A=>i(182,_=A)),E(t,_r,A=>i(143,ft=A)),E(t,wi,A=>i(176,xt=A)),E(t,Pn,A=>i(178,de=A)),E(t,Yn,A=>i(13,ct=A)),E(t,gn,A=>i(154,Ot=A)),E(t,no,A=>i(180,be=A)),E(t,Xr,A=>i(177,Gt=A)),E(t,un,A=>i(179,ue=A)),E(t,Yr,A=>i(153,Ut=A)),E(t,hr,A=>i(152,oe=A)),E(t,po,A=>i(146,et=A)),E(t,Gn,A=>i(142,lt=A));const ro=(A,Pe)=>{const De={target:A,translate:Pe},Si=Ed(oo(Ot),ht),Ni=Ed(oo(be),ht);let zi=Yg(Z,De,{...Y,x:0,y:0},{aspectRatio:ue,minSize:Si,maxSize:Ni});if(zi=((xi,Ye,Fi)=>{const[fn,In,rn,xn]=tl(xi),ki={...xi};if(fn<Ye.y&&(xi.height=xi.height-(Ye.y-fn),xi.y=Ye.y),In>Ye.x+Ye.width&&(xi.width=Ye.x+Ye.width-xi.x),rn>Ye.y+Ye.height&&(xi.height=Ye.y+Ye.height-xi.y),xn<Ye.x&&(xi.width=xi.width-(Ye.x-xn),xi.x=Ye.x),Fi){const gr=Math.min(1,ki.width/xi.width,ki.height/xi.height);return ms(ki,gr)}return xi})(zi,{...Y,x:0,y:0},ue),!Ut)return{boundsLimited:zi,boundsIntent:zi};let Ze=G3(Z,zi,De,$e,{aspectRatio:ue,minSize:Si,maxSize:Ni});return{boundsLimited:Ze,boundsIntent:Ze}},qr=(A,Pe)=>{const De={target:A,translate:Pe},Si=Ed(oo(Ot),ht),Ni=Ed(oo(be),ht),zi=((Ze,xi,Ye={})=>{const{target:Fi,translate:fn}=xi,{aspectRatio:In,minSize:rn}=Ye,xn=Tc[Uh[Fi]],ki=Bn(Ci(Ze),rt(xn[0]*Ze.width,xn[1]*Ze.height)),gr=Tc[Fi],mo=Bn(Ci(Ze),rt(gr[0]*Ze.width,gr[1]*Ze.height)),[Ms,Ps,Rs,Is,Fa,Qa,ol]=Gh(Fi);let ka=fn.x,Ca=fn.y;Fa?Ca=0:Qa&&(ka=0);let[Lr,fr,er,Nr]=tl(Ze);if(Ms?Nr=ki.x:Ps&&(fr=ki.x),Is?Lr=ki.y:Rs&&(er=ki.y),Ms?fr=mo.x+ka:Ps&&(Nr=mo.x+ka),Is?er=mo.y+Ca:Rs&&(Lr=mo.y+Ca),rn&&Fa&&er-Lr<rn.height){const on=rn.height-(er-Lr);Lr-=.5*on,er+=.5*on}if(rn&&Qa&&fr-Nr<rn.width){const on=rn.width-(fr-Nr);Nr-=.5*on,fr+=.5*on}if(In)if(ol){let on=fr-Nr,Di=er-Lr;Fa?(Di=on/In,Lr=ki.y-.5*Di,er=ki.y+.5*Di):Qa&&(on=Di*In,Nr=ki.x-.5*on,fr=ki.x+.5*on)}else{const on=rt(mo.x+ka-ki.x,mo.y+Ca-ki.y);Fi===ra?(on.x=Math.max(0,on.x),on.y=Math.min(0,on.y)):Fi===oa?(on.x=Math.max(0,on.x),on.y=Math.max(0,on.y)):Fi===aa?(on.x=Math.min(0,on.x),on.y=Math.max(0,on.y)):Fi===na&&(on.x=Math.min(0,on.x),on.y=Math.min(0,on.y));const Di=ps(on),Es=rt(In,1),yr=Dr(ao(Es),Di);Fi===ra?(fr=ki.x+yr.x,Lr=ki.y-yr.y):Fi===oa?(fr=ki.x+yr.x,er=ki.y+yr.y):Fi===aa?(Nr=ki.x-yr.x,er=ki.y+yr.y):Fi===na&&(Nr=ki.x-yr.x,Lr=ki.y-yr.y)}return An(Nr,Lr,fr-Nr,er-Lr)})(Z,De,{aspectRatio:ue,minSize:Si});return{boundsLimited:Yg(Z,De,{...Y,x:0,y:0},{aspectRatio:ue,minSize:Si,maxSize:Ni}),boundsIntent:zi}};let Wn,wn;const li=({translation:A,scalar:Pe})=>{Lt&&(Pe=1,A=Tl(_e(A)));const De=Math.min(St.width/ct.width,St.height/ct.height),Si=Dr(_e(A),1/De);let Ni;if(wn){const zi=On(_e(wn),A);wn=A,Ni=Qo(Ci(ct),zi)}else Ni=Qo(Ci(Wn),Tl(_e(Si))),Pe!==void 0&&Fr(Ni,1/Pe);kt(wi,xt=Ni,xt),kt(Yn,ct=Ni,ct)},W=Ri([Xr,Yn],([A,Pe],De)=>{if(!Pe)return;const[Si,Ni]=A,zi=sr(Pe);De([Qs(Wo(qa(Si,zi),ii)),Qs(Wo(to(Ni,zi),ii))])});E(t,W,A=>i(174,Ft=A));const ne=Ri([hr,Yr,gn,no,Xr,Wr],([A,Pe,De,Si,Ni,zi],Ze)=>{if(!A)return;const xi=Ni[0],Ye=Ni[1];let Fi,fn;Pe?(Fi=((In,rn,xn)=>Ia(xn)?1-1/Math.min(In.height/rn.width,In.width/rn.height):1-1/Math.min(In.width/rn.width,In.height/rn.height))(A,Ye,zi),fn=Math.min(xi.width/De.width,xi.height/De.height)):(Fi=-1,fn=1),Ze([Fi,fn].map(In=>ii(In)))});E(t,ne,A=>i(27,bt=A));const Ii=Ri([hr,Yn,Xr,Wr],([A,Pe,De,Si],Ni)=>{if(!A||!Pe)return Ni(0);let zi;const Ze=De[0],xi=De[1],Ye=Pe.width,Fi=Pe.height,fn=sr(Pe),In=Ia(Si)?Hn(A.height,A.width):A,rn=to(In,fn);if(Ye<=rn.width||Fi<=rn.height){const xn=rn.width-Ze.width,ki=rn.height-Ze.height;zi=xn===0||ki===0?1:1-Math.min((Ye-Ze.width)/xn,(Fi-Ze.height)/ki)}else{const xn=xi.width-rn.width,ki=xi.height-rn.height,gr=to({width:xn,height:ki},fn);zi=-Math.min((Ye-rn.width)/gr.width,(Fi-rn.height)/gr.height)}Ni(zi)});E(t,Ii,A=>i(28,Ge=A));const ri=A=>{const Pe=sr(Wn);let De,Si,Ni;const zi=Ia(Rt)?Hn(oe.height,oe.width):oe,Ze=to(zi,Pe);if(A>=0){const Fi=Ze.width-Gt[0].width,fn=Ze.height-Gt[0].height;De=Ze.width-Fi*A,Si=Ze.height-fn*A,Ni=qa({width:De,height:Si},Pe)}else{const Fi=Gt[1].width-Ze.width,fn=Gt[1].height-Ze.height;De=Ze.width+Fi*-A,Si=Ze.height+fn*-A,Ni=to({width:De,height:Si},Pe)}De=Ni.width,Si=Ni.height;const xi=Wn.x+.5*Wn.width-.5*De,Ye=Wn.y+.5*Wn.height-.5*Si;kt(Yn,ct={x:xi,y:Ye,width:De,height:Si},ct)};let Kt;const we=A=>{const Pe=Fr(Ci(Kt),1/A);kt(wi,xt=Pe,xt),kt(Yn,ct=Pe,ct)};let Ei;const Vi=()=>{ho.set({})};let pn;const en=oi(0,{precision:1e-4});E(t,en,A=>i(29,Me=A));const Oi=oi();E(t,Oi,A=>i(30,ni=A));const Vr=Ri([un,io,tn],([A,Pe,De],Si)=>{if(!n)return;const Ni=$s(De),zi=[...Ni].map(Ze=>Ze[0]).sort((Ze,xi)=>Ln(Ze[0])&&!Ln(xi[0])?1:-1).find(Ze=>{if(Ln(Ze)&&Pe){const[xi,Ye]=Ze,Fi=Pe.width===xi&&Pe.height===Ye,fn=A===Ko(xi,Ye);return Fi&&fn}return Ze===A});if(!zi)return Si(void 0);Si(Ni.map(Ze=>Ze[0]).findIndex(Ze=>Ln(Ze)?Ka(Ze,zi):Ze===zi))});E(t,Vr,A=>i(155,ye=A));const Ho=(A,Pe)=>{if(!n||A===-1||A===void 0)return;const De=$s(Pe)[A][0];return De?Ln(De)?Ko(De[0],De[1]):De:void 0},za=Ri([Mn,_r,so],([A,Pe,De],Si)=>{const{rows:Ni,cols:zi,opacity:Ze}=X($n,De);if(!Pe||Ze<=0)return Si([]);const{x:xi,y:Ye,width:Fi,height:fn}=Pe,In=Fi/zi,rn=fn/Ni,xn=[];for(let ki=1;ki<=Ni-1;ki++){const gr=Ye+rn*ki;xn.push({id:"image-selection-guide-row-"+ki,points:[rt(xi,gr),rt(xi+Fi,gr)],opacity:Ze,strokeWidth:1,strokeColor:A})}for(let ki=1;ki<=zi-1;ki++){const gr=xi+In*ki;xn.push({id:"image-selection-guide-col-"+ki,points:[rt(gr,Ye),rt(gr,Ye+fn)],opacity:Ze,strokeWidth:1,strokeColor:A})}Si(xn)});E(t,za,A=>i(141,dt=A));const jo="crop-"+ia();let $r,Cr=jo+"-"+(fe?fi:"zoom"),Eo=Cr,Sa;const Rn=oi(j?20:0);return E(t,Rn,A=>i(138,J=A)),t.$$set=A=>{"isActive"in A&&ei(i(0,vi=A.isActive)),"stores"in A&&i(97,di=A.stores),"cropImageSelectionCornerStyle"in A&&i(1,Li=A.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in A&&i(98,X=A.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in A&&i(99,jt=A.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in A&&i(100,G=A.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in A&&i(101,Bt=A.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in A&&i(102,fe=A.cropEnableRotationInput),"cropEnableZoom"in A&&i(2,Qt=A.cropEnableZoom),"cropEnableZoomInput"in A&&i(103,se=A.cropEnableZoomInput),"cropEnableZoomAutoHide"in A&&i(104,zt=A.cropEnableZoomAutoHide),"cropEnableImageSelection"in A&&i(105,We=A.cropEnableImageSelection),"cropEnableInfoIndicator"in A&&i(106,Ee=A.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in A&&i(107,je=A.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in A&&i(108,Ke=A.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in A&&i(109,it=A.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in A&&i(110,Xt=A.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in A&&i(111,Nt=A.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in A&&i(112,Zt=A.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in A&&i(113,Yt=A.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in A&&i(114,ot=A.cropSelectPresetOptions),"cropEnableSelectPreset"in A&&i(115,pe=A.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in A&&i(116,ee=A.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in A&&i(95,ge=A.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in A&&i(117,Dt=A.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in A&&i(118,Se=A.cropWillRenderTools),"cropActiveTransformTool"in A&&i(119,fi=A.cropActiveTransformTool),"cropMinimizeToolbar"in A&&i(120,ui=A.cropMinimizeToolbar),"cropInteractionFocus"in A&&i(121,Be=A.cropInteractionFocus),"cropRotationRange"in A&&i(3,yi=A.cropRotationRange),"cropMaskOpacity"in A&&i(122,Mi=A.cropMaskOpacity),"locale"in A&&i(4,xe=A.locale)},t.$$.update=()=>{4096&t.$$.dirty[0]|268435456&t.$$.dirty[3]&&Ui.set(Be==="selection"&&S),2097152&t.$$.dirty[3]&&i(129,n=ot&&Array.isArray(ot)&&ot.length),2097152&t.$$.dirty[3]|32&t.$$.dirty[4]&&tn.set(n?ot:[]),4096&t.$$.dirty[0]&&S&&uo.set(1),4096&t.$$.dirty[0]&&qi.set(!S),4096&t.$$.dirty[0]&&Zr.set(!S),4096&t.$$.dirty[0]&&S&&eo.set(!0),65536&t.$$.dirty[4]&&i(124,h=K.layoutMode==="overlay"),4194304&t.$$.dirty[3]|1&t.$$.dirty[4]&&i(128,M=pe&&!h),83886080&t.$$.dirty[4]&&i(137,l=Y&&St&&Yd(Y,St)),67117056&t.$$.dirty[4]&&i(135,c=!(!St||!l)),67119104&t.$$.dirty[4]&&i(133,d=c&&ta(St,l,A=>ii(A,5))),16400&t.$$.dirty[0]|52297732&t.$$.dirty[3]|1879114288&t.$$.dirty[4]|31&t.$$.dirty[5]&&i(11,r=He&&Se([Xt&&["Button","rotate-left",{label:xe.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:xe.cropIconButtonRotateLeft,onclick:()=>{vn(-Math.PI/2),_n.write()}}],Nt&&["Button","rotate-right",{label:xe.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:xe.cropIconButtonRotateRight,onclick:()=>{vn(Math.PI/2),_n.write()}}],Zt&&["Button","flip-horizontal",{label:xe.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:xe.cropIconButtonFlipHorizontal,onclick:()=>{Ia(Rt)?kt(wo,Ce=!Ce,Ce):kt(vo,Re=!Re,Re),_n.write()}}],Yt&&["Button","flip-vertical",{label:xe.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:xe.cropIconButtonFlipVertical,onclick:()=>{Ia(Rt)?kt(vo,Re=!Re,Re):kt(wo,Ce=!Ce,Ce),_n.write()}}],M&&n&&[ge===!1?"Dropdown":U3,"select-preset",{icon:lr(xe.cropIconSelectPreset,xe,Ho(ye,Vt)),label:lr(xe.cropLabelSelectPreset,xe,Ho(ye,Vt)),labelClass:"PinturaToolbarContentWide",options:Vt,filter:ge,onfilterchange:Xn,selectedIndex:ye,onchange:({value:A})=>{Ln(A)?(kt(un,ue=Ko(A[0],A[1]),ue),kt(io,gi=Xf(A),gi)):kt(un,ue=A,ue),d&&Vi(),_n.write()},optionMapper:A=>{let Pe=!1;const De=Ln(A.value)?A.value[0]/A.value[1]:A.value;if(De){const Si=Cl(oe,Rt,De);Pe=Si.width<Ot.width||Si.height<Ot.height}return A.icon=((Si,Ni={})=>{const{width:zi=24,height:Ze=24,bounds:xi=16,radius:Ye=3}=Ni;let Fi,fn,In,rn,xn=Ln(Si)?Ko(Si[0],Si[1]):Si,ki=!!xn;return xn=ki?xn:1,In=xn>1?xi:xn*xi,rn=In/xn,Fi=Math.round(.5*(zi-In)),fn=Math.round(.5*(Ze-rn)),`<rect fill="${ki?"currentColor":"none"}" stroke="${ki?"none":"currentColor"}" stroke-width="${zi/16}" stroke-dasharray="${[zi/12,zi/6].join(" ")}" x="${Fi}" y="${fn}" width="${In}" height="${rn}" rx="${Ye}"/>`})(A.value,{bounds:14}),{...A,disabled:Pe}}}],Dt&&["Dropdown","select-crop-limit",{icon:lr(xe.cropIconCropBoundary,xe,Ut),label:xe.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:({value:A})=>{kt(Yr,Ut=A,Ut),_n.write()},options:[[!0,xe.cropLabelCropBoundaryEdge,{icon:lr(xe.cropIconCropBoundary,xe,!0)}],[!1,xe.cropLabelCropBoundaryNone,{icon:lr(xe.cropIconCropBoundary,xe,!1)}]]}]].filter(Boolean),K,()=>an.set({})).filter(Boolean)),6144&t.$$.dirty[0]|134217728&t.$$.dirty[3]|65537&t.$$.dirty[4]&&kt(Io,ve=S&&ui!=="never"&&(ui==="always"||K.verticalSpace==="short"||h)?r.map(([A,Pe,De])=>Array.isArray(De)?[A,Pe,De]:[A,Pe,{...De,hideLabel:!0}]):[],ve),536870912&t.$$.dirty[4]&&i(23,o=Ut?0:-1),150994944&t.$$.dirty[4]&&i(130,a=Y&&rt(-(nt.x-Y.x),-(nt.y-Y.y))),524352&t.$$.dirty[4]&&i(131,s=ft&&rt(Ec(ft.x+.5*ft.width+a.x),Ec(ft.y+.5*ft.height+a.y))),33554432&t.$$.dirty[4]&&i(134,u=Z!=null),16785408&t.$$.dirty[4]&&i(136,p=Y&&l&&(l.height===Y.height||l.width===Y.width)),12587008&t.$$.dirty[4]&&i(132,g=!p&&ht<1&&et<1),3840&t.$$.dirty[4]&&i(9,m=c&&!u&&(!d||g)),8192&t.$$.dirty[0]|8192&t.$$.dirty[3]|1&t.$$.dirty[4]&&i(22,y=Ee&&!!ct&&!h),524352&t.$$.dirty[4]&&i(8,w=ft&&a&&{x:ft.x+a.x,y:ft.y+a.y,width:ft.width,height:ft.height}),256&t.$$.dirty[0]|4096&t.$$.dirty[3]|1&t.$$.dirty[4]&&i(21,x=We&&!!w&&!h),65600&t.$$.dirty[3]|2097280&t.$$.dirty[4]&&i(10,k=it&&!!s&&!jt&&!Lt),512&t.$$.dirty[0]|1073741888&t.$$.dirty[3]|1048576&t.$$.dirty[4]&&m&&jt&&!$t&&(clearTimeout(pn),i(123,pn=setTimeout(Vi,jt))),1073741824&t.$$.dirty[3]|1048576&t.$$.dirty[4]&&$t&&clearTimeout(pn),1536&t.$$.dirty[0]|32768&t.$$.dirty[4]&&en.set(k&&m?1:0,{hard:j===!1}),32896&t.$$.dirty[4]&&Oi.set(s,{hard:j===!1}),4096&t.$$.dirty[0]|262144&t.$$.dirty[4]&&(S&&!lt?(kt(co,N.crop={maskOpacity:Mi,maskMarkupOpacity:Mi},N),co.set(N)):(delete N.crop,co.set(N))),131072&t.$$.dirty[4]&&dt&&mr.update(A=>{const Pe=A.filter(De=>!/^image\-selection\-guide/.test(De.id));return S?[...Pe,...dt]:Pe}),65536&t.$$.dirty[4]&&i(127,C=K.verticalSpace!=="short"),134217728&t.$$.dirty[3]|9&t.$$.dirty[4]&&i(20,R=ui==="never"&&!h||C&&ui!=="always"),4&t.$$.dirty[0]|1024&t.$$.dirty[3]&&i(126,O=Qt&&se),2048&t.$$.dirty[3]|12&t.$$.dirty[4]&&i(125,T=zt?C&&O:O),512&t.$$.dirty[3]|2&t.$$.dirty[4]&&i(19,z=fe||T),2&t.$$.dirty[4]&&(T||i(5,Eo=Cr)),32&t.$$.dirty[0]&&i(18,F={name:jo,selected:Eo}),16&t.$$.dirty[0]|512&t.$$.dirty[3]|2&t.$$.dirty[4]&&i(7,B=[fe&&{id:jo+"-rotation",label:xe.cropLabelTabRotation},T&&{id:jo+"-zoom",label:xe.cropLabelTabZoom}].filter(Boolean)),128&t.$$.dirty[0]&&i(17,f=B.map(A=>A.id)),64&t.$$.dirty[0]|1&t.$$.dirty[4]&&$r&&!$r.children.length&&h&&$r.dispatchEvent(new CustomEvent("measure",{detail:$r.rect})),4096&t.$$.dirty[0]|32768&t.$$.dirty[4]&&j&&Rn.set(S?0:20),16384&t.$$.dirty[4]&&i(16,V=J?`transform: translateY(${J}px)`:void 0)},[vi,Li,Qt,yi,xe,Eo,$r,B,w,m,k,r,S,ct,Rt,Sa,V,f,F,z,R,x,y,o,wt,bi,vt,bt,Ge,Me,ni,he,Ie,an,Ui,yn,mn,tn,Vn,Pi,Dn,yo,lo,wr,xo,bo,Io,co,vo,wo,Wr,Sr,io,dn,tr,So,_r,wi,Pn,Yn,gn,no,Xr,un,Yr,hr,po,Gn,()=>{$n="select",kt(Pi,$t=!0,$t),kt(tr,Z=Ci(St),Z),kr=Lt?ro:qr},({detail:A})=>{const{boundsLimited:Pe,boundsIntent:De}=kr(A.direction,A.translation);kt(Dn,mt=!0,mt),kt(So,_=De,_),kt(dn,St=Pe,St)},({detail:A})=>{const{boundsLimited:Pe}=kr(A.direction,A.translation);kt(Dn,mt=!1,mt),kt(Pi,$t=!1,$t),kt(So,_=void 0,_),ps(A.translation)&&(kt(dn,St=Pe,St),_n.write()),kt(tr,Z=void 0,Z),$n=void 0},()=>{$n="rotate",kt(Pi,$t=!0,$t),kt(Pn,de=Ci(ct),de)},A=>{kt(Dn,mt=!0,mt),kt(Wr,Rt=A,Rt)},A=>{kt(Dn,mt=!1,mt),kt(Pi,$t=!1,$t),kt(Wr,Rt=A,Rt),_n.write(),kt(Pn,de=void 0,de)},()=>{$n="pan",wn=void 0,kt(Pi,$t=!0,$t),Wn=Ci(ct)},({detail:A})=>{kt(Dn,mt=!0,mt),li(A)},({detail:A})=>{kt(Dn,mt=!1,mt),kt(Pi,$t=!1,$t),(ps(A.translation)>0||A.scalar!==0)&&(li(A),_n.write()),kt(wi,xt=void 0,xt),Wn=void 0},({detail:{translation:A}})=>{Lt&&(A=Tl(_e(A))),wn=A,kt(Pi,$t=!1,$t)},W,ne,Ii,()=>{$n="zoom",kt(Pi,$t=!0,$t),Wn=Ci(ct)},A=>{kt(Dn,mt=!1,mt),ri(A)},A=>{ri(A),_n.write(),kt(Dn,mt=!1,mt),kt(Pi,$t=!1,$t),Wn=void 0},()=>{$n="zoom",Wn||(Kt=Ci(ct),kt(Pi,$t=!0,$t))},({detail:A})=>{Kt&&(kt(Dn,mt=!0,mt),we(A))},({detail:A})=>{Kt&&(kt(Dn,mt=!1,mt),kt(Pi,$t=!1,$t),we(A),kt(wi,xt=void 0,xt),Kt=void 0,_n.write())},A=>{const Pe=qp(A,wt,nt);if(Ke&&!ru(St,Pe))return;$n="zoom",kt(Pi,$t=!0,$t),kt(Dn,mt=!0,mt),A.preventDefault(),A.stopPropagation();const De=Cu(A,{fixScrollDirection:U}),Si=1+De/100,Ni=Ci(ct),zi=Math.min(ct.width/Ot.width,ct.height/Ot.height)===1;if(G&&Ut){const Ye=vr(ct,oe,Rt);if(Yi()&&Ye&&De>0&&d){kt(Pi,$t=!1,$t),kt(Dn,mt=!1,mt);const Fi=Ia(Rt)?Ur({height:oe.width,width:oe.height}):Ur(oe);return ta(Ni,Fi)||(clearTimeout(Ei),ta(_n.state.crop,Fi))?void 0:(kt(Yn,ct=Fi,ct),void _n.write())}}let Ze=Ti(ct);if(je&&Be!=="selection"&&De<0&&!zi){const Ye=On(_e(Pe),St),Fi=Math.min(St.width/ct.width,St.height/ct.height),fn=Fr(Ci(St),1.1);Ze=ru(fn,Pe)?Bn(Ci(ct),Dr(Ye,1/Fi)):Ze}let xi=Fr(Ci(ct),Si,Ze);if(nu(Ft[1],xi)||(xi=cm(Ti(xi),Ft[1])),nu(xi,Ft[0])||(xi=cm(Ti(xi),Ft[0])),ta(Ni,xi,ii))return kt(Pi,$t=!1,$t),void kt(Dn,mt=!1,mt);kt(Yn,ct=Wo(xi,Ye=>ii(Ye,5)),ct),kt(Pi,$t=!1,$t),kt(Dn,mt=!1,mt),clearTimeout(Ei),Ei=setTimeout(()=>{_n.write()},500)},Vi,en,Oi,Vr,za,jo,Rn,ge,"crop",di,X,jt,G,Bt,fe,se,zt,We,Ee,je,Ke,it,Xt,Nt,Zt,Yt,ot,pe,ee,Dt,Se,fi,ui,Be,Mi,pn,h,T,O,C,M,n,a,s,g,d,u,c,p,l,J,j,K,dt,lt,ft,$t,Lt,et,ht,Y,Z,St,nt,oe,Ut,Ot,ye,Vt,Ce,Re,He,function(A){Gr.call(this,t,A)},({detail:A})=>i(5,Eo=A),function(A){Ai[A?"unshift":"push"](()=>{$r=A,i(6,$r)})},A=>Hh(A),function(A){Sa=A,i(15,Sa)},function(A){Gr.call(this,t,A)}]}var oS={util:["crop",class extends si{constructor(t){super(),ai(this,t,rS,eS,ti,{name:96,isActive:0,stores:97,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:98,cropAutoCenterImageSelectionTimeout:99,cropEnableZoomMatchImageAspectRatio:100,cropEnableRotateMatchImageAspectRatio:101,cropEnableRotationInput:102,cropEnableZoom:2,cropEnableZoomInput:103,cropEnableZoomAutoHide:104,cropEnableImageSelection:105,cropEnableInfoIndicator:106,cropEnableZoomTowardsWheelPosition:107,cropEnableLimitWheelInputToCropSelection:108,cropEnableCenterImageSelection:109,cropEnableButtonRotateLeft:110,cropEnableButtonRotateRight:111,cropEnableButtonFlipHorizontal:112,cropEnableButtonFlipVertical:113,cropSelectPresetOptions:114,cropEnableSelectPreset:115,cropEnableFilterMatchAspectRatio:116,cropSelectPresetFilter:95,cropEnableButtonToggleCropLimit:117,cropWillRenderTools:118,cropActiveTransformTool:119,cropMinimizeToolbar:120,cropInteractionFocus:121,cropRotationRange:3,cropMaskOpacity:122,locale:4},null,[-1,-1,-1,-1,-1,-1,-1,-1])}get name(){return this.$$.ctx[96]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),I()}get stores(){return this.$$.ctx[97]}set stores(t){this.$$set({stores:t}),I()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(t){this.$$set({cropImageSelectionCornerStyle:t}),I()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[98]}set cropWillRenderImageSelectionGuides(t){this.$$set({cropWillRenderImageSelectionGuides:t}),I()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[99]}set cropAutoCenterImageSelectionTimeout(t){this.$$set({cropAutoCenterImageSelectionTimeout:t}),I()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[100]}set cropEnableZoomMatchImageAspectRatio(t){this.$$set({cropEnableZoomMatchImageAspectRatio:t}),I()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[101]}set cropEnableRotateMatchImageAspectRatio(t){this.$$set({cropEnableRotateMatchImageAspectRatio:t}),I()}get cropEnableRotationInput(){return this.$$.ctx[102]}set cropEnableRotationInput(t){this.$$set({cropEnableRotationInput:t}),I()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(t){this.$$set({cropEnableZoom:t}),I()}get cropEnableZoomInput(){return this.$$.ctx[103]}set cropEnableZoomInput(t){this.$$set({cropEnableZoomInput:t}),I()}get cropEnableZoomAutoHide(){return this.$$.ctx[104]}set cropEnableZoomAutoHide(t){this.$$set({cropEnableZoomAutoHide:t}),I()}get cropEnableImageSelection(){return this.$$.ctx[105]}set cropEnableImageSelection(t){this.$$set({cropEnableImageSelection:t}),I()}get cropEnableInfoIndicator(){return this.$$.ctx[106]}set cropEnableInfoIndicator(t){this.$$set({cropEnableInfoIndicator:t}),I()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[107]}set cropEnableZoomTowardsWheelPosition(t){this.$$set({cropEnableZoomTowardsWheelPosition:t}),I()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[108]}set cropEnableLimitWheelInputToCropSelection(t){this.$$set({cropEnableLimitWheelInputToCropSelection:t}),I()}get cropEnableCenterImageSelection(){return this.$$.ctx[109]}set cropEnableCenterImageSelection(t){this.$$set({cropEnableCenterImageSelection:t}),I()}get cropEnableButtonRotateLeft(){return this.$$.ctx[110]}set cropEnableButtonRotateLeft(t){this.$$set({cropEnableButtonRotateLeft:t}),I()}get cropEnableButtonRotateRight(){return this.$$.ctx[111]}set cropEnableButtonRotateRight(t){this.$$set({cropEnableButtonRotateRight:t}),I()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[112]}set cropEnableButtonFlipHorizontal(t){this.$$set({cropEnableButtonFlipHorizontal:t}),I()}get cropEnableButtonFlipVertical(){return this.$$.ctx[113]}set cropEnableButtonFlipVertical(t){this.$$set({cropEnableButtonFlipVertical:t}),I()}get cropSelectPresetOptions(){return this.$$.ctx[114]}set cropSelectPresetOptions(t){this.$$set({cropSelectPresetOptions:t}),I()}get cropEnableSelectPreset(){return this.$$.ctx[115]}set cropEnableSelectPreset(t){this.$$set({cropEnableSelectPreset:t}),I()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[116]}set cropEnableFilterMatchAspectRatio(t){this.$$set({cropEnableFilterMatchAspectRatio:t}),I()}get cropSelectPresetFilter(){return this.$$.ctx[95]}set cropSelectPresetFilter(t){this.$$set({cropSelectPresetFilter:t}),I()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[117]}set cropEnableButtonToggleCropLimit(t){this.$$set({cropEnableButtonToggleCropLimit:t}),I()}get cropWillRenderTools(){return this.$$.ctx[118]}set cropWillRenderTools(t){this.$$set({cropWillRenderTools:t}),I()}get cropActiveTransformTool(){return this.$$.ctx[119]}set cropActiveTransformTool(t){this.$$set({cropActiveTransformTool:t}),I()}get cropMinimizeToolbar(){return this.$$.ctx[120]}set cropMinimizeToolbar(t){this.$$set({cropMinimizeToolbar:t}),I()}get cropInteractionFocus(){return this.$$.ctx[121]}set cropInteractionFocus(t){this.$$set({cropInteractionFocus:t}),I()}get cropRotationRange(){return this.$$.ctx[3]}set cropRotationRange(t){this.$$set({cropRotationRange:t}),I()}get cropMaskOpacity(){return this.$$.ctx[122]}set cropMaskOpacity(t){this.$$set({cropMaskOpacity:t}),I()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),I()}}]};function aS(t){let e,i,n,r,o,a,s,l=t[77],c=(Qi(t[77].label)?t[77].label(t[2]):t[77].label)+"";function d(...h){return t[51](t[77],...h)}const u=()=>t[52](i,l),p=()=>t[52](null,l);return{c(){e=pt("div"),i=pt("div"),n=ce(),r=pt("span"),o=cn(c),v(i,"class",N2),v(e,"slot","option"),v(e,"class","PinturaFilterOption")},m(h,g){tt(h,e,g),Tt(e,i),u(),Tt(e,n),Tt(e,r),Tt(r,o),a||(s=[Mt(i,"measure",d),ji(Er.call(null,i))],a=!0)},p(h,g){l!==(t=h)[77]&&(p(),l=t[77],u()),4&g[0]|32768&g[2]&&c!==(c=(Qi(t[77].label)?t[77].label(t[2]):t[77].label)+"")&&zn(o,c)},d(h){h&&Q(e),p(),a=!1,_i(s)}}}function sS(t){let e,i;return e=new Ja({props:{locale:t[2],layout:"row",options:t[3],selectedIndex:t[12],onchange:t[32],$$slots:{option:[aS,({option:n})=>({77:n}),({option:n})=>[0,0,n?32768:0]]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};4&r[0]&&(o.locale=n[2]),8&r[0]&&(o.options=n[3]),4096&r[0]&&(o.selectedIndex=n[12]),1028&r[0]|98304&r[2]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function lS(t){let e,i,n,r,o,a,s,l;function c(h){t[54](h)}function d(h){t[55](h)}function u(h){t[56](h)}let p={elasticity:t[13]*t[19],onscroll:t[53],$$slots:{default:[sS]},$$scope:{ctx:t}};return t[4]!==void 0&&(p.maskFeatherStartOpacity=t[4]),t[5]!==void 0&&(p.maskFeatherEndOpacity=t[5]),t[6]!==void 0&&(p.maskFeatherSize=t[6]),i=new wa({props:p}),Ai.push(()=>go(i,"maskFeatherStartOpacity",c)),Ai.push(()=>go(i,"maskFeatherEndOpacity",d)),Ai.push(()=>go(i,"maskFeatherSize",u)),i.$on("measure",t[57]),{c(){e=pt("div"),At(i.$$.fragment),v(e,"slot","footer"),v(e,"style",t[11])},m(h,g){tt(h,e,g),It(i,e,null),a=!0,s||(l=[Mt(e,"transitionend",t[30]),Mt(e,"measure",t[58]),ji(Er.call(null,e,{observePosition:!0}))],s=!0)},p(h,g){const m={};8192&g[0]&&(m.elasticity=h[13]*h[19]),128&g[0]&&(m.onscroll=h[53]),5132&g[0]|65536&g[2]&&(m.$$scope={dirty:g,ctx:h}),!n&&16&g[0]&&(n=!0,m.maskFeatherStartOpacity=h[4],Po(()=>n=!1)),!r&&32&g[0]&&(r=!0,m.maskFeatherEndOpacity=h[5],Po(()=>r=!1)),!o&&64&g[0]&&(o=!0,m.maskFeatherSize=h[6],Po(()=>o=!1)),i.$set(m),(!a||2048&g[0])&&v(e,"style",h[11])},i(h){a||(P(i.$$.fragment,h),a=!0)},o(h){D(i.$$.fragment,h),a=!1},d(h){h&&Q(e),Et(i),s=!1,_i(l)}}}function cS(t){let e,i;return e=new rl({props:{$$slots:{footer:[lS]},$$scope:{ctx:t}}}),e.$on("measure",t[59]),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};16380&r[0]|65536&r[2]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}let N2="PinturaFilterPreview";function dS(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,y,x,k,w,C,M,R,O=Je,T=()=>(O(),O=jr(f,vt=>i(43,d=vt)),f),z=Je,F=()=>(z(),z=jr(B,vt=>i(49,w=vt)),B);t.$$.on_destroy.push(()=>O()),t.$$.on_destroy.push(()=>z());let{isActive:B}=e;F();let{isActiveFraction:f}=e;T();let{stores:V}=e,{locale:J}=e,{filterFunctions:S}=e,{filterOptions:j}=e;const K=ln("elasticityMultiplier");E(t,K,vt=>i(13,R=vt));const{history:dt,interfaceImages:lt,stageRectBase:N,utilRect:ft,animation:$t,scrollElasticity:Lt,imageSize:ct,imagePreview:et,imageCropRect:ht,imageRotation:Y,imageFlipX:Z,imageFlipY:St,imageBackgroundColor:nt,imageGamma:mt,imageColorMatrix:Ft,allowPan:oe,allowZoom:Rt,allowZoomControls:Ut,allowPlayPause:Ot}=V;E(t,lt,vt=>i(60,u=vt)),E(t,N,vt=>i(48,k=vt)),E(t,ft,vt=>i(47,x=vt)),E(t,$t,vt=>i(50,C=vt)),E(t,ct,vt=>i(62,h=vt)),E(t,et,vt=>i(42,c=vt)),E(t,nt,vt=>i(61,p=vt)),E(t,mt,vt=>i(44,g=vt)),E(t,Ft,vt=>i(40,s=vt));const U=le({});E(t,U,vt=>i(46,y=vt));const wt=(vt,bt)=>kt(U,y[vt.value]=bt,y),xt=Ri(U,vt=>{if(!vt[void 0])return;const bt=vt[void 0];return M&&Mc(M,bt)?M:oo(bt)});E(t,xt,vt=>i(63,M=vt));const Gt=Ri([B,xt,ht,ct,Y,Z,St],([vt,bt,Ge,Me,ni,Ue,ei],vi)=>{if(!vt||!bt||!Me)return m;const di=Ur(Me),Li=Ti(di),X=Ih(Me,Ge,ni),jt=Ti(X),G=On(_e(Li),jt),Bt=Tl(_e(G)),fe=Math.max(bt.width/Ge.width,bt.height/Ge.height);vi({origin:Bt,translation:G,rotation:{x:ei?Math.PI:0,y:Ue?Math.PI:0,z:ni},scale:fe})});E(t,Gt,vt=>i(45,m=vt));const de=oi(C?20:0);let ue;E(t,de,vt=>i(39,a=vt));const be={};let $e,_,ve,gi,ye,Vt,Ce={x:0,y:0};const Re=le([]);E(t,Re,vt=>i(41,l=vt));const He=vt=>{const bt={...vt,data:c,size:h,offset:{...vt.offset},mask:{...vt.mask},backgroundColor:p};return bt.opacity=d,bt.offset.y+=a,bt.mask.y+=a,bt.id="filter",bt},bi=()=>u.filter(vt=>vt.id!=="filter");return No(()=>{lt.set([])}),t.$$set=vt=>{"isActive"in vt&&F(i(0,B=vt.isActive)),"isActiveFraction"in vt&&T(i(1,f=vt.isActiveFraction)),"stores"in vt&&i(34,V=vt.stores),"locale"in vt&&i(2,J=vt.locale),"filterFunctions"in vt&&i(35,S=vt.filterFunctions),"filterOptions"in vt&&i(3,j=vt.filterOptions)},t.$$.update=()=>{if(262144&t.$$.dirty[1]&&oe.set(w),262144&t.$$.dirty[1]&&Rt.set(w),262144&t.$$.dirty[1]&&Ut.set(w),262144&t.$$.dirty[1]&&w&&Ot.set(!1),8&t.$$.dirty[0]&&i(38,n=$s(j)),640&t.$$.dirty[1]&&i(12,r=((vt,bt)=>{if(!vt||!vt.filter||!bt)return 0;const Ge=vt.filter;return bt.findIndex(([Me])=>{if(!S[Me])return!1;const ni=S[Me]();return Ka(ni,Ge)})})(s,n)),786432&t.$$.dirty[1]&&C&&de.set(w?0:20),512&t.$$.dirty[0]|458752&t.$$.dirty[1]&&w&&x&&k&&Vt&&i(37,ye={x:k.x-x.x,y:k.y-x.y+Vt.y}),496&t.$$.dirty[0]|58096&t.$$.dirty[1]&&m&&ye&&Ce&&gi&&ue){const vt=ye.x+gi.x+Ce.x,bt=ye.y,Ge=gi.x+ye.x,Me=Ge+gi.width;Re.set(n.map(([ni],Ue)=>{const ei=y[ni],vi=Ce.x+ei.x,di=vi+ei.width;if(di<0||vi>gi.width)return!1;const Li=vt+ei.x,X=bt+ei.y,jt=(Bt=>({origin:_e(Bt.origin),translation:_e(Bt.translation),rotation:{...Bt.rotation},scale:Bt.scale}))(m);jt.offset=rt(.5*ei.width+Li,.5*ei.height+X),jt.maskOpacity=1,jt.mask=An(Li+0,X,ei.width+0,ei.height),jt.maskFeather=[1,0,1,0,1,Me,1,Me],vi<ve&&$e<1&&(jt.maskFeather[0]=$e,jt.maskFeather[1]=Ge,jt.maskFeather[2]=1,jt.maskFeather[3]=Ge+ve),di>gi.width-ve&&_<1&&(jt.maskFeather[4]=_,jt.maskFeather[5]=Me-ve,jt.maskFeather[6]=1,jt.maskFeather[7]=Me),jt.maskCornerRadius=ue[ni];let G=s&&Object.keys(s).filter(Bt=>Bt!="filter").map(Bt=>s[Bt])||[];return Qi(S[ni])&&G.push(S[ni]()),jt.colorMatrix=G.length?Th(G):void 0,jt.gamma=g,jt}).filter(Boolean))}if(7424&t.$$.dirty[1])if(d>0&&l){const vt=[...bi(),...l.map(He)];lt.set(vt)}else lt.set(bi());256&t.$$.dirty[1]&&i(11,o=a?`transform: translateY(${a}px)`:void 0)},[B,f,J,j,$e,_,ve,Ce,gi,Vt,be,o,r,R,K,lt,N,ft,$t,Lt,ct,et,nt,mt,Ft,U,wt,xt,Gt,de,vt=>{vt.target.className===N2&&i(36,ue=Object.keys(be).reduce((bt,Ge)=>{const Me=be[Ge],ni=getComputedStyle(Me),Ue=["top-left","top-right","bottom-left","bottom-right"].map(ei=>ni.getPropertyValue(`border-${ei}-radius`)).map(h2).map(ei=>1.25*ei);return bt[Ge]=Ue,bt},{}))},Re,({value:vt})=>{kt(Ft,s={...s,filter:Qi(S[vt])?S[vt]():void 0},s),dt.write()},"filter",V,S,ue,ye,n,a,s,l,c,d,g,m,y,x,k,w,C,(vt,bt)=>wt(vt,bt.detail),function(vt,bt){Ai[vt?"unshift":"push"](()=>{be[bt.value]=vt,i(10,be)})},vt=>i(7,Ce=vt),function(vt){$e=vt,i(4,$e)},function(vt){_=vt,i(5,_)},function(vt){ve=vt,i(6,ve)},vt=>i(8,gi=vt.detail),vt=>i(9,Vt=vt.detail),function(vt){Gr.call(this,t,vt)}]}var uS={util:["filter",class extends si{constructor(t){super(),ai(this,t,dS,cS,ti,{name:33,isActive:0,isActiveFraction:1,stores:34,locale:2,filterFunctions:35,filterOptions:3},null,[-1,-1,-1])}get name(){return this.$$.ctx[33]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),I()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),I()}get stores(){return this.$$.ctx[34]}set stores(t){this.$$set({stores:t}),I()}get locale(){return this.$$.ctx[2]}set locale(t){this.$$set({locale:t}),I()}get filterFunctions(){return this.$$.ctx[35]}set filterFunctions(t){this.$$set({filterFunctions:t}),I()}get filterOptions(){return this.$$.ctx[3]}set filterOptions(t){this.$$set({filterOptions:t}),I()}}]};function pS(t){let e,i,n=t[43].label+"";return{c(){e=pt("span"),i=cn(n)},m(r,o){tt(r,e,o),Tt(e,i)},p(r,o){4096&o[1]&&n!==(n=r[43].label+"")&&zn(i,n)},d(r){r&&Q(e)}}}function hS(t){let e,i;const n=[{class:"PinturaControlList"},{tabs:t[1]},t[5]];let r={$$slots:{default:[pS,({tab:o})=>({43:o}),({tab:o})=>[0,o?4096:0]]},$$scope:{ctx:t}};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new Su({props:r}),e.$on("select",t[24]),{c(){At(e.$$.fragment)},m(o,a){It(e,o,a),i=!0},p(o,a){const s=34&a[0]?Ir(n,[n[0],2&a[0]&&{tabs:o[1]},32&a[0]&&Or(o[5])]):{};12288&a[1]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),i=!1},d(o){Et(e,o)}}}function mS(t){let e,i;const n=[t[7][t[42]]];let r={};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new jh({props:r}),{c(){At(e.$$.fragment)},m(o,a){It(e,o,a),i=!0},p(o,a){const s=128&a[0]|2048&a[1]?Ir(n,[Or(o[7][o[42]])]):{};e.$set(s)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),i=!1},d(o){Et(e,o)}}}function $S(t){let e,i,n,r,o;i=new wa({props:{elasticity:t[6]*t[9],class:"PinturaControlListScroller",$$slots:{default:[hS]},$$scope:{ctx:t}}});const a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[4]},t[5]];let s={$$slots:{default:[mS,({panel:l})=>({42:l}),({panel:l})=>[0,l?2048:0]]},$$scope:{ctx:t}};for(let l=0;l<a.length;l+=1)s=Cn(s,a[l]);return r=new ku({props:s}),{c(){e=pt("div"),At(i.$$.fragment),n=ce(),At(r.$$.fragment),v(e,"slot","footer"),v(e,"style",t[3])},m(l,c){tt(l,e,c),It(i,e,null),Tt(e,n),It(r,e,null),o=!0},p(l,c){const d={};64&c[0]&&(d.elasticity=l[6]*l[9]),38&c[0]|8192&c[1]&&(d.$$scope={dirty:c,ctx:l}),i.$set(d);const u=48&c[0]?Ir(a,[a[0],a[1],16&c[0]&&{panels:l[4]},32&c[0]&&Or(l[5])]):{};128&c[0]|10240&c[1]&&(u.$$scope={dirty:c,ctx:l}),r.$set(u),(!o||8&c[0])&&v(e,"style",l[3])},i(l){o||(P(i.$$.fragment,l),P(r.$$.fragment,l),o=!0)},o(l){D(i.$$.fragment,l),D(r.$$.fragment,l),o=!1},d(l){l&&Q(e),Et(i),Et(r)}}}function gS(t){let e,i;return e=new rl({props:{$$slots:{footer:[$S]},$$scope:{ctx:t}}}),e.$on("measure",t[25]),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};254&r[0]|8192&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function fS(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g=Je,m=()=>(g(),g=jr(x,ht=>i(21,c=ht)),x);t.$$.on_destroy.push(()=>g());let{stores:y}=e,{isActive:x}=e;m();let{locale:k={}}=e,{finetuneControlConfiguration:w}=e,{finetuneOptions:C}=e,{finetuneNudgePrecision:M}=e;const{history:R,animation:O,scrollElasticity:T,rangeInputElasticity:z,imageColorMatrix:F,imageConvolutionMatrix:B,imageGamma:f,imageVignette:V,imageNoise:J,allowPan:S,allowZoom:j,allowZoomControls:K,allowPlayPause:dt}=y;E(t,O,ht=>i(22,d=ht));const lt={imageColorMatrix:F,imageConvolutionMatrix:B,imageGamma:f,imageVignette:V,imageNoise:J},N=ln("elasticityMultiplier");E(t,N,ht=>i(6,p=ht));const ft="finetune-"+ia(),$t=le({});E(t,$t,ht=>i(23,u=ht));const Lt=le({});E(t,Lt,ht=>i(7,h=ht));let ct=[];const et=oi(d?20:0);return E(t,et,ht=>i(20,l=ht)),t.$$set=ht=>{"stores"in ht&&i(15,y=ht.stores),"isActive"in ht&&m(i(0,x=ht.isActive)),"locale"in ht&&i(16,k=ht.locale),"finetuneControlConfiguration"in ht&&i(17,w=ht.finetuneControlConfiguration),"finetuneOptions"in ht&&i(18,C=ht.finetuneOptions),"finetuneNudgePrecision"in ht&&i(19,M=ht.finetuneNudgePrecision)},t.$$.update=()=>{var ht;2097152&t.$$.dirty[0]&&S.set(c),2097152&t.$$.dirty[0]&&j.set(c),2097152&t.$$.dirty[0]&&K.set(c),2097152&t.$$.dirty[0]&&c&&dt.set(!0),327680&t.$$.dirty[0]&&i(1,n=C?C.map(([Y,Z])=>({id:Y,label:Qi(Z)?Z(k):Z})):[]),2&t.$$.dirty[0]&&i(2,r=n.length&&n[0].id),4&t.$$.dirty[0]&&i(5,o={name:ft,selected:r}),2&t.$$.dirty[0]&&i(4,a=n.map(Y=>Y.id)),131072&t.$$.dirty[0]&&w&&(ht=w,ct&&ct.forEach(Y=>Y()),ct=a.map(Y=>{const{getStore:Z,getValue:St=Zi}=ht[Y];return Z(lt).subscribe(nt=>{const mt=nt!=null?St(nt):nt;kt($t,u={...u,[Y]:mt},u)})})),8519680&t.$$.dirty[0]&&w&&u&&kt(Lt,h=Object.keys(u).reduce((Y,Z)=>{const{base:St,min:nt,max:mt,getLabel:Ft,getStore:oe,setValue:Rt=(U,wt)=>U.set(wt)}=w[Z],Ut=oe(lt),Ot=u[Z]!=null?u[Z]:St;return Y[Z]={base:St,min:nt,max:mt,value:Ot,valueLabel:Ft?Ft(Ot,nt,mt,mt-nt):Math.round(100*Ot),oninputmove:U=>{Rt(Ut,U)},oninputend:U=>{Rt(Ut,U),R.write()},elasticity:p*z,labelReset:k.labelReset,nudgeMultiplier:M},Y},{}),h),6291456&t.$$.dirty[0]&&d&&et.set(c?0:20),1048576&t.$$.dirty[0]&&i(3,s=l?`transform: translateY(${l}px)`:void 0)},[x,n,r,s,a,o,p,h,O,T,N,$t,Lt,et,"finetune",y,k,w,C,M,l,c,d,u,({detail:ht})=>i(2,r=ht),function(ht){Gr.call(this,t,ht)}]}var yS={util:["finetune",class extends si{constructor(t){super(),ai(this,t,fS,gS,ti,{name:14,stores:15,isActive:0,locale:16,finetuneControlConfiguration:17,finetuneOptions:18,finetuneNudgePrecision:19},null,[-1,-1])}get name(){return this.$$.ctx[14]}get stores(){return this.$$.ctx[15]}set stores(t){this.$$set({stores:t}),I()}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),I()}get locale(){return this.$$.ctx[16]}set locale(t){this.$$set({locale:t}),I()}get finetuneControlConfiguration(){return this.$$.ctx[17]}set finetuneControlConfiguration(t){this.$$set({finetuneControlConfiguration:t}),I()}get finetuneOptions(){return this.$$.ctx[18]}set finetuneOptions(t){this.$$set({finetuneOptions:t}),I()}get finetuneNudgePrecision(){return this.$$.ctx[19]}set finetuneNudgePrecision(t){this.$$set({finetuneNudgePrecision:t}),I()}}]},mu=(t,e)=>{const i=e.length;return t<0?t%i+i:t>=i?t%i:t};function af(t,e,i){const n=t.slice();return n[45]=e[i].key,n[46]=e[i].index,n[47]=e[i].translate,n[48]=e[i].scale,n[12]=e[i].rotate,n[49]=e[i].dir,n[50]=e[i].center,n[51]=e[i].type,n[2]=e[i].visible,n}function sf(t){let e,i;return{c(){e=pt("div"),v(e,"class","PinturaShapeManipulator"),v(e,"data-control","point"),v(e,"style",i=`pointer-events:none;transform: translate3d(${t[50].x}px, ${t[50].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[4]}`)},m(n,r){tt(n,e,r)},p(n,r){56&r[0]&&i!==(i=`pointer-events:none;transform: translate3d(${n[50].x}px, ${n[50].y}px, 0) scale(${n[5]}, ${n[5]}); opacity: ${n[4]}`)&&v(e,"style",i)},d(n){n&&Q(e)}}}function lf(t,e){let i,n,r,o,a,s,l,c,d;function u(...h){return e[17](e[46],...h)}let p=e[51]==="edge"&&e[2]&&sf(e);return{key:t,first:null,c(){i=pt("div"),s=ce(),p&&p.c(),l=Tn(),v(i,"role","button"),v(i,"aria-label",n=`Drag ${e[51]} ${e[45]}`),v(i,"tabindex",r=e[51]==="edge"?-1:0),v(i,"class","PinturaShapeManipulator"),v(i,"data-control",o=e[51]),v(i,"style",a=`cursor:${e[49]?e[49]+"-resize":"move"};opacity:${e[4]};--tx:${e[47].x};--ty:${e[47].y};--r:${e[51]==="edge"?e[12]:0}rad;--sx:${e[51]==="point"?e[5]:e[48].x};--sy:${e[51]==="point"?e[5]:e[48].y};`),this.first=i},m(h,g){tt(h,i,g),tt(h,s,g),p&&p.m(h,g),tt(h,l,g),c||(d=[Mt(i,"nudge",u),ji(Ts.call(null,i,{preventDefault:!0})),Mt(i,"interactionstart",function(){Hi(e[9]("start",e[46]))&&e[9]("start",e[46]).apply(this,arguments)}),Mt(i,"interactionupdate",function(){Hi(e[9]("move",e[46]))&&e[9]("move",e[46]).apply(this,arguments)}),Mt(i,"interactionend",function(){Hi(e[9]("end",e[46]))&&e[9]("end",e[46]).apply(this,arguments)}),ji(Cs.call(null,i,{observeKeys:!0}))],c=!0)},p(h,g){e=h,8&g[0]&&n!==(n=`Drag ${e[51]} ${e[45]}`)&&v(i,"aria-label",n),8&g[0]&&r!==(r=e[51]==="edge"?-1:0)&&v(i,"tabindex",r),8&g[0]&&o!==(o=e[51])&&v(i,"data-control",o),56&g[0]&&a!==(a=`cursor:${e[49]?e[49]+"-resize":"move"};opacity:${e[4]};--tx:${e[47].x};--ty:${e[47].y};--r:${e[51]==="edge"?e[12]:0}rad;--sx:${e[51]==="point"?e[5]:e[48].x};--sy:${e[51]==="point"?e[5]:e[48].y};`)&&v(i,"style",a),e[51]==="edge"&&e[2]?p?p.p(e,g):(p=sf(e),p.c(),p.m(l.parentNode,l)):p&&(p.d(1),p=null)},d(h){h&&Q(i),h&&Q(s),p&&p.d(h),h&&Q(l),c=!1,_i(d)}}}function cf(t){let e,i,n,r;return{c(){e=pt("div"),v(e,"role","button"),v(e,"aria-label","Drag rotator"),v(e,"tabindex","0"),v(e,"class","PinturaShapeManipulator"),v(e,"data-control","rotate"),v(e,"style",i=`transform: translate3d(${t[0].x}px, ${t[0].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[4]}`)},m(o,a){tt(o,e,a),n||(r=[Mt(e,"nudge",t[11]),ji(Ts.call(null,e,{preventDefault:!0})),Mt(e,"interactionstart",t[12]("start")),Mt(e,"interactionupdate",t[12]("move")),Mt(e,"interactionend",t[12]("end")),ji(Cs.call(null,e,{observeKeys:!0}))],n=!0)},p(o,a){49&a[0]&&i!==(i=`transform: translate3d(${o[0].x}px, ${o[0].y}px, 0) scale(${o[5]}, ${o[5]}); opacity: ${o[4]}`)&&v(e,"style",i)},d(o){o&&Q(e),n=!1,_i(r)}}}function xS(t){let e,i,n=[],r=new Map,o=t[3];const a=l=>l[45];for(let l=0;l<o.length;l+=1){let c=af(t,o,l),d=a(c);r.set(d,n[l]=lf(d,c))}let s=t[1]&&cf(t);return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=ce(),s&&s.c(),i=Tn()},m(l,c){for(let d=0;d<n.length;d+=1)n[d].m(l,c);tt(l,e,c),s&&s.m(l,c),tt(l,i,c)},p(l,c){1592&c[0]&&(o=l[3],n=La(n,c,a,1,l,o,r,e.parentNode,Vy,lf,e,af)),l[1]?s?s.p(l,c):(s=cf(l),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},i:Je,o:Je,d(l){for(let c=0;c<n.length;c+=1)n[c].d(l);l&&Q(e),s&&s.d(l),l&&Q(i)}}}function bS(t,e,i){let n,r,o,a;const s=va(),l=.5*Jo,c=Vo-l,d=Vo+l,u=-Vo,p=u-l,h=u+l,g=J1-l,m=-J1+l,y=l,x=-l,k=Vo-Jo,w=k-l,C=k+l,M=J1-Jo,R=M-l,O=M+l,T=u-Jo,z=T+l,F=T-l,B=u+Jo,f=B+l,V=B-l;let{visible:J=!1}=e,{points:S=[]}=e,{rotatorPoint:j}=e,{enableDragEdges:K=!0}=e,{enableDragPoints:dt=!0}=e,{enableRotatePoints:lt=!0}=e;const N=ln("isAnimated");E(t,N,et=>i(16,r=et));const ft=oi(.5,{precision:1e-4,stiffness:.3,damping:.7});E(t,ft,et=>i(5,a=et));const $t=oi(0,{precision:.001,stiffness:.3,damping:.7});E(t,$t,et=>i(4,o=et));const Lt=et=>{let ht="";return(et<=d&&et>=c||et>=p&&et<=h)&&(ht="ns"),(et<=m||et>=g||et>=x&&et<=y)&&(ht="ew"),(et>=R&&et<=O||et<=f&&et>=V)&&(ht="nesw"),(et>=w&&et<=C||et<=z&&et>=F)&&(ht="nwse"),ht},ct=(et,ht)=>{s("resizestart",{indexes:et,translation:Ji()}),s("resizemove",{indexes:et,translation:ht}),s("resizeend",{indexes:et,translation:Ji()})};return t.$$set=et=>{"visible"in et&&i(2,J=et.visible),"points"in et&&i(13,S=et.points),"rotatorPoint"in et&&i(0,j=et.rotatorPoint),"enableDragEdges"in et&&i(14,K=et.enableDragEdges),"enableDragPoints"in et&&i(15,dt=et.enableDragPoints),"enableRotatePoints"in et&&i(1,lt=et.enableRotatePoints)},t.$$.update=()=>{65540&t.$$.dirty[0]&&ft.set(J?1:.5,{hard:r===!1}),65540&t.$$.dirty[0]&&$t.set(J?1:0,{hard:r===!1}),8192&t.$$.dirty[0]&&i(3,n=((et,ht)=>{let Y=0;const Z=Oo(et),St=[],nt=et.length;for(;Y<nt;Y++){const mt=mu(Y-1,et),Ft=mu(Y+1,et),oe=et[mt],Rt=et[Y],Ut=et[Ft],Ot=Math.atan2(Ut.y-Rt.y,Ut.x-Rt.x);if(dt){const wt=ao(rt(oe.x-Rt.x,oe.y-Rt.y)),xt=ao(rt(Ut.x-Rt.x,Ut.y-Rt.y)),Gt=rt(wt.x+xt.x,wt.y+xt.y),de=K?dt&&Lt(Math.atan2(Gt.y,Gt.x)):void 0;St.push({index:[Y],key:"point-"+Y,type:"point",scale:{x:1,y:1},translate:{x:Rt.x,y:Rt.y},angle:void 0,rotate:lt,center:Rt,dir:de})}if(!K||Array.isArray(K)&&!K.some(([wt,xt])=>Y===wt&&Ft===xt))continue;const U=rt(Rt.x+.5*(Ut.x-Rt.x),Rt.y+.5*(Ut.y-Rt.y));St.push({index:[Y,Ft],key:"edge-"+Y,type:"edge",scale:{x:$o(Rt,Ut),y:1},translate:{x:Rt.x,y:Rt.y},angle:Ot,rotate:Ot,center:U,visible:Array.isArray(K),dir:Lt(Math.atan2(Z.y-U.y,Z.x-U.x))})}return St})(S))},[j,lt,J,n,o,a,N,ft,$t,(et,ht)=>({detail:Y})=>{const Z=Y&&Y.translation?Y.translation:rt(0,0);s("resize"+et,{...Y,indexes:ht,translation:Z})},ct,({detail:et})=>{s("rotatestart",{translation:Ji()}),s("rotatemove",{translation:et}),s("rotateend",{translation:Ji()})},et=>({detail:ht})=>{const Y=ht&&ht.translation?ht.translation:rt(0,0);s("rotate"+et,{...ht,translation:Y})},S,K,dt,r,(et,{detail:ht})=>ct(et,ht)]}class vS extends si{constructor(e){super(),ai(this,e,bS,xS,ti,{visible:2,points:13,rotatorPoint:0,enableDragEdges:14,enableDragPoints:15,enableRotatePoints:1},null,[-1,-1])}}var ih=(t,e)=>{const i=Hh(t);return On(i,e)},Ud=t=>document.createTextNode(t),H2=t=>(Ea()&&t.endsWith("<div><br></div>")?t.replace(/<div><br><\/div>$/,"<br><br>"):t).replace(/<div><br><\/div>/g,"<br>").replace(/<\/div>/g,"").replace(/<div>/g,"<br>");function df(t){let e,i;return{c(){e=pt("pre"),v(e,"class","PinturaContentEditable"),v(e,"style",i=t[7]+";position:absolute;z-index:-1;pointer-events:none;")},m(n,r){tt(n,e,r),e.innerHTML=t[0]},p(n,r){1&r[0]&&(e.innerHTML=n[0]),128&r[0]&&i!==(i=n[7]+";position:absolute;z-index:-1;pointer-events:none;")&&v(e,"style",i)},d(n){n&&Q(e)}}}function wS(t){let e,i,n,r,o,a,s=t[8]&&df(t);return{c(){s&&s.c(),e=ce(),i=pt("pre"),v(i,"class","PinturaContentEditable"),v(i,"data-wrap-content",n=t[4]||t[5]?"wrap":"nowrap"),v(i,"contenteditable",""),v(i,"spellcheck",t[1]),v(i,"autocorrect",t[2]),v(i,"autocapitalize",t[3]),v(i,"style",r=t[8]?t[15](t[7]):t[7])},m(l,c){s&&s.m(l,c),tt(l,e,c),tt(l,i,c),t[26](i),o||(a=[Mt(i,"input",t[13]),Mt(i,"compositionend",t[12]),Mt(i,"paste",t[14]),Mt(i,"keydown",t[10]),Mt(i,"keyup",t[11]),Mt(i,"blur",t[9])],o=!0)},p(l,c){l[8]?s?s.p(l,c):(s=df(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),48&c[0]&&n!==(n=l[4]||l[5]?"wrap":"nowrap")&&v(i,"data-wrap-content",n),2&c[0]&&v(i,"spellcheck",l[1]),4&c[0]&&v(i,"autocorrect",l[2]),8&c[0]&&v(i,"autocapitalize",l[3]),384&c[0]&&r!==(r=l[8]?l[15](l[7]):l[7])&&v(i,"style",r)},i:Je,o:Je,d(l){s&&s.d(l),l&&Q(e),l&&Q(i),t[26](null),o=!1,_i(a)}}}function SS(t,e,i){let n,r,{spellcheck:o="false"}=e,{autocorrect:a="off"}=e,{autocapitalize:s="off"}=e,{wrapLines:l=!0}=e,{allowNewline:c=!0}=e,{textFormat:d="text"}=e,{formatInput:u=Zi}=e,{formatPaste:p=Zi}=e,{style:h}=e,{innerHTML:g}=e,{oninput:m=me}=e,{enableTextStyleShortcuts:y=!1}=e;const x=()=>{if(!w)return;const S=document.createRange();S.selectNodeContents(w);const j=F();j.removeAllRanges(),j.addRange(S)},k=va();let w;document.execCommand("defaultParagraphSeparator",!1,"br");const C=S=>S.replace(/<\/?(?:i|b|em|u|s|strike|strong|font)>/,"").replace(/style=".*?"/g,"").replace(/\n/gim,"<br>"),M=()=>{i(0,g=w.innerHTML);const S=H2(g);k("input",S),m(S),requestAnimationFrame(()=>w&&w.scrollTo(0,0))},R=()=>{B(w);const S=d==="html"?w.innerHTML:C(w.innerHTML);i(6,w.innerHTML=u(S),w),f(w),M()},O={b:"bold",i:"italic",u:"underline",s:"strikethrough"},T=S=>{const j=hn("span");return j.dataset.bookmark=S,j},z=(S,j,K)=>{const dt=T(K);if(S.nodeType===Node.TEXT_NODE){const lt=S.textContent;if(K==="start"){const N=Ud(lt.substr(0,j)),ft=Ud(lt.substr(j));S.replaceWith(N,dt,ft)}else{const N=Ud(lt.substr(0,j)),ft=Ud(lt.substr(j));S.replaceWith(N,dt,ft)}}else S.nodeType===Node.ELEMENT_NODE&&S.insertBefore(dt,S.childNodes[j])},F=()=>{const S=w.getRootNode();return"getSelection"in S?S.getSelection():document.getSelection()},B=S=>{const j=F();if(!j.getRangeAt||!j.rangeCount)return;const K=j.getRangeAt(0),{startOffset:dt,endOffset:lt,startContainer:N,endContainer:ft}=K;if(S.contains(K.startContainer)&&S.contains(K.endContainer))if(N.nodeType===Node.TEXT_NODE&&N===ft){const $t=N.textContent,Lt=$t.substr(0,dt),ct=T("start"),et=lt-dt>0?$t.substr(dt,lt):"",ht=T("end"),Y=$t.substr(lt);N.replaceWith(Lt,ct,et,ht,Y)}else z(N,dt,"start"),z(ft,lt+(N===ft?1:0),"end")},f=S=>{const j=V(S,"start"),K=V(S,"end");if(!j||!K)return;const dt=document.createRange();dt.setStart(j,0),dt.setEnd(K,0);const lt=F();lt.removeAllRanges(),lt.addRange(dt),j.remove(),K.remove()},V=(S,j)=>{const K=S.children;for(let dt=0;dt<K.length;dt++){const lt=K[dt];if(lt.dataset.bookmark===j)return lt;if(lt.children.length){const N=V(lt,j);if(N)return N}}};let J;return t.$$set=S=>{"spellcheck"in S&&i(1,o=S.spellcheck),"autocorrect"in S&&i(2,a=S.autocorrect),"autocapitalize"in S&&i(3,s=S.autocapitalize),"wrapLines"in S&&i(4,l=S.wrapLines),"allowNewline"in S&&i(5,c=S.allowNewline),"textFormat"in S&&i(16,d=S.textFormat),"formatInput"in S&&i(17,u=S.formatInput),"formatPaste"in S&&i(18,p=S.formatPaste),"style"in S&&i(19,h=S.style),"innerHTML"in S&&i(0,g=S.innerHTML),"oninput"in S&&i(20,m=S.oninput),"enableTextStyleShortcuts"in S&&i(21,y=S.enableTextStyleShortcuts)},t.$$.update=()=>{var S;if(64&t.$$.dirty[0]&&i(25,n=!!w),33554433&t.$$.dirty[0]&&n&&g&&(S=g)!==w.innerHTML&&(i(6,w.innerHTML=S,w),w===document.activeElement&&x()),524336&t.$$.dirty[0])if(!l&&c){const j=h.includes(":right")?"text-indent:-100px!important":h.includes(":center")?"":"min-width:calc(100% + 100px)!important";i(7,J=h+";overflow:visible;"+j)}else i(7,J=h);524288&t.$$.dirty[0]&&i(8,r=h.includes("text-stroke"))},[g,o,a,s,l,c,w,J,r,()=>{k("blur")},S=>{if(/escape/i.test(S.code))return S.stopPropagation(),void k("cancel");const j=S.ctrlKey||S.metaKey;if(d==="html"&&j&&/b|i|u|s/.test(S.key))return y&&(K=>{const dt=O[K];dt&&document.execCommand(dt)})(S.key),void S.preventDefault();/enter/i.test(S.code)&&(S.stopPropagation(),S.isComposing||(j?k("confirm"):(c||S.preventDefault(),document.execCommand("insertLineBreak"),S.preventDefault())))},()=>{},S=>{S.data!==""&&R()},S=>{const{inputType:j}=S;j!=="insertCompositionText"&&j!=="deleteCompositionText"&&R()},S=>{S.preventDefault();const j=S.clipboardData.getData("text/plain"),K=d==="html"?j:C(j),dt=p(K);if(!dt.length)return;const lt=F().getRangeAt(0);lt.deleteContents(),lt.insertNode(document.createTextNode(dt)),M()},S=>S.replace("-webkit-text-stroke","--text-stroke").replace("text-shadow","--text-shadow"),d,u,p,h,m,y,()=>R(),()=>w&&w.focus(),x,n,function(S){Ai[S?"unshift":"push"](()=>{w=S,i(6,w)})}]}class kS extends si{constructor(e){super(),ai(this,e,SS,wS,ti,{spellcheck:1,autocorrect:2,autocapitalize:3,wrapLines:4,allowNewline:5,textFormat:16,formatInput:17,formatPaste:18,style:19,innerHTML:0,oninput:20,enableTextStyleShortcuts:21,confirm:22,focus:23,select:24},null,[-1,-1])}get spellcheck(){return this.$$.ctx[1]}set spellcheck(e){this.$$set({spellcheck:e}),I()}get autocorrect(){return this.$$.ctx[2]}set autocorrect(e){this.$$set({autocorrect:e}),I()}get autocapitalize(){return this.$$.ctx[3]}set autocapitalize(e){this.$$set({autocapitalize:e}),I()}get wrapLines(){return this.$$.ctx[4]}set wrapLines(e){this.$$set({wrapLines:e}),I()}get allowNewline(){return this.$$.ctx[5]}set allowNewline(e){this.$$set({allowNewline:e}),I()}get textFormat(){return this.$$.ctx[16]}set textFormat(e){this.$$set({textFormat:e}),I()}get formatInput(){return this.$$.ctx[17]}set formatInput(e){this.$$set({formatInput:e}),I()}get formatPaste(){return this.$$.ctx[18]}set formatPaste(e){this.$$set({formatPaste:e}),I()}get style(){return this.$$.ctx[19]}set style(e){this.$$set({style:e}),I()}get innerHTML(){return this.$$.ctx[0]}set innerHTML(e){this.$$set({innerHTML:e}),I()}get oninput(){return this.$$.ctx[20]}set oninput(e){this.$$set({oninput:e}),I()}get enableTextStyleShortcuts(){return this.$$.ctx[21]}set enableTextStyleShortcuts(e){this.$$set({enableTextStyleShortcuts:e}),I()}get confirm(){return this.$$.ctx[22]}get focus(){return this.$$.ctx[23]}get select(){return this.$$.ctx[24]}}const uf=["i","b","u","strike"].map(t=>({tag:t,tagOpen:new RegExp(`<${t}>`,"g"),tagClose:new RegExp(`</${t}>`,"g"),placeholderOpen:new RegExp(`___${t}O___`,"g"),placeholderClose:new RegExp(`___${t}C___`,"g")}));var CS=t=>t=((e,i=uf)=>(i.forEach(({tag:n,placeholderOpen:r,placeholderClose:o})=>{e=e.replace(r,`<${n}>`).replace(o,`</${n}>`)}),e))(t=(t=((e,i=uf)=>(i.forEach(({tag:n,tagOpen:r,tagClose:o})=>{e=e.replace(r,`___${n}O___`).replace(o,`___${n}C___`)}),e))(t)).replace(/ {2,}/g," ").replace(/\u00a0/g,"&nbsp;").split(`
`).join("<br>")),Gd=(t,e)=>Oe(t)?parseFloat(t)/100*e:t,mc=(t,e)=>({x:Hr(t.x,e.width),y:Hr(t.y,e.height)});function pf(t,e,i){const n=t.slice();return n[276]=e[i],n[278]=i,n}function hf(t,e){let i,n,r,o,a,s,l,c,d,u,p,h=e[276].name+"";function g(){return e[180](e[278])}return r=new Nh({props:{color:e[276].color}}),{key:t,first:null,c(){i=pt("li"),n=pt("button"),At(r.$$.fragment),o=ce(),a=pt("span"),s=cn(h),c=ce(),v(n,"class","PinturaShapeListItem"),v(n,"type","button"),v(n,"aria-label",l="Select shape "+e[276].name),this.first=i},m(m,y){tt(m,i,y),Tt(i,n),It(r,n,null),Tt(n,o),Tt(n,a),Tt(a,s),Tt(i,c),d=!0,u||(p=Mt(n,"click",g),u=!0)},p(m,y){e=m;const x={};1048576&y[0]&&(x.color=e[276].color),r.$set(x),(!d||1048576&y[0])&&h!==(h=e[276].name+"")&&zn(s,h),(!d||1048576&y[0]&&l!==(l="Select shape "+e[276].name))&&v(n,"aria-label",l)},i(m){d||(P(r.$$.fragment,m),d=!0)},o(m){D(r.$$.fragment,m),d=!1},d(m){m&&Q(i),Et(r),u=!1,p()}}}function mf(t){let e,i;return e=new vS({props:{visible:!0,points:t[12],rotatorPoint:t[26],enableDragEdges:t[16],enableDragPoints:t[28],enableRotatePoints:t[14]}}),e.$on("resizestart",t[37]),e.$on("resizemove",t[38]),e.$on("resizeend",t[39]),e.$on("rotatestart",t[40]),e.$on("rotatemove",t[41]),e.$on("rotateend",t[42]),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};4096&r[0]&&(o.points=n[12]),67108864&r[0]&&(o.rotatorPoint=n[26]),65536&r[0]&&(o.enableDragEdges=n[16]),268435456&r[0]&&(o.enableDragPoints=n[28]),16384&r[0]&&(o.enableRotatePoints=n[14]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function $f(t){let e,i,n,r;const o=[MS,TS],a=[];function s(l,c){return l[4]==="modal"?0:l[4]==="inline"?1:-1}return~(e=s(t))&&(i=a[e]=o[e](t)),{c(){i&&i.c(),n=Tn()},m(l,c){~e&&a[e].m(l,c),tt(l,n,c),r=!0},p(l,c){let d=e;e=s(l),e===d?~e&&a[e].p(l,c):(i&&(ze(),D(a[d],1,1,()=>{a[d]=null}),Fe()),~e?(i=a[e],i?i.p(l,c):(i=a[e]=o[e](l),i.c()),P(i,1),i.m(n.parentNode,n)):i=null)},i(l){r||(P(i),r=!0)},o(l){D(i),r=!1},d(l){~e&&a[e].d(l),l&&Q(n)}}}function TS(t){let e,i,n,r,o,a={formatInput:t[44],wrapLines:!!t[13].width,textFormat:t[13].format,enableTextStyleShortcuts:t[5],allowNewline:t[27],style:t[25]};return i=new kS({props:a}),t[183](i),i.$on("input",t[45]),i.$on("keyup",t[48]),i.$on("cancel",t[50]),i.$on("confirm",t[49]),{c(){e=pt("div"),At(i.$$.fragment),v(e,"class","PinturaInlineInput"),v(e,"style",t[24])},m(s,l){tt(s,e,l),It(i,e,null),n=!0,r||(o=Mt(e,"focusout",t[184]),r=!0)},p(s,l){const c={};8192&l[0]&&(c.wrapLines=!!s[13].width),8192&l[0]&&(c.textFormat=s[13].format),32&l[0]&&(c.enableTextStyleShortcuts=s[5]),134217728&l[0]&&(c.allowNewline=s[27]),33554432&l[0]&&(c.style=s[25]),i.$set(c),(!n||16777216&l[0])&&v(e,"style",s[24])},i(s){n||(P(i.$$.fragment,s),n=!0)},o(s){D(i.$$.fragment,s),n=!1},d(s){s&&Q(e),t[183](null),Et(i),r=!1,o()}}}function MS(t){let e,i;return e=new T2({props:{panelOffset:t[2],onconfirm:t[49],oncancel:t[50],buttonCancel:{icon:t[6].shapeIconInputCancel,label:t[6].shapeLabelInputCancel},buttonConfirm:{icon:t[6].shapeLabelInputConfirm,label:t[6].shapeIconInputConfirm,hideLabel:!0},$$slots:{default:[PS]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};4&r[0]&&(o.panelOffset=n[2]),64&r[0]&&(o.buttonCancel={icon:n[6].shapeIconInputCancel,label:n[6].shapeLabelInputCancel}),64&r[0]&&(o.buttonConfirm={icon:n[6].shapeLabelInputConfirm,label:n[6].shapeIconInputConfirm,hideLabel:!0}),41943296&r[0]|1&r[9]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function PS(t){let e,i,n;return{c(){e=pt("textarea"),v(e,"spellcheck","false"),v(e,"autocorrect","off"),v(e,"autocapitalize","off"),v(e,"style",t[25])},m(r,o){tt(r,e,o),t[181](e),Hm(e,t[23]),i||(n=[Mt(e,"keydown",t[47]),Mt(e,"keypress",t[46]),Mt(e,"keyup",t[48]),Mt(e,"input",t[45]),Mt(e,"input",t[182])],i=!0)},p(r,o){33554432&o[0]&&v(e,"style",r[25]),8388608&o[0]&&Hm(e,r[23])},d(r){r&&Q(e),t[181](null),i=!1,_i(n)}}}function gf(t){let e,i,n,r,o;return i=new fo({props:{items:t[21],key:t[10]}}),{c(){e=pt("div"),At(i.$$.fragment),v(e,"class","PinturaShapeControls"),v(e,"style",t[22])},m(a,s){tt(a,e,s),It(i,e,null),n=!0,r||(o=[Mt(e,"measure",t[185]),ji(Er.call(null,e))],r=!0)},p(a,s){const l={};2097152&s[0]&&(l.items=a[21]),1024&s[0]&&(l.key=a[10]),i.$set(l),(!n||4194304&s[0])&&v(e,"style",a[22])},i(a){n||(P(i.$$.fragment,a),n=!0)},o(a){D(i.$$.fragment,a),n=!1},d(a){a&&Q(e),Et(i),r=!1,_i(o)}}}function RS(t){let e,i,n,r,o,a,s,l,c,d,u=[],p=new Map,h=t[20];const g=k=>k[276].id;for(let k=0;k<h.length;k+=1){let w=pf(t,h,k),C=g(w);p.set(C,u[k]=hf(C,w))}let m=t[15]&&mf(t),y=t[11]&&$f(t),x=t[17]>0&&gf(t);return{c(){e=pt("div"),i=pt("nav"),n=pt("ul");for(let k=0;k<u.length;k+=1)u[k].c();r=ce(),m&&m.c(),o=ce(),y&&y.c(),a=ce(),x&&x.c(),v(i,"class","PinturaShapeList"),v(i,"data-visible",t[18]),v(e,"class","PinturaShapeEditor"),v(e,"tabindex","0")},m(k,w){tt(k,e,w),Tt(e,i),Tt(i,n);for(let C=0;C<u.length;C+=1)u[C].m(n,null);Tt(e,r),m&&m.m(e,null),Tt(e,o),y&&y.m(e,null),Tt(e,a),x&&x.m(e,null),t[186](e),l=!0,c||(d=[Mt(i,"focusin",t[53]),Mt(i,"focusout",t[54]),Mt(e,"keydown",function(){Hi(t[0]?me:t[43])&&(t[0]?me:t[43]).apply(this,arguments)}),Mt(e,"nudge",function(){Hi(t[0]?me:t[52])&&(t[0]?me:t[52]).apply(this,arguments)}),Mt(e,"measure",t[179]),Mt(e,"pointermove",function(){Hi(t[0]?me:t[55])&&(t[0]?me:t[55]).apply(this,arguments)}),Mt(e,"pointerleave",function(){Hi(t[0]?me:t[56])&&(t[0]?me:t[56]).apply(this,arguments)}),Mt(e,"interactionstart",function(){Hi(t[0]?me:t[31])&&(t[0]?me:t[31]).apply(this,arguments)}),Mt(e,"interactionupdate",function(){Hi(t[0]?me:t[33])&&(t[0]?me:t[33]).apply(this,arguments)}),Mt(e,"interactioncancel",function(){Hi(t[0]?me:t[32])&&(t[0]?me:t[32]).apply(this,arguments)}),Mt(e,"interactionrelease",function(){Hi(t[0]?me:t[34])&&(t[0]?me:t[34]).apply(this,arguments)}),Mt(e,"interactionend",function(){Hi(t[0]?me:t[35])&&(t[0]?me:t[35]).apply(this,arguments)}),ji(Er.call(null,e)),ji(Ts.call(null,e)),ji(s=Cs.call(null,e,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:ff,getEventPosition:t[187]}))],c=!0)},p(k,w){t=k,1048706&w[0]&&(h=t[20],ze(),u=La(u,w,g,1,t,h,p,n,Ss,hf,null,pf),Fe()),(!l||262144&w[0])&&v(i,"data-visible",t[18]),t[15]?m?(m.p(t,w),32768&w[0]&&P(m,1)):(m=mf(t),m.c(),P(m,1),m.m(e,o)):m&&(ze(),D(m,1,1,()=>{m=null}),Fe()),t[11]?y?(y.p(t,w),2048&w[0]&&P(y,1)):(y=$f(t),y.c(),P(y,1),y.m(e,a)):y&&(ze(),D(y,1,1,()=>{y=null}),Fe()),t[17]>0?x?(x.p(t,w),131072&w[0]&&P(x,1)):(x=gf(t),x.c(),P(x,1),x.m(e,null)):x&&(ze(),D(x,1,1,()=>{x=null}),Fe()),s&&Hi(s.update)&&8&w[0]&&s.update.call(null,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:ff,getEventPosition:t[187]})},i(k){if(!l){for(let w=0;w<h.length;w+=1)P(u[w]);P(m),P(y),P(x),l=!0}},o(k){for(let w=0;w<u.length;w+=1)D(u[w]);D(m),D(y),D(x),l=!1},d(k){k&&Q(e);for(let w=0;w<u.length;w+=1)u[w].d();m&&m.d(),y&&y.d(),x&&x.d(),t[186](null),c=!1,_i(d)}}}const ff=(t,e)=>t.target===e;function IS(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,y,x,k,w,C,M,R,O,T,z,F,B,f,V,J,S,j,K,dt,lt,N,ft,$t,Lt,ct,et,ht,Y,Z,St,nt,mt,Ft,oe,Rt,Ut,Ot,U,wt,xt,Gt,de=Je,ue=()=>(de(),de=jr(ve,b=>i(175,Ot=b)),ve);t.$$.on_destroy.push(()=>de());let{uid:be=ia()}=e,{ui:$e}=e,{disabled:_=!1}=e,{shapes:ve}=e;ue();let{selection:gi}=e,{offset:ye}=e,{contextRotation:Vt=0}=e,{contextFlipX:Ce=!1}=e,{contextFlipY:Re=!1}=e,{contextZoom:He=1}=e,{active:bi=!1}=e,{opacity:vt=1}=e,{parentRect:bt}=e,{rootRect:Ge}=e,{utilRect:Me}=e,{hoverColor:ni}=e,{caretColor:Ue}=e,{gridColor:ei}=e,{snapColor:vi}=e,{textInputMode:di="inline"}=e,{oninteractionstart:Li=me}=e,{oninteractionupdate:X=me}=e,{oninteractionrelease:jt=me}=e,{oninteractionend:G=me}=e,{oninteractioncancel:Bt=me}=e,{onaddshape:fe=me}=e,{onupdateshape:Qt=me}=e,{onselectshape:se=me}=e,{onblurshape:zt=me}=e,{onremoveshape:We=me}=e,{ontapshape:Ee=me}=e,{onhovershape:je=me}=e,{onhovercanvas:Ke=me}=e,{ontapcanvas:it=me}=e,{onleavecanvas:Xt=me}=e,{beforeSelectShape:Nt=()=>!0}=e,{beforeDeselectShape:Zt=()=>!0}=e,{beforeRemoveShape:Yt=()=>!0}=e,{beforeUpdateShape:ot=(b,H)=>H}=e,{willRenderShapeControls:pe=Zi}=e,{willRenderShapeTextControls:ee=Zi}=e,{willStartInteraction:ge=(b,H)=>!0}=e,{mapEditorPointToImagePoint:Dt}=e,{mapImagePointToEditorPoint:Se}=e,{eraseRadius:fi}=e,{selectRadius:ui}=e,{enableButtonFlipVertical:Be=!1}=e,{enableTapToAddText:yi=!0}=e,{enableTextStyleControls:Mi=!0}=e,{locale:xe}=e,{snapThreshold:he=0}=e,{snapPointer:Ie=!0}=e,{enableSnapToContext:an=!0}=e,{gridSize:Ui=0}=e;const yn=b=>{if(he===0)return[];let H;return an&&(H={...bt,x:0,y:0}),[...Ot.filter(L=>L!==b).filter(L=>!Co(L)).map(L=>Zn({...L},bt)),H].filter(Boolean)},mn=(b,H,L,st)=>b===0?{snapTargets:[]}:{snapThreshold:b,gridSize:H,gridRect:L,snapTargets:yn(st)},$n=ln("isAnimated");E(t,$n,b=>i(176,wt=b));const tn=b=>b.set(fa(b)),Yi=b=>fa(b).find(Co),Fn=(b,H)=>{if(!Yi(H))return Dp(b),Un(b,H)},Xn=b=>{Yi(b)&&b.update(H=>H.filter(L=>!Co(L)))},jn=b=>{const H=Yi(b);if(H)return Im(H),tn(b),H},vr=(b,H,L=(st,ut)=>({...st,...ut}))=>{Yi(H)&&H.update(st=>st.map(ut=>Co(ut)?L(ut,b):ut))},Un=(b,H=ve)=>(H.update(L=>[...L,b]),b),vn=(b,H,L)=>{const st=ot({...b},H,{...L});return ga(b,st,L),b},_n=(b,H)=>{const L=$o(b,H),st=Id(b,H),ut=Math.PI/8,Wt=ut*Math.round(st/ut)-Vt%ut;H.x=b.x+L*Math.cos(Wt),H.y=b.y+L*Math.sin(Wt)},Vn=ln("keysPressed");E(t,Vn,b=>i(177,xt=b));const Pi=(b,H,L)=>b===0||H&&L?b:H||L?-b:b,so=b=>{if(b.x===null&&b.y===null)return Dn();b.x&&i(138,yo=Dt({x:b.x,y:0}).x),b.y&&i(139,lo=Dt({x:0,y:b.y}).y)},Dn=()=>{i(138,yo=null),i(139,lo=null)};let yo=null,lo=null;const Ar=(b,H)=>{const L=Se(b);return Dt(Bn(L,H))},wr=(b,H,L)=>{const st=(L-H)/b+1;return Array.from({length:st},(ut,Wt)=>H+Wt*b)},Mn=b=>{let H=[],L=[],st=b.points;if(b.x1!==void 0&&(st=[{x:b.x1,y:b.y1},{x:b.x2,y:b.y2}]),st){const ut=st.map(Se),Wt=ar(ut),Pt=ut[0],ie=ut[ut.length-1];H=[Wt.x,Wt.x+.5*Wt.width,Wt.x+Wt.width,Pt.x,ie.x],L=[Wt.y,Wt.y+.5*Wt.height,Wt.y+Wt.height,Pt.y,ie.y]}else if(b.text||b.width!==void 0||b.rx!==void 0){let ut;if(b.text&&b.height===void 0){const te=qo(b.text,b);ut=An(b.x,b.y,te.width,te.height)}else ut=b.width!==void 0?ls(b):ls({x:b.x-b.rx,y:b.y-b.ry,width:2*b.rx,height:2*b.ry});const Wt=_o(ut).map(Se),Pt=Math.abs(b.rotation)>0?Mr(ut,b.rotation).map(Se):Wt,ie=ar(Pt),Ht=Ti(ie),_t=.5*ie.width,re=.5*ie.height;H=[Ht.x-_t,Ht.x,Ht.x+_t],L=[Ht.y-re,Ht.y,Ht.y+re]}else if(b.x!==void 0){const ut=Se(b);H=[ut.x],L=[ut.y]}return{x:H,y:L}},qi=(b,H,L)=>{let st,ut,Wt,Pt=Number.Infinity,ie=null,Ht=null;for(let _t=0;_t<b.length;_t++){ut=b[_t];for(let re=0;re<H.length;re++)Wt=H[re],st=Math.abs(ut-Wt),st<L&&(Ht===null||st<Pt)&&(Pt=st,ie=ut,Ht=Wt)}return{origin:ie,target:Ht}},Zr=(b,H,L,st,ut)=>{const Wt={x:null,y:null},Pt={x:null,y:null},ie=H.map(Mn);if(st>0){const Ht=Se({x:0,y:0}),_t=Se({x:st,y:st}),re=Se({x:ut.width,y:ut.height}),te=_t.x-Ht.x,Ve=wr(te,Ht.x,re.x),ae=wr(te,Ht.y,re.y);ie.push({x:Ve,y:ae})}return ie.forEach(Ht=>{const{snapTranslation:_t,snapLine:re}=((te,Ve,ae)=>{const Te={x:null,y:null},ke={x:null,y:null},Jt=qi(te.x,Ve.x,ae);Jt.target!==null&&(Te.x=Jt.target,ke.x=Jt.target-Jt.origin);const Ae=qi(te.y,Ve.y,ae);return Ae.target!==null&&(Te.y=Ae.target,ke.y=Ae.target-Ae.origin),{snapTranslation:ke,snapLine:Te}})(b,Ht,L);_t.x!==null&&(Pt.x===null||Math.abs(_t.x)<Math.abs(Pt.x))&&(Pt.x=_t.x||0,Wt.x=re.x),_t.y!==null&&(Pt.y===null||Math.abs(_t.y)<Math.abs(Pt.y))&&(Pt.y=_t.y||0,Wt.y=re.y)}),{snapTranslation:Pt,snapLines:Wt}},eo=(b,H)=>(H.x!==null&&(b.x+=H.x),H.y!==null&&(b.y+=H.y),b),xo=(b,H,L,st)=>{const{snapThreshold:ut=0,gridSize:Wt=0,gridRect:Pt,snapTargets:ie=[]}=st||{};let Ht=null;if(or(b)){if(ut){const te=Zn({...b},bt),Ve=Ar(Ua(H),L),ae=Ar(Ga(H),L),Te=Mn({...te,x1:Ve.x,y1:Ve.y,x2:ae.x,y2:ae.y}),{snapTranslation:ke,snapLines:Jt}=Zr(Te,ie,ut,Wt,Pt);eo(L,ke),so(Jt)}const _t=Ar(Ua(H),L),re=Ar(Ga(H),L);Ht={x1:_t.x,y1:_t.y,x2:re.x,y2:re.y}}else if(b.points){if(ut){const _t=Zn({...b},bt),re=Mn({..._t,points:H.points.map(ae=>Ar(ae,L))}),{snapTranslation:te,snapLines:Ve}=Zr(re,ie,ut,Wt,Pt);eo(L,te),so(Ve)}Ht={points:H.points.map(_t=>Ar(_t,L))}}else if(To(b)||Kn(b)||Jn(b)){if(ut){const _t=Zn({...b},bt),re=Ar(H,L),te=Mn({..._t,...re}),{snapTranslation:Ve,snapLines:ae}=Zr(te,ie,ut,Wt,Pt);eo(L,Ve),so(ae)}Ht=Ar(H,L)}Ht&&(vn(b,Ht,bt),Sr())},bo={0:1,1:0,2:3,3:2},Io={0:3,1:2,2:1,3:0};let co;const uo=()=>{if(Ot.length)return Ot.find(Co)},vo=()=>{if(Ot.length)return Ot.findIndex(Co)},wo=()=>{const b=uo();if(b)return Im(b),Sr(),b},Wr=()=>{if(!uo())return;const b=[...Ot];b.splice(vo(),1),ve.set(b)},Sr=()=>{ve.set(Ot)},io=(b,H=[],L=!0)=>{H.filter(Boolean).forEach(st=>delete b[st]),L&&Sr()},dn=(b,H,L=!0)=>{b=Object.assign(b,H),L&&Sr()},tr=(b,H,L,st=!0)=>{b[H]=L,st&&Sr()},So=(b,H=!0)=>{Ot.forEach(L=>dn(L,b,!1)),H&&Sr()},_r=()=>[...Ot].reverse().find(cs),wi=()=>!!_r(),Pn=b=>{if(!Yt(b))return!1;ve.set(Ot.filter(H=>H!==b)),We(b)},Yn=()=>{const b=_r();if(!b)return;const H=Ot.filter(ut=>Em(ut)&&ha(ut)),L=H.findIndex(ut=>ut===b);if(Pn(b)===!1)return;if(gn=b,H.length-1<=0)return no();const st=L-1<0?H.length-1:L-1;un(H[st])};let gn;const no=(b={})=>{const{storePrevious:H=!0}=b;Object.keys(mo).forEach(st=>mo[st]={});const L=Xr();H&&(gn=L),So({isSelected:!1,isEditing:!1,_prerender:!1}),L&&zt(L)},Xr=()=>Ot.find(cs),un=(b,H=!0)=>{if(Co(b))return;const L=Xr()||gn,st=cs(b);gn=void 0,Nt(L,b)&&(no(),(ut=>{ut.isSelected=!0})(b),!st&&se(b),H&&Sr())},Yr=b=>{Ye&&Ye.confirm&&b.isEditing&&Ye.confirm(),dn(b,{isSelected:!1,isEditing:!1,_prerender:!1}),zt(b)},hr=b=>{dn(b,{isSelected:!0,isEditing:!0,_prerender:di==="inline"})},po=b=>{dn(b,{isSelected:!0,isEditing:!1,_prerender:!1})},mr=b=>{if(!b.length)return[];const H=b.filter(Yt);return ve.set(Ot.filter(L=>!H.includes(L))),H},Gn=b=>{const H=qo(b.text,b);return An(b.x,b.y,b.width?Math.min(b.width,H.width):H.width,b.height?Math.min(b.height,H.height):H.height)},ho=b=>{if(Ys(b))return ls(b);if(Jn(b))return Q1(b);const H=Gn(b);return H.width=Math.max(10,b.width||H.width),H},kr=(b,H,L=0,st=()=>!0)=>[...b].reverse().filter(st).map(ut=>({shape:ut,priority:1})).filter(ut=>{const{shape:Wt}=ut,Pt=Zn(Nn(Wt),bt),ie=L+.5*(Pt.strokeWidth||0);if(To(Pt))return tp(H,ie,Pt,Wt.rotation);if(Kn(Pt)){const Ht=ho(Pt),_t=tp(H,ie,Ht,Wt.rotation);let re=!1;if(_t&&!cs(Wt)){const te=Gn(Pt);Wt.textAlign!=="right"||Wt.flipX||(te.x=Ht.x+Ht.width-te.width),Wt.textAlign==="center"&&(te.x=Ht.x+.5*Ht.width-.5*te.width),re=tp(H,ie,te,Wt.rotation,Ti(Ht)),re||(ut.priority=-1)}return _t}return Jn(Pt)?((Ht,_t,re,te,Ve,ae)=>{const Te=ou(rt(re.x,re.y),re.rx,re.ry,te,Ve,ae,12);return Fp(Ht,_t,Te)})(H,ie,Pt,Wt.rotation,Wt.flipX,Wt.flipY):or(Pt)?ph(H,Math.max(16,ie),Ua(Pt),Ga(Pt)):qn(Pt)&&Pt.pathClose?Fp(H,ie,Pt.points):!!qn(Pt)&&(Pt.points.length===1?Bo(H,Pt.points[0])<ie*ie:ny(H,Math.max(16,ie),Pt.points))}).sort((ut,Wt)=>ut.priority<Wt.priority?1:ut.priority>Wt.priority?-1:0).map(ut=>ut.shape),ro=(b,H,L,st=0)=>{const ut=Math.abs(st),Wt=vs(H,L),Pt=dh(Wt,ut),ie=(({start:Ht,end:_t},re)=>{if(re===0)return[rt(Ht.x,Ht.y),rt(Ht.x,Ht.y),rt(_t.x,_t.y),rt(_t.x,_t.y)];const te=Math.atan2(_t.y-Ht.y,_t.x-Ht.x),Ve=Math.sin(te)*re,ae=Math.cos(te)*re;return[rt(Ve+Ht.x,-ae+Ht.y),rt(-Ve+Ht.x,ae+Ht.y),rt(-Ve+_t.x,ae+_t.y),rt(Ve+_t.x,-ae+_t.y)]})(Pt,ut);return b.filter(Ht=>{const _t=Zn(Nn(Ht),bt);if(or(_t)||qn(_t)){const re=_t.points?[..._t.points]:[Ua(_t),Ga(_t)];return!!ty(Pt,re)}return((re,te)=>!!re.find(Ve=>zp(Ve,te))||!!te.find(Ve=>zp(Ve,re)))(ie,((re,te=12)=>{if(To(re))return Mr(re,re.rotation,Ti(re));if(Kn(re)){const Ve=ho(re);return Mr(Ve,re.rotation,Ti(Ve))}return Jn(re)?ou(rt(re.x,re.y),re.rx,re.ry,re.rotation,re.flipX,re.flipY,te):[]})(_t))})};let qr,Wn,wn,li,W,ne,Ii=!1,ri=!1,Kt=!1;const we=()=>{clearTimeout(Wn),Wn=void 0,i(141,Kt=!1),Dn()};let Ei=null;const Vi=b=>{const H=$i(b.rotation)&&b.rotation!==0;if(To(b)){if(b.width<1&&b.height<1)return;const L=Ti(b),st=_o(b);return(b.flipX||b.flipY)&&Ml(st,b.flipX,b.flipY,L.x,L.y),H?Js(st,b.rotation,L.x,L.y):st}if(Jn(b)){if(b.rx<1&&b.ry<1)return;const L=b,st=_o(Q1(b));return(b.flipX||b.flipY)&&Ml(st,b.flipX,b.flipY,L.x,L.y),H?Js(st,b.rotation,L.x,L.y):st}if(or(b))return[Ua(b),Ga(b)];if(qn(b)){if(b.bitmap&&!b.pathClose){const L=ar(b.points);return L.x-=.5*b.strokeWidth,L.y-=.5*b.strokeWidth,L.width+=b.strokeWidth,L.height+=b.strokeWidth,Vi({...b,...L})}return[...b.points]}if(Kn(b)){if(b.width<5&&b.height<5)return;const L=ho(b);L.width=Math.max(10,L.width);const st=Ti(L),ut=_o(L);return(b.flipX||b.flipY)&&Ml(ut,b.flipX,b.flipY,st.x,st.y),H?Js(ut,b.rotation,st.x,st.y):ut}return[]},pn=b=>{const H=Vi(b);let L,st;return b.flipY?(L=Oo([H[0],H[1]]),st=ao(rt(H[1].x-H[2].x,H[1].y-H[2].y))):(L=Oo([H[2],H[3]]),st=ao(rt(H[2].x-H[1].x,H[2].y-H[1].y))),Dr(st,20/He),{origin:L,dir:st}},en=b=>H=>H.id===b,Oi=b=>{const H=en(b);return L=>L.filter((st=>ut=>!st(ut))(H))},Vr=b=>{const H=en(b),L=Oi(b);return()=>$e.update(st=>st.some(H)?L(st):st)},Ho=b=>{const H=Oi(b);return(...L)=>{$e.update(st=>[...H(st),...L.filter(Boolean)])}},za=Vr("markup-hover"),jo=Ho("markup-hover");let $r;const Cr="markup-manipulator-segment-"+be,Eo=(b,H)=>{const L=b[H],st=H-1<0?b[b.length-1]:b[H-1],ut=H+1<b.length?b[H+1]:b[0],Wt=On(_e(st),L);ao(Wt);const Pt=Bn(Dr(Wt,10),L),ie=On(_e(ut),L);return ao(ie),[Pt,L,Bn(Dr(ie,10),L)]},Sa=Vr(Cr),Rn=Ho(Cr),A=(b,H)=>{if(he<=0)return b;if(H)return Dn(),b;const L=Dt(b),st=yn(),{snapTranslation:ut,snapLines:Wt}=Zr(Mn(L),st,he,Ui,n);return so(Wt),eo(b,ut),b},Pe=oi(0);E(t,Pe,b=>i(178,Gt=b));const De="markup-grid-line-"+be,Si=Vr(De),Ni=Ho(De),zi="markup-snap-line",Ze=Vr(zi),xi=Ho(zi);let Ye;const Fi=b=>{i(8,Ye.innerHTML=CS(b),Ye)},fn=b=>{const H=b.value===void 0?b.innerHTML:b.value,L=r.format==="text"?H2(H).split(/<br>|<br\/>/g).join(`
`).replace(/&nbsp;/g,"Â ").replace(/&amp;/g,"&"):H;return lu(r)&&r.disableNewline!==!1?(st=>{const ut=st.split(/[\n\r]/g);return ut.length>1?ut.map(Wt=>Wt.trim()).filter(Wt=>Wt.length).join(" "):ut[0]})(L):L},In=()=>{const b=fn(Ye),H=bl(r,b),L=H===!0?b:H;let st=f.x,ut=f.y;if(!r.height){const Wt=Mr({...J},r.rotation),Pt=qo(L,l),ie=Mr({x:st,y:ut,...Pt},r.rotation),[Ht,,_t]=Wt,[re,,te]=ie;let Ve=Ht,ae=re;r.flipX&&(Ve=_t,ae=te);const Te=On(_e(Ve),ae);st+=Te.x,ut+=Te.y}dn(r,{x:Oe(B.x)?Hr(st,bt.width):st,y:Oe(B.y)?Hr(ut,bt.height):ut,text:L})},rn=()=>{a&&wo(),Ye&&Ye.confirm&&Ye.confirm(),In(),po(r),Qt(r)},xn=()=>{a?Wr():(dn(r,{text:B.text,x:B.x,y:B.y}),po(r))},ki=(b,H,{flipX:L,flipY:st,rotation:ut},Wt="top left")=>{let Pt,ie;const[Ht,_t,re,te]=Mr(b,ut),[Ve,ae,Te,ke]=Mr(H,ut);return Wt==="top center"?(Pt=Oo(st?[te,re]:[Ht,_t]),ie=Oo(st?[ke,Te]:[Ve,ae])):Wt==="top right"&&!L||Wt==="top left"&&L?(Pt=st?re:_t,ie=st?Te:ae):(Pt=st?te:Ht,ie=st?ke:Ve),On(_e(Pt),ie)},gr=(b,H,L)=>rt(Oe(b.x)?Hr(H.x+L.x,bt.width):H.x+L.x,Oe(b.y)?Hr(H.y+L.y,bt.height):H.y+L.y),mo={},Ms=()=>hr(r),Ps=()=>{const b=Xa(qo(r.text,l),Ht=>Math.ceil(Ht)),H=Le(r,"height"),L=!H&&Le(r,"width"),st=r.id;let ut=mo[st];ut||(mo[st]={},ut=mo[st]);const Wt=Ht=>{const{width:_t,...re}=l,te=qo(r.text,re),Ve=ki(An(l.x,l.y,Ht.width,Ht.height),An(l.x,l.y,te.width,te.height),l,"top "+r.textAlign),ae=l.disableNewline!==!1;io(r,["width","height",ae&&"textAlign"]),dn(r,{...gr(r,l,Ve)})},Pt=Ht=>{const _t=Hn(ut.width||l.width||b.width,b.height),re=ut.textAlign||"left",te=ki(An(l.x,l.y,Ht.width,Ht.height),An(l.x,l.y,_t.width,_t.height),l,"top "+re);io(r,["height"]),dn(r,{...gr(r,l,te),width:Oe(r.width)?Hr(_t.width,bt.width):_t.width,textAlign:re})},ie=Ht=>{const _t=Hn(ut.width||b.width,ut.height||b.height),re=ut.textAlign||"left",te=ki(An(l.x,l.y,Ht.width,Ht.height),An(l.x,l.y,_t.width,_t.height),l,"top "+re);dn(r,{...gr(r,l,te),width:Oe(r.width)?Hr(_t.width,bt.width):_t.width,height:Oe(r.width)?Hr(_t.height,bt.height):_t.height,textAlign:re})};if(H){ut.textAlign=r.textAlign,ut.width=l.width,ut.height=l.height;const Ht=Hn(l.width,l.height);js(r,"auto-height")?Pt(Ht):js(r,"auto-width")&&Wt(Ht)}else if(L){ut.textAlign=r.textAlign,ut.width=l.width;const Ht=Hn(l.width,b.height);js(r,"auto-width")?Wt(Ht):js(r,"fixed-size")&&ie(Ht)}else{ut.textAlign=r.textAlign;const Ht=Hn(Math.ceil(b.width),Math.ceil(b.height));js(r,"fixed-size")?ie(Ht):js(r,"auto-height")&&Pt(Ht)}},Rs=b=>{b.stopPropagation();const H=r.flipX||!1;tr(r,"flipX",!H),Qt(r)},Is=b=>{b.stopPropagation();const H=r.flipY||!1;tr(r,"flipY",!H),Qt(r)},Fa=b=>{tr(r,"opacity",b)},Qa=b=>{Fa(b),Qt(r)},ol=b=>{b.stopPropagation(),b.target.blur(),Yn()},ka=b=>{b.stopPropagation(),Ot.findIndex(H=>H===r)!==Ot.length-1&&(ve.set(Ot.filter(H=>H!==r).concat([r])),Qt(r))},Ca=b=>{b.stopPropagation(),Lr()},Lr=()=>{const b=Nn(r);b.id=ia();const H=rt(50,-50);if(Le(b,"points")){const L=Pl(b,["points"],bt);L.points.forEach(st=>{st.x+=H.x,st.y+=H.y}),ga(b,L,bt)}else if(or(b)){const L=Pl(b,["x1","y1","x2","y2"],bt);L.x1+=H.x,L.y1+=H.y,L.x2+=H.x,L.y2+=H.y,ga(b,L,bt)}else{const L=Pl(b,["x","y"],bt);L.x+=50,L.y-=50,ga(b,L,bt)}ve.set([...Ot,b]),fe(b),un(b)},fr=oi(0,{stiffness:.2,damping:.7});let er;E(t,fr,b=>i(17,U=b));const Nr=(b,H)=>{const{disableTextLayout:L=[]}=H;return"height"in H?L.includes("auto-height")?b.shapeIconButtonTextLayoutAutoWidth:b.shapeIconButtonTextLayoutAutoHeight:"width"in H?L.includes("auto-width")?b.shapeIconButtonTextLayoutFixedSize:b.shapeIconButtonTextLayoutAutoWidth:L.includes("fixed-size")?b.shapeIconButtonTextLayoutAutoHeight:b.shapeIconButtonTextLayoutFixedSize},on=(b,H)=>{const{disableTextLayout:L=[]}=H;return"height"in H?L.includes("auto-height")?b.shapeTitleButtonTextLayoutAutoWidth:b.shapeTitleButtonTextLayoutAutoHeight:"width"in H?L.includes("auto-width")?b.shapeTitleButtonTextLayoutFixedSize:b.shapeTitleButtonTextLayoutAutoWidth:L.includes("fixed-size")?b.shapeTitleButtonTextLayoutAutoHeight:b.shapeTitleButtonTextLayoutFixedSize};let Di=!1,Es=Ji(),yr;const al=b=>{je(b),i(142,$r=b)};let Uo;return No(()=>{Ze(),Si(),Sa(),za()}),t.$$set=b=>{"uid"in b&&i(57,be=b.uid),"ui"in b&&i(58,$e=b.ui),"disabled"in b&&i(0,_=b.disabled),"shapes"in b&&ue(i(1,ve=b.shapes)),"selection"in b&&i(59,gi=b.selection),"offset"in b&&i(2,ye=b.offset),"contextRotation"in b&&i(60,Vt=b.contextRotation),"contextFlipX"in b&&i(61,Ce=b.contextFlipX),"contextFlipY"in b&&i(62,Re=b.contextFlipY),"contextZoom"in b&&i(63,He=b.contextZoom),"active"in b&&i(64,bi=b.active),"opacity"in b&&i(65,vt=b.opacity),"parentRect"in b&&i(66,bt=b.parentRect),"rootRect"in b&&i(3,Ge=b.rootRect),"utilRect"in b&&i(67,Me=b.utilRect),"hoverColor"in b&&i(68,ni=b.hoverColor),"caretColor"in b&&i(69,Ue=b.caretColor),"gridColor"in b&&i(70,ei=b.gridColor),"snapColor"in b&&i(71,vi=b.snapColor),"textInputMode"in b&&i(4,di=b.textInputMode),"oninteractionstart"in b&&i(72,Li=b.oninteractionstart),"oninteractionupdate"in b&&i(73,X=b.oninteractionupdate),"oninteractionrelease"in b&&i(74,jt=b.oninteractionrelease),"oninteractionend"in b&&i(75,G=b.oninteractionend),"oninteractioncancel"in b&&i(76,Bt=b.oninteractioncancel),"onaddshape"in b&&i(77,fe=b.onaddshape),"onupdateshape"in b&&i(78,Qt=b.onupdateshape),"onselectshape"in b&&i(79,se=b.onselectshape),"onblurshape"in b&&i(80,zt=b.onblurshape),"onremoveshape"in b&&i(81,We=b.onremoveshape),"ontapshape"in b&&i(82,Ee=b.ontapshape),"onhovershape"in b&&i(83,je=b.onhovershape),"onhovercanvas"in b&&i(84,Ke=b.onhovercanvas),"ontapcanvas"in b&&i(85,it=b.ontapcanvas),"onleavecanvas"in b&&i(86,Xt=b.onleavecanvas),"beforeSelectShape"in b&&i(87,Nt=b.beforeSelectShape),"beforeDeselectShape"in b&&i(88,Zt=b.beforeDeselectShape),"beforeRemoveShape"in b&&i(89,Yt=b.beforeRemoveShape),"beforeUpdateShape"in b&&i(90,ot=b.beforeUpdateShape),"willRenderShapeControls"in b&&i(91,pe=b.willRenderShapeControls),"willRenderShapeTextControls"in b&&i(92,ee=b.willRenderShapeTextControls),"willStartInteraction"in b&&i(93,ge=b.willStartInteraction),"mapEditorPointToImagePoint"in b&&i(94,Dt=b.mapEditorPointToImagePoint),"mapImagePointToEditorPoint"in b&&i(95,Se=b.mapImagePointToEditorPoint),"eraseRadius"in b&&i(96,fi=b.eraseRadius),"selectRadius"in b&&i(97,ui=b.selectRadius),"enableButtonFlipVertical"in b&&i(98,Be=b.enableButtonFlipVertical),"enableTapToAddText"in b&&i(99,yi=b.enableTapToAddText),"enableTextStyleControls"in b&&i(5,Mi=b.enableTextStyleControls),"locale"in b&&i(6,xe=b.locale),"snapThreshold"in b&&i(100,he=b.snapThreshold),"snapPointer"in b&&i(101,Ie=b.snapPointer),"enableSnapToContext"in b&&i(102,an=b.enableSnapToContext),"gridSize"in b&&i(103,Ui=b.gridSize)},t.$$.update=()=>{var b,H;16&t.$$.dirty[2]|1024&t.$$.dirty[3]&&i(166,n=Ui>0?{x:0,y:0,...bt}:void 0),1&t.$$.dirty[0]|1048576&t.$$.dirty[5]&&i(146,r=!_&&Ot&&(uo()||_r())),4194304&t.$$.dirty[4]&&i(173,o=!!r),4194304&t.$$.dirty[4]&&i(160,a=r&&Co(r)),4194304&t.$$.dirty[4]|32&t.$$.dirty[5]&&i(10,s=r&&!a?r.id:void 0),8&t.$$.dirty[0]|16&t.$$.dirty[2]|4194304&t.$$.dirty[4]&&i(13,l=Ge&&r&&Zn(Nn(r),bt)),4194304&t.$$.dirty[4]|32&t.$$.dirty[5]&&i(144,c=!(!r||!a)),8192&t.$$.dirty[0]|8&t.$$.dirty[2]|4194304&t.$$.dirty[4]&&i(172,d=r&&vt&&Vi(l)||[]),4194304&t.$$.dirty[4]&&i(174,u=r&&Op(b=r)&&$c(b)&&b.disableResize!==!0&&(Ys(b)||Kd(b)||Jn(b)||or(b)||qn(b)&&Le(b,"pathClose"))&&!ja(r)),4194304&t.$$.dirty[4]&&i(14,p=r&&(L=>Op(L)&&L.disableRotate!==!0&&(Ys(L)||Le(L,"text")||Jn(L)))(r)&&!ja(r)),4194304&t.$$.dirty[4]|524288&t.$$.dirty[5]&&i(16,h=u&&Le(r,"text")&&!r.height?[[1,2],[3,0]]:(!r||!or(r)&&!qn(r))&&u),65536&t.$$.dirty[0]|4194304&t.$$.dirty[4]|524288&t.$$.dirty[5]&&i(28,g=!!r&&!Array.isArray(h)&&u),4194304&t.$$.dirty[4]|131072&t.$$.dirty[5]&&i(15,m=r&&d.length>1),4&t.$$.dirty[3]|131072&t.$$.dirty[5]&&i(170,y=d.map(Se)),4&t.$$.dirty[0]|32768&t.$$.dirty[5]&&i(12,x=y.map(L=>rt(L.x-ye.x,L.y-ye.y))),4194304&t.$$.dirty[4]|262144&t.$$.dirty[5]&&i(27,k=o&&(Kd(r)?!Le(r,"disableNewline")||!r.disableNewline:r.disableNewline===!1)),4&t.$$.dirty[3]|262144&t.$$.dirty[4]&&($r&&Se&&!cs($r)&&ha($r)?(L=>{const st=Vi(Zn(Nn(L),bt));if(!st)return;const ut=st.map(Se),Wt=!!L.pathClose||!(!L.bitmap&&(qn(L)||or(L))),Pt=L.selectionStyle==="hook",ie=Pt?ut.map((_t,re,te)=>({id:"markup-hover",points:Eo(te,re),strokeColor:[0,0,0,.1],strokeWidth:2})):[{id:"markup-hover",points:ut.map(_t=>rt(_t.x+1,_t.y+1)),strokeColor:[0,0,0,.1],strokeWidth:2,pathClose:Wt}],Ht=Pt?ut.map((_t,re,te)=>({id:"markup-hover",points:Eo(te,re),strokeColor:ni,strokeWidth:2})):[{id:"markup-hover",points:ut,strokeColor:ni,strokeWidth:2,pathClose:Wt}];jo(...ie,...Ht)})($r):za()),61440&t.$$.dirty[0]|8&t.$$.dirty[2]&&i(171,w=m&&p&&vt&&x&&(L=>{const st=pn(L),ut=Se({x:st.origin.x+st.dir.x,y:st.origin.y+st.dir.y});return{origin:Se(st.origin),position:ut}})(l)),4&t.$$.dirty[0]|65536&t.$$.dirty[5]&&i(26,C=w&&rt(w.position.x-ye.x,w.position.y-ye.y)),4194304&t.$$.dirty[5]&&i(165,T=!!(xt||[]).find(L=>[91,93,17].includes(L))),256&t.$$.dirty[3]|1024&t.$$.dirty[5]&&i(167,M=!(T||!Ie)),8&t.$$.dirty[2]|4718592&t.$$.dirty[4]|36896&t.$$.dirty[5]&&r&&y&&vt>0&&((L,st,ut)=>{if(!ha(st))return;const Wt=qn(st),Pt=Wt&&Le(st,"pathClose"),ie=Pt&&(Sn=>Sn.strokeWidth&&((En,xr)=>{const Kr=En.strokeColor;return!!Kr&&(Kr.length===3||Kr[3]>0)})(Sn))(st),Ht=Co(st),_t=ja(st),re=st.selectionStyle==="hook",{selectionOpacity:te=1}=st;if(Ht&&Wt&&!Pt)return;const Ve=[],ae=[...y],Te=ae[ae.length-1],ke=ae[0],Jt=(_t?.05:.1)*L*te,Ae=Jt>0,pi=(_t?.5:1)*L*te,Bi=pi>0,hi=[0,0,0],mi=[1,1,1],Qe=_t?1:1.5;xt.includes(16)&&Te&&ut&&_n(Te,ut);const nn=(ae.length&&Pt&&Ht&&ut?Bo(ke,ut):1/0)<=256,Wi=(ae.length&&Pt&&Ht&&ut?Bo(Te,ut):1/0)<=256;!nn&&ut&&ae.push(ut);const Tr=ae.length>1,ir=!!st.pathClose||!(!st.bitmap&&(qn(st)||or(st)))||ae.length>2&&nn;Tr&&Ae&&(re?Ve.push(...ae.map((Sn,En,xr)=>({id:Cr,points:Eo(xr,En),strokeColor:hi,strokeWidth:2,opacity:Jt}))):Ve.push({id:Cr,points:ae.map(Sn=>rt(Sn.x+1,Sn.y+1)),pathClose:ir,strokeColor:hi,strokeWidth:2,opacity:Jt})),Pt&&Ae&&Ve.push(...ae.map(Sn=>({id:Cr,...Sn,rx:2*Qe,ry:2*Qe,backgroundColor:hi,opacity:Jt}))),w&&Ae&&Ve.push({id:Cr,points:[rt(w.origin.x+1,w.origin.y+1),rt(w.position.x+1,w.position.y+1)],strokeColor:hi,strokeWidth:2,opacity:Jt}),Tr&&Bi&&(re?Ve.push(...ae.map((Sn,En,xr)=>({id:Cr,points:Eo(xr,En),strokeColor:mi,strokeWidth:Qe,opacity:pi}))):Ve.push({id:Cr,points:ae,pathClose:ir,strokeColor:mi,strokeWidth:Qe,backgroundColor:Ht&&Pt&&st.backgroundColor&&st.backgroundColor[3]>0?st.backgroundColor:[0,0,0,0],opacity:pi})),Pt&&Ve.push(...ae.map(Sn=>({id:Cr,...Sn,rx:3*Qe,ry:3*Qe,backgroundColor:[.5,.5,.5],strokeWidth:Qe,strokeColor:mi}))),Pt&&Ht&&y.length>=3&&Ve.push({...ke,id:Cr,rx:Qe*(nn?5:4),ry:Qe*(nn?5:4),backgroundColor:nn?ni:[.5,.5,.5],strokeWidth:Qe,strokeColor:mi}),Pt&&Ht&&ie&&!nn&&d.length>=2&&Ve.push({...Te,id:Cr,rx:Qe*(Wi?5:4),ry:Qe*(Wi?5:4),backgroundColor:Wi?ni:[.5,.5,.5],strokeWidth:Qe,strokeColor:mi}),w&&Bi&&!re&&Ve.push({id:Cr,points:[{x:w.origin.x,y:w.origin.y},{x:w.position.x,y:w.position.y}],strokeColor:mi,strokeWidth:Qe,opacity:pi}),Rn(...Ve)})(vt,r,a&&qn(r)?A({...yr},!M):void 0),4194304&t.$$.dirty[4]&&(r||Sa()),262144&t.$$.dirty[4]&&i(168,R=!!$r),65536&t.$$.dirty[4]&&i(169,O=!!li),524288&t.$$.dirty[4]|28672&t.$$.dirty[5]&&(!yr||O||R||A({...yr},!M)),256&t.$$.dirty[2]|1028&t.$$.dirty[3]|8390656&t.$$.dirty[5]&&Ui>0&&n&&Se&&((L,st,ut,Wt)=>{const Pt=Se({x:0,y:0}),ie=Se({x:L,y:L}),Ht=Se({x:st.width,y:st.height}),_t=ie.x-Pt.x;if(Pe.set(_t>6?1:0),Wt<=0)return Si();const re=wr(_t,Pt.x,Ht.x).map(Ve=>({id:De,opacity:Wt,points:[{x:Ve,y:Pt.y},{x:Ve,y:Ht.y}],strokeWidth:1,strokeColor:ut})),te=wr(_t,Pt.y,Ht.y).map(Ve=>({id:De,opacity:Wt,points:[{x:Pt.x,y:Ve},{x:Ht.x,y:Ve}],strokeWidth:1,strokeColor:ut}));Ni(...te,...re)})(Ui,n,ei,Gt),512&t.$$.dirty[2]|4&t.$$.dirty[3]|49152&t.$$.dirty[4]|1024&t.$$.dirty[5]&&Se&&(T?Ze():((L,st,ut)=>{if(L===null&&st===null)return Ze();let Wt,Pt;L!==null&&(Wt={id:zi,strokeColor:ut,strokeWidth:1.5,points:[Se({x:L,y:0}),Se({x:L,y:bt.height})]}),st!==null&&(Pt={id:zi,strokeColor:ut,strokeWidth:1.5,points:[Se({x:0,y:st}),Se({x:bt.width,y:st})]}),xi(Wt,Pt)})(yo,lo,vi)),4&t.$$.dirty[2]&&(L=>{if(!L)return So({_prerender:!1});const st=Ot.find(ut=>ut.isEditing);st&&dn(st,{_prerender:di==="inline"})})(bi),4194304&t.$$.dirty[5]&&xt&&xt.length&&(()=>{const[L]=xt;L!==8&&L!==46||wi()&&(r.isEditing||setTimeout(()=>Yn(),0))})(),272&t.$$.dirty[0]&&Ye&&di==="inline"&&Ye.focus(),4194304&t.$$.dirty[4]&&i(164,z=r&&Kn(r)),4194304&t.$$.dirty[4]|512&t.$$.dirty[5]&&i(11,F=z&&bl(r)!==!1&&ja(r)),2048&t.$$.dirty[0]&&i(159,B=F?{...r}:void 0),16&t.$$.dirty[2]|16&t.$$.dirty[5]&&i(161,f=B&&Zn({...B},bt)),64&t.$$.dirty[5]&&i(163,V=f&&qo(f.text,f)),320&t.$$.dirty[5]&&(J=f&&An(f.x,f.y,V.width,V.height)),2048&t.$$.dirty[0]|4194304&t.$$.dirty[4]&&i(23,S=F?r.text:""),2056&t.$$.dirty[0]|16&t.$$.dirty[2]|4194304&t.$$.dirty[4]&&i(162,j=Ge&&r&&F&&Zn({...Nn(r),width:$i(r.width)?Math.floor(r.width):void 0,height:$i(r.height)?Math.floor(r.height):void 0},bt)),2064&t.$$.dirty[0]|128&t.$$.dirty[5]&&i(25,K=F&&((L,st)=>{const{textAlign:ut="left",fontFamily:Wt="sans-serif",fontWeight:Pt="normal",fontStyle:ie="normal",letterSpacing:Ht="normal",textShadowX:_t=0,textShadowY:re=0,textShadowBlur:te=0,textShadowColor:Ve,textOutlineWidth:ae=0,textOutlineColor:Te}=L,ke="!important",Jt=`caret-color:${lt};text-align:${ut}${ke};font-family:${Wt}${ke};font-weight:${Pt}${ke};font-style:${ie}${ke};letter-spacing:${$i(Ht)?Ht+"px":"normal"}${ke}`;if(st==="modal")return Jt;const Ae=ae?`;-webkit-text-stroke:${2*ae}px ${Pr(Te)} ${ke}`:"",pi=te||_t||re?`;text-shadow:${_t}px ${re}px ${te}px ${Pr(Ve)} ${ke}`:"";let Bi=L.fontSize,hi=1,mi="";Bi>1e3&&xa()&&(hi=Bi/1e3,mi=`transform-origin:0 0;transform:scale(${hi})`,Bi=1e3);let Qe=L.lineHeight/hi;const nn=Pr(L.color),Wi=.5*Math.max(0,Bi-Qe);return`--font-scalar:${hi};--bottom-inset:${Wi}px;padding:${Wi}px 0 0${ke};color:${nn}${ke};font-size:${Bi}px${ke};line-height:${Qe}px${ke};${Jt};${mi}${Ae}${pi}`})(j,di)),2052&t.$$.dirty[0]|536870912&t.$$.dirty[1]|2&t.$$.dirty[2]|128&t.$$.dirty[5]&&i(24,dt=F&&((L,st,ut,Wt)=>{let Pt,ie;L.width&&L.height?(Pt=Ti(L),ie=Aa(L)):(ie=qo(r.text,l),ie.width=l.width||ie.width,Pt=rt(L.x+.5*ie.width,L.y+.5*ie.height));const Ht=Math.max(0,L.fontSize-L.lineHeight)+L.lineHeight,_t=Se(Pt);let re=_t.x-st.x-.5*ie.width,te=_t.y-st.y-.5*ie.height,Ve=L.flipX,ae=L.flipY,Te=L.rotation;Ce&&Re?(Ve=!Ve,ae=!ae):Ce?(Ve=!Ve,Te=-Te):Re&&(ae=!ae,Te=-Te),Te+=Wt;const ke=ut*(Ve?-1:1),Jt=ut*(ae?-1:1);return`--line-height:${Ht}px;width:${ie.width}px;height:${ie.height}px;transform:translate(${re}px,${te}px) rotate(${Te}rad) scale(${ke}, ${Jt})`})(j,ye,He,Vt)),128&t.$$.dirty[2]&&(lt=Ue?Pr(Ue):"auto"),2320&t.$$.dirty[0]&&F&&Ye&&di==="inline"&&Fi(S),72351744&t.$$.dirty[4]&&i(150,N=r&&!c?r:N),67108864&t.$$.dirty[4]&&i(152,ft=N&&wb(N)),67108864&t.$$.dirty[4]&&i(147,$t=N&&js(N)),67108864&t.$$.dirty[4]&&i(149,Lt=N&&(L=>L.disableDuplicate!==!0&&$c(L))(N)),67108864&t.$$.dirty[4]&&i(148,ct=N&&Em(N)),67108864&t.$$.dirty[4]&&i(151,et=N&&(L=>L.disableReorder!==!0)(N)),67108864&t.$$.dirty[4]&&i(145,ht=N&&bl(N)!==!1),67108864&t.$$.dirty[4]&&i(153,Y=N&&Le(N,"backgroundImage")&&Bp(N,"opacity")),4194304&t.$$.dirty[4]&&i(155,Z=r&&r.format==="html"),5242880&t.$$.dirty[4]|1&t.$$.dirty[5]&&i(158,St=r&&(!c||Z)),131072&t.$$.dirty[4]|2097160&t.$$.dirty[5]&&fr.set(St&&!Kt?1:0,{hard:wt===!1}),4096&t.$$.dirty[0]|12&t.$$.dirty[5]&&i(157,nt=St&&x.length?(H=ar(x),Mo(rt(H.x+.5*H.width,H.y),Ec)):nt),512&t.$$.dirty[0]|32&t.$$.dirty[2]|4&t.$$.dirty[5]&&i(156,mt=nt&&er&&Me&&(L=>{const st=Me.x,ut=Me.y,Wt=st+Me.width;let Pt=Math.max(L.x-.5*er.width,st),ie=Math.max(L.y-er.height-16,ut);return Pt+er.width>Wt&&(Pt=Wt-er.width),rt(Pt,ie)})(nt)),131072&t.$$.dirty[0]|2&t.$$.dirty[5]&&i(22,Ft=mt&&`transform: translate(${mt.x}px, ${mt.y}px);opacity:${U}`),2048&t.$$.dirty[0]&&i(154,oe=F?"text":"shape"),1088&t.$$.dirty[0]|1610612736&t.$$.dirty[2]|32&t.$$.dirty[3]|2145386496&t.$$.dirty[4]|1048577&t.$$.dirty[5]&&i(21,Rt=oe==="text"&&ee&&Z?Lc(()=>ee([["div","text-styles",{class:"PinturaShapeControlsGroup"},[...[["bold",{label:"B",style:"font-weight:900;",title:"Bold",shortcut:["CMD","B"]}],["italic",{label:"I",style:"font-family:Times New Roman;font-style:italic;",title:"Italic",shortcut:["CMD","I"]}],["underline",{label:"U",style:"text-decoration:underline;",title:"Underline",shortcut:["CMD","U"]}],["strikeThrough",{label:"S",style:"text-decoration:line-through;",title:"Strikethrough",shortcut:["CMD","S"]}]].map(([L,st])=>["Button","style-"+L,{onclick:()=>document.execCommand(L),...st,style:"font-size:1.25em;text-underline-offset:1px;text-decoration-thickness:1.5px;font-weight:400;"+st.style}])]],["div","text-reset",{class:"PinturaShapeControlsGroup"},[["Button","style-reset",{onclick:()=>document.execCommand("removeFormat"),style:"font-weight:400;",label:'<span style="font-size:1.25em;font-style:italic;font-family:Times New Roman;text-decoration:underline;">T</span><span style="position:relative;top:.175rem;">&times;</span>',title:"Remove styles"}]]]],s)):oe==="shape"&&pe&&s?Lc(()=>pe([Y&&["div","alpha",{class:"PinturaShapeControlsGroup"},[["ToggleSlider","adjust-opacity",{onrelease:Qa,onchange:Fa,step:.01,value:Le(r,"opacity")?r.opacity:1,label:(L,st,ut)=>Math.round(L/ut*100)+"%",min:0,max:1,direction:"x"}]]],["div","beta",{class:"PinturaShapeControlsGroup"},[ft&&["Button","flip-horizontal",{onclick:Rs,label:xe.shapeTitleButtonFlipHorizontal,icon:xe.shapeIconButtonFlipHorizontal,hideLabel:!0}],ft&&Be&&["Button","flip-vertical",{onclick:Is,label:xe.shapeTitleButtonFlipVertical,icon:xe.shapeIconButtonFlipVertical,hideLabel:!0}],et&&["Button","to-front",{onclick:ka,label:xe.shapeTitleButtonMoveToFront,icon:xe.shapeIconButtonMoveToFront,hideLabel:!0,disabled:Ot[Ot.length-1]===N}],Lt&&["Button","duplicate",{onclick:Ca,label:xe.shapeTitleButtonDuplicate,icon:xe.shapeIconButtonDuplicate,shortcut:["CMD","D"],hideLabel:!0}],ct&&["Button","remove",{onclick:ol,label:xe.shapeTitleButtonRemove,icon:xe.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]].filter(Boolean)],ht&&$t&&["div","gamma",{class:"PinturaShapeControlsGroup"},[["Button","text-layout",{onclick:Ps,label:lr(on,xe,r),icon:lr(Nr,xe,r),hideLabel:!0}]]],ht&&["div","delta",{class:"PinturaShapeControlsGroup"},[["Button","edit-text",{label:xe.shapeLabelInputText,onclick:Ms}]]]].filter(Boolean),s)):[]),64&t.$$.dirty[0]|1048576&t.$$.dirty[5]&&i(20,Ut=Ot.filter(ha).filter(L=>L.id).filter(L=>!Co(L)).map(L=>({id:L.id,color:Kn(L)?L.color:or(L)?L.strokeColor:L.backgroundColor,name:L.name||xe["shapeLabelTool"+jy(Tb(L))]})))},[_,ve,ye,Ge,di,Mi,xe,un,Ye,er,s,F,x,l,p,m,h,U,Di,Uo,Ut,Rt,Ft,S,dt,K,C,k,g,$n,Vn,b=>{const{origin:H}=b.detail;i(140,li=void 0),W=void 0,ne=void 0,Ii=!1,wn=void 0,ri=!1,Dn(),clearTimeout(Wn),Wn=setTimeout(()=>i(141,Kt=!0),250);const L=uo();if(!L||qn(L)&&Le(L,"pathClose")||wo(),qr=Dt(_e(H)),L&&qn(L)&&Le(L,"pathClose"))return Li(b);const st=kr(Ot,qr,ui,Wt=>ha(Wt)),ut=st.length&&st.shift();if(r&&ja(r)&&(rn(),yi&&(ri=!0)),!ut&&r&&ja(r)&&Yr(r),!!ge(H)){if(ut&&cs(ut))return Ii=!0,i(140,li=ut),W=Nn(li),void(ne=Zn(Nn(li),bt));wn=ut||void 0,!Li(b)&&ut&&(un(ut),i(140,li=ut),W=Nn(li),ne=Zn(Nn(li),bt))}},b=>{we(),Bt(b)},b=>{const{translation:H,ctrlKey:L,metaKey:st,shiftKey:ut,position:Wt}=b.detail;if(li){if(!$c(li)||ja(li))return;if(ut){let Pt=Math.abs(H.x),ie=Math.abs(H.y);Ei==="x"&&(ie-=64),Ei==="y"&&(Pt-=64),Pt>ie?(H.y=0,Ei="x"):ie>Pt&&(H.x=0,Ei="y")}else Ei=null;return xo(li,ne,H,{...mn(L||st?0:he,Ui,n,li)})}X(b)},b=>{we(),li?ja(li)?xn():b.detail.isTap&&Ii&&Kn(li)&&bl(li)!==!1&&hr(li):jt(b)},b=>{const H=wn&&b.detail.isTap;if(b.detail.isTap&&setTimeout(()=>{it({target:li||wn,position:qr},0)}),li)return Ee(li),L=li,st=W,JSON.stringify(L)!==JSON.stringify(st)&&Qt(li),void i(140,li=void 0);var L,st;const ut=Xr(),Wt=!ut||Zt(ut,wn||void 0);Wt&&no({storePrevious:!1}),G(b),Wt&&H&&un(wn)},Pe,b=>{i(141,Kt=!0),i(140,li=r),ne=l},b=>{if(!li)return void i(141,Kt=!1);const{translation:H,indexes:L,shiftKey:st,ctrlKey:ut,metaKey:Wt}=b.detail;((Pt,ie,Ht,_t,re)=>{const{snapThreshold:te=0,gridSize:Ve=0,gridRect:ae,snapTargets:Te=[]}=re||{},ke=te?(Jt,Ae,pi)=>{const{snapTranslation:Bi,snapLines:hi}=Zr(Mn(Jt),Te,te,Ve,ae);eo(Ae,Bi),so(hi);const mi=Ar(pi(),Ae);Jt.x=mi.x,Jt.y=mi.y}:me;if(or(Pt)||qn(Pt)&&Le(Pt,"pathClose")){const[Jt]=Ht,Ae=xt.includes(16)?_n:(Qe,nn)=>nn;let pi,Bi,hi;if(or(Pt))Jt===0?(pi=()=>Ua(ie),Bi=Qe=>Ae(Ga(ie),Qe),hi=(Qe,nn)=>{Qe.x1=nn.x,Qe.y1=nn.y}):Jt===1&&(pi=()=>Ga(ie),Bi=Qe=>Ae(Ua(ie),Qe),hi=(Qe,nn)=>{Qe.x2=nn.x,Qe.y2=nn.y});else{const Qe=ie.points;pi=()=>({...Qe[Jt]}),Bi=nn=>{const Wi=Qe[mu(Jt-1,Qe)],Tr=Qe[mu(Jt+1,Qe)];Ae(Wi,nn),Ae(Tr,nn)},hi=(nn,Wi)=>nn.points=nn.points.map((Tr,ir)=>Jt===ir?Wi:Tr)}const mi=Ar(pi(),_t);ke(mi,_t,pi),Bi(mi),hi(Pt,mi)}else if(Ys(Pt)||Jn(Pt)||Kd(Pt)){let Jt,Ae,pi=!1;if(Jn(Pt))Jt=Q1(ie);else if(Ys(Pt))Jt=ls(ie);else{pi=!0,Jt=ls(ie);const Wi=qo(ie.text,ie);Jt.height=Wi.height}Pt.aspectRatio?Ae=Pt.aspectRatio:re.shiftKey&&!pi&&(Ae=Jt.width/Jt.height);const Bi=ls(Jt),hi=Ti(Bi),mi=Pt.rotation,Qe=_o(Bi),nn=Mr(Bi,mi);if(Ht.length===1){let Wi=Ht[0];Pt.flipX&&(Wi=bo[Wi]),Pt.flipY&&(Wi=Io[Wi]);const[Tr,ir,Sn,En]=Qe,xr=Se(nn[Wi]),Kr=Bn({...xr},_t),Ta=Dt(Kr);ke(Ta,_t,()=>Dt(xr));const As=rt(Ta.x-nn[Wi].x,Ta.y-nn[Wi].y),Da=Jr(_e(As),-mi),Ma=rt(Qe[Wi].x+Da.x,Qe[Wi].y+Da.y);let Go;Wi===0&&(Go=Sn),Wi===1&&(Go=En),Wi===2&&(Go=Tr),Wi===3&&(Go=ir);const Ao=ar([Go,Ma]);if(Ae){const{width:es,height:is}=to(Ao,Ae),[Wl,ca,da,nr]=tl(Ao);Ao.width=es,Ao.height=is,Ma.y<Go.y&&(Ao.y=da-is),Ma.x<Go.x&&(Ao.x=ca-es)}const ts=Mr(Ao,mi,hi),la=Oo(ts),Ba=Jr(ts[0],-mi,la),Lo=Jr(ts[2],-mi,la),Oa=ar([Ba,Lo]);vn(Pt,Jn(Pt)?am(Oa):Oa,bt)}else{Ht=Ht.map(nr=>(Pt.flipX&&(nr=bo[nr]),Pt.flipY&&(nr=Io[nr]),nr));const[Wi,Tr]=Ht.map(nr=>nn[nr]),ir={x:Wi.x+.5*(Tr.x-Wi.x),y:Wi.y+.5*(Tr.y-Wi.y)},[Sn,En]=Ht.map(nr=>Qe[nr]),[xr,Kr]=Ht.map(nr=>{const ua=nr+2;return ua<4?Qe[ua]:Qe[ua-4]}),Ta={x:xr.x+.5*(Kr.x-xr.x),y:xr.y+.5*(Kr.y-xr.y)},As=Se(ir),Da=Bn({...As},_t),Ma=Dt(Da);ke(Ma,_t,()=>Dt(As));const Go=rt(Ma.x-ir.x,Ma.y-ir.y),Ao=Jr(_e(Go),-mi),ts=On(_e(Sn),En),la=Mo(ts,nr=>1-Math.abs(Math.sign(nr))),Ba=rt(Ao.x*la.x,Ao.y*la.y);Bn(Sn,Ba),Bn(En,Ba);const Lo=ar(Qe);if(Ae){let nr=Lo.width,ua=Lo.height;la.y===0?ua=nr/Ae:nr=ua*Ae,Lo.width=nr,Lo.height=ua,la.y===0?Lo.y=Ta.y-.5*ua:Lo.x=Ta.x-.5*nr}const Oa=Mr(Lo,mi,hi),es=Oo(Oa),is=Jr(Oa[0],-mi,es),Wl=Jr(Oa[2],-mi,es),ca=ar([is,Wl]);let da;Jn(Pt)?da=am(ca):Ys(Pt)?da=ca:pi&&(da={x:ca.x,y:ca.y,width:ca.width}),vn(Pt,da,bt)}}Sr()})(li,ne,L,H,{shiftKey:st,...mn(ut||Wt?0:he,Ui,n,li)})},b=>{if(!li)return void i(141,Kt=!1);un(li);const{isTap:H}=b.detail;H&&Ee(li),i(140,li=void 0),i(141,Kt=!1),Qt(r)},b=>{co=pn(l).origin,i(141,Kt=!0),i(140,li=r),ne=l},b=>{if(!li)return void i(141,Kt=!1);const{translation:H,shiftKey:L}=b.detail;((st,ut,Wt,Pt)=>{const ie=ho(Zn(Nn(st),bt)),Ht=Ti(ie),_t=Ar(co,Wt);let re=Id(_t,Ht)+Math.PI/2;if(Pt.shiftKey){const te=Math.PI/16;re=te*Math.round(re/te)-Vt%te}vn(st,{rotation:re},bt),Sr()})(li,0,H,{shiftKey:L})},()=>{li?(un(li),i(140,li=void 0),i(141,Kt=!1),Qt(r)):i(141,Kt=!1)},b=>{const{key:H}=b,L=/escape/i.test(H);if(wi())return L?(b.preventDefault(),b.stopPropagation(),Yr(r)):void(Lt&&H==="d"&&(b.metaKey||b.ctrlKey)&&(b.preventDefault(),b.stopPropagation(),Lr()))},b=>{const H=bl(r,b);return H===!0?b:H},In,b=>{const{target:H,key:L}=b,st=H.value||H.innerText,ut=H.selectionStart||0,Wt=H.selectionEnd||st.length,Pt=st.substring(0,ut)+L+st.substring(Wt);if(bl(r,Pt)!==Pt)return b.preventDefault()},b=>lu(r)&&/enter/i.test(b.code)&&r.disableNewline!==!1?b.preventDefault():/arrow/i.test(b.code)?b.stopPropagation():/escape/i.test(b.key)?xn():void 0,b=>{const{key:H,ctrlKey:L,altKey:st}=b;if(/enter/i.test(H)&&(L||st))return rn()},rn,xn,fr,b=>{const H=_r();H&&(ja(H)||$c(H)&&(i(140,li=H),ne=Zn(Nn(li),bt),xo(li,ne,b.detail)))},b=>{i(18,Di=!0)},({relatedTarget:b})=>{b&&b.classList.contains("shape-selector__button")||i(18,Di=!1)},b=>{if(b.pointerType==="touch"||b.target.className!=="PinturaShapeEditor")return void Xt();(Kt||Wn)&&al(void 0);const H=ih(b,Ge);i(143,yr=_e(H));const L=Mo(Dt(H),ut=>Math.round(ut));if(ds(L,Es)||(Es=_e(L),Ke(Kt,H,L),Kt||Wn)||c)return;const[st]=kr(Ot,L,0,ha);st&&Co(st)||al(st)},b=>{b.pointerType!=="touch"&&Xt()},be,$e,gi,Vt,Ce,Re,He,bi,vt,bt,Me,ni,Ue,ei,vi,Li,X,jt,G,Bt,fe,Qt,se,zt,We,Ee,je,Ke,it,Xt,Nt,Zt,Yt,ot,pe,ee,ge,Dt,Se,fi,ui,Be,yi,he,Ie,an,Ui,tn,Yi,Fn,Xn,jn,vr,Un,(b,H={})=>{let L,st,ut,Wt=Jn(b),Pt=Kn(b),ie=H.position==="relative";const Ht=yn(),_t=ae=>{if(!he)return ae;const Te=Dt(ae),{snapTranslation:ke,snapLines:Jt}=Zr(Mn(Te),Ht,he,Ui,n);return eo(ae,ke),so(Jt),ae},re=!!Xr(),te=H.isSelection?gi:ve,Ve=H.inputMode==="step";if(qn(b)){if(Ve){let ae=!1;const Te=(ke,Jt)=>{const Ae=Yi(te),pi=ke&&rt(Gd(ke.x,bt.width),Gd(ke.y,bt.height)),Bi=pi&&Se(pi);xt.includes(16)&&Bi&&_n(Bi,Jt);const hi=Dt(Jt),mi=Ae.points.length?Ae.points[0]:hi,Qe=rt(Gd(mi.x,bt.width),Gd(mi.y,bt.height)),nn=Se(Qe),Wi=Bo(nn,Jt);if(!ae&&Ae.points.length===1&&Wi<36)return Xn(te);if(Ae.points.length>2&&Wi<=256){Ae.pathClose=!0,ha(Ae)&&un(Ae);const Sn=jn(te);return void fe(Sn)}const Tr=Ae.strokeWidth&&Ae.strokeColor&&(Ae.strokeColor[3]===void 0||Ae.strokeColor[3]>0),ir=Bo(Bi,Jt);if(Tr&&Ae.points.length>1&&ir<256){Ae.pathClose=!1,Ae.backgroundColor=[0,0,0,0],ha(Ae)&&un(Ae);const Sn=jn(te);fe(Sn)}else if(!(Ae.points.length>0&&ir<100))return ie?mc(hi,bt):hi};return{start:ke=>{const Jt=Yi(te),{origin:Ae}=ke.detail;if(st=4,L=_t(_e(Ae)),ut=_e(L),Jt){const pi=Jt.points[Jt.points.length-1],Bi=Te(pi,L);return Bi&&(Jt.points=[...Jt.points,Bi]),void vr({points:Jt.points},te)}ae=!0},update:ke=>{if(!ae)return;const Jt=Yi(te);if(!Jt)return;const Ae=Jt.points[0],pi=Te(Ae,rt(L.x+ke.detail.translation.x,L.y+ke.detail.translation.y));pi&&(Jt.points[1]=pi,vr({points:Jt.points},te))},release:ke=>ke.detail.preventInertia(),end:ke=>{if(!ae)return;const Jt=Dt(L),Ae=ie?mc(Jt,bt):Jt,{isTap:pi}=ke.detail;if(pi&&kr(Ot,Jt,0,ha).length)return Xn(te);Fn({...b,points:[Ae]},te)}}}return{start:ae=>{const{origin:Te}=ae.detail;st=4,L=_e(Te),ut=_e(L);const ke=Dt(L),Jt=ie?mc(ke,bt):ke;Fn({...b,points:[Jt]},te)},update:ae=>{const Te=Yi(te),{translation:ke}=ae.detail,Jt=rt(L.x+ke.x,L.y+ke.y),Ae=$o(ut,Jt);if(ii(Ae,5)<=st)return;const pi=Id(Jt,ut),Bi=st-Ae;ut.x+=Bi*Math.cos(pi),ut.y+=Bi*Math.sin(pi);const hi=Dt(ut),mi=ie?mc(hi,bt):hi;vr({points:Te.points.concat(mi)},te)},release:ae=>ae.detail.preventInertia(),cancel:()=>{Xn(te)},end:ae=>{const Te=Yi(te);if(ae.detail.isTap){let Jt=!1;if(Te.bitmap?(wn&&(Jt=!0),re&&(Jt=!0)):Jt=!0,Jt)return Xn(te)}const ke=jn(te);fe(ke)}}}return Wt||Pt||To(b)?{start:ae=>{const{origin:Te}=ae.detail;L=_t(_e(Te));const ke=Dt(L),Jt=ie?mc(ke,bt):ke,Ae=-1*Pi(Vt,Ce,Re),pi={...b,rotation:Ae,...Jt};pi.flipX=Ce,pi.flipY=Re,delete pi.position,pi.opacity=0,(Wt?["rx","ry"]:["width","height"]).forEach(Bi=>{pi[Bi]=ie?"0%":0}),Fn(pi,te)},update:ae=>{const Te=Yi(te);Te.opacity=1;let{aspectRatio:ke}=Te,{translation:Jt,shiftKey:Ae,ctrlKey:pi}=ae.detail;!ke&&Ae&&(ke=1);const Bi=_t(rt(L.x+Jt.x,L.y+Jt.y)),hi=Dt(L),mi=Dt(Bi);if(ke){const xr=ar([hi,mi]),Kr=to(xr,ke);mi.x=hi.x+Kr.width,mi.y=hi.y+Kr.height}const Qe={x:hi.x+.5*(mi.x-hi.x),y:hi.y+.5*(mi.y-hi.y)},nn=Pi(Vt,Ce,Re);Jr(hi,nn,Qe),Jr(mi,nn,Qe);const Wi=Math.min(hi.x,mi.x),Tr=Math.min(hi.y,mi.y);let ir=Math.max(hi.x,mi.x)-Wi,Sn=Math.max(hi.y,mi.y)-Tr,En={};Wt?(pi?(En.x=hi.x,En.y=hi.y):(En.x=Wi+.5*ir,En.y=Tr+.5*Sn),En.rx=.5*ir,En.ry=.5*Sn):(pi?(En.x=hi.x-.5*ir,En.y=hi.y-.5*Sn):(En.x=Wi,En.y=Tr),En.width=ir,En.height=Sn),vr(En,te,(xr,Kr)=>vn(xr,Kr,bt))},release:ae=>{ae.detail.preventInertia()},cancel:ae=>{Xn(te)},end:ae=>{const Te=Yi(te);if(ae.detail.isTap){if(Kn(Te)&&yi&&ri||!Kn(Te)||!yi||wn)return Xn(te);delete Te.width,delete Te.height,Te.disableNewline!==!1&&delete Te.textAlign;const ke=Zn({...Te},bt),Jt=qo(Te.text,ke),Ae=Dt({x:L.x,y:L.y-.5*Jt.height}),pi=Dt({x:L.x+Jt.width,y:L.y+.5*Jt.height}),Bi={x:Ae.x+.5*(pi.x-Ae.x),y:Ae.y+.5*(pi.y-Ae.y)},hi=Pi(Vt,Ce,Re);Jr(Ae,hi,Bi),Jr(pi,hi,Bi);let mi=Math.min(Ae.x,pi.x),Qe=Math.min(Ae.y,pi.y);mi<0&&(mi=0),Qe<0&&(Qe=0),mi+Jt.width>bt.width&&(mi=bt.width-Jt.width),Qe+Jt.height>bt.height&&(Qe=bt.height-Jt.height),Te.x=Oe(Te.x)?Hr(mi,bt.width):mi,Te.y=Oe(Te.y)?Hr(Qe,bt.height):Qe}if(Te.opacity=1,Kn(Te))fe(Te);else{const ke=jn(te);fe(ke)}ha(Te)&&un(Te),Kn(Te)&&hr(Te)}}:or(b)?{start:ae=>{const{origin:Te}=ae.detail,ke=Dt(_t(Te)),Jt=Mo(ke,Ec);L=_e(Te),Fn({...b,x1:ie?Hr(Jt.x,bt.width):Jt.x,y1:ie?Hr(Jt.y,bt.height):Jt.y,x2:ie?Hr(Jt.x,bt.width):Jt.x,y2:ie?Hr(Jt.y,bt.height):Jt.y,opacity:0},te)},update:ae=>{const{translation:Te}=ae.detail,ke=_t(Bn(_e(L),Te));if(xt.includes(16)){const Ae=$o(L,ke),pi=Id(L,ke),Bi=Math.PI/4,hi=Bi*Math.round(pi/Bi);ke.x=L.x+Ae*Math.cos(hi),ke.y=L.y+Ae*Math.sin(hi)}const Jt=Dt(ke);vr({x2:ie?Hr(Jt.x,bt.width):Jt.x,y2:ie?Hr(Jt.y,bt.height):Jt.y,opacity:1},te)},release:ae=>ae.detail.preventInertia(),cancel:ae=>{Xn(te)},end:ae=>{const Te=Yi(te);if(ae.detail.isTap)return Xn(te);Te.opacity=1;const ke=jn(te);fe(ke),ha(Te)&&un(ke)}}:void 0},()=>{let b,H;const L=fi*fi,st=(ut,Wt,Pt=!1)=>{const ie=Bo(ut,Wt);if(!Pt&&ie<2)return!1;const Ht=Ot.filter(re=>!re.disableErase);let _t;return _t=ie<L?kr(Ot,Dt(Wt),fi):ro(Ht,Dt(ut),Dt(Wt),fi),mr(_t).forEach(We),!0};return{start:ut=>{b=rt(Math.round(ut.detail.origin.x),Math.round(ut.detail.origin.y)),st(b,b,!0),H=b},update:ut=>{const{translation:Wt}=ut.detail,Pt=rt(Math.round(b.x+Wt.x),Math.round(b.y+Wt.y));st(H,Pt)&&(H=_e(Pt))},release:ut=>ut.detail.preventInertia(),end:()=>{}}},uo,vo,b=>{if(!uo())return Dp(b),Un(b)},wo,Wr,(b={})=>({id:ia(),...b}),Sr,io,dn,tr,(b,H,L=!0)=>{Ot.forEach(st=>tr(st,b,H,!1)),L&&Sr()},So,_r,wi,Pn,Yn,no,Yr,hr,po,mr,Gn,ho,kr,ro,yo,lo,li,Kt,$r,yr,c,ht,r,$t,ct,Lt,N,et,ft,Y,oe,Z,mt,nt,St,B,a,f,j,V,z,T,n,M,R,O,y,w,d,o,u,Ot,wt,xt,Gt,function(b){Gr.call(this,t,b)},b=>un(ve[b]),function(b){Ai[b?"unshift":"push"](()=>{Ye=b,i(8,Ye)})},function(){S=this.value,i(23,S),i(11,F),i(146,r),i(164,z),i(0,_),i(175,Ot)},function(b){Ai[b?"unshift":"push"](()=>{Ye=b,i(8,Ye)})},()=>{Uo&&Uo.focus()},b=>i(9,er=b.detail),function(b){Ai[b?"unshift":"push"](()=>{Uo=b,i(19,Uo)})},b=>ih(b,Ge)]}class ES extends si{constructor(e){super(),ai(this,e,IS,RS,ti,{uid:57,ui:58,disabled:0,shapes:1,selection:59,offset:2,contextRotation:60,contextFlipX:61,contextFlipY:62,contextZoom:63,active:64,opacity:65,parentRect:66,rootRect:3,utilRect:67,hoverColor:68,caretColor:69,gridColor:70,snapColor:71,textInputMode:4,oninteractionstart:72,oninteractionupdate:73,oninteractionrelease:74,oninteractionend:75,oninteractioncancel:76,onaddshape:77,onupdateshape:78,onselectshape:79,onblurshape:80,onremoveshape:81,ontapshape:82,onhovershape:83,onhovercanvas:84,ontapcanvas:85,onleavecanvas:86,beforeSelectShape:87,beforeDeselectShape:88,beforeRemoveShape:89,beforeUpdateShape:90,willRenderShapeControls:91,willRenderShapeTextControls:92,willStartInteraction:93,mapEditorPointToImagePoint:94,mapImagePointToEditorPoint:95,eraseRadius:96,selectRadius:97,enableButtonFlipVertical:98,enableTapToAddText:99,enableTextStyleControls:5,locale:6,snapThreshold:100,snapPointer:101,enableSnapToContext:102,gridSize:103,syncShapeCollection:104,getShapeDraft:105,addShapeDraft:106,discardShapeDraft:107,confirmShapeDraft:108,updateShapeDraft:109,addShape:110,createShape:111,eraseShape:112,getMarkupItemDraft:113,getMarkupItemDraftIndex:114,addMarkupItemDraft:115,confirmMarkupItemDraft:116,discardMarkupItemDraft:117,createMarkupItem:118,syncShapes:119,removeMarkupShapeProps:120,updateMarkupShape:121,updateMarkupShapeProperty:122,updateMarkupItemsShapeProperty:123,updateMarkupShapeItems:124,getActiveMarkupItem:125,hasActiveMarkupItem:126,removeShape:127,removeActiveMarkupItem:128,blurShapes:129,selectShape:7,deselectMarkupItem:130,editMarkupItem:131,finishEditMarkupItem:132,removeMarkupItems:133,getTextShapeRect:134,getMarkupShapeRect:135,getShapesNearPosition:136,getShapesBetweenPoints:137},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get syncShapeCollection(){return this.$$.ctx[104]}get getShapeDraft(){return this.$$.ctx[105]}get addShapeDraft(){return this.$$.ctx[106]}get discardShapeDraft(){return this.$$.ctx[107]}get confirmShapeDraft(){return this.$$.ctx[108]}get updateShapeDraft(){return this.$$.ctx[109]}get addShape(){return this.$$.ctx[110]}get createShape(){return this.$$.ctx[111]}get eraseShape(){return this.$$.ctx[112]}get getMarkupItemDraft(){return this.$$.ctx[113]}get getMarkupItemDraftIndex(){return this.$$.ctx[114]}get addMarkupItemDraft(){return this.$$.ctx[115]}get confirmMarkupItemDraft(){return this.$$.ctx[116]}get discardMarkupItemDraft(){return this.$$.ctx[117]}get createMarkupItem(){return this.$$.ctx[118]}get syncShapes(){return this.$$.ctx[119]}get removeMarkupShapeProps(){return this.$$.ctx[120]}get updateMarkupShape(){return this.$$.ctx[121]}get updateMarkupShapeProperty(){return this.$$.ctx[122]}get updateMarkupItemsShapeProperty(){return this.$$.ctx[123]}get updateMarkupShapeItems(){return this.$$.ctx[124]}get getActiveMarkupItem(){return this.$$.ctx[125]}get hasActiveMarkupItem(){return this.$$.ctx[126]}get removeShape(){return this.$$.ctx[127]}get removeActiveMarkupItem(){return this.$$.ctx[128]}get blurShapes(){return this.$$.ctx[129]}get selectShape(){return this.$$.ctx[7]}get deselectMarkupItem(){return this.$$.ctx[130]}get editMarkupItem(){return this.$$.ctx[131]}get finishEditMarkupItem(){return this.$$.ctx[132]}get removeMarkupItems(){return this.$$.ctx[133]}get getTextShapeRect(){return this.$$.ctx[134]}get getMarkupShapeRect(){return this.$$.ctx[135]}get getShapesNearPosition(){return this.$$.ctx[136]}get getShapesBetweenPoints(){return this.$$.ctx[137]}}function AS(t){let e,i,n;return i=new fo({props:{items:t[2]}}),{c(){e=pt("ul"),At(i.$$.fragment),v(e,"class","PinturaShapeStyleList")},m(r,o){tt(r,e,o),It(i,e,null),n=!0},p(r,o){const a={};4&o&&(a.items=r[2]),i.$set(a)},i(r){n||(P(i.$$.fragment,r),n=!0)},o(r){D(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Et(i)}}}function LS(t){let e,i;return e=new wa({props:{class:"PinturaShapeStyles",elasticity:t[0],$$slots:{default:[zS]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};1&r&&(o.elasticity=n[0]),131076&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function zS(t){let e,i,n;return i=new fo({props:{items:t[2]}}),{c(){e=pt("ul"),At(i.$$.fragment),v(e,"class","PinturaShapeStyleList")},m(r,o){tt(r,e,o),It(i,e,null),n=!0},p(r,o){const a={};4&o&&(a.items=r[2]),i.$set(a)},i(r){n||(P(i.$$.fragment,r),n=!0)},o(r){D(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Et(i)}}}function FS(t){let e,i,n,r;const o=[LS,AS],a=[];function s(l,c){return l[1]?0:1}return i=s(t),n=a[i]=o[i](t),{c(){e=pt("div"),n.c(),v(e,"style",t[3])},m(l,c){tt(l,e,c),a[i].m(e,null),r=!0},p(l,[c]){let d=i;i=s(l),i===d?a[i].p(l,c):(ze(),D(a[d],1,1,()=>{a[d]=null}),Fe(),n=a[i],n?n.p(l,c):(n=a[i]=o[i](l),n.c()),P(n,1),n.m(e,null)),(!r||8&c)&&v(e,"style",l[3])},i(l){r||(P(n),r=!0)},o(l){D(n),r=!1},d(l){l&&Q(e),a[i].d()}}}function DS(t,e,i){let n,r,o,a,s,l,{isActive:c=!1}=e,{controls:d=[]}=e,{locale:u}=e,{scrollElasticity:p}=e,{scrollEnable:h=!0}=e,{hideTitles:g=!1}=e,{willRenderControls:m=Zi}=e;const y=ln("redrawTrigger");E(t,y,C=>i(14,a=C));const x=ln("env");E(t,x,C=>i(13,o=C));const k=ln("isAnimated");E(t,k,C=>i(16,l=C));const w=oi(0,{stiffness:.25,damping:.9});return E(t,w,C=>i(15,s=C)),t.$$set=C=>{"isActive"in C&&i(8,c=C.isActive),"controls"in C&&i(9,d=C.controls),"locale"in C&&i(10,u=C.locale),"scrollElasticity"in C&&i(0,p=C.scrollElasticity),"scrollEnable"in C&&i(1,h=C.scrollEnable),"hideTitles"in C&&i(11,g=C.hideTitles),"willRenderControls"in C&&i(12,m=C.willRenderControls)},t.$$.update=()=>{65792&t.$$.dirty&&w.set(c?1:0,{hard:l===!1}),33024&t.$$.dirty&&i(3,n=`opacity:${s};${c?"":"pointer-events:none;"}${s<=0?"visibility:hidden":""}`),32256&t.$$.dirty&&i(2,r=a&&m(d.map(C=>["ShapeStyle",C.id,{title:C.componentProps.title,locale:u,hideTitle:g,items:[[C.component,C.id,C.componentProps]]}]),o,()=>y.set({})))},[p,h,r,n,y,x,k,w,c,d,u,g,m,o,a,s,l]}class BS extends si{constructor(e){super(),ai(this,e,DS,FS,ti,{isActive:8,controls:9,locale:10,scrollElasticity:0,scrollEnable:1,hideTitles:11,willRenderControls:12})}}function yf(t,e,i){const n=t.slice();return n[15]=e[i].key,n[6]=e[i].controls,n[16]=e[i].isActive,n}function xf(t,e){let i,n,r;return n=new BS({props:{isActive:e[16],controls:e[6],locale:e[1],scrollElasticity:e[2],scrollEnable:e[3],hideTitles:e[4],willRenderControls:e[5]}}),{key:t,first:null,c(){i=Tn(),At(n.$$.fragment),this.first=i},m(o,a){tt(o,i,a),It(n,o,a),r=!0},p(o,a){e=o;const s={};128&a&&(s.isActive=e[16]),128&a&&(s.controls=e[6]),2&a&&(s.locale=e[1]),4&a&&(s.scrollElasticity=e[2]),8&a&&(s.scrollEnable=e[3]),16&a&&(s.hideTitles=e[4]),32&a&&(s.willRenderControls=e[5]),n.$set(s)},i(o){r||(P(n.$$.fragment,o),r=!0)},o(o){D(n.$$.fragment,o),r=!1},d(o){o&&Q(i),Et(n,o)}}}function OS(t){let e,i,n,r=[],o=new Map,a=t[7];const s=l=>l[15];for(let l=0;l<a.length;l+=1){let c=yf(t,a,l),d=s(c);o.set(d,r[l]=xf(d,c))}return{c(){e=pt("div");for(let l=0;l<r.length;l+=1)r[l].c();v(e,"class",i=ci(["PinturaShapeStyleEditor",!t[3]&&"PinturaShapeStyleEditorOverflow",t[0]]))},m(l,c){tt(l,e,c);for(let d=0;d<r.length;d+=1)r[d].m(e,null);n=!0},p(l,[c]){190&c&&(a=l[7],ze(),r=La(r,c,s,1,l,a,o,e,Ss,xf,null,yf),Fe()),(!n||9&c&&i!==(i=ci(["PinturaShapeStyleEditor",!l[3]&&"PinturaShapeStyleEditorOverflow",l[0]])))&&v(e,"class",i)},i(l){if(!n){for(let c=0;c<a.length;c+=1)P(r[c]);n=!0}},o(l){for(let c=0;c<r.length;c+=1)D(r[c]);n=!1},d(l){l&&Q(e);for(let c=0;c<r.length;c+=1)r[c].d()}}}function WS(t,e,i){let n,r,o,{class:a}=e,{controls:s={}}=e,{shape:l}=e,{onchange:c}=e,{locale:d}=e,{scrollElasticity:u}=e,{scrollEnable:p=!0}=e,{hideTitles:h=!1}=e,{willRenderControls:g}=e;const m=[];return t.$$set=y=>{"class"in y&&i(0,a=y.class),"controls"in y&&i(6,s=y.controls),"shape"in y&&i(8,l=y.shape),"onchange"in y&&i(9,c=y.onchange),"locale"in y&&i(1,d=y.locale),"scrollElasticity"in y&&i(2,u=y.scrollElasticity),"scrollEnable"in y&&i(3,p=y.scrollEnable),"hideTitles"in y&&i(4,h=y.hideTitles),"willRenderControls"in y&&i(5,g=y.willRenderControls)},t.$$.update=()=>{64&t.$$.dirty&&i(11,n=Object.keys(s).filter(y=>s[y])),2304&t.$$.dirty&&i(10,r=l&&Object.keys(l).length&&n&&Bp(l)?(y=>n.filter(x=>x.split("_").every(k=>Le(y,k)&&Bp(y,k))).map(x=>{const k=(y.settings&&y.settings[x]||{}).control||x,w=x.split("_"),C=w.length>1?w.map(T=>y[T]):y[x];if(Qi(s[k])){const{title:T,component:z}=s[k](C,F=>{c({[x]:F})},{selectedShapeId:y.id});return{id:k,component:fo,componentProps:{title:T,items:z}}}let[M,R]=s[k];if(Oe(M)&&s[M]){const T={...R};[M,R]=s[M],R={...R,...T}}const O=Qi(R.options)?R.options(y):R.options;return{id:k,component:M,componentProps:{...R,options:O,locale:d,value:C,optionLabelClass:"PinturaButtonLabel",onchange:T=>{const z=el(T)&&!Ln(T)?T.value:T;R.onchange&&R.onchange(z,y);const F=w.length>1?w.reduce((B,f,V)=>({...B,[f]:Array.isArray(z)?z[V]:z}),{}):{[x]:z};c(F)}}}}).filter(Boolean))(l):[]),1280&t.$$.dirty&&i(7,o=((y,x)=>{let k=m.find(w=>w.key===y);return k||(k={key:y,controls:x},m.push(k)),m.forEach(w=>w.isActive=!1),k.controls=x,k.isActive=!0,m})(l&&Object.keys(l).length?Object.keys(l).join("_"):"none",r||[]))},[a,d,u,p,h,g,s,o,l,c,r,n]}class Ru extends si{constructor(e){super(),ai(this,e,WS,OS,ti,{class:0,controls:6,shape:8,onchange:9,locale:1,scrollElasticity:2,scrollEnable:3,hideTitles:4,willRenderControls:5})}}var j2=t=>/<svg /.test(t);function _S(t){let e,i;return e=new fo({props:{items:t[10]}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};1024&r&&(o.items=n[10]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function VS(t){let e,i,n,r;const o=[HS,NS],a=[];function s(l,c){return l[8]?0:1}return e=s(t),i=a[e]=o[e](t),{c(){i.c(),n=Tn()},m(l,c){a[e].m(l,c),tt(l,n,c),r=!0},p(l,c){let d=e;e=s(l),e===d?a[e].p(l,c):(ze(),D(a[d],1,1,()=>{a[d]=null}),Fe(),i=a[e],i?i.p(l,c):(i=a[e]=o[e](l),i.c()),P(i,1),i.m(n.parentNode,n))},i(l){r||(P(i),r=!0)},o(l){D(i),r=!1},d(l){a[e].d(l),l&&Q(n)}}}function NS(t){let e,i,n,r,o=t[10]&&bf(t);return n=new wa({props:{scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[jS]},$$scope:{ctx:t}}}),{c(){e=pt("div"),o&&o.c(),i=ce(),At(n.$$.fragment),v(e,"class","PinturaShapePresetsFlat")},m(a,s){tt(a,e,s),o&&o.m(e,null),Tt(e,i),It(n,e,null),r=!0},p(a,s){a[10]?o?(o.p(a,s),1024&s&&P(o,1)):(o=bf(a),o.c(),P(o,1),o.m(e,i)):o&&(ze(),D(o,1,1,()=>{o=null}),Fe());const l={};512&s&&(l.scrollAutoCancel=a[9]),1&s&&(l.elasticity=a[0]),536871070&s&&(l.$$scope={dirty:s,ctx:a}),n.$set(l)},i(a){r||(P(o),P(n.$$.fragment,a),r=!0)},o(a){D(o),D(n.$$.fragment,a),r=!1},d(a){a&&Q(e),o&&o.d(),Et(n)}}}function HS(t){let e,i,n,r,o;i=new wa({props:{elasticity:t[0],class:"PinturaShapePresetsGroups",$$slots:{default:[ZS]},$$scope:{ctx:t}}});const a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[11]},t[12]];let s={$$slots:{default:[YS,({panel:l,panelIsActive:c})=>({26:l,27:c}),({panel:l,panelIsActive:c})=>(l?67108864:0)|(c?134217728:0)]},$$scope:{ctx:t}};for(let l=0;l<a.length;l+=1)s=Cn(s,a[l]);return r=new ku({props:s}),{c(){e=pt("div"),At(i.$$.fragment),n=ce(),At(r.$$.fragment),v(e,"class","PinturaShapePresetsGrouped")},m(l,c){tt(l,e,c),It(i,e,null),Tt(e,n),It(r,e,null),o=!0},p(l,c){const d={};1&c&&(d.elasticity=l[0]),536876128&c&&(d.$$scope={dirty:c,ctx:l}),i.$set(d);const u=6144&c?Ir(a,[a[0],a[1],2048&c&&{panels:l[11]},4096&c&&Or(l[12])]):{};738206239&c&&(u.$$scope={dirty:c,ctx:l}),r.$set(u)},i(l){o||(P(i.$$.fragment,l),P(r.$$.fragment,l),o=!0)},o(l){D(i.$$.fragment,l),D(r.$$.fragment,l),o=!1},d(l){l&&Q(e),Et(i),Et(r)}}}function bf(t){let e,i;return e=new fo({props:{items:t[10]}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};1024&r&&(o.items=n[10]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function jS(t){let e,i;return e=new _h({props:{items:t[7],onclickitem:t[1],ongrabitem:t[2],ondragitem:t[3],ondropitem:t[4]}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};128&r&&(o.items=n[7]),2&r&&(o.onclickitem=n[1]),4&r&&(o.ongrabitem=n[2]),8&r&&(o.ondragitem=n[3]),16&r&&(o.ondropitem=n[4]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function vf(t){let e,i;return e=new fo({props:{items:t[10]}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};1024&r&&(o.items=n[10]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function wf(t){let e,i;return e=new Ro({props:{$$slots:{default:[US]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};805306368&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function US(t){let e,i=t[28].icon+"";return{c(){e=Rr("g")},m(n,r){tt(n,e,r),e.innerHTML=i},p(n,r){268435456&r&&i!==(i=n[28].icon+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function Sf(t){let e,i,n=t[28].label+"";return{c(){e=pt("span"),i=cn(n)},m(r,o){tt(r,e,o),Tt(e,i)},p(r,o){268435456&o&&n!==(n=r[28].label+"")&&zn(i,n)},d(r){r&&Q(e)}}}function GS(t){let e,i,n,r=t[28].icon&&wf(t),o=!t[28].hideLabel&&Sf(t);return{c(){r&&r.c(),e=ce(),o&&o.c(),i=Tn()},m(a,s){r&&r.m(a,s),tt(a,e,s),o&&o.m(a,s),tt(a,i,s),n=!0},p(a,s){a[28].icon?r?(r.p(a,s),268435456&s&&P(r,1)):(r=wf(a),r.c(),P(r,1),r.m(e.parentNode,e)):r&&(ze(),D(r,1,1,()=>{r=null}),Fe()),a[28].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=Sf(a),o.c(),o.m(i.parentNode,i))},i(a){n||(P(r),n=!0)},o(a){D(r),n=!1},d(a){r&&r.d(a),a&&Q(e),o&&o.d(a),a&&Q(i)}}}function ZS(t){let e,i,n,r=t[10]&&vf(t);const o=[{class:"PinturaControlList"},{tabs:t[5]},t[12],{layout:"compact"}];let a={$$slots:{default:[GS,({tab:s})=>({28:s}),({tab:s})=>s?268435456:0]},$$scope:{ctx:t}};for(let s=0;s<o.length;s+=1)a=Cn(a,o[s]);return i=new Su({props:a}),i.$on("select",t[18]),{c(){r&&r.c(),e=ce(),At(i.$$.fragment)},m(s,l){r&&r.m(s,l),tt(s,e,l),It(i,s,l),n=!0},p(s,l){s[10]?r?(r.p(s,l),1024&l&&P(r,1)):(r=vf(s),r.c(),P(r,1),r.m(e.parentNode,e)):r&&(ze(),D(r,1,1,()=>{r=null}),Fe());const c=4128&l?Ir(o,[o[0],32&l&&{tabs:s[5]},4096&l&&Or(s[12]),o[3]]):{};805306368&l&&(c.$$scope={dirty:l,ctx:s}),i.$set(c)},i(s){n||(P(r),P(i.$$.fragment,s),n=!0)},o(s){D(r),D(i.$$.fragment,s),n=!1},d(s){r&&r.d(s),s&&Q(e),Et(i,s)}}}function XS(t){let e,i;return e=new _h({props:{items:t[13][t[26]].items,disabled:t[13][t[26]].disabled,onclickitem:t[1],ongrabitem:t[2],ondragitem:t[3],ondropitem:t[4]}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};67117056&r&&(o.items=n[13][n[26]].items),67117056&r&&(o.disabled=n[13][n[26]].disabled),2&r&&(o.onclickitem=n[1]),4&r&&(o.ongrabitem=n[2]),8&r&&(o.ondragitem=n[3]),16&r&&(o.ondropitem=n[4]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function YS(t){let e,i;return e=new wa({props:{scroll:t[27]?{scrollOffset:0,animate:!1}:void 0,scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[XS]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};134217728&r&&(o.scroll=n[27]?{scrollOffset:0,animate:!1}:void 0),512&r&&(o.scrollAutoCancel=n[9]),1&r&&(o.elasticity=n[0]),603987998&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function qS(t){let e,i,n,r;const o=[VS,_S],a=[];function s(l,c){return l[9]?0:l[10]?1:-1}return~(i=s(t))&&(n=a[i]=o[i](t)),{c(){e=pt("div"),n&&n.c(),v(e,"class","PinturaShapePresetsPalette")},m(l,c){tt(l,e,c),~i&&a[i].m(e,null),r=!0},p(l,[c]){let d=i;i=s(l),i===d?~i&&a[i].p(l,c):(n&&(ze(),D(a[d],1,1,()=>{a[d]=null}),Fe()),~i?(n=a[i],n?n.p(l,c):(n=a[i]=o[i](l),n.c()),P(n,1),n.m(e,null)):n=null)},i(l){r||(P(n),r=!0)},o(l){D(n),r=!1},d(l){l&&Q(e),~i&&a[i].d()}}}function KS(t,e,i){let n,r,o,a,s,l,c,d,u,{locale:p}=e,{presets:h}=e,{scrollElasticity:g}=e,{enableSelectImage:m=!0}=e,{willRenderPresetToolbar:y=Zi}=e,{onaddpreset:x=me}=e,{ongrabpreset:k}=e,{ondragpreset:w}=e,{ondroppreset:C}=e;const M="presets-"+ia(),R=(F,B="")=>j2(F)?F:su(F)?py(F,B):`<img src="${F}" alt="${B}"/>`,O=F=>Zf(hh(F)),T=["src","alt","thumb","shape","id","mount","disabled"],z=F=>F.map(B=>(f=>Ln(f)&&Oe(f[0])&&Ln(f[1]))(B)?{...B[2],id:`${M}-${B[0].toLowerCase()}`,label:B[0],items:z(B[1])}:(f=>{let V,J,S,j,K,dt,lt,N=f;return Oe(f)?su(f)?(V=f,K=f,j=R(V,K)):(V=f,K=O(V),j=R(V,K)):(V=f.src,K=f.alt||(Oe(V)?O(V):Oe(f.thumb)?O(f.thumb):void 0),j=R(f.thumb||V,K),J=f.shape,dt=f.mount,lt=f.disabled,S=Object.keys(f).reduce((ft,$t)=>(T.includes($t)||(ft[$t]=f[$t]),ft),{})),{id:N,src:V,thumb:j,shape:J,shapeProps:S,alt:K,title:K,mount:dt,disabled:lt}})(B));return t.$$set=F=>{"locale"in F&&i(14,p=F.locale),"presets"in F&&i(15,h=F.presets),"scrollElasticity"in F&&i(0,g=F.scrollElasticity),"enableSelectImage"in F&&i(16,m=F.enableSelectImage),"willRenderPresetToolbar"in F&&i(17,y=F.willRenderPresetToolbar),"onaddpreset"in F&&i(1,x=F.onaddpreset),"ongrabpreset"in F&&i(2,k=F.ongrabpreset),"ondragpreset"in F&&i(3,w=F.ondragpreset),"ondroppreset"in F&&i(4,C=F.ondroppreset)},t.$$.update=()=>{32768&t.$$.dirty&&i(7,n=z(h)),128&t.$$.dirty&&i(9,r=n.length),640&t.$$.dirty&&i(8,o=r&&n.some(F=>!!F.items)),384&t.$$.dirty&&i(5,a=o&&n),384&t.$$.dirty&&i(13,s=o&&n.reduce((F,B)=>(F[B.id]=B,F),{})),96&t.$$.dirty&&i(6,l=l||a&&(a.find(F=>!F.disabled)||{}).id),64&t.$$.dirty&&i(12,c={name:M,selected:l}),32&t.$$.dirty&&i(11,d=a&&a.map(F=>F.id)),212994&t.$$.dirty&&i(10,u=p&&y([m&&["Button","browse",{label:p.shapeLabelButtonSelectSticker,icon:p.shapeIconButtonSelectSticker,onclick:()=>{P2().then(F=>{F&&x(F)})}}]]))},[g,x,k,w,C,a,l,n,o,r,u,d,c,s,p,h,m,y,({detail:F})=>i(6,l=F)]}class U2 extends si{constructor(e){super(),ai(this,e,KS,qS,ti,{locale:14,presets:15,scrollElasticity:0,enableSelectImage:16,willRenderPresetToolbar:17,onaddpreset:1,ongrabpreset:2,ondragpreset:3,ondroppreset:4})}}function JS(t){let e,i,n,r;return e=new fo({props:{items:t[29]}}),n=new Ru({props:{locale:t[4],shape:t[31]||t[49],onchange:t[86],controls:t[9],scrollEnable:!1,hideTitles:!0,willRenderControls:t[162]}}),{c(){At(e.$$.fragment),i=ce(),At(n.$$.fragment)},m(o,a){It(e,o,a),tt(o,i,a),It(n,o,a),r=!0},p(o,a){const s={};536870912&a[0]&&(s.items=o[29]),e.$set(s);const l={};16&a[0]&&(l.locale=o[4]),262145&a[1]&&(l.shape=o[31]||o[49]),512&a[0]&&(l.controls=o[9]),n.$set(l)},i(o){r||(P(e.$$.fragment,o),P(n.$$.fragment,o),r=!0)},o(o){D(e.$$.fragment,o),D(n.$$.fragment,o),r=!1},d(o){Et(e,o),o&&Q(i),Et(n,o)}}}function QS(t){let e,i,n;return i=new V2({props:{$$slots:{default:[JS]},$$scope:{ctx:t}}}),{c(){e=pt("div"),At(i.$$.fragment),v(e,"slot","header")},m(r,o){tt(r,e,o),It(i,e,null),n=!0},p(r,o){const a={};536871440&o[0]|262145&o[1]|1048576&o[6]&&(a.$$scope={dirty:o,ctx:r}),i.$set(a)},i(r){n||(P(i.$$.fragment,r),n=!0)},o(r){D(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Et(i)}}}function kf(t){let e,i;const n=[{locale:t[4]},{ui:t[69]},{shapes:t[5]},{selection:t[58]},{uid:t[19]},{parentRect:t[37]},{rootRect:t[55]},{utilRect:t[39]},{offset:t[50]},{disabled:t[38]},{contextRotation:t[22]},{contextFlipX:t[23]},{contextFlipY:t[24]},{contextZoom:t[36]?t[36].scale:void 0},{active:t[35]},{opacity:t[56]},{hoverColor:t[57]},{caretColor:t[57]},{snapColor:t[57]},{gridColor:[1,1,1,.125]},{eraseRadius:t[47]},{selectRadius:t[6]},{enableButtonFlipVertical:t[10]},{mapEditorPointToImagePoint:t[20]},{mapImagePointToEditorPoint:t[21]},{enableTapToAddText:t[13]},{textInputMode:t[8]},{snapThreshold:t[15]},{snapPointer:!t[48]},{enableSnapToContext:t[16]},{gridSize:t[14]},{willStartInteraction:t[96]},{oninteractionstart:t[80]},{oninteractionupdate:t[81]},{oninteractionrelease:t[82]},{oninteractionend:t[84]},{oninteractioncancel:t[83]},{onleavecanvas:t[88]},{onhovercanvas:t[87]},{onhovershape:t[90]},{ontapcanvas:t[89]},{onaddshape:t[154]},{onselectshape:t[155]},{onblurshape:t[156]},{ontapshape:t[157]},{onupdateshape:t[158]},{onremoveshape:t[159]},t[42]];let r={};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new ES({props:r}),t[160](e),{c(){At(e.$$.fragment)},m(o,a){It(e,o,a),i=!0},p(o,a){const s=1106896240&a[0]|252381680&a[1]|511443072&a[2]|24&a[3]?Ir(n,[16&a[0]&&{locale:o[4]},128&a[2]&&{ui:o[69]},32&a[0]&&{shapes:o[5]},134217728&a[1]&&{selection:o[58]},524288&a[0]&&{uid:o[19]},64&a[1]&&{parentRect:o[37]},16777216&a[1]&&{rootRect:o[55]},256&a[1]&&{utilRect:o[39]},524288&a[1]&&{offset:o[50]},128&a[1]&&{disabled:o[38]},4194304&a[0]&&{contextRotation:o[22]},8388608&a[0]&&{contextFlipX:o[23]},16777216&a[0]&&{contextFlipY:o[24]},32&a[1]&&{contextZoom:o[36]?o[36].scale:void 0},16&a[1]&&{active:o[35]},33554432&a[1]&&{opacity:o[56]},67108864&a[1]&&{hoverColor:o[57]},67108864&a[1]&&{caretColor:o[57]},67108864&a[1]&&{snapColor:o[57]},n[19],65536&a[1]&&{eraseRadius:o[47]},64&a[0]&&{selectRadius:o[6]},1024&a[0]&&{enableButtonFlipVertical:o[10]},1048576&a[0]&&{mapEditorPointToImagePoint:o[20]},2097152&a[0]&&{mapImagePointToEditorPoint:o[21]},8192&a[0]&&{enableTapToAddText:o[13]},256&a[0]&&{textInputMode:o[8]},32768&a[0]&&{snapThreshold:o[15]},131072&a[1]&&{snapPointer:!o[48]},65536&a[0]&&{enableSnapToContext:o[16]},16384&a[0]&&{gridSize:o[14]},8&a[3]&&{willStartInteraction:o[96]},262144&a[2]&&{oninteractionstart:o[80]},524288&a[2]&&{oninteractionupdate:o[81]},1048576&a[2]&&{oninteractionrelease:o[82]},4194304&a[2]&&{oninteractionend:o[84]},2097152&a[2]&&{oninteractioncancel:o[83]},67108864&a[2]&&{onleavecanvas:o[88]},33554432&a[2]&&{onhovercanvas:o[87]},268435456&a[2]&&{onhovershape:o[90]},134217728&a[2]&&{ontapcanvas:o[89]},1073741824&a[0]|16&a[3]&&{onaddshape:o[154]},1073741824&a[0]&&{onselectshape:o[155]},1073741824&a[0]&&{onblurshape:o[156]},1073741824&a[0]&&{ontapshape:o[157]},1073741824&a[0]|16&a[3]&&{onupdateshape:o[158]},1073741824&a[0]|16&a[3]&&{onremoveshape:o[159]},2048&a[1]&&Or(o[42])]):{};e.$set(s)},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),i=!1},d(o){t[160](null),Et(e,o)}}}function t6(t){let e,i,n,r,o,a=t[51]&&kf(t);return{c(){e=pt("div"),a&&a.c(),v(e,"slot","main"),v(e,"style",i="cursor:"+t[46])},m(s,l){tt(s,e,l),a&&a.m(e,null),t[161](e),n=!0,r||(o=[Mt(e,"keydown",t[85]),ji(c2.call(null,e)),Mt(e,"dropfiles",function(){Hi(t[12]?t[95]:me)&&(t[12]?t[95]:me).apply(this,arguments)}),ji(Er.call(null,e)),Mt(e,"measure",t[150])],r=!0)},p(s,l){(t=s)[51]?a?(a.p(t,l),1048576&l[1]&&P(a,1)):(a=kf(t),a.c(),P(a,1),a.m(e,null)):a&&(ze(),D(a,1,1,()=>{a=null}),Fe()),(!n||32768&l[1]&&i!==(i="cursor:"+t[46]))&&v(e,"style",i)},i(s){n||(P(a),n=!0)},o(s){D(a),n=!1},d(s){s&&Q(e),a&&a.d(),t[161](null),r=!1,_i(o)}}}function e6(t){let e,i;return e=new U2({props:{locale:t[4],presets:t[18],enableSelectImage:t[11],willRenderPresetToolbar:t[43],onaddpreset:t[94],ongrabpreset:t[91],ondragpreset:t[92],ondroppreset:t[93],scrollElasticity:t[44]}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};16&r[0]&&(o.locale=n[4]),262144&r[0]&&(o.presets=n[18]),2048&r[0]&&(o.enableSelectImage=n[11]),4096&r[1]&&(o.willRenderPresetToolbar=n[43]),8192&r[1]&&(o.scrollElasticity=n[44]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function i6(t){let e,i,n,r=t[7]==="stack"&&Cf(t),o=(t[53]&&t[34]||t[7]==="row")&&Tf(t);return{c(){r&&r.c(),e=ce(),o&&o.c(),i=Tn()},m(a,s){r&&r.m(a,s),tt(a,e,s),o&&o.m(a,s),tt(a,i,s),n=!0},p(a,s){a[7]==="stack"?r?(r.p(a,s),128&s[0]&&P(r,1)):(r=Cf(a),r.c(),P(r,1),r.m(e.parentNode,e)):r&&(ze(),D(r,1,1,()=>{r=null}),Fe()),a[53]&&a[34]||a[7]==="row"?o?(o.p(a,s),128&s[0]|4194312&s[1]&&P(o,1)):(o=Tf(a),o.c(),P(o,1),o.m(i.parentNode,i)):o&&(ze(),D(o,1,1,()=>{o=null}),Fe())},i(a){n||(P(r),P(o),n=!0)},o(a){D(r),D(o),n=!1},d(a){r&&r.d(a),a&&Q(e),o&&o.d(a),a&&Q(i)}}}function Cf(t){let e,i,n,r;const o=[r6,n6],a=[];function s(l,c){return l[45]?0:1}return i=s(t),n=a[i]=o[i](t),{c(){e=pt("div"),n.c(),v(e,"class","PinturaControlPanels")},m(l,c){tt(l,e,c),a[i].m(e,null),r=!0},p(l,c){let d=i;i=s(l),i===d?a[i].p(l,c):(ze(),D(a[d],1,1,()=>{a[d]=null}),Fe(),n=a[i],n?n.p(l,c):(n=a[i]=o[i](l),n.c()),P(n,1),n.m(e,null))},i(l){r||(P(n),r=!0)},o(l){D(n),r=!1},d(l){l&&Q(e),a[i].d()}}}function n6(t){let e,i,n;return i=new Ru({props:{locale:t[4],shape:t[31]||t[49],onchange:t[86],controls:t[9],scrollElasticity:t[44],willRenderControls:t[17]}}),{c(){e=pt("div"),At(i.$$.fragment),v(e,"class","PinturaControlPanel")},m(r,o){tt(r,e,o),It(i,e,null),n=!0},p(r,o){const a={};16&o[0]&&(a.locale=r[4]),262145&o[1]&&(a.shape=r[31]||r[49]),512&o[0]&&(a.controls=r[9]),8192&o[1]&&(a.scrollElasticity=r[44]),131072&o[0]&&(a.willRenderControls=r[17]),i.$set(a)},i(r){n||(P(i.$$.fragment,r),n=!0)},o(r){D(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Et(i)}}}function r6(t){let e,i,n;return i=new U2({props:{locale:t[4],presets:t[18],enableSelectImage:t[11],willRenderPresetToolbar:t[43],onaddpreset:t[94],ongrabpreset:t[91],ondragpreset:t[92],ondroppreset:t[93],scrollElasticity:t[44]}}),{c(){e=pt("div"),At(i.$$.fragment),v(e,"class","PinturaControlPanel")},m(r,o){tt(r,e,o),It(i,e,null),n=!0},p(r,o){const a={};16&o[0]&&(a.locale=r[4]),262144&o[0]&&(a.presets=r[18]),2048&o[0]&&(a.enableSelectImage=r[11]),4096&o[1]&&(a.willRenderPresetToolbar=r[43]),8192&o[1]&&(a.scrollElasticity=r[44]),i.$set(a)},i(r){n||(P(i.$$.fragment,r),n=!0)},o(r){D(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Et(i)}}}function Tf(t){let e,i;return e=new wa({props:{class:"PinturaControlListScroller",elasticity:t[44],$$slots:{default:[s6]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};8192&r[1]&&(o.elasticity=n[44]),131729&r[0]|262155&r[1]|1048576&r[6]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function Mf(t){let e,i;return e=new Ja({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[32],selectedIndex:t[32].findIndex(t[151]),onchange:t[79],$$slots:{option:[a6,({option:n})=>({205:n}),({option:n})=>[0,0,0,0,0,0,n?524288:0]]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};16&r[0]&&(o.locale=n[4]),2&r[1]&&(o.options=n[32]),1&r[0]|2&r[1]&&(o.selectedIndex=n[32].findIndex(n[151])),16&r[0]|1572864&r[6]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function Pf(t){let e,i;return e=new Ro({props:{$$slots:{default:[o6]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};16&r[0]|1572864&r[6]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function o6(t){let e,i=(Qi(t[205].icon)?t[205].icon(t[4]):t[205].icon)+"";return{c(){e=Rr("g")},m(n,r){tt(n,e,r),e.innerHTML=i},p(n,r){16&r[0]|524288&r[6]&&i!==(i=(Qi(n[205].icon)?n[205].icon(n[4]):n[205].icon)+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function Rf(t){let e,i,n=(Qi(t[205].label)?t[205].label(t[4]):t[205].label)+"";return{c(){e=pt("span"),i=cn(n)},m(r,o){tt(r,e,o),Tt(e,i)},p(r,o){16&o[0]|524288&o[6]&&n!==(n=(Qi(r[205].label)?r[205].label(r[4]):r[205].label)+"")&&zn(i,n)},d(r){r&&Q(e)}}}function a6(t){let e,i,n,r=t[205].icon&&Pf(t),o=!t[205].hideLabel&&Rf(t);return{c(){e=pt("div"),r&&r.c(),i=ce(),o&&o.c(),v(e,"slot","option")},m(a,s){tt(a,e,s),r&&r.m(e,null),Tt(e,i),o&&o.m(e,null),n=!0},p(a,s){a[205].icon?r?(r.p(a,s),524288&s[6]&&P(r,1)):(r=Pf(a),r.c(),P(r,1),r.m(e,i)):r&&(ze(),D(r,1,1,()=>{r=null}),Fe()),a[205].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=Rf(a),o.c(),o.m(e,null))},i(a){n||(P(r),n=!0)},o(a){D(r),n=!1},d(a){a&&Q(e),r&&r.d(),o&&o.d()}}}function If(t){let e,i;return e=new Ru({props:{locale:t[4],shape:t[31]||t[49],onchange:t[86],controls:t[9],scrollEnable:!1,hideTitles:!0,willRenderControls:t[152]}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};16&r[0]&&(o.locale=n[4]),262145&r[1]&&(o.shape=n[31]||n[49]),512&r[0]&&(o.controls=n[9]),131072&r[0]&&(o.willRenderControls=n[152]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function s6(t){let e,i,n,r=t[34]&&Mf(t),o=t[7]==="row"&&If(t);return{c(){r&&r.c(),e=ce(),o&&o.c(),i=Tn()},m(a,s){r&&r.m(a,s),tt(a,e,s),o&&o.m(a,s),tt(a,i,s),n=!0},p(a,s){a[34]?r?(r.p(a,s),8&s[1]&&P(r,1)):(r=Mf(a),r.c(),P(r,1),r.m(e.parentNode,e)):r&&(ze(),D(r,1,1,()=>{r=null}),Fe()),a[7]==="row"?o?(o.p(a,s),128&s[0]&&P(o,1)):(o=If(a),o.c(),P(o,1),o.m(i.parentNode,i)):o&&(ze(),D(o,1,1,()=>{o=null}),Fe())},i(a){n||(P(r),P(o),n=!0)},o(a){D(r),D(o),n=!1},d(a){r&&r.d(a),a&&Q(e),o&&o.d(a),a&&Q(i)}}}function Ef(t){let e,i;return e=new wa({props:{class:"PinturaControlListScroller",elasticity:t[44],$$slots:{default:[d6]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};8192&r[1]&&(o.elasticity=n[44]),67108880&r[0]|8388608&r[1]|1048576&r[6]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function Af(t){let e,i;return e=new Ro({props:{$$slots:{default:[l6]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};16&r[0]|1572864&r[6]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function l6(t){let e,i=(Qi(t[205].icon)?t[205].icon(t[4]):t[205].icon)+"";return{c(){e=Rr("g")},m(n,r){tt(n,e,r),e.innerHTML=i},p(n,r){16&r[0]|524288&r[6]&&i!==(i=(Qi(n[205].icon)?n[205].icon(n[4]):n[205].icon)+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function c6(t){let e,i,n,r,o,a=(Qi(t[205].label)?t[205].label(t[4]):t[205].label)+"",s=t[205].icon&&Af(t);return{c(){e=pt("div"),s&&s.c(),i=ce(),n=pt("span"),r=cn(a),v(e,"slot","option")},m(l,c){tt(l,e,c),s&&s.m(e,null),Tt(e,i),Tt(e,n),Tt(n,r),o=!0},p(l,c){l[205].icon?s?(s.p(l,c),524288&c[6]&&P(s,1)):(s=Af(l),s.c(),P(s,1),s.m(e,i)):s&&(ze(),D(s,1,1,()=>{s=null}),Fe()),(!o||16&c[0]|524288&c[6])&&a!==(a=(Qi(l[205].label)?l[205].label(l[4]):l[205].label)+"")&&zn(r,a)},i(l){o||(P(s),o=!0)},o(l){D(s),o=!1},d(l){l&&Q(e),s&&s.d()}}}function d6(t){let e,i;return e=new Ja({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[54],selectedIndex:t[54].findIndex(t[153]),onchange:t[78],$$slots:{option:[c6,({option:n})=>({205:n}),({option:n})=>[0,0,0,0,0,0,n?524288:0]]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};16&r[0]&&(o.locale=n[4]),8388608&r[1]&&(o.options=n[54]),67108864&r[0]|8388608&r[1]&&(o.selectedIndex=n[54].findIndex(n[153])),16&r[0]|1572864&r[6]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function u6(t){let e,i,n,r,o;const a=[i6,e6],s=[];function l(d,u){return d[52]?0:d[45]?1:-1}~(i=l(t))&&(n=s[i]=a[i](t));let c=t[33]&&Ef(t);return{c(){e=pt("div"),n&&n.c(),r=ce(),c&&c.c(),v(e,"slot","footer"),v(e,"style",t[40])},m(d,u){tt(d,e,u),~i&&s[i].m(e,null),Tt(e,r),c&&c.m(e,null),o=!0},p(d,u){let p=i;i=l(d),i===p?~i&&s[i].p(d,u):(n&&(ze(),D(s[p],1,1,()=>{s[p]=null}),Fe()),~i?(n=s[i],n?n.p(d,u):(n=s[i]=a[i](d),n.c()),P(n,1),n.m(e,r)):n=null),d[33]?c?(c.p(d,u),4&u[1]&&P(c,1)):(c=Ef(d),c.c(),P(c,1),c.m(e,null)):c&&(ze(),D(c,1,1,()=>{c=null}),Fe()),(!o||512&u[1])&&v(e,"style",d[40])},i(d){o||(P(n),P(c),o=!0)},o(d){D(n),D(c),o=!1},d(d){d&&Q(e),~i&&s[i].d(),c&&c.d()}}}function p6(t){let e,i;return e=new rl({props:{hasHeader:t[41],$$slots:{footer:[u6],main:[t6],header:[QS]},$$scope:{ctx:t}}}),e.$on("measure",t[163]),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};1024&r[1]&&(o.hasHeader=n[41]),2113929201&r[0]|134216703&r[1]|1048576&r[6]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function h6(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,y,x,k,w,C,M,R,O,T,z,F,B,f,V,J,S,j,K,dt,lt,N,ft,$t,Lt,ct,et,ht,Y,Z,St,nt,mt,Ft,oe,Rt,Ut,Ot,U,wt,xt,Gt,de,ue,be,$e,_,ve,gi,ye,Vt,Ce,Re,He,bi=Je,vt=()=>(bi(),bi=jr(Li,W=>i(35,Z=W)),Li),bt=Je,Ge=()=>(bt(),bt=jr(fe,W=>i(142,Ft=W)),fe),Me=Je,ni=()=>(Me(),Me=jr(tn,W=>i(37,xt=W)),tn),Ue=Je,ei=()=>(Ue(),Ue=jr(jt,W=>i(149,ye=W)),jt),vi=Je,di=()=>(vi(),vi=jr(X,W=>i(56,Re=W)),X);t.$$.on_destroy.push(()=>bi()),t.$$.on_destroy.push(()=>bt()),t.$$.on_destroy.push(()=>Me()),t.$$.on_destroy.push(()=>Ue()),t.$$.on_destroy.push(()=>vi());let{isActive:Li}=e;vt();let{isActiveFraction:X}=e;di();let{isVisible:jt}=e;ei();let{stores:G}=e,{locale:Bt={}}=e,{shapes:fe}=e;Ge();let{toolbar:Qt=[]}=e,{toolShapes:se={}}=e,{toolActive:zt}=e,{toolSelectRadius:We}=e,{toolRetainStyles:Ee=!1}=e,{toolbarLayout:je="stack"}=e,{textInputMode:Ke}=e,{shapeControls:it={}}=e,{enableButtonFlipVertical:Xt=!1}=e,{enablePresetSelectImage:Nt=!0}=e,{enablePresetDropImage:Zt=!0}=e,{enableSelectToolToAddShape:Yt=!1}=e,{enableAutoSelectMoveTool:ot=["line","arrow","path","rectangle","ellipse","text"]}=e,{enableTapToAddText:pe=!1}=e,{enableMoveTool:ee=!1}=e,{enableViewTool:ge=!1}=e,{enableToolShareStyles:Dt=!0}=e,{gridSize:Se=0}=e,{snapThreshold:fi=0}=e,{enableSnapToContext:ui=!0}=e,{willRenderHeaderTools:Be=Zi}=e,{willRenderPresetToolbar:yi}=e,{willRenderShapeStyleControls:Mi}=e,{willStartInteraction:xe}=e,{shapePresets:he=[]}=e,{utilKey:Ie}=e,{mapScreenPointToImagePoint:an}=e,{mapImagePointToScreenPoint:Ui}=e,{imageRotation:yn=0}=e,{imageFlipX:mn=!1}=e,{imageFlipY:$n=!1}=e,{parentRect:tn}=e;ni();let{hooks:Yi={}}=e;const Fn=ln("selection");E(t,Fn,W=>i(148,_=W));const Xn=ln("isAnimated");E(t,Xn,W=>i(139,St=W));const jn=ln("elasticityMultiplier");E(t,jn,W=>i(143,oe=W));const vr=ln("ui");E(t,vr,W=>i(173,ve=W));const Un=ln("keysPressed");let vn;E(t,Un,W=>i(146,be=W));const{env:_n,history:Vn,rootRect:Pi,rootColorSecondary:so,enablePanInput:Dn,enablePanInputStatus:yo,enableZoomInput:lo,stageRect:Ar,utilRectPadded:wr,scrollElasticity:Mn,imageOverlayMarkup:qi,imagePreviewModifiers:Zr,imageCropRect:eo,shapePreprocessor:xo,stageScalar:bo,imageSelectionRect:Io,imageTransformsInterpolated:co,imageSelectionPan:uo,imageSize:vo,allowPan:wo,allowZoom:Wr,allowZoomControls:Sr,allowPlayPause:io}=G;E(t,_n,W=>i(140,nt=W)),E(t,Pi,W=>i(55,Ce=W)),E(t,so,W=>i(57,He=W)),E(t,yo,W=>i(38,de=W)),E(t,Ar,W=>i(144,Rt=W)),E(t,wr,W=>i(39,gi=W)),E(t,Zr,W=>i(174,Vt=W)),E(t,eo,W=>i(172,Gt=W)),E(t,xo,W=>i(147,$e=W)),E(t,bo,W=>i(170,U=W)),E(t,Io,W=>i(171,wt=W)),E(t,co,W=>i(36,Ut=W)),E(t,uo,W=>i(169,Ot=W)),E(t,vo,W=>i(145,ue=W));let dn=0,tr={};const So=W=>{const[ne,Ii]=vn[W];let ri,Kt,we=Ii.position==="relative";const Ei=we?"0%":0,Vi=we?"0%":0;To(ne)||Kn(ne)?(Kt=we?"20%":.2*xt.width,ri=Nn(ne),ri.x=Ei,ri.y=Vi,ga(ri,{width:Kt,height:Kt},xt)):Jn(ne)?(Kt=we?"10%":.1*xt.width,ri=Nn(ne),ri.x=Ei,ri.y=Vi,ga(ri,{rx:Kt,ry:Kt},xt)):or(ne)&&(Kt=we?"10%":.1*xt.width,ri=Nn(ne),ri.x1=Ei,ri.y1=Vi,ri.x2=Ei,ri.y2=Vi),ri&&Promise.resolve().then(()=>{ho(mr(ri,void 0,Kt))})},_r=W=>an(ih(W,Ce));let wi,Pn={},Yn,gn;const no=W=>{if(!(qn(W)&&Le(W,"pathClose")))return;const ne=[...W.strokeColor];ne[3]=1,wi.updateMarkupShape(W,{pathClose:!1,strokeColor:ne},!1),wi.removeMarkupShapeProps(W,["backgroundColor"],!1),wi.confirmMarkupItemDraft(),wi.selectShape(W)};let Xr;const un=(W,ne)=>{if($i(W))return W;if(W.endsWith("%"))return parseFloat(W)/100*ne.width};let Yr,hr,po;const mr=(W,ne,Ii)=>{let ri=!1;ne||(ri=!0,ne=lt?an(Ti(Rt)):Ti(Gt)),ne.x-=xt.x||0,ne.y-=xt.y||0,(mn||$n)&&(W.flipX=mn,W.flipY=$n);const Kt=wi.getShapesNearPosition(Ft,ne);if(ri&&Kt.length){const we=.1*Math.min(Gt.width,Gt.height);ne.x+=Math.round(-we+Math.random()*we*2),ne.y+=Math.round(-we+Math.random()*we*2)}if(yn!==0&&(W.rotation=mn&&$n?-yn:mn||$n?yn:-yn),Le(W,"width")&&Le(W,"height")){const{width:we,height:Ei}=Pl(W,["width","height"],xt);ga(W,{x:ne.x-.5*we,y:ne.y-.5*Ei},xt)}else if(Jn(W))ga(W,{x:ne.x,y:ne.y},xt);else if(or(W)){const{x1:we,y1:Ei,x2:Vi,y2:pn}=Pl(W,["x1","y1","x2","y2"],xt),en=$o(rt(we,Ei),rt(Vi,pn)),Oi=Oe(Ii)?cu(Ii,xt.width):en;ga(W,{x1:ne.x-Oi,y1:ne.y+Oi,x2:ne.x+Oi,y2:ne.y-Oi},xt)}else if(qn(W)){const{points:we}=Pl(W,["points"],xt),Ei=Oo(we);ga(W,{points:we.map(Vi=>({x:Vi.x+ne.x-Ei.x,y:Vi.y+ne.y-Ei.y}))},xt)}return W},Gn=(W,ne)=>{const Ii=mr(Rm(W,Gt),ne);return W.shape&&(Le(W.shape,"x")&&(Ii.x=W.shape.x),Le(W.shape,"y")&&(Ii.y=W.shape.y)),ho(Ii)},ho=W=>{const{beforeAddShape:ne=()=>!0}=Yi;if(ne(W))return wi.addShape(W),wi.selectShape(W),N("addshape",W),Vn.write(),W};let kr=!1;const ro=()=>{Vn.write()};let qr;const Wn=ln("redrawTrigger");E(t,Wn,W=>i(141,mt=W));const wn=[],li=oi(St?20:0);return E(t,li,W=>i(138,Y=W)),t.$$set=W=>{"isActive"in W&&vt(i(1,Li=W.isActive)),"isActiveFraction"in W&&di(i(2,X=W.isActiveFraction)),"isVisible"in W&&ei(i(3,jt=W.isVisible)),"stores"in W&&i(101,G=W.stores),"locale"in W&&i(4,Bt=W.locale),"shapes"in W&&Ge(i(5,fe=W.shapes)),"toolbar"in W&&i(102,Qt=W.toolbar),"toolShapes"in W&&i(103,se=W.toolShapes),"toolActive"in W&&i(0,zt=W.toolActive),"toolSelectRadius"in W&&i(6,We=W.toolSelectRadius),"toolRetainStyles"in W&&i(104,Ee=W.toolRetainStyles),"toolbarLayout"in W&&i(7,je=W.toolbarLayout),"textInputMode"in W&&i(8,Ke=W.textInputMode),"shapeControls"in W&&i(9,it=W.shapeControls),"enableButtonFlipVertical"in W&&i(10,Xt=W.enableButtonFlipVertical),"enablePresetSelectImage"in W&&i(11,Nt=W.enablePresetSelectImage),"enablePresetDropImage"in W&&i(12,Zt=W.enablePresetDropImage),"enableSelectToolToAddShape"in W&&i(105,Yt=W.enableSelectToolToAddShape),"enableAutoSelectMoveTool"in W&&i(106,ot=W.enableAutoSelectMoveTool),"enableTapToAddText"in W&&i(13,pe=W.enableTapToAddText),"enableMoveTool"in W&&i(107,ee=W.enableMoveTool),"enableViewTool"in W&&i(108,ge=W.enableViewTool),"enableToolShareStyles"in W&&i(109,Dt=W.enableToolShareStyles),"gridSize"in W&&i(14,Se=W.gridSize),"snapThreshold"in W&&i(15,fi=W.snapThreshold),"enableSnapToContext"in W&&i(16,ui=W.enableSnapToContext),"willRenderHeaderTools"in W&&i(110,Be=W.willRenderHeaderTools),"willRenderPresetToolbar"in W&&i(111,yi=W.willRenderPresetToolbar),"willRenderShapeStyleControls"in W&&i(17,Mi=W.willRenderShapeStyleControls),"willStartInteraction"in W&&i(112,xe=W.willStartInteraction),"shapePresets"in W&&i(18,he=W.shapePresets),"utilKey"in W&&i(19,Ie=W.utilKey),"mapScreenPointToImagePoint"in W&&i(20,an=W.mapScreenPointToImagePoint),"mapImagePointToScreenPoint"in W&&i(21,Ui=W.mapImagePointToScreenPoint),"imageRotation"in W&&i(22,yn=W.imageRotation),"imageFlipX"in W&&i(23,mn=W.imageFlipX),"imageFlipY"in W&&i(24,$n=W.imageFlipY),"parentRect"in W&&ni(i(25,tn=W.parentRect)),"hooks"in W&&i(113,Yi=W.hooks)},t.$$.update=()=>{var W,ne,Ii,ri;if(4194304&t.$$.dirty[4]&&i(123,n=be.includes(18)),2098176&t.$$.dirty[3]&&(vn&&se===vn||i(114,vn=se)),16&t.$$.dirty[1]&&wo.set(Z),16&t.$$.dirty[1]&&Wr.set(Z),16&t.$$.dirty[1]&&Sr.set(Z),512&t.$$.dirty[3]&&i(33,r=Array.isArray(Qt)&&Qt.length>1&&Array.isArray(Qt[0][1])),4&t.$$.dirty[1]|512&t.$$.dirty[3]&&i(54,o=r?Qt.map((Kt,we)=>[we,Kt[0]]):[]),67108864&t.$$.dirty[0]|4&t.$$.dirty[1]|512&t.$$.dirty[3]&&i(137,a=r?Qt[dn][1]:Qt),262144&t.$$.dirty[0]|311296&t.$$.dirty[3]|8192&t.$$.dirty[4]&&i(32,s=((Kt,{willRenderPresetToolbar:we,shapePresets:Ei,enableViewTool:Vi,enableMoveTool:pn})=>{let en=Ei.length!==0||we?Kt:Kt.filter(Oi=>Oi[0]!=="preset");return r&&(en=[["move",Oi=>Oi.shapeLabelToolMove,{icon:Oi=>Oi.shapeIconToolMove}],["view",Oi=>Oi.shapeLabelToolView,{icon:Oi=>Oi.shapeIconToolView}],...en]),en=pn?en:en.filter(Oi=>Oi[0]!=="move"),Vi?en:en.filter(Oi=>Oi[0]!=="view")})(a,{willRenderPresetToolbar:yi,shapePresets:he,enableMoveTool:ee,enableViewTool:ge})),2&t.$$.dirty[1]&&i(135,d=!!s.length),1&t.$$.dirty[0]|2&t.$$.dirty[1]|2048&t.$$.dirty[4]&&d&&zt===void 0&&i(0,zt=s[0][0]),67108865&t.$$.dirty[0]|4&t.$$.dirty[1]|4194304&t.$$.dirty[3]|8192&t.$$.dirty[4]&&r&&i(115,tr={...tr,[dn]:a.map(([Kt])=>Kt).includes(zt)?zt:tr[dn]||a[0][0]}),512&t.$$.dirty[0]&&i(134,l=!!Object.keys(it).length),2&t.$$.dirty[1]&&i(34,c=s.length>1),12&t.$$.dirty[1]&&i(53,u=c||r),1&t.$$.dirty[0]&&i(136,p=zt!==void 0),7168&t.$$.dirty[4]&&i(52,h=(!p||d)&&l),268435456&t.$$.dirty[0]&&i(30,N=qr&&(W=qr,(Kt,we)=>{W.dispatchEvent(ss(Kt,we))})),1073741825&t.$$.dirty[0]|16&t.$$.dirty[1]&&Z&&N&&N("selectcontrol",zt),16&t.$$.dirty[1]&&(Z?kt(Zr,Vt[Ie]={maskMarkupOpacity:.85},Vt):delete Vt[Ie]),1&t.$$.dirty[0]|2097152&t.$$.dirty[3]&&i(133,g=zt&&vn[zt]?vn[zt][1]:void 0),512&t.$$.dirty[4]&&i(124,m=g&&g.isSelection?"selection":"shapes"),1073741824&t.$$.dirty[3]|1&t.$$.dirty[4]&&(Kt=>{if(!wi)return;const we=wi.getShapeDraft(Fn);we&&(Kt&&(Yn=we.drawMode),wi.updateShapeDraft({drawMode:Kt?"subtract":Yn},Fn))})(m==="selection"&&n),134217729&t.$$.dirty[0]&&zt&&wi){const Kt=wi.getMarkupItemDraft();Kt&&no(Kt)}if(1&t.$$.dirty[0]&&zt&&wi&&zt!=="move"&&wi.blurShapes(),16&t.$$.dirty[1]|33554432&t.$$.dirty[4]&&i(51,y=ye&&Z),256&t.$$.dirty[1]|1048576&t.$$.dirty[4]&&i(50,x=gi&&rt(Rt.x-gi.x,Rt.y-gi.y)),512&t.$$.dirty[0]&&i(132,k=Object.keys(it)),16&t.$$.dirty[1]|262144&t.$$.dirty[4]&&i(120,w=Z&&Ft.filter(cs)[0]),16&t.$$.dirty[1]|262144&t.$$.dirty[4]&&i(129,C=Z&&Ft.find(Kt=>op(Kt))),16&t.$$.dirty[1]|262144&t.$$.dirty[4]&&i(49,M=Z&&Ft.find(Kt=>Co(Kt))),1&t.$$.dirty[0]|16&t.$$.dirty[1]|2097152&t.$$.dirty[3]&&i(126,R=Z&&vn[zt]?xy(Nn({...vn[zt][0],...ve[Ie]?ve[Ie][zt]:{}})):{}),2097152&t.$$.dirty[3]&&vn&&i(116,Pn={}),1&t.$$.dirty[0]|8454144&t.$$.dirty[3]|260&t.$$.dirty[4]&&i(125,O=R&&Object.keys(R).reduce((Kt,we)=>{const Ei=we==="disableStyle",Vi=we==="settings",pn=!!k.find(Vr=>Vr.split("_").includes(we));if(!Ei&&!Vi&&!pn||R[we]===void 0||R.disableStyle===!0||R.disableStyle&&R.disableStyle.includes(we))return Kt;if(we==="strokeWidth"&&Object.keys(Pn).includes("strokeWidth")&&Pn[we]===void 0&&Le(R,"points"))return Kt[we]=R[we],Kt;const{share:en=!0}=R.settings&&R.settings[we]||{},Oi=Dt&&en?Pn:Pn[zt]||{};return Kt[we]=Le(Oi,we)?Oi[we]:R[we],Kt},{})),524289&t.$$.dirty[0]|2048&t.$$.dirty[3]|2&t.$$.dirty[4]&&(Ee?((Kt,we,Ei)=>{const Vi=ve[Kt],pn=Vi?Vi[we]:{};vr.set({...ve,[Kt]:{...Vi,[we]:{...pn,...Ei}}})})(Ie,zt,O):(ne=Ie,vr.set({[ne]:{}}))),16&t.$$.dirty[1]|134217728&t.$$.dirty[3]|16777218&t.$$.dirty[4]&&i(31,T=_&&Z?w||O:void 0),1&t.$$.dirty[1]|8388608&t.$$.dirty[4]&&T&&T.lineEnd&&!$e&&console.warn(`Set shapePreprocessor property to draw lineStart and lineEnd styles.
https://pqina.nl/pintura/docs/v8/api/exports/#createshapepreprocessor`),1&t.$$.dirty[0]|4&t.$$.dirty[4]&&i(48,z=Le(R,"eraseRadius")||Le(R,"points")&&!Le(R,"pathClose")||zt==="move"||zt==="view"),64&t.$$.dirty[1]|4&t.$$.dirty[4]&&i(47,F=R&&R.eraseRadius!==void 0?un(R.eraseRadius,xt):void 0),16&t.$$.dirty[1]|4194304&t.$$.dirty[4]&&i(130,B=Z&&be.includes(32)),1&t.$$.dirty[0]|16&t.$$.dirty[1]&&i(131,f=Z&&zt==="view"),192&t.$$.dirty[4]&&i(128,V=f||B),48&t.$$.dirty[4]&&i(127,J=!!V&&(!!C||Ac(document.activeElement))),16&t.$$.dirty[1]|24&t.$$.dirty[4]&&Dn.set(!Z||V&&!J),16&t.$$.dirty[1]|8&t.$$.dirty[4]&&lo.set(!Z||!J),64&t.$$.dirty[1]|6&t.$$.dirty[4]&&i(121,S=R.cursorStyle?(({cursorStyle:Kt,cursorSize:we},Ei,Vi)=>{let pn;const en=Ei[we];if(en===void 0?pn=un(we,Vi):$i(en)?pn=en:Oe(en)&&(pn=Rb(we,Ei[we],Vi),we==="strokeWidth"&&(pn*=.5)),!(pn<=0||pn===void 0))return{size:pn,style:Kt}})(R,{...R,...O},xt):void 0),67108864&t.$$.dirty[3]|2097152&t.$$.dirty[4]&&i(122,j=po&&(ri=ue,(Ii=po).x>=0&&Ii.y>=0&&Ii.x<=ri.width&&Ii.y<=ri.height)),524288&t.$$.dirty[0]|160&t.$$.dirty[1]|1929379840&t.$$.dirty[3]|1&t.$$.dirty[4])if(j&&!Yr&&S&&!de){const Kt=S.size*Ut.scale,we={id:"cursor-"+Ie,x:hr.x,y:hr.y,strokeWidth:.5,strokeColor:[0,0,0]};S.style==="ellipse"&&(we.rx=Kt,we.ry=Kt);const Ei={strokeWidth:2.5,strokeColor:[1,1,1],opacity:.75},Vi=[{...we,...Ei},we];if(m==="selection"&&n){const pn=Kt,en=hr.x+pn,Oi=hr.y+pn+4,Vr={id:"cursor-"+Ie,strokeWidth:.75,strokeColor:[0,0,0],points:[{x:en,y:Oi},{x:en+4,y:Oi}]};Vi.push({...Vr,...Ei,strokeWidth:2,points:[{x:en-.5,y:Oi},{x:en+4.5,y:Oi}]},Vr)}(pn=>{qi.update(en=>[...en.filter(Oi=>Oi.id!=="cursor-"+Ie),...pn])})(Vi)}else qi.update(Kt=>Kt.filter(we=>we.id!=="cursor-"+Ie));1&t.$$.dirty[0]|128&t.$$.dirty[1]|956301312&t.$$.dirty[3]&&i(46,K=j?((Kt,we,Ei,Vi,pn,en)=>{if(Vi)return pn?"grabbing":"grab";if(Kt&&!we)return"none";if(!we)return en==="move"?"default":"crosshair";let Oi=we||Ei;return cs(Oi)?op(Oi)?Ke==="modal"?"default":"text":$c(Oi)?"move":"default":"default"})(S,Yr,w,de,!1,zt):"default"),264193&t.$$.dirty[0]|262144&t.$$.dirty[3]&&i(45,dt=zt==="preset"&&(he.length>0||Nt||yi)),64&t.$$.dirty[1]&&(lt=!Le(xt,"x")&&!Le(xt,"y")),524288&t.$$.dirty[4]&&i(44,ft=oe*Mn),262144&t.$$.dirty[3]|196608&t.$$.dirty[4]&&i(43,$t=mt&&yi?Kt=>Lc(()=>yi(Kt,Gn,{...nt},()=>Wn.set({}))):Zi),1048576&t.$$.dirty[3]&&i(42,Lt=Object.keys(Yi).reduce((Kt,we)=>(we==="beforeAddShape"||Yi[we]===void 0||(Kt[we]=Yi[we]),Kt),{})),16&t.$$.dirty[1]&&(Kt=>{Ft&&fe.update(we=>we.map(Ei=>(Ei._prerender=!!Kt&&op(Ei),Ei)))})(Z),131072&t.$$.dirty[3]|196608&t.$$.dirty[4]&&i(29,ct=mt&&Be([],nt,()=>Wn.set({}))),536871424&t.$$.dirty[0]&&i(41,et=!!ct.length||!!Object.keys(it).some(Kt=>wn.includes(Kt))),16&t.$$.dirty[1]|32768&t.$$.dirty[4]&&St&&li.set(Z?0:20),16384&t.$$.dirty[4]&&i(40,ht=Y?`transform: translateY(${Y}px)`:void 0)},io.set(!1),[zt,Li,X,jt,Bt,fe,We,je,Ke,it,Xt,Nt,Zt,pe,Se,fi,ui,Mi,he,Ie,an,Ui,yn,mn,$n,tn,dn,wi,qr,ct,N,T,s,r,c,Z,Ut,xt,de,gi,ht,et,Lt,$t,ft,dt,K,F,z,M,x,y,h,u,o,Ce,Re,He,Fn,Xn,jn,vr,Un,_n,Pi,so,yo,Ar,wr,qi,Zr,eo,xo,bo,Io,co,uo,vo,({index:W},ne)=>{i(26,dn=W),i(0,zt=tr[W])},({value:W},ne)=>{i(0,zt=W),(Yt||/enter/i.test(ne.key))&&So(W)},W=>{if(zt==="eraser")gn=wi.eraseShape();else if(zt&&vn[zt]){const[ne,Ii={}]=vn[zt],{drawMode:ri}=T;m==="selection"&&ri==="new"&&Fn.set([]);let Kt={};m==="selection"&&(N("selectiondown",[..._]),n&&(Yn=ne.drawMode,Kt.drawMode="subtract")),gn=wi.createShape({...ne,...O,...Kt},Ii)}else gn=void 0;return!!gn&&(gn.start(W),!0)},W=>!!gn&&(gn.update(W),!0),W=>!!gn&&(gn.release(W),!0),W=>!!gn&&(gn.cancel(W),gn=void 0,!0),W=>{if(!gn)return!1;if(gn.end(W),gn=void 0,m==="selection"){if(W.detail.isTap){const[ri]=vn[zt];ri.bitmap||Fn.set([])}N("selectionup",[..._])}const ne=wi.getMarkupItemDraft(),Ii=ee&&(ot===!0||Array.isArray(ot)&&ot.includes(zt));return ne&&!ne.isEditing||!Ii||i(0,zt="move"),!0},W=>{const{key:ne}=W,Ii=wi.getMarkupItemDraft();/escape/i.test(ne)&&Ii&&(W.preventDefault(),W.stopPropagation(),wi.discardMarkupItemDraft(),gn=void 0),/enter/i.test(ne)&&Ii&&(W.preventDefault(),W.stopPropagation(),no(Ii),gn=void 0)},function(W){Object.keys(W).forEach(ne=>{const{retain:Ii=!0,share:ri=!0}=R.settings&&R.settings[ne]||{};Ii&&(Dt&&ri?i(116,Pn[ne]=W[ne],Pn):(Pn[zt]||i(116,Pn[zt]={},Pn),i(116,Pn[zt][ne]=W[ne],Pn)))}),N("selectstyle",W),w&&(wi.updateMarkupShape(w,W),clearTimeout(Xr),Xr=setTimeout(()=>{ro()},200))},(W,ne,Ii)=>{i(118,hr=ne),i(119,po=Ii)},()=>{i(119,po=void 0),i(118,hr=void 0)},W=>{N("markuptap",W)},W=>i(117,Yr=W),()=>{kr=!1},(W,ne)=>{if(kr)return;const{beforeAddShape:Ii=()=>!0}=Yi,ri=_r(ne),Kt=wi.getMarkupItemDraft(),we=ru(Gt,{x:ri.x+(xt.x||0),y:ri.y+(xt.y||0)});if(Kt&&!we&&wi.discardMarkupItemDraft(),we){if(!Kt){const Ei=Rm(W,Gt),Vi=mr(Ei,ri);return Ii(Vi)?(Dp(Vi),void wi.addShape(Vi)):(kr=!0,void ne.preventDefault())}To(Kt)&&(ri.x-=.5*Kt.width,ri.y-=.5*Kt.height),W.shape&&(Le(W.shape,"x")&&(ri.x=W.shape.x),Le(W.shape,"y")&&(ri.y=W.shape.y)),wi.updateMarkupShape(Kt,ri)}},(W,ne)=>{if(kr)return;const Ii=_r(ne);if(!ru(Gt,{x:Ii.x+(xt.x||0),y:Ii.y+(xt.y||0)}))return void wi.discardMarkupItemDraft();const ri=wi.confirmMarkupItemDraft();wi.selectShape(ri),N("addshape",ri),Vn.write()},W=>Gn(W),W=>{return ne=W.detail.resources,Ii=_r(W.detail.event),ne.forEach(ri=>Gn(ri,Ii));var ne,Ii},W=>{if(!xe)return!0;const ne=rectClone(wt);return rectScale(ne,1/U),rectTranslate(ne,Ot),rectScale(ne,Ut.scale),xe(W,{...ne,x:ne.x+Rt.x,y:ne.y+Rt.y})},ro,Wn,wn,li,G,Qt,se,Ee,Yt,ot,ee,ge,Dt,Be,yi,xe,Yi,vn,tr,Pn,Yr,hr,po,w,S,j,n,m,O,R,J,V,C,B,f,k,g,l,d,p,a,Y,St,nt,mt,Ft,oe,Rt,ue,be,$e,_,ye,function(W){Gr.call(this,t,W)},W=>W[0]===zt,(W,ne,Ii)=>{const ri=W.filter(([,Kt])=>!wn.includes(Kt));return Mi?Mi(ri,ne,Ii):ri},W=>W[0]===dn,W=>{Promise.resolve().then(()=>{N("addshape",W),ro()})},W=>{N("selectshape",W)},W=>{Promise.resolve().then(()=>{N("blurshape",W)})},W=>{N("tapshape",W)},W=>{N("updateshape",W),ro()},W=>{N("removeshape",W),ro()},function(W){Ai[W?"unshift":"push"](()=>{wi=W,i(27,wi)})},function(W){Ai[W?"unshift":"push"](()=>{qr=W,i(28,qr)})},W=>W.filter(([,ne])=>wn.includes(ne)),function(W){Gr.call(this,t,W)}]}class Iu extends si{constructor(e){super(),ai(this,e,h6,p6,ti,{isActive:1,isActiveFraction:2,isVisible:3,stores:101,locale:4,shapes:5,toolbar:102,toolShapes:103,toolActive:0,toolSelectRadius:6,toolRetainStyles:104,toolbarLayout:7,textInputMode:8,shapeControls:9,enableButtonFlipVertical:10,enablePresetSelectImage:11,enablePresetDropImage:12,enableSelectToolToAddShape:105,enableAutoSelectMoveTool:106,enableTapToAddText:13,enableMoveTool:107,enableViewTool:108,enableToolShareStyles:109,gridSize:14,snapThreshold:15,enableSnapToContext:16,willRenderHeaderTools:110,willRenderPresetToolbar:111,willRenderShapeStyleControls:17,willStartInteraction:112,shapePresets:18,utilKey:19,mapScreenPointToImagePoint:20,mapImagePointToScreenPoint:21,imageRotation:22,imageFlipX:23,imageFlipY:24,parentRect:25,hooks:113},null,[-1,-1,-1,-1,-1,-1,-1])}get isActive(){return this.$$.ctx[1]}set isActive(e){this.$$set({isActive:e}),I()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),I()}get isVisible(){return this.$$.ctx[3]}set isVisible(e){this.$$set({isVisible:e}),I()}get stores(){return this.$$.ctx[101]}set stores(e){this.$$set({stores:e}),I()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),I()}get shapes(){return this.$$.ctx[5]}set shapes(e){this.$$set({shapes:e}),I()}get toolbar(){return this.$$.ctx[102]}set toolbar(e){this.$$set({toolbar:e}),I()}get toolShapes(){return this.$$.ctx[103]}set toolShapes(e){this.$$set({toolShapes:e}),I()}get toolActive(){return this.$$.ctx[0]}set toolActive(e){this.$$set({toolActive:e}),I()}get toolSelectRadius(){return this.$$.ctx[6]}set toolSelectRadius(e){this.$$set({toolSelectRadius:e}),I()}get toolRetainStyles(){return this.$$.ctx[104]}set toolRetainStyles(e){this.$$set({toolRetainStyles:e}),I()}get toolbarLayout(){return this.$$.ctx[7]}set toolbarLayout(e){this.$$set({toolbarLayout:e}),I()}get textInputMode(){return this.$$.ctx[8]}set textInputMode(e){this.$$set({textInputMode:e}),I()}get shapeControls(){return this.$$.ctx[9]}set shapeControls(e){this.$$set({shapeControls:e}),I()}get enableButtonFlipVertical(){return this.$$.ctx[10]}set enableButtonFlipVertical(e){this.$$set({enableButtonFlipVertical:e}),I()}get enablePresetSelectImage(){return this.$$.ctx[11]}set enablePresetSelectImage(e){this.$$set({enablePresetSelectImage:e}),I()}get enablePresetDropImage(){return this.$$.ctx[12]}set enablePresetDropImage(e){this.$$set({enablePresetDropImage:e}),I()}get enableSelectToolToAddShape(){return this.$$.ctx[105]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),I()}get enableAutoSelectMoveTool(){return this.$$.ctx[106]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),I()}get enableTapToAddText(){return this.$$.ctx[13]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),I()}get enableMoveTool(){return this.$$.ctx[107]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),I()}get enableViewTool(){return this.$$.ctx[108]}set enableViewTool(e){this.$$set({enableViewTool:e}),I()}get enableToolShareStyles(){return this.$$.ctx[109]}set enableToolShareStyles(e){this.$$set({enableToolShareStyles:e}),I()}get gridSize(){return this.$$.ctx[14]}set gridSize(e){this.$$set({gridSize:e}),I()}get snapThreshold(){return this.$$.ctx[15]}set snapThreshold(e){this.$$set({snapThreshold:e}),I()}get enableSnapToContext(){return this.$$.ctx[16]}set enableSnapToContext(e){this.$$set({enableSnapToContext:e}),I()}get willRenderHeaderTools(){return this.$$.ctx[110]}set willRenderHeaderTools(e){this.$$set({willRenderHeaderTools:e}),I()}get willRenderPresetToolbar(){return this.$$.ctx[111]}set willRenderPresetToolbar(e){this.$$set({willRenderPresetToolbar:e}),I()}get willRenderShapeStyleControls(){return this.$$.ctx[17]}set willRenderShapeStyleControls(e){this.$$set({willRenderShapeStyleControls:e}),I()}get willStartInteraction(){return this.$$.ctx[112]}set willStartInteraction(e){this.$$set({willStartInteraction:e}),I()}get shapePresets(){return this.$$.ctx[18]}set shapePresets(e){this.$$set({shapePresets:e}),I()}get utilKey(){return this.$$.ctx[19]}set utilKey(e){this.$$set({utilKey:e}),I()}get mapScreenPointToImagePoint(){return this.$$.ctx[20]}set mapScreenPointToImagePoint(e){this.$$set({mapScreenPointToImagePoint:e}),I()}get mapImagePointToScreenPoint(){return this.$$.ctx[21]}set mapImagePointToScreenPoint(e){this.$$set({mapImagePointToScreenPoint:e}),I()}get imageRotation(){return this.$$.ctx[22]}set imageRotation(e){this.$$set({imageRotation:e}),I()}get imageFlipX(){return this.$$.ctx[23]}set imageFlipX(e){this.$$set({imageFlipX:e}),I()}get imageFlipY(){return this.$$.ctx[24]}set imageFlipY(e){this.$$set({imageFlipY:e}),I()}get parentRect(){return this.$$.ctx[25]}set parentRect(e){this.$$set({parentRect:e}),I()}get hooks(){return this.$$.ctx[113]}set hooks(e){this.$$set({hooks:e}),I()}}var Zh=(t,e,i,n,r,o,a,s,l)=>{const c=_e(t),d=.5*i.width,u=.5*i.height,p=.5*e.width,h=.5*e.height,g=r.x+n.x,m=r.y+n.y;s&&(c.x=i.width-c.x),l&&(c.y=i.height-c.y);const y=Math.cos(o),x=Math.sin(o);c.x-=d,c.y-=u;const k=c.x*y-c.y*x,w=c.x*x+c.y*y;c.x=d+k,c.y=u+w,c.x*=a,c.y*=a,c.x+=p,c.y+=h,c.x+=g,c.y+=m,c.x-=d*a,c.y-=u*a;const C=(r.x-g)*a,M=(r.y-m)*a,R=C*y-M*x,O=C*x+M*y;return c.x+=R,c.y+=O,c},Xh=(t,e,i,n,r,o,a,s,l)=>{const c=_e(t),d=El(i),u=El(e),p=rt(r.x+n.x,r.y+n.y),h=Math.cos(o),g=Math.sin(o);c.x-=u.x,c.y-=u.y;const m=(r.x-p.x)*a,y=(r.y-p.y)*a,x=m*h-y*g,k=m*g+y*h;c.x-=x,c.y-=k,c.x-=p.x,c.y-=p.y,c.x/=a,c.y/=a;const w=c.x*h+c.y*g,C=c.x*g-c.y*h;return c.x=w,c.y=-C,c.x+=d.x,c.y+=d.y,s&&(c.x=i.width-c.x),l&&(c.y=i.height-c.y),c},Dl=t=>typeof t=="boolean";function m6(t){let e,i,n;function r(a){t[59](a)}let o={utilKey:"annotate",stores:t[4],locale:t[5],isActive:t[1],isActiveFraction:t[2],isVisible:t[3],mapScreenPointToImagePoint:t[44],mapImagePointToScreenPoint:t[43],imageRotation:t[45],imageFlipX:t[42],imageFlipY:t[41],shapes:t[47],toolbar:t[20]||t[6],toolShapes:t[21]||t[7],toolRetainStyles:t[8],enableSelectToolToAddShape:t[30],enableTapToAddText:t[31],enableViewTool:t[29],enableMoveTool:t[33],enableAutoSelectMoveTool:t[32],snapThreshold:t[15],gridSize:$i(t[17])?t[17]:t[14],enableSnapToContext:Dl(t[18])?t[18]:t[16],enableToolShareStyles:t[12],shapeControls:t[22]||t[9],shapePresets:t[26],enableButtonFlipVertical:t[23],parentRect:t[48],enablePresetDropImage:t[25],enablePresetSelectImage:t[24],toolSelectRadius:t[10],textInputMode:t[11],willStartInteraction:t[13],willRenderPresetToolbar:t[27]||t[19],willRenderShapeStyleControls:t[28],hooks:{willRenderShapeControls:t[34],willRenderShapeTextControls:t[35],beforeAddShape:t[36],beforeRemoveShape:t[37],beforeDeselectShape:t[38],beforeSelectShape:t[39],beforeUpdateShape:t[40]}};return t[0]!==void 0&&(o.toolActive=t[0]),e=new Iu({props:o}),Ai.push(()=>go(e,"toolActive",r)),e.$on("measure",t[60]),{c(){At(e.$$.fragment)},m(a,s){It(e,a,s),n=!0},p(a,s){const l={};16&s[0]&&(l.stores=a[4]),32&s[0]&&(l.locale=a[5]),2&s[0]&&(l.isActive=a[1]),4&s[0]&&(l.isActiveFraction=a[2]),8&s[0]&&(l.isVisible=a[3]),8192&s[1]&&(l.mapScreenPointToImagePoint=a[44]),4096&s[1]&&(l.mapImagePointToScreenPoint=a[43]),16384&s[1]&&(l.imageRotation=a[45]),2048&s[1]&&(l.imageFlipX=a[42]),1024&s[1]&&(l.imageFlipY=a[41]),1048640&s[0]&&(l.toolbar=a[20]||a[6]),2097280&s[0]&&(l.toolShapes=a[21]||a[7]),256&s[0]&&(l.toolRetainStyles=a[8]),1073741824&s[0]&&(l.enableSelectToolToAddShape=a[30]),1&s[1]&&(l.enableTapToAddText=a[31]),536870912&s[0]&&(l.enableViewTool=a[29]),4&s[1]&&(l.enableMoveTool=a[33]),2&s[1]&&(l.enableAutoSelectMoveTool=a[32]),32768&s[0]&&(l.snapThreshold=a[15]),147456&s[0]&&(l.gridSize=$i(a[17])?a[17]:a[14]),327680&s[0]&&(l.enableSnapToContext=Dl(a[18])?a[18]:a[16]),4096&s[0]&&(l.enableToolShareStyles=a[12]),4194816&s[0]&&(l.shapeControls=a[22]||a[9]),67108864&s[0]&&(l.shapePresets=a[26]),8388608&s[0]&&(l.enableButtonFlipVertical=a[23]),33554432&s[0]&&(l.enablePresetDropImage=a[25]),16777216&s[0]&&(l.enablePresetSelectImage=a[24]),1024&s[0]&&(l.toolSelectRadius=a[10]),2048&s[0]&&(l.textInputMode=a[11]),8192&s[0]&&(l.willStartInteraction=a[13]),134742016&s[0]&&(l.willRenderPresetToolbar=a[27]||a[19]),268435456&s[0]&&(l.willRenderShapeStyleControls=a[28]),1016&s[1]&&(l.hooks={willRenderShapeControls:a[34],willRenderShapeTextControls:a[35],beforeAddShape:a[36],beforeRemoveShape:a[37],beforeDeselectShape:a[38],beforeSelectShape:a[39],beforeUpdateShape:a[40]}),!i&&1&s[0]&&(i=!0,l.toolActive=a[0],Po(()=>i=!1)),e.$set(l)},i(a){n||(P(e.$$.fragment,a),n=!0)},o(a){D(e.$$.fragment,a),n=!1},d(a){Et(e,a)}}}function $6(t,e,i){let n,r,o,a,s,l,c,d,u,{isActive:p}=e,{isActiveFraction:h}=e,{isVisible:g}=e,{stores:m}=e,{locale:y={}}=e,{markupEditorToolbar:x}=e,{markupEditorToolStyles:k}=e,{markupEditorToolRetainStyles:w}=e,{markupEditorShapeStyleControls:C}=e,{markupEditorToolSelectRadius:M}=e,{markupEditorTextInputMode:R}=e,{markupEditorToolShareStyles:O}=e,{markupEditorWillStartInteraction:T}=e,{markupEditorGridSize:z=0}=e,{markupEditorSnapThreshold:F=0}=e,{markupEditorSnapToContext:B=!1}=e,{annotateGridSize:f}=e,{annotateSnapToContext:V}=e,{willRenderShapePresetToolbar:J}=e,{annotateTools:S}=e,{annotateToolShapes:j}=e,{annotateShapeControls:K}=e,{annotateActiveTool:dt}=e,{annotateEnableButtonFlipVertical:lt=!1}=e,{annotateEnableSelectImagePreset:N=!1}=e,{annotateEnableDropImagePreset:ft=!0}=e,{annotatePresets:$t=[]}=e,{annotateWillRenderShapePresetToolbar:Lt}=e,{annotateWillRenderShapeStyleControls:ct}=e,{enableViewTool:et}=e,{enableSelectToolToAddShape:ht}=e,{enableTapToAddText:Y}=e,{enableAutoSelectMoveTool:Z}=e,{enableMoveTool:St}=e,{willRenderShapeControls:nt}=e,{willRenderShapeTextControls:mt}=e,{beforeAddShape:Ft}=e,{beforeRemoveShape:oe}=e,{beforeDeselectShape:Rt}=e,{beforeSelectShape:Ut}=e,{beforeUpdateShape:Ot}=e;const{rootRect:U,imageAnnotation:wt,imageSize:xt,imageRotation:Gt,imageFlipX:de,imageFlipY:ue,imageTransforms:be,imageTransformsInterpolated:$e}=m;return E(t,U,_=>i(58,d=_)),E(t,xt,_=>i(57,c=_)),E(t,Gt,_=>i(45,u=_)),E(t,de,_=>i(42,a=_)),E(t,ue,_=>i(41,o=_)),E(t,be,_=>i(56,l=_)),E(t,$e,_=>i(55,s=_)),t.$$set=_=>{"isActive"in _&&i(1,p=_.isActive),"isActiveFraction"in _&&i(2,h=_.isActiveFraction),"isVisible"in _&&i(3,g=_.isVisible),"stores"in _&&i(4,m=_.stores),"locale"in _&&i(5,y=_.locale),"markupEditorToolbar"in _&&i(6,x=_.markupEditorToolbar),"markupEditorToolStyles"in _&&i(7,k=_.markupEditorToolStyles),"markupEditorToolRetainStyles"in _&&i(8,w=_.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in _&&i(9,C=_.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in _&&i(10,M=_.markupEditorToolSelectRadius),"markupEditorTextInputMode"in _&&i(11,R=_.markupEditorTextInputMode),"markupEditorToolShareStyles"in _&&i(12,O=_.markupEditorToolShareStyles),"markupEditorWillStartInteraction"in _&&i(13,T=_.markupEditorWillStartInteraction),"markupEditorGridSize"in _&&i(14,z=_.markupEditorGridSize),"markupEditorSnapThreshold"in _&&i(15,F=_.markupEditorSnapThreshold),"markupEditorSnapToContext"in _&&i(16,B=_.markupEditorSnapToContext),"annotateGridSize"in _&&i(17,f=_.annotateGridSize),"annotateSnapToContext"in _&&i(18,V=_.annotateSnapToContext),"willRenderShapePresetToolbar"in _&&i(19,J=_.willRenderShapePresetToolbar),"annotateTools"in _&&i(20,S=_.annotateTools),"annotateToolShapes"in _&&i(21,j=_.annotateToolShapes),"annotateShapeControls"in _&&i(22,K=_.annotateShapeControls),"annotateActiveTool"in _&&i(0,dt=_.annotateActiveTool),"annotateEnableButtonFlipVertical"in _&&i(23,lt=_.annotateEnableButtonFlipVertical),"annotateEnableSelectImagePreset"in _&&i(24,N=_.annotateEnableSelectImagePreset),"annotateEnableDropImagePreset"in _&&i(25,ft=_.annotateEnableDropImagePreset),"annotatePresets"in _&&i(26,$t=_.annotatePresets),"annotateWillRenderShapePresetToolbar"in _&&i(27,Lt=_.annotateWillRenderShapePresetToolbar),"annotateWillRenderShapeStyleControls"in _&&i(28,ct=_.annotateWillRenderShapeStyleControls),"enableViewTool"in _&&i(29,et=_.enableViewTool),"enableSelectToolToAddShape"in _&&i(30,ht=_.enableSelectToolToAddShape),"enableTapToAddText"in _&&i(31,Y=_.enableTapToAddText),"enableAutoSelectMoveTool"in _&&i(32,Z=_.enableAutoSelectMoveTool),"enableMoveTool"in _&&i(33,St=_.enableMoveTool),"willRenderShapeControls"in _&&i(34,nt=_.willRenderShapeControls),"willRenderShapeTextControls"in _&&i(35,mt=_.willRenderShapeTextControls),"beforeAddShape"in _&&i(36,Ft=_.beforeAddShape),"beforeRemoveShape"in _&&i(37,oe=_.beforeRemoveShape),"beforeDeselectShape"in _&&i(38,Rt=_.beforeDeselectShape),"beforeSelectShape"in _&&i(39,Ut=_.beforeSelectShape),"beforeUpdateShape"in _&&i(40,Ot=_.beforeUpdateShape)},t.$$.update=()=>{251661312&t.$$.dirty[1]&&i(44,n=_=>Xh(_,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o)),251661312&t.$$.dirty[1]&&i(43,r=_=>Zh(_,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o))},[dt,p,h,g,m,y,x,k,w,C,M,R,O,T,z,F,B,f,V,J,S,j,K,lt,N,ft,$t,Lt,ct,et,ht,Y,Z,St,nt,mt,Ft,oe,Rt,Ut,Ot,o,a,r,n,u,U,wt,xt,Gt,de,ue,be,$e,"annotate",s,l,c,d,function(_){dt=_,i(0,dt)},function(_){Gr.call(this,t,_)}]}var g6={util:["annotate",class extends si{constructor(t){super(),ai(this,t,$6,m6,ti,{name:54,isActive:1,isActiveFraction:2,isVisible:3,stores:4,locale:5,markupEditorToolbar:6,markupEditorToolStyles:7,markupEditorToolRetainStyles:8,markupEditorShapeStyleControls:9,markupEditorToolSelectRadius:10,markupEditorTextInputMode:11,markupEditorToolShareStyles:12,markupEditorWillStartInteraction:13,markupEditorGridSize:14,markupEditorSnapThreshold:15,markupEditorSnapToContext:16,annotateGridSize:17,annotateSnapToContext:18,willRenderShapePresetToolbar:19,annotateTools:20,annotateToolShapes:21,annotateShapeControls:22,annotateActiveTool:0,annotateEnableButtonFlipVertical:23,annotateEnableSelectImagePreset:24,annotateEnableDropImagePreset:25,annotatePresets:26,annotateWillRenderShapePresetToolbar:27,annotateWillRenderShapeStyleControls:28,enableViewTool:29,enableSelectToolToAddShape:30,enableTapToAddText:31,enableAutoSelectMoveTool:32,enableMoveTool:33,willRenderShapeControls:34,willRenderShapeTextControls:35,beforeAddShape:36,beforeRemoveShape:37,beforeDeselectShape:38,beforeSelectShape:39,beforeUpdateShape:40},null,[-1,-1])}get name(){return this.$$.ctx[54]}get isActive(){return this.$$.ctx[1]}set isActive(t){this.$$set({isActive:t}),I()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),I()}get isVisible(){return this.$$.ctx[3]}set isVisible(t){this.$$set({isVisible:t}),I()}get stores(){return this.$$.ctx[4]}set stores(t){this.$$set({stores:t}),I()}get locale(){return this.$$.ctx[5]}set locale(t){this.$$set({locale:t}),I()}get markupEditorToolbar(){return this.$$.ctx[6]}set markupEditorToolbar(t){this.$$set({markupEditorToolbar:t}),I()}get markupEditorToolStyles(){return this.$$.ctx[7]}set markupEditorToolStyles(t){this.$$set({markupEditorToolStyles:t}),I()}get markupEditorToolRetainStyles(){return this.$$.ctx[8]}set markupEditorToolRetainStyles(t){this.$$set({markupEditorToolRetainStyles:t}),I()}get markupEditorShapeStyleControls(){return this.$$.ctx[9]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),I()}get markupEditorToolSelectRadius(){return this.$$.ctx[10]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),I()}get markupEditorTextInputMode(){return this.$$.ctx[11]}set markupEditorTextInputMode(t){this.$$set({markupEditorTextInputMode:t}),I()}get markupEditorToolShareStyles(){return this.$$.ctx[12]}set markupEditorToolShareStyles(t){this.$$set({markupEditorToolShareStyles:t}),I()}get markupEditorWillStartInteraction(){return this.$$.ctx[13]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),I()}get markupEditorGridSize(){return this.$$.ctx[14]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),I()}get markupEditorSnapThreshold(){return this.$$.ctx[15]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),I()}get markupEditorSnapToContext(){return this.$$.ctx[16]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),I()}get annotateGridSize(){return this.$$.ctx[17]}set annotateGridSize(t){this.$$set({annotateGridSize:t}),I()}get annotateSnapToContext(){return this.$$.ctx[18]}set annotateSnapToContext(t){this.$$set({annotateSnapToContext:t}),I()}get willRenderShapePresetToolbar(){return this.$$.ctx[19]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),I()}get annotateTools(){return this.$$.ctx[20]}set annotateTools(t){this.$$set({annotateTools:t}),I()}get annotateToolShapes(){return this.$$.ctx[21]}set annotateToolShapes(t){this.$$set({annotateToolShapes:t}),I()}get annotateShapeControls(){return this.$$.ctx[22]}set annotateShapeControls(t){this.$$set({annotateShapeControls:t}),I()}get annotateActiveTool(){return this.$$.ctx[0]}set annotateActiveTool(t){this.$$set({annotateActiveTool:t}),I()}get annotateEnableButtonFlipVertical(){return this.$$.ctx[23]}set annotateEnableButtonFlipVertical(t){this.$$set({annotateEnableButtonFlipVertical:t}),I()}get annotateEnableSelectImagePreset(){return this.$$.ctx[24]}set annotateEnableSelectImagePreset(t){this.$$set({annotateEnableSelectImagePreset:t}),I()}get annotateEnableDropImagePreset(){return this.$$.ctx[25]}set annotateEnableDropImagePreset(t){this.$$set({annotateEnableDropImagePreset:t}),I()}get annotatePresets(){return this.$$.ctx[26]}set annotatePresets(t){this.$$set({annotatePresets:t}),I()}get annotateWillRenderShapePresetToolbar(){return this.$$.ctx[27]}set annotateWillRenderShapePresetToolbar(t){this.$$set({annotateWillRenderShapePresetToolbar:t}),I()}get annotateWillRenderShapeStyleControls(){return this.$$.ctx[28]}set annotateWillRenderShapeStyleControls(t){this.$$set({annotateWillRenderShapeStyleControls:t}),I()}get enableViewTool(){return this.$$.ctx[29]}set enableViewTool(t){this.$$set({enableViewTool:t}),I()}get enableSelectToolToAddShape(){return this.$$.ctx[30]}set enableSelectToolToAddShape(t){this.$$set({enableSelectToolToAddShape:t}),I()}get enableTapToAddText(){return this.$$.ctx[31]}set enableTapToAddText(t){this.$$set({enableTapToAddText:t}),I()}get enableAutoSelectMoveTool(){return this.$$.ctx[32]}set enableAutoSelectMoveTool(t){this.$$set({enableAutoSelectMoveTool:t}),I()}get enableMoveTool(){return this.$$.ctx[33]}set enableMoveTool(t){this.$$set({enableMoveTool:t}),I()}get willRenderShapeControls(){return this.$$.ctx[34]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),I()}get willRenderShapeTextControls(){return this.$$.ctx[35]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),I()}get beforeAddShape(){return this.$$.ctx[36]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),I()}get beforeRemoveShape(){return this.$$.ctx[37]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),I()}get beforeDeselectShape(){return this.$$.ctx[38]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),I()}get beforeSelectShape(){return this.$$.ctx[39]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),I()}get beforeUpdateShape(){return this.$$.ctx[40]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),I()}}]};function f6(t){let e,i,n;function r(a){t[51](a)}let o={stores:t[4],locale:t[5],isActive:t[1],isActiveFraction:t[2],isVisible:t[3],mapScreenPointToImagePoint:t[42],mapImagePointToScreenPoint:t[41],utilKey:"decorate",shapes:t[44],toolbar:t[19]||t[6],toolShapes:t[20]||t[7],toolRetainStyles:t[8],shapeControls:t[21]||t[9],shapePresets:t[25],enableSelectToolToAddShape:t[28],enableTapToAddText:t[29],enableViewTool:t[30],enableMoveTool:t[31],enableAutoSelectMoveTool:t[32],snapThreshold:t[15],gridSize:$i(t[17])?t[17]:t[14],enableSnapToContext:Dl(t[18])?t[18]:t[16],enableToolShareStyles:t[12],enablePresetSelectImage:t[23],enablePresetDropImage:t[24],enableButtonFlipVertical:t[22],parentRect:t[43],toolSelectRadius:t[10],textInputMode:t[11],willStartInteraction:t[40],willRenderPresetToolbar:t[26]||t[13],willRenderShapeStyleControls:t[27],hooks:{willRenderShapeControls:t[33],willRenderShapeTextControls:t[34],beforeAddShape:t[35],beforeRemoveShape:t[36],beforeDeselectShape:t[37],beforeSelectShape:t[38],beforeUpdateShape:t[39]}};return t[0]!==void 0&&(o.toolActive=t[0]),e=new Iu({props:o}),Ai.push(()=>go(e,"toolActive",r)),e.$on("measure",t[52]),{c(){At(e.$$.fragment)},m(a,s){It(e,a,s),n=!0},p(a,s){const l={};16&s[0]&&(l.stores=a[4]),32&s[0]&&(l.locale=a[5]),2&s[0]&&(l.isActive=a[1]),4&s[0]&&(l.isActiveFraction=a[2]),8&s[0]&&(l.isVisible=a[3]),2048&s[1]&&(l.mapScreenPointToImagePoint=a[42]),1024&s[1]&&(l.mapImagePointToScreenPoint=a[41]),524352&s[0]&&(l.toolbar=a[19]||a[6]),1048704&s[0]&&(l.toolShapes=a[20]||a[7]),256&s[0]&&(l.toolRetainStyles=a[8]),2097664&s[0]&&(l.shapeControls=a[21]||a[9]),33554432&s[0]&&(l.shapePresets=a[25]),268435456&s[0]&&(l.enableSelectToolToAddShape=a[28]),536870912&s[0]&&(l.enableTapToAddText=a[29]),1073741824&s[0]&&(l.enableViewTool=a[30]),1&s[1]&&(l.enableMoveTool=a[31]),2&s[1]&&(l.enableAutoSelectMoveTool=a[32]),32768&s[0]&&(l.snapThreshold=a[15]),147456&s[0]&&(l.gridSize=$i(a[17])?a[17]:a[14]),327680&s[0]&&(l.enableSnapToContext=Dl(a[18])?a[18]:a[16]),4096&s[0]&&(l.enableToolShareStyles=a[12]),8388608&s[0]&&(l.enablePresetSelectImage=a[23]),16777216&s[0]&&(l.enablePresetDropImage=a[24]),4194304&s[0]&&(l.enableButtonFlipVertical=a[22]),1024&s[0]&&(l.toolSelectRadius=a[10]),2048&s[0]&&(l.textInputMode=a[11]),512&s[1]&&(l.willStartInteraction=a[40]),67117056&s[0]&&(l.willRenderPresetToolbar=a[26]||a[13]),134217728&s[0]&&(l.willRenderShapeStyleControls=a[27]),508&s[1]&&(l.hooks={willRenderShapeControls:a[33],willRenderShapeTextControls:a[34],beforeAddShape:a[35],beforeRemoveShape:a[36],beforeDeselectShape:a[37],beforeSelectShape:a[38],beforeUpdateShape:a[39]}),!i&&1&s[0]&&(i=!0,l.toolActive=a[0],Po(()=>i=!1)),e.$set(l)},i(a){n||(P(e.$$.fragment,a),n=!0)},o(a){D(e.$$.fragment,a),n=!1},d(a){Et(e,a)}}}function y6(t,e,i){let n,r,o,a,s,{isActive:l}=e,{isActiveFraction:c}=e,{isVisible:d}=e,{stores:u}=e,{locale:p={}}=e,{markupEditorToolbar:h}=e,{markupEditorToolStyles:g}=e,{markupEditorToolRetainStyles:m}=e,{markupEditorShapeStyleControls:y}=e,{markupEditorToolSelectRadius:x}=e,{markupEditorTextInputMode:k}=e,{markupEditorToolShareStyles:w}=e,{willRenderShapePresetToolbar:C}=e,{markupEditorGridSize:M}=e,{markupEditorSnapThreshold:R}=e,{markupEditorSnapToContext:O=!0}=e,{decorateGridSize:T}=e,{decorateSnapToContext:z}=e,{decorateTools:F}=e,{decorateToolShapes:B}=e,{decorateShapeControls:f}=e,{decorateActiveTool:V}=e,{decorateEnableButtonFlipVertical:J=!1}=e,{decorateEnableSelectImagePreset:S=!1}=e,{decorateEnableDropImagePreset:j=!0}=e,{decoratePresets:K=[]}=e,{decorateWillRenderShapePresetToolbar:dt}=e,{decorateWillRenderShapeStyleControls:lt}=e,{enableSelectToolToAddShape:N}=e,{enableTapToAddText:ft}=e,{enableViewTool:$t}=e,{enableMoveTool:Lt}=e,{enableAutoSelectMoveTool:ct}=e,{willRenderShapeControls:et}=e,{willRenderShapeTextControls:ht}=e,{beforeAddShape:Y}=e,{beforeRemoveShape:Z}=e,{beforeDeselectShape:St}=e,{beforeSelectShape:nt}=e,{beforeUpdateShape:mt}=e,{markupEditorWillStartInteraction:Ft}=e;const{imageCropRect:oe,imageDecoration:Rt,imageSelectionRectPresentation:Ut,imageTransformsInterpolated:Ot}=u;return E(t,Ut,U=>i(49,a=U)),E(t,Ot,U=>i(50,s=U)),t.$$set=U=>{"isActive"in U&&i(1,l=U.isActive),"isActiveFraction"in U&&i(2,c=U.isActiveFraction),"isVisible"in U&&i(3,d=U.isVisible),"stores"in U&&i(4,u=U.stores),"locale"in U&&i(5,p=U.locale),"markupEditorToolbar"in U&&i(6,h=U.markupEditorToolbar),"markupEditorToolStyles"in U&&i(7,g=U.markupEditorToolStyles),"markupEditorToolRetainStyles"in U&&i(8,m=U.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in U&&i(9,y=U.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in U&&i(10,x=U.markupEditorToolSelectRadius),"markupEditorTextInputMode"in U&&i(11,k=U.markupEditorTextInputMode),"markupEditorToolShareStyles"in U&&i(12,w=U.markupEditorToolShareStyles),"willRenderShapePresetToolbar"in U&&i(13,C=U.willRenderShapePresetToolbar),"markupEditorGridSize"in U&&i(14,M=U.markupEditorGridSize),"markupEditorSnapThreshold"in U&&i(15,R=U.markupEditorSnapThreshold),"markupEditorSnapToContext"in U&&i(16,O=U.markupEditorSnapToContext),"decorateGridSize"in U&&i(17,T=U.decorateGridSize),"decorateSnapToContext"in U&&i(18,z=U.decorateSnapToContext),"decorateTools"in U&&i(19,F=U.decorateTools),"decorateToolShapes"in U&&i(20,B=U.decorateToolShapes),"decorateShapeControls"in U&&i(21,f=U.decorateShapeControls),"decorateActiveTool"in U&&i(0,V=U.decorateActiveTool),"decorateEnableButtonFlipVertical"in U&&i(22,J=U.decorateEnableButtonFlipVertical),"decorateEnableSelectImagePreset"in U&&i(23,S=U.decorateEnableSelectImagePreset),"decorateEnableDropImagePreset"in U&&i(24,j=U.decorateEnableDropImagePreset),"decoratePresets"in U&&i(25,K=U.decoratePresets),"decorateWillRenderShapePresetToolbar"in U&&i(26,dt=U.decorateWillRenderShapePresetToolbar),"decorateWillRenderShapeStyleControls"in U&&i(27,lt=U.decorateWillRenderShapeStyleControls),"enableSelectToolToAddShape"in U&&i(28,N=U.enableSelectToolToAddShape),"enableTapToAddText"in U&&i(29,ft=U.enableTapToAddText),"enableViewTool"in U&&i(30,$t=U.enableViewTool),"enableMoveTool"in U&&i(31,Lt=U.enableMoveTool),"enableAutoSelectMoveTool"in U&&i(32,ct=U.enableAutoSelectMoveTool),"willRenderShapeControls"in U&&i(33,et=U.willRenderShapeControls),"willRenderShapeTextControls"in U&&i(34,ht=U.willRenderShapeTextControls),"beforeAddShape"in U&&i(35,Y=U.beforeAddShape),"beforeRemoveShape"in U&&i(36,Z=U.beforeRemoveShape),"beforeDeselectShape"in U&&i(37,St=U.beforeDeselectShape),"beforeSelectShape"in U&&i(38,nt=U.beforeSelectShape),"beforeUpdateShape"in U&&i(39,mt=U.beforeUpdateShape),"markupEditorWillStartInteraction"in U&&i(40,Ft=U.markupEditorWillStartInteraction)},t.$$.update=()=>{524288&t.$$.dirty[1]&&i(48,n=s?s.scale:1),393216&t.$$.dirty[1]&&i(42,r=U=>{const wt=_e(U);return wt.x-=a.x,wt.y-=a.y,wt.x/=n,wt.y/=n,wt}),393216&t.$$.dirty[1]&&i(41,o=U=>{const wt=_e(U);return wt.x*=n,wt.y*=n,wt.x+=a.x,wt.y+=a.y,wt})},[V,l,c,d,u,p,h,g,m,y,x,k,w,C,M,R,O,T,z,F,B,f,J,S,j,K,dt,lt,N,ft,$t,Lt,ct,et,ht,Y,Z,St,nt,mt,Ft,o,r,oe,Rt,Ut,Ot,"decorate",n,a,s,function(U){V=U,i(0,V)},function(U){Gr.call(this,t,U)}]}var x6={util:["decorate",class extends si{constructor(t){super(),ai(this,t,y6,f6,ti,{name:47,isActive:1,isActiveFraction:2,isVisible:3,stores:4,locale:5,markupEditorToolbar:6,markupEditorToolStyles:7,markupEditorToolRetainStyles:8,markupEditorShapeStyleControls:9,markupEditorToolSelectRadius:10,markupEditorTextInputMode:11,markupEditorToolShareStyles:12,willRenderShapePresetToolbar:13,markupEditorGridSize:14,markupEditorSnapThreshold:15,markupEditorSnapToContext:16,decorateGridSize:17,decorateSnapToContext:18,decorateTools:19,decorateToolShapes:20,decorateShapeControls:21,decorateActiveTool:0,decorateEnableButtonFlipVertical:22,decorateEnableSelectImagePreset:23,decorateEnableDropImagePreset:24,decoratePresets:25,decorateWillRenderShapePresetToolbar:26,decorateWillRenderShapeStyleControls:27,enableSelectToolToAddShape:28,enableTapToAddText:29,enableViewTool:30,enableMoveTool:31,enableAutoSelectMoveTool:32,willRenderShapeControls:33,willRenderShapeTextControls:34,beforeAddShape:35,beforeRemoveShape:36,beforeDeselectShape:37,beforeSelectShape:38,beforeUpdateShape:39,markupEditorWillStartInteraction:40},null,[-1,-1])}get name(){return this.$$.ctx[47]}get isActive(){return this.$$.ctx[1]}set isActive(t){this.$$set({isActive:t}),I()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),I()}get isVisible(){return this.$$.ctx[3]}set isVisible(t){this.$$set({isVisible:t}),I()}get stores(){return this.$$.ctx[4]}set stores(t){this.$$set({stores:t}),I()}get locale(){return this.$$.ctx[5]}set locale(t){this.$$set({locale:t}),I()}get markupEditorToolbar(){return this.$$.ctx[6]}set markupEditorToolbar(t){this.$$set({markupEditorToolbar:t}),I()}get markupEditorToolStyles(){return this.$$.ctx[7]}set markupEditorToolStyles(t){this.$$set({markupEditorToolStyles:t}),I()}get markupEditorToolRetainStyles(){return this.$$.ctx[8]}set markupEditorToolRetainStyles(t){this.$$set({markupEditorToolRetainStyles:t}),I()}get markupEditorShapeStyleControls(){return this.$$.ctx[9]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),I()}get markupEditorToolSelectRadius(){return this.$$.ctx[10]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),I()}get markupEditorTextInputMode(){return this.$$.ctx[11]}set markupEditorTextInputMode(t){this.$$set({markupEditorTextInputMode:t}),I()}get markupEditorToolShareStyles(){return this.$$.ctx[12]}set markupEditorToolShareStyles(t){this.$$set({markupEditorToolShareStyles:t}),I()}get willRenderShapePresetToolbar(){return this.$$.ctx[13]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),I()}get markupEditorGridSize(){return this.$$.ctx[14]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),I()}get markupEditorSnapThreshold(){return this.$$.ctx[15]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),I()}get markupEditorSnapToContext(){return this.$$.ctx[16]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),I()}get decorateGridSize(){return this.$$.ctx[17]}set decorateGridSize(t){this.$$set({decorateGridSize:t}),I()}get decorateSnapToContext(){return this.$$.ctx[18]}set decorateSnapToContext(t){this.$$set({decorateSnapToContext:t}),I()}get decorateTools(){return this.$$.ctx[19]}set decorateTools(t){this.$$set({decorateTools:t}),I()}get decorateToolShapes(){return this.$$.ctx[20]}set decorateToolShapes(t){this.$$set({decorateToolShapes:t}),I()}get decorateShapeControls(){return this.$$.ctx[21]}set decorateShapeControls(t){this.$$set({decorateShapeControls:t}),I()}get decorateActiveTool(){return this.$$.ctx[0]}set decorateActiveTool(t){this.$$set({decorateActiveTool:t}),I()}get decorateEnableButtonFlipVertical(){return this.$$.ctx[22]}set decorateEnableButtonFlipVertical(t){this.$$set({decorateEnableButtonFlipVertical:t}),I()}get decorateEnableSelectImagePreset(){return this.$$.ctx[23]}set decorateEnableSelectImagePreset(t){this.$$set({decorateEnableSelectImagePreset:t}),I()}get decorateEnableDropImagePreset(){return this.$$.ctx[24]}set decorateEnableDropImagePreset(t){this.$$set({decorateEnableDropImagePreset:t}),I()}get decoratePresets(){return this.$$.ctx[25]}set decoratePresets(t){this.$$set({decoratePresets:t}),I()}get decorateWillRenderShapePresetToolbar(){return this.$$.ctx[26]}set decorateWillRenderShapePresetToolbar(t){this.$$set({decorateWillRenderShapePresetToolbar:t}),I()}get decorateWillRenderShapeStyleControls(){return this.$$.ctx[27]}set decorateWillRenderShapeStyleControls(t){this.$$set({decorateWillRenderShapeStyleControls:t}),I()}get enableSelectToolToAddShape(){return this.$$.ctx[28]}set enableSelectToolToAddShape(t){this.$$set({enableSelectToolToAddShape:t}),I()}get enableTapToAddText(){return this.$$.ctx[29]}set enableTapToAddText(t){this.$$set({enableTapToAddText:t}),I()}get enableViewTool(){return this.$$.ctx[30]}set enableViewTool(t){this.$$set({enableViewTool:t}),I()}get enableMoveTool(){return this.$$.ctx[31]}set enableMoveTool(t){this.$$set({enableMoveTool:t}),I()}get enableAutoSelectMoveTool(){return this.$$.ctx[32]}set enableAutoSelectMoveTool(t){this.$$set({enableAutoSelectMoveTool:t}),I()}get willRenderShapeControls(){return this.$$.ctx[33]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),I()}get willRenderShapeTextControls(){return this.$$.ctx[34]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),I()}get beforeAddShape(){return this.$$.ctx[35]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),I()}get beforeRemoveShape(){return this.$$.ctx[36]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),I()}get beforeDeselectShape(){return this.$$.ctx[37]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),I()}get beforeSelectShape(){return this.$$.ctx[38]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),I()}get beforeUpdateShape(){return this.$$.ctx[39]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),I()}get markupEditorWillStartInteraction(){return this.$$.ctx[40]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),I()}}]};function b6(t){let e,i;return e=new Iu({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[25],mapImagePointToScreenPoint:t[24],utilKey:"sticker",shapePresets:t[5],shapes:t[6]?t[34]:t[35],toolActive:"preset",imageFlipX:!!t[6]&&t[23],imageFlipY:!!t[6]&&t[22],imageRotation:t[6]?t[30]:0,parentRect:t[6]?t[36]:t[32],snapThreshold:t[28],gridSize:t[27],enableSnapToContext:t[26],enablePresetDropImage:t[7],enablePresetSelectImage:t[29],enableButtonFlipVertical:t[10]||t[8],toolSelectRadius:t[14],willStartInteraction:t[21],willRenderPresetToolbar:t[11]||t[9]||t[15],hooks:{willRenderShapeControls:t[12],willRenderShapeTextControls:t[13],beforeAddShape:t[16],beforeRemoveShape:t[17],beforeDeselectShape:t[18],beforeSelectShape:t[19],beforeUpdateShape:t[20]}}}),e.$on("measure",t[59]),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};8&r[0]&&(o.stores=n[3]),16&r[0]&&(o.locale=n[4]),1&r[0]&&(o.isActive=n[0]),2&r[0]&&(o.isActiveFraction=n[1]),4&r[0]&&(o.isVisible=n[2]),33554432&r[0]&&(o.mapScreenPointToImagePoint=n[25]),16777216&r[0]&&(o.mapImagePointToScreenPoint=n[24]),32&r[0]&&(o.shapePresets=n[5]),64&r[0]&&(o.shapes=n[6]?n[34]:n[35]),8388672&r[0]&&(o.imageFlipX=!!n[6]&&n[23]),4194368&r[0]&&(o.imageFlipY=!!n[6]&&n[22]),1073741888&r[0]&&(o.imageRotation=n[6]?n[30]:0),64&r[0]&&(o.parentRect=n[6]?n[36]:n[32]),268435456&r[0]&&(o.snapThreshold=n[28]),134217728&r[0]&&(o.gridSize=n[27]),67108864&r[0]&&(o.enableSnapToContext=n[26]),128&r[0]&&(o.enablePresetDropImage=n[7]),536870912&r[0]&&(o.enablePresetSelectImage=n[29]),1280&r[0]&&(o.enableButtonFlipVertical=n[10]||n[8]),16384&r[0]&&(o.toolSelectRadius=n[14]),2097152&r[0]&&(o.willStartInteraction=n[21]),35328&r[0]&&(o.willRenderPresetToolbar=n[11]||n[9]||n[15]),2043904&r[0]&&(o.hooks={willRenderShapeControls:n[12],willRenderShapeTextControls:n[13],beforeAddShape:n[16],beforeRemoveShape:n[17],beforeDeselectShape:n[18],beforeSelectShape:n[19],beforeUpdateShape:n[20]}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function v6(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,y,x,{isActive:k}=e,{isActiveFraction:w}=e,{isVisible:C}=e,{stores:M}=e,{locale:R={}}=e,{stickers:O=[]}=e,{stickerForceEnable:T=!1}=e,{stickerStickToImage:z=!1}=e,{stickerEnableSelectImagePreset:F=!0}=e,{stickerEnableDropImagePreset:B=!0}=e,{stickerEnableButtonFlipVertical:f=!1}=e,{stickerWillRenderShapePresetToolbar:V}=e,{stickerEnableSelectImage:J=!0}=e,{stickersEnableButtonFlipVertical:S=!1}=e,{stickersWillRenderShapePresetToolbar:j}=e,{markupEditorGridSize:K=0}=e,{markupEditorSnapThreshold:dt=0}=e,{markupEditorSnapToContext:lt=!1}=e,{annotateGridSize:N}=e,{annotateSnapToContext:ft}=e,{decorateGridSize:$t}=e,{decorateSnapToContext:Lt}=e,{willRenderShapeControls:ct}=e,{willRenderShapeTextControls:et}=e,{markupEditorToolSelectRadius:ht}=e,{willRenderShapePresetToolbar:Y}=e,{beforeAddShape:Z}=e,{beforeRemoveShape:St}=e,{beforeDeselectShape:nt}=e,{beforeSelectShape:mt}=e,{beforeUpdateShape:Ft}=e,{markupEditorWillStartInteraction:oe}=e;const{rootRect:Rt,imageCropRect:Ut,imageSelectionRectPresentation:Ot,imageAnnotation:U,imageDecoration:wt,imageSize:xt,imageTransforms:Gt,imageTransformsInterpolated:de,imageRotation:ue,imageFlipX:be,imageFlipY:$e}=M;return E(t,Rt,_=>i(58,y=_)),E(t,Ot,_=>i(54,d=_)),E(t,xt,_=>i(57,m=_)),E(t,Gt,_=>i(56,g=_)),E(t,de,_=>i(55,h=_)),E(t,ue,_=>i(30,x=_)),E(t,be,_=>i(23,p=_)),E(t,$e,_=>i(22,u=_)),t.$$set=_=>{"isActive"in _&&i(0,k=_.isActive),"isActiveFraction"in _&&i(1,w=_.isActiveFraction),"isVisible"in _&&i(2,C=_.isVisible),"stores"in _&&i(3,M=_.stores),"locale"in _&&i(4,R=_.locale),"stickers"in _&&i(5,O=_.stickers),"stickerForceEnable"in _&&i(43,T=_.stickerForceEnable),"stickerStickToImage"in _&&i(6,z=_.stickerStickToImage),"stickerEnableSelectImagePreset"in _&&i(44,F=_.stickerEnableSelectImagePreset),"stickerEnableDropImagePreset"in _&&i(7,B=_.stickerEnableDropImagePreset),"stickerEnableButtonFlipVertical"in _&&i(8,f=_.stickerEnableButtonFlipVertical),"stickerWillRenderShapePresetToolbar"in _&&i(9,V=_.stickerWillRenderShapePresetToolbar),"stickerEnableSelectImage"in _&&i(45,J=_.stickerEnableSelectImage),"stickersEnableButtonFlipVertical"in _&&i(10,S=_.stickersEnableButtonFlipVertical),"stickersWillRenderShapePresetToolbar"in _&&i(11,j=_.stickersWillRenderShapePresetToolbar),"markupEditorGridSize"in _&&i(46,K=_.markupEditorGridSize),"markupEditorSnapThreshold"in _&&i(47,dt=_.markupEditorSnapThreshold),"markupEditorSnapToContext"in _&&i(48,lt=_.markupEditorSnapToContext),"annotateGridSize"in _&&i(49,N=_.annotateGridSize),"annotateSnapToContext"in _&&i(50,ft=_.annotateSnapToContext),"decorateGridSize"in _&&i(51,$t=_.decorateGridSize),"decorateSnapToContext"in _&&i(52,Lt=_.decorateSnapToContext),"willRenderShapeControls"in _&&i(12,ct=_.willRenderShapeControls),"willRenderShapeTextControls"in _&&i(13,et=_.willRenderShapeTextControls),"markupEditorToolSelectRadius"in _&&i(14,ht=_.markupEditorToolSelectRadius),"willRenderShapePresetToolbar"in _&&i(15,Y=_.willRenderShapePresetToolbar),"beforeAddShape"in _&&i(16,Z=_.beforeAddShape),"beforeRemoveShape"in _&&i(17,St=_.beforeRemoveShape),"beforeDeselectShape"in _&&i(18,nt=_.beforeDeselectShape),"beforeSelectShape"in _&&i(19,mt=_.beforeSelectShape),"beforeUpdateShape"in _&&i(20,Ft=_.beforeUpdateShape),"markupEditorWillStartInteraction"in _&&i(21,oe=_.markupEditorWillStartInteraction)},t.$$.update=()=>{16777216&t.$$.dirty[1]&&i(53,n=h?h.scale:1),24576&t.$$.dirty[1]&&i(29,r=F!==!1&&J),65536&t.$$.dirty[1]&&i(28,o=dt),64&t.$$.dirty[0]|1343488&t.$$.dirty[1]&&i(27,a=z?$i(N)?N:K:$i($t)?$t:K),64&t.$$.dirty[0]|2752512&t.$$.dirty[1]&&i(26,s=z?Dl(ft)?ft:lt:Dl(Lt)?Lt:lt),12582976&t.$$.dirty[0]|264241152&t.$$.dirty[1]&&i(25,l=z?_=>Xh(_,y,m,h.origin,h.translation,g.rotation.z,h.scale,p,u):_=>{const ve=_e(_);return ve.x-=d.x,ve.y-=d.y,ve.x/=n,ve.y/=n,ve}),12582976&t.$$.dirty[0]|264241152&t.$$.dirty[1]&&i(24,c=z?_=>Zh(_,y,m,h.origin,h.translation,g.rotation.z,h.scale,p,u):_=>{const ve=_e(_);return ve.x*=n,ve.y*=n,ve.x+=d.x,ve.y+=d.y,ve})},[k,w,C,M,R,O,z,B,f,V,S,j,ct,et,ht,Y,Z,St,nt,mt,Ft,oe,u,p,c,l,s,a,o,r,x,Rt,Ut,Ot,U,wt,xt,Gt,de,ue,be,$e,"sticker",T,F,J,K,dt,lt,N,ft,$t,Lt,n,d,h,g,m,y,function(_){Gr.call(this,t,_)}]}var w6={util:["sticker",class extends si{constructor(t){super(),ai(this,t,v6,b6,ti,{name:42,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,stickers:5,stickerForceEnable:43,stickerStickToImage:6,stickerEnableSelectImagePreset:44,stickerEnableDropImagePreset:7,stickerEnableButtonFlipVertical:8,stickerWillRenderShapePresetToolbar:9,stickerEnableSelectImage:45,stickersEnableButtonFlipVertical:10,stickersWillRenderShapePresetToolbar:11,markupEditorGridSize:46,markupEditorSnapThreshold:47,markupEditorSnapToContext:48,annotateGridSize:49,annotateSnapToContext:50,decorateGridSize:51,decorateSnapToContext:52,willRenderShapeControls:12,willRenderShapeTextControls:13,markupEditorToolSelectRadius:14,willRenderShapePresetToolbar:15,beforeAddShape:16,beforeRemoveShape:17,beforeDeselectShape:18,beforeSelectShape:19,beforeUpdateShape:20,markupEditorWillStartInteraction:21},null,[-1,-1])}get name(){return this.$$.ctx[42]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),I()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),I()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$$set({isVisible:t}),I()}get stores(){return this.$$.ctx[3]}set stores(t){this.$$set({stores:t}),I()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),I()}get stickers(){return this.$$.ctx[5]}set stickers(t){this.$$set({stickers:t}),I()}get stickerForceEnable(){return this.$$.ctx[43]}set stickerForceEnable(t){this.$$set({stickerForceEnable:t}),I()}get stickerStickToImage(){return this.$$.ctx[6]}set stickerStickToImage(t){this.$$set({stickerStickToImage:t}),I()}get stickerEnableSelectImagePreset(){return this.$$.ctx[44]}set stickerEnableSelectImagePreset(t){this.$$set({stickerEnableSelectImagePreset:t}),I()}get stickerEnableDropImagePreset(){return this.$$.ctx[7]}set stickerEnableDropImagePreset(t){this.$$set({stickerEnableDropImagePreset:t}),I()}get stickerEnableButtonFlipVertical(){return this.$$.ctx[8]}set stickerEnableButtonFlipVertical(t){this.$$set({stickerEnableButtonFlipVertical:t}),I()}get stickerWillRenderShapePresetToolbar(){return this.$$.ctx[9]}set stickerWillRenderShapePresetToolbar(t){this.$$set({stickerWillRenderShapePresetToolbar:t}),I()}get stickerEnableSelectImage(){return this.$$.ctx[45]}set stickerEnableSelectImage(t){this.$$set({stickerEnableSelectImage:t}),I()}get stickersEnableButtonFlipVertical(){return this.$$.ctx[10]}set stickersEnableButtonFlipVertical(t){this.$$set({stickersEnableButtonFlipVertical:t}),I()}get stickersWillRenderShapePresetToolbar(){return this.$$.ctx[11]}set stickersWillRenderShapePresetToolbar(t){this.$$set({stickersWillRenderShapePresetToolbar:t}),I()}get markupEditorGridSize(){return this.$$.ctx[46]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),I()}get markupEditorSnapThreshold(){return this.$$.ctx[47]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),I()}get markupEditorSnapToContext(){return this.$$.ctx[48]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),I()}get annotateGridSize(){return this.$$.ctx[49]}set annotateGridSize(t){this.$$set({annotateGridSize:t}),I()}get annotateSnapToContext(){return this.$$.ctx[50]}set annotateSnapToContext(t){this.$$set({annotateSnapToContext:t}),I()}get decorateGridSize(){return this.$$.ctx[51]}set decorateGridSize(t){this.$$set({decorateGridSize:t}),I()}get decorateSnapToContext(){return this.$$.ctx[52]}set decorateSnapToContext(t){this.$$set({decorateSnapToContext:t}),I()}get willRenderShapeControls(){return this.$$.ctx[12]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),I()}get willRenderShapeTextControls(){return this.$$.ctx[13]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),I()}get markupEditorToolSelectRadius(){return this.$$.ctx[14]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),I()}get willRenderShapePresetToolbar(){return this.$$.ctx[15]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),I()}get beforeAddShape(){return this.$$.ctx[16]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),I()}get beforeRemoveShape(){return this.$$.ctx[17]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),I()}get beforeDeselectShape(){return this.$$.ctx[18]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),I()}get beforeSelectShape(){return this.$$.ctx[19]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),I()}get beforeUpdateShape(){return this.$$.ctx[20]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),I()}get markupEditorWillStartInteraction(){return this.$$.ctx[21]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),I()}},({stickers:t,stickerEnableSelectImage:e,stickerEnableSelectImagePreset:i,stickerEnableDropImagePreset:n,stickerForceEnable:r})=>t&&t.length||e||i||n||r]};function S6(t){let e,i,n,r,o,a=(t[14](t[34].value)||"")+"",s=(Qi(t[34].label)?t[34].label(t[1]):t[34].label)+"";return{c(){e=pt("div"),i=new vu(!1),n=ce(),r=pt("span"),o=cn(s),i.a=n,v(e,"slot","option")},m(l,c){tt(l,e,c),i.m(a,e),Tt(e,n),Tt(e,r),Tt(r,o)},p(l,c){8&c[1]&&a!==(a=(l[14](l[34].value)||"")+"")&&i.p(a),2&c[0]|8&c[1]&&s!==(s=(Qi(l[34].label)?l[34].label(l[1]):l[34].label)+"")&&zn(o,s)},d(l){l&&Q(e)}}}function k6(t){let e,i;return e=new Ja({props:{locale:t[1],class:"PinturaControlList",layout:"row",options:t[2],selectedIndex:t[6],onchange:t[12],$$slots:{option:[S6,({option:n})=>({34:n}),({option:n})=>[0,n?8:0]]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};2&r[0]&&(o.locale=n[1]),4&r[0]&&(o.options=n[2]),64&r[0]&&(o.selectedIndex=n[6]),2&r[0]|24&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function C6(t){let e,i,n,r,o;return i=new Ru({props:{locale:t[1],class:"PinturaControlPanels",shape:t[4],onchange:t[13],controls:t[3],scrollElasticity:t[7]}}),r=new wa({props:{elasticity:t[10],$$slots:{default:[k6]},$$scope:{ctx:t}}}),{c(){e=pt("div"),At(i.$$.fragment),n=ce(),At(r.$$.fragment),v(e,"slot","footer"),v(e,"style",t[5])},m(a,s){tt(a,e,s),It(i,e,null),Tt(e,n),It(r,e,null),o=!0},p(a,s){const l={};2&s[0]&&(l.locale=a[1]),16&s[0]&&(l.shape=a[4]),8&s[0]&&(l.controls=a[3]),128&s[0]&&(l.scrollElasticity=a[7]),i.$set(l);const c={};70&s[0]|16&s[1]&&(c.$$scope={dirty:s,ctx:a}),r.$set(c),(!o||32&s[0])&&v(e,"style",a[5])},i(a){o||(P(i.$$.fragment,a),P(r.$$.fragment,a),o=!0)},o(a){D(i.$$.fragment,a),D(r.$$.fragment,a),o=!1},d(a){a&&Q(e),Et(i),Et(r)}}}function T6(t){let e,i;return e=new rl({props:{$$slots:{footer:[C6]},$$scope:{ctx:t}}}),e.$on("measure",t[23]),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};254&r[0]|16&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function M6(t,e,i){let n,r,o,a,s,l,c,d,u=Je,p=()=>(u(),u=jr(h,S=>i(20,s=S)),h);t.$$.on_destroy.push(()=>u());let{isActive:h}=e;p();let{stores:g}=e,{locale:m={}}=e,{frameStyles:y={}}=e,{frameOptions:x=[]}=e,{markupEditorShapeStyleControls:k}=e;const w=ln("elasticityMultiplier");E(t,w,S=>i(22,d=S));const{history:C,animation:M,scrollElasticity:R,imageFrame:O,allowPan:T,allowZoom:z,allowZoomControls:F,allowPlayPause:B}=g;E(t,M,S=>i(21,l=S)),E(t,O,S=>i(4,c=S));let f={},V;const J=oi(l?20:0);return E(t,J,S=>i(19,a=S)),t.$$set=S=>{"isActive"in S&&p(i(0,h=S.isActive)),"stores"in S&&i(17,g=S.stores),"locale"in S&&i(1,m=S.locale),"frameStyles"in S&&i(18,y=S.frameStyles),"frameOptions"in S&&i(2,x=S.frameOptions),"markupEditorShapeStyleControls"in S&&i(3,k=S.markupEditorShapeStyleControls)},t.$$.update=()=>{1048576&t.$$.dirty[0]&&T.set(s),1048576&t.$$.dirty[0]&&z.set(s),1048576&t.$$.dirty[0]&&F.set(s),1048576&t.$$.dirty[0]&&s&&B.set(!0),4194304&t.$$.dirty[0]&&i(7,n=d*R),20&t.$$.dirty[0]&&i(6,r=c?x.findIndex(([S])=>S===c.id):0),3145728&t.$$.dirty[0]&&l&&J.set(s?0:20),524288&t.$$.dirty[0]&&i(5,o=a?`transform: translateY(${a}px)`:void 0)},[h,m,x,k,c,o,r,n,w,M,R,O,({value:S})=>{const j=y[S];if(!j||!j.shape)return O.set(void 0),void C.write();const{shape:K}=j,dt={id:S,...Nn(K),...Object.keys(f).reduce((lt,N)=>(K[N]&&(lt[N]=f[N]),lt),{})};O.set(dt),C.write()},function(S){Le(S,"frameColor")&&(f.frameColor=S.frameColor),c&&(ga(c,S),O.set(c),clearTimeout(V),V=setTimeout(()=>{C.write()},200))},S=>{const j=y[S];var K;if(j&&j.thumb)return K=j.thumb,/div/i.test(K)||j2(K)?K:/rect|path|circle|line|<g>/i.test(K)?`<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" stroke-width="1" stroke="currentColor" fill="none" aria-hidden="true" focusable="false" stroke-linecap="round" stroke-linejoin="round">${K}</svg>`:`<img src="${K}" alt=""/>`},J,"frame",g,y,a,s,l,d,function(S){Gr.call(this,t,S)}]}var P6={util:["frame",class extends si{constructor(t){super(),ai(this,t,M6,T6,ti,{name:16,isActive:0,stores:17,locale:1,frameStyles:18,frameOptions:2,markupEditorShapeStyleControls:3},null,[-1,-1])}get name(){return this.$$.ctx[16]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),I()}get stores(){return this.$$.ctx[17]}set stores(t){this.$$set({stores:t}),I()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),I()}get frameStyles(){return this.$$.ctx[18]}set frameStyles(t){this.$$set({frameStyles:t}),I()}get frameOptions(){return this.$$.ctx[2]}set frameOptions(t){this.$$set({frameOptions:t}),I()}get markupEditorShapeStyleControls(){return this.$$.ctx[3]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),I()}},({src:t})=>t&&!nl(t)]};function R6(t){let e,i,n,r,o,a,s,l;return{c(){e=pt("div"),i=pt("input"),r=ce(),o=pt("label"),a=cn(t[1]),v(i,"id",t[0]),v(i,"type","number"),v(i,"min","1"),v(i,"inputmode","numeric"),v(i,"pattern","[0-9]*"),v(i,"data-state",t[3]),v(i,"autocomplete","off"),v(i,"placeholder",t[4]),i.value=n=t[5]===void 0?"":t[7](t[5]+""),v(o,"for",t[0]),v(o,"title",t[2]),v(o,"aria-label",t[2]),v(e,"class","PinturaInputDimension")},m(c,d){tt(c,e,d),Tt(e,i),Tt(e,r),Tt(e,o),Tt(o,a),s||(l=Mt(i,"input",t[8]),s=!0)},p(c,[d]){1&d&&v(i,"id",c[0]),8&d&&v(i,"data-state",c[3]),16&d&&v(i,"placeholder",c[4]),160&d&&n!==(n=c[5]===void 0?"":c[7](c[5]+""))&&i.value!==n&&(i.value=n),2&d&&zn(a,c[1]),1&d&&v(o,"for",c[0]),4&d&&v(o,"title",c[2]),4&d&&v(o,"aria-label",c[2])},i:Je,o:Je,d(c){c&&Q(e),s=!1,l()}}}function I6(t,e,i){let{id:n}=e,{label:r}=e,{title:o}=e,{state:a}=e,{placeholder:s}=e,{value:l}=e,{onchange:c}=e,{format:d=u=>u.replace(/\D/g,"")}=e;return t.$$set=u=>{"id"in u&&i(0,n=u.id),"label"in u&&i(1,r=u.label),"title"in u&&i(2,o=u.title),"state"in u&&i(3,a=u.state),"placeholder"in u&&i(4,s=u.placeholder),"value"in u&&i(5,l=u.value),"onchange"in u&&i(6,c=u.onchange),"format"in u&&i(7,d=u.format)},[n,r,o,a,s,l,c,d,u=>c(d(u.currentTarget.value))]}class Lf extends si{constructor(e){super(),ai(this,e,I6,R6,ti,{id:0,label:1,title:2,state:3,placeholder:4,value:5,onchange:6,format:7})}}function E6(t){let e;return{c(){e=Rr("g")},m(i,n){tt(i,e,n),e.innerHTML=t[2]},p(i,n){4&n&&(e.innerHTML=i[2])},d(i){i&&Q(e)}}}function A6(t){let e,i,n,r,o,a,s,l;return o=new Ro({props:{$$slots:{default:[E6]},$$scope:{ctx:t}}}),{c(){e=pt("div"),i=pt("input"),n=ce(),r=pt("label"),At(o.$$.fragment),v(i,"id",t[0]),v(i,"class","implicit"),v(i,"type","checkbox"),i.checked=t[1],v(r,"for",t[0]),v(r,"title",t[3])},m(c,d){tt(c,e,d),Tt(e,i),Tt(e,n),Tt(e,r),It(o,r,null),a=!0,s||(l=Mt(i,"change",t[5]),s=!0)},p(c,[d]){(!a||1&d)&&v(i,"id",c[0]),(!a||2&d)&&(i.checked=c[1]);const u={};68&d&&(u.$$scope={dirty:d,ctx:c}),o.$set(u),(!a||1&d)&&v(r,"for",c[0]),(!a||8&d)&&v(r,"title",c[3])},i(c){a||(P(o.$$.fragment,c),a=!0)},o(c){D(o.$$.fragment,c),a=!1},d(c){c&&Q(e),Et(o),s=!1,l()}}}function L6(t,e,i){let{id:n}=e,{locked:r}=e,{icon:o}=e,{title:a}=e,{onchange:s}=e;return t.$$set=l=>{"id"in l&&i(0,n=l.id),"locked"in l&&i(1,r=l.locked),"icon"in l&&i(2,o=l.icon),"title"in l&&i(3,a=l.title),"onchange"in l&&i(4,s=l.onchange)},[n,r,o,a,s,l=>s(l.currentTarget.checked)]}class z6 extends si{constructor(e){super(),ai(this,e,L6,A6,ti,{id:0,locked:1,icon:2,title:3,onchange:4})}}function F6(t){let e;return{c(){e=cn("Save")},m(i,n){tt(i,e,n)},d(i){i&&Q(e)}}}function D6(t){let e,i,n,r,o,a,s,l,c,d,u,p,h,g=t[1].resizeLabelFormCaption+"";return l=new fo({props:{items:t[4]}}),d=new ks({props:{type:"submit",class:"implicit",$$slots:{default:[F6]},$$scope:{ctx:t}}}),{c(){e=pt("form"),i=pt("div"),n=pt("fieldset"),r=pt("legend"),o=cn(g),a=ce(),s=pt("div"),At(l.$$.fragment),c=ce(),At(d.$$.fragment),v(r,"class","implicit"),v(s,"class","PinturaFieldsetInner"),v(i,"class","PinturaFormInner"),v(e,"slot","footer"),v(e,"style",t[3])},m(m,y){tt(m,e,y),Tt(e,i),Tt(i,n),Tt(n,r),Tt(r,o),Tt(n,a),Tt(n,s),It(l,s,null),t[65](s),Tt(i,c),It(d,i,null),u=!0,p||(h=[Mt(s,"focusin",t[15]),Mt(s,"focusout",t[16]),Mt(e,"submit",Ob(t[17]))],p=!0)},p(m,y){(!u||2&y[0])&&g!==(g=m[1].resizeLabelFormCaption+"")&&zn(o,g);const x={};16&y[0]&&(x.items=m[4]),l.$set(x);const k={};16&y[3]&&(k.$$scope={dirty:y,ctx:m}),d.$set(k),(!u||8&y[0])&&v(e,"style",m[3])},i(m){u||(P(l.$$.fragment,m),P(d.$$.fragment,m),u=!0)},o(m){D(l.$$.fragment,m),D(d.$$.fragment,m),u=!1},d(m){m&&Q(e),Et(l),t[65](null),Et(d),p=!1,_i(h)}}}function B6(t){let e,i;return e=new rl({props:{$$slots:{footer:[D6]},$$scope:{ctx:t}}}),e.$on("measure",t[66]),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};30&r[0]|16&r[3]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function O6(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,y,x,k,w,C,M,R,O,T,z,F,B,f,V,J,S,j,K=Je,dt=()=>(K(),K=jr(N,it=>i(49,h=it)),N);t.$$.on_destroy.push(()=>K());const lt=(it,Xt=0,Nt=9999)=>{if(Oe(it)&&!(it=it.replace(/\D/g,"")).length)return;const Zt=Math.round(it);return Number.isNaN(Zt)?void 0:Xi(Zt,Xt,Nt)};let{isActive:N}=e;dt();let{stores:ft}=e,{locale:$t={}}=e,{resizeMinSize:Lt=Hn(1,1)}=e,{resizeMaxSize:ct=Hn(9999,9999)}=e,{resizeAspectRatioLocked:et=!1}=e,{resizeEnableButtonLockAspectRatio:ht=!0}=e,{resizeSizePresetOptions:Y}=e,{resizeWidthPresetOptions:Z}=e,{resizeHeightPresetOptions:St}=e,{resizeWillRenderFooter:nt=Zi}=e;const mt=oi(0,{stiffness:.15,damping:.3});E(t,mt,it=>i(54,k=it));const{animation:Ft,imageSize:oe,imageCropRect:Rt,imageCropRectAspectRatio:Ut,imageCropAspectRatio:Ot,imageOutputSize:U,imageSelectionZoom:wt,imageSelectionPan:xt,history:Gt,env:de,allowPan:ue,allowZoom:be,allowZoomControls:$e,allowPlayPause:_}=ft;E(t,Ft,it=>i(50,g=it)),E(t,oe,it=>i(73,J=it)),E(t,Rt,it=>i(52,y=it)),E(t,Ut,it=>i(53,x=it)),E(t,Ot,it=>i(72,F=it)),E(t,U,it=>i(61,z=it)),E(t,wt,it=>i(74,S=it)),E(t,xt,it=>i(75,j=it)),E(t,de,it=>i(51,m=it));const ve=ia();let gi,ye,Vt,Ce,Re,He,bi=Ji();const vt=(it,Xt,Nt,Zt,Yt)=>it!=null&&Nt!==Xt?it>=Zt[Xt]&&it<=Yt[Xt]?"valid":"invalid":"undetermined",bt=(it,Xt,Nt)=>Math.round(it!=null?it/Xt:Nt.height),Ge=()=>{et&&ye&&Vt&&(Ce==="width"?i(39,Vt=Math.round(ye/x)):Ce==="height"?i(38,ye=Math.round(Vt*x)):(Re==="width"?i(39,Vt=Math.round(ye/x)):Re==="height"&&i(38,ye=Math.round(Vt*x)),Me()))},Me=it=>{let Xt=lt(ye),Nt=lt(Vt),Zt=Xt,Yt=Nt,ot=Zt&&Yt,pe=it||x;if(!Zt&&!Yt)return;Zt&&!Yt?Yt=Math.round(Zt/pe):Yt&&!Zt&&(Zt=Math.round(Yt*pe)),pe=it||ot?Ko(Zt,Yt):x;let ee=Hn(Zt,Yt);nu(ct,ee)||(ee=to(ct,pe)),nu(ee,Lt)||(ee=qa(Lt,pe)),i(38,ye=Xt!=null?Math.round(ee.width):void 0),i(39,Vt=Nt!=null?Math.round(ee.height):void 0)},ni=()=>{Me();const{width:it,height:Xt}=z||{};it===ye&&Xt===Vt||(ye||Vt?(ye&&Vt&&kt(Ot,F=ye/Vt,F),kt(U,z=Hn(ye,Vt),z)):(kt(Ot,F=J.width/J.height,F),kt(Ot,F=void 0,F),kt(U,z=void 0,z)),Gt.write())},Ue=U.subscribe(it=>{if(!it)return i(38,ye=void 0),void i(39,Vt=void 0);i(38,ye=it.width),i(39,Vt=it.height),Me()}),ei=Ot.subscribe(it=>{(ye||Vt)&&it&&(ye&&Vt&&Ko(ye,Vt)!==it?(i(39,Vt=ye/it),Me(it)):Me())}),vi=it=>Oe(it[0])?(it[1]=it[1].map(vi),it):$i(it)?[it,""+it]:it,di=it=>{if(Oe(it[0]))return it[1]=it[1].map(di),it;let[Xt,Nt]=it;if($i(Xt)&&$i(Nt)){const[Zt,Yt]=[Xt,Nt];Nt=`${Zt} &times; ${Yt}`,Xt=[Zt,Yt]}return[Xt,Nt]},Li=le();E(t,Li,it=>i(60,T=it));const X=le();E(t,X,it=>i(64,V=it));const jt=le();E(t,jt,it=>i(58,R=it));const G=le();E(t,G,it=>i(63,f=it));const Bt=le();E(t,Bt,it=>i(56,C=it));const fe=le();E(t,fe,it=>i(62,B=it));const Qt=Ri([U,X],([it,Xt],Nt)=>{if(!Xt)return Nt(-1);const Zt=Xt.findIndex(([Yt])=>{if(!Yt&&!it)return!0;if(!Yt)return!1;const[ot,pe]=Yt;return it.width===ot&&it.height===pe});Nt(Zt<0?0:Zt)});E(t,Qt,it=>i(59,O=it));const se=Ri([U,G],([it,Xt],Nt)=>{if(!Xt)return Nt(-1);const Zt=Xt.findIndex(([Yt])=>!Yt&&!it||!!Yt&&it.width===Yt);Nt(Zt<0?0:Zt)});E(t,se,it=>i(57,M=it));const zt=Ri([U,fe],([it,Xt],Nt)=>{if(!Xt)return Nt(-1);const Zt=Xt.findIndex(([Yt])=>!Yt&&!it||!!Yt&&it.height===Yt);Nt(Zt<0?0:Zt)});E(t,zt,it=>i(55,w=it));let We,Ee;const je=ln("redrawTrigger"),Ke=oi(g?20:0);return E(t,Ke,it=>i(48,p=it)),No(()=>{Ue(),ei()}),t.$$set=it=>{"isActive"in it&&dt(i(0,N=it.isActive)),"stores"in it&&i(30,ft=it.stores),"locale"in it&&i(1,$t=it.locale),"resizeMinSize"in it&&i(31,Lt=it.resizeMinSize),"resizeMaxSize"in it&&i(32,ct=it.resizeMaxSize),"resizeAspectRatioLocked"in it&&i(28,et=it.resizeAspectRatioLocked),"resizeEnableButtonLockAspectRatio"in it&&i(33,ht=it.resizeEnableButtonLockAspectRatio),"resizeSizePresetOptions"in it&&i(34,Y=it.resizeSizePresetOptions),"resizeWidthPresetOptions"in it&&i(35,Z=it.resizeWidthPresetOptions),"resizeHeightPresetOptions"in it&&i(36,St=it.resizeHeightPresetOptions),"resizeWillRenderFooter"in it&&i(37,nt=it.resizeWillRenderFooter)},t.$$.update=()=>{var it;262144&t.$$.dirty[1]&&ue.set(!h),262144&t.$$.dirty[1]&&be.set(!h),262144&t.$$.dirty[1]&&$e.set(!h),262144&t.$$.dirty[1]&&h&&_.set(!0),536870920&t.$$.dirty[1]&&Y&&(kt(Li,T=Y.map(di),T),kt(X,V=$s(T),V)),536870912&t.$$.dirty[1]&&i(47,a=!!T),268435456&t.$$.dirty[1]|4&t.$$.dirty[2]&&i(46,n=O>-1&&V[O][1]),134217744&t.$$.dirty[1]&&Z&&(kt(jt,R=Z.map(vi),R),kt(G,f=$s(R),f)),134283264&t.$$.dirty[1]&&i(44,s=!a&&R),67108864&t.$$.dirty[1]|2&t.$$.dirty[2]&&i(45,r=M>-1&&f[M][1]),33554464&t.$$.dirty[1]&&St&&(kt(Bt,C=St.map(vi),C),kt(fe,B=$s(C),B)),33619968&t.$$.dirty[1]&&i(43,l=!a&&C),16777216&t.$$.dirty[1]|1&t.$$.dirty[2]&&i(42,o=w>-1&&B[w][1]),77824&t.$$.dirty[1]&&i(41,c=!a&&!s&&!l),268435458&t.$$.dirty[0]|1072824263&t.$$.dirty[1]&&i(4,d=je&&Lc(()=>{return nt([a&&["Dropdown","size-presets",{label:n,options:T,onchange:Yt=>{return(ot=Yt.value)&&!We&&(We={...y},Ee=F),ot?(kt(Ot,F=Ko(ot[0],ot[1]),F),kt(U,z=Xf(ot),z)):(kt(Rt,y=We,y),kt(Ot,F=Ee,F),kt(U,z=void 0,z),We=void 0,Ee=void 0),void Gt.write();var ot},selectedIndex:O}],s&&["Dropdown","width-presets",{label:r,options:R,onchange:Yt=>{i(38,ye=Yt.value),ni()},selectedIndex:M}],s&&l&&["span","times",{class:"PinturaResizeLabel",innerHTML:"&times;"}],l&&["Dropdown","height-presets",{label:o,options:C,onchange:Yt=>{i(39,Vt=Yt.value),ni()},selectedIndex:w}],c&&[Lf,"width-input",{id:"width-"+ve,title:$t.resizeTitleInputWidth,label:$t.resizeLabelInputWidth,placeholder:(Xt=lt(Vt),Nt=x,Zt=y,Math.round(Xt!=null?Xt*Nt:Zt.width)),value:ye,state:vt(lt(ye),"width",Ce,Lt,ct),onchange:Yt=>{i(38,ye=Yt),Ge()}}],c&&ht&&[z6,"aspect-ratio-lock",{id:"aspect-ratio-lock-"+ve,title:$t.resizeTitleButtonMaintainAspectRatio,icon:Oe($t.resizeIconButtonMaintainAspectRatio)?$t.resizeIconButtonMaintainAspectRatio:$t.resizeIconButtonMaintainAspectRatio(et,k),locked:et,onchange:Yt=>{i(28,et=Yt),Ge()}}],c&&[Lf,"height-input",{id:"height-"+ve,title:$t.resizeTitleInputHeight,label:$t.resizeLabelInputHeight,placeholder:bt(lt(ye),x,y),value:Vt,state:vt(lt(Vt),"height",Ce,Lt,ct),onchange:Yt=>{i(39,Vt=Yt),Ge()}}]].filter(Boolean),{...m},()=>je.set({}));var Xt,Nt,Zt}).filter(Boolean)),268435456&t.$$.dirty[0]&&mt.set(et?1:0),512&t.$$.dirty[1]&&Ce&&(Re=Ce),262144&t.$$.dirty[1]&&h&&(bi=j,He=S),1074003968&t.$$.dirty[1]&&(h?(it=z,kt(xt,j=Ji(),j),kt(wt,S=it&&y?it.width/y.width||it.height/y.height:1,S)):(kt(xt,j=bi,j),kt(wt,S=He,S))),786432&t.$$.dirty[1]&&g&&Ke.set(h?0:20),131072&t.$$.dirty[1]&&i(3,u=p?`transform: translateY(${p}px)`:void 0)},[N,$t,gi,u,d,mt,Ft,oe,Rt,Ut,Ot,U,wt,xt,de,it=>{const Xt=it.target.id;/width/.test(Xt)?i(40,Ce="width"):/height/.test(Xt)?i(40,Ce="height"):/aspectRatio/i.test(Xt)?i(40,Ce="lock"):i(40,Ce=void 0)},it=>{gi.contains(it.relatedTarget)||ni(),i(40,Ce=void 0)},ni,Li,X,jt,G,Bt,fe,Qt,se,zt,Ke,et,"resize",ft,Lt,ct,ht,Y,Z,St,nt,ye,Vt,Ce,c,o,l,s,r,n,a,p,h,g,m,y,x,k,w,C,M,R,O,T,z,B,f,V,function(it){Ai[it?"unshift":"push"](()=>{gi=it,i(2,gi)})},function(it){Gr.call(this,t,it)}]}var W6={util:["resize",class extends si{constructor(t){super(),ai(this,t,O6,B6,ti,{name:29,isActive:0,stores:30,locale:1,resizeMinSize:31,resizeMaxSize:32,resizeAspectRatioLocked:28,resizeEnableButtonLockAspectRatio:33,resizeSizePresetOptions:34,resizeWidthPresetOptions:35,resizeHeightPresetOptions:36,resizeWillRenderFooter:37},null,[-1,-1,-1,-1])}get name(){return this.$$.ctx[29]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),I()}get stores(){return this.$$.ctx[30]}set stores(t){this.$$set({stores:t}),I()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),I()}get resizeMinSize(){return this.$$.ctx[31]}set resizeMinSize(t){this.$$set({resizeMinSize:t}),I()}get resizeMaxSize(){return this.$$.ctx[32]}set resizeMaxSize(t){this.$$set({resizeMaxSize:t}),I()}get resizeAspectRatioLocked(){return this.$$.ctx[28]}set resizeAspectRatioLocked(t){this.$$set({resizeAspectRatioLocked:t}),I()}get resizeEnableButtonLockAspectRatio(){return this.$$.ctx[33]}set resizeEnableButtonLockAspectRatio(t){this.$$set({resizeEnableButtonLockAspectRatio:t}),I()}get resizeSizePresetOptions(){return this.$$.ctx[34]}set resizeSizePresetOptions(t){this.$$set({resizeSizePresetOptions:t}),I()}get resizeWidthPresetOptions(){return this.$$.ctx[35]}set resizeWidthPresetOptions(t){this.$$set({resizeWidthPresetOptions:t}),I()}get resizeHeightPresetOptions(){return this.$$.ctx[36]}set resizeHeightPresetOptions(t){this.$$set({resizeHeightPresetOptions:t}),I()}get resizeWillRenderFooter(){return this.$$.ctx[37]}set resizeWillRenderFooter(t){this.$$set({resizeWillRenderFooter:t}),I()}},({src:t})=>t&&!nl(t)]};function _6(t){let e,i;return e=new Iu({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[9],mapImagePointToScreenPoint:t[8],utilKey:"redact",imageRotation:t[10],imageFlipX:t[7],imageFlipY:t[6],shapes:t[11],toolbar:["rect"],toolShapes:{rectangle:[{x:0,y:0,width:0,height:0}]},toolActive:"rectangle",parentRect:t[13],enablePresetDropImage:!1,enablePresetSelectImage:!1,willStartInteraction:t[5],hooks:{willRenderShapeControls:t[24]}}}),e.$on("measure",t[25]),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,[r]){const o={};8&r&&(o.stores=n[3]),16&r&&(o.locale=n[4]),1&r&&(o.isActive=n[0]),2&r&&(o.isActiveFraction=n[1]),4&r&&(o.isVisible=n[2]),512&r&&(o.mapScreenPointToImagePoint=n[9]),256&r&&(o.mapImagePointToScreenPoint=n[8]),1024&r&&(o.imageRotation=n[10]),128&r&&(o.imageFlipX=n[7]),64&r&&(o.imageFlipY=n[6]),32&r&&(o.willStartInteraction=n[5]),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function V6(t,e,i){let n,r,o,a,s,l,c,d,u,{isActive:p}=e,{isActiveFraction:h}=e,{isVisible:g}=e,{stores:m}=e,{locale:y={}}=e,{markupEditorWillStartInteraction:x}=e;const{imageRedaction:k,rootRect:w,imageSize:C,imageRotation:M,imageFlipX:R,imageFlipY:O,imageTransforms:T,imageTransformsInterpolated:z}=m;return E(t,w,F=>i(23,d=F)),E(t,C,F=>i(22,c=F)),E(t,M,F=>i(10,u=F)),E(t,R,F=>i(7,a=F)),E(t,O,F=>i(6,o=F)),E(t,T,F=>i(21,l=F)),E(t,z,F=>i(20,s=F)),t.$$set=F=>{"isActive"in F&&i(0,p=F.isActive),"isActiveFraction"in F&&i(1,h=F.isActiveFraction),"isVisible"in F&&i(2,g=F.isVisible),"stores"in F&&i(3,m=F.stores),"locale"in F&&i(4,y=F.locale),"markupEditorWillStartInteraction"in F&&i(5,x=F.markupEditorWillStartInteraction)},t.$$.update=()=>{15728832&t.$$.dirty&&i(9,n=F=>Xh(F,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o)),15728832&t.$$.dirty&&i(8,r=F=>Zh(F,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o))},[p,h,g,m,y,x,o,a,r,n,u,k,w,C,M,R,O,T,z,"redact",s,l,c,d,F=>{const B=th(F[0]);return pw("to-front",B),F},function(F){Gr.call(this,t,F)}]}var N6={util:["redact",class extends si{constructor(t){super(),ai(this,t,V6,_6,ti,{name:19,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,markupEditorWillStartInteraction:5})}get name(){return this.$$.ctx[19]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),I()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),I()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$$set({isVisible:t}),I()}get stores(){return this.$$.ctx[3]}set stores(t){this.$$set({stores:t}),I()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),I()}get markupEditorWillStartInteraction(){return this.$$.ctx[5]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),I()}},({src:t})=>t&&!nl(t)]};function zf(t){let e,i,n=(Qi(t[32].label)?t[32].label(t[1]):t[32].label)+"";return{c(){e=pt("span"),i=cn(n)},m(r,o){tt(r,e,o),Tt(e,i)},p(r,o){2&o[0]|2&o[1]&&n!==(n=(Qi(r[32].label)?r[32].label(r[1]):r[32].label)+"")&&zn(i,n)},d(r){r&&Q(e)}}}function H6(t){let e,i,n,r=(t[11](t[32].value)||"")+"",o=t[32].label&&zf(t);return{c(){e=pt("div"),i=new vu(!1),n=ce(),o&&o.c(),i.a=n,v(e,"slot","option")},m(a,s){tt(a,e,s),i.m(r,e),Tt(e,n),o&&o.m(e,null)},p(a,s){2&s[1]&&r!==(r=(a[11](a[32].value)||"")+"")&&i.p(r),a[32].label?o?o.p(a,s):(o=zf(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(a){a&&Q(e),o&&o.d()}}}function j6(t){let e,i;return e=new Ja({props:{locale:t[1],class:"PinturaControlList",layout:"row",options:t[2],selectedIndex:t[4],onchange:t[10],$$slots:{option:[H6,({option:n})=>({32:n}),({option:n})=>[0,n?2:0]]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};2&r[0]&&(o.locale=n[1]),4&r[0]&&(o.options=n[2]),16&r[0]&&(o.selectedIndex=n[4]),2&r[0]|6&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function U6(t){let e,i,n;return i=new wa({props:{elasticity:t[5],$$slots:{default:[j6]},$$scope:{ctx:t}}}),{c(){e=pt("div"),At(i.$$.fragment),v(e,"slot","footer"),v(e,"style",t[3])},m(r,o){tt(r,e,o),It(i,e,null),n=!0},p(r,o){const a={};32&o[0]&&(a.elasticity=r[5]),22&o[0]|4&o[1]&&(a.$$scope={dirty:o,ctx:r}),i.$set(a),(!n||8&o[0])&&v(e,"style",r[3])},i(r){n||(P(i.$$.fragment,r),n=!0)},o(r){D(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Et(i)}}}function G6(t){let e,i;return e=new rl({props:{$$slots:{footer:[U6]},$$scope:{ctx:t}}}),e.$on("measure",t[22]),{c(){At(e.$$.fragment)},m(n,r){It(e,n,r),i=!0},p(n,r){const o={};62&r[0]|4&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(P(e.$$.fragment,n),i=!0)},o(n){D(e.$$.fragment,n),i=!1},d(n){Et(e,n)}}}function Z6(t,e,i){let n,r,o,a,s,l,c,d,u,p,h=Je,g=()=>(h(),h=jr(m,S=>i(17,l=S)),m);t.$$.on_destroy.push(()=>h());let{isActive:m}=e;g();let{stores:y}=e,{locale:x={}}=e,{fillOptions:k=[]}=e;const w=S=>S.map(j=>(K=>Ln(K)&&Oe(K[0])&&Ln(K[1]))(j)?[j[0],w(j[1]),j[2]]:(K=>[Array.isArray(K)&&K.length===3?[...K,1]:K,void 0,{disabled:!1}])(j)),C=ln("elasticityMultiplier");E(t,C,S=>i(21,p=S));const{history:M,animation:R,scrollElasticity:O,imageBackgroundColor:T,imageBackgroundImage:z,allowPan:F,allowZoom:B,allowZoomControls:f,allowPlayPause:V}=y;E(t,R,S=>i(18,c=S)),E(t,T,S=>i(20,u=S)),E(t,z,S=>i(19,d=S));const J=oi(c?20:0);return E(t,J,S=>i(16,s=S)),t.$$set=S=>{"isActive"in S&&g(i(0,m=S.isActive)),"stores"in S&&i(14,y=S.stores),"locale"in S&&i(1,x=S.locale),"fillOptions"in S&&i(15,k=S.fillOptions)},t.$$.update=()=>{32768&t.$$.dirty[0]&&i(2,n=w(k)),131072&t.$$.dirty[0]&&F.set(l),131072&t.$$.dirty[0]&&B.set(l),131072&t.$$.dirty[0]&&f.set(l),131072&t.$$.dirty[0]&&l&&V.set(!0),2097152&t.$$.dirty[0]&&i(5,r=p*O),1572868&t.$$.dirty[0]&&i(4,o=n.findIndex(([S])=>d?S===d:Array.isArray(S)?Ka(S,u):void 0)||0),393216&t.$$.dirty[0]&&c&&J.set(l?0:20),65536&t.$$.dirty[0]&&i(3,a=s?`transform: translateY(${s}px)`:void 0)},[m,x,n,a,o,r,C,R,T,z,({value:S})=>{Oe(S)&&(kt(T,u=void 0,u),kt(z,d=S,d)),Ln(S)&&(kt(T,u=S,u),kt(z,d=void 0,d)),M.write()},S=>{if(Oe(S))return`<div class="PinturaFillTile"><img src="${S}" alt="" width="48" height="64"/></div>`;if(Ln(S)){const[j,K,dt,lt]=S.map((N,ft)=>ft<3?Math.round(255*N):N);return`<div class="PinturaFillTile" data-transparent="${lt<1}"><div style="background-color:rgba(${j},${K},${dt},${lt})"></div></div>`}return"<div></div>"},J,"fill",y,k,s,l,c,d,u,p,function(S){Gr.call(this,t,S)}]}var X6={util:["fill",class extends si{constructor(t){super(),ai(this,t,Z6,G6,ti,{name:13,isActive:0,stores:14,locale:1,fillOptions:15},null,[-1,-1])}get name(){return this.$$.ctx[13]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),I()}get stores(){return this.$$.ctx[14]}set stores(t){this.$$set({stores:t}),I()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),I()}get fillOptions(){return this.$$.ctx[15]}set fillOptions(t){this.$$set({fillOptions:t}),I()}},({src:t,fillOptions:e})=>t&&!nl(t)&&e&&e.length]};const Ff='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',Ap='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>';var Y6={labelReset:"Reset",labelDefault:"Default",labelAuto:"Auto",labelNone:"None",labelEdit:"Edit",labelClose:"Close",labelSupportError:t=>t.join(", ")+" not supported on this browser",labelColor:"Color",labelWidth:"Width",labelSize:"Size",labelOffset:"Offset",labelAmount:"Amount",labelInset:"Inset",labelRadius:"Radius",labelColorPalette:"Color palette",labelSizeExtraSmall:"Extra small",labelSizeSmall:"Small",labelSizeMediumSmall:"Medium small",labelSizeMedium:"Medium",labelSizeMediumLarge:"Medium large",labelSizeLarge:"Large",labelSizeExtraLarge:"Extra large",labelButtonCancel:"Cancel",labelButtonUndo:"Undo",labelButtonRedo:"Redo",labelButtonRevert:"Revert",labelButtonExport:"Done",labelZoomIn:"Zoom in",labelZoomOut:"Zoom out",labelZoomFit:"Fit to view",labelZoomActual:"Actual size",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:Ff,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',statusLabelButtonClose:"Close",statusIconButtonClose:Ff,statusLabelLoadImage:t=>t&&t.task?t.error?t.error.code==="IMAGE_TOO_SMALL"?"Minimum image size is {minWidth} &times; {minHeight}":"Error loading image":t.task==="blob-to-bitmap"?"Preparing image&hellip;":"Loading image&hellip;":"Waiting for image",statusLabelProcessImage:t=>{if(t&&t.task)return t.task==="store"?t.error?"Error uploading image":"Uploading image&hellip;":t.error?"Error processing image":"Processing image&hellip;"}};const q6={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:""+Ap,shapeIconButtonTextLayoutAutoHeight:'<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>'+Ap,shapeIconButtonTextLayoutFixedSize:'<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>'+Ap,shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleCornerRadius:"Corner radius",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextOutline:"Text outline",shapeTitleTextOutlineWidth:"Width",shapeTitleTextShadow:"Text shadow",shapeTitleTextShadowBlur:"Blur",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolMove:"Move",shapeLabelToolView:"View",shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolPath:"Path",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolView:'<g stroke-width=".125em" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.98 9.703V2.567c0-1.19 1.19-1.785 1.784-1.785.595 0 1.784.595 1.784 1.785v3.568"/><path d="M14.548 9.703V4.35c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.594 1.784 1.784v2.973"/><path d="M18.116 10.244V7.271c0-1.19 1.19-1.784 1.784-1.784.595 0 1.785.595 1.785 1.784 0 1.19 0 8.92-1.19 12.488-1.19 3.569-10.704 4.758-13.678 0-2.973-4.757-2.973-4.757-4.163-6.541-1.189-1.784-1.153-2.974-.594-3.568.558-.595 1.784-1.19 2.973.594 1.277 1.916 2.07 2.907 2.379 2.974V5.487c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.595 1.784 1.784V8.46"/></g>',shapeIconToolMove:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M6 2 L6 19 L18 13 Z M13 18 L16 24" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolPath:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"><circle cx="21" cy="3" r="2"/><circle cx="9" cy="9" r="2"/><circle cx="3" cy="21" r="2"/><path d="M19 4 11 8 M8 11 4 19"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="1" y="1" width="22" height="22" rx="4"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 6 L21.5 1 L20 13.5" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>',shapeTitleSelectionMode:"Selection mode",shapeTitleBrushSize:"Brush size",shapeLabelSelectionModeNew:"New",shapeLabelSelectionModeAdd:"Add",shapeLabelSelectionModeSubtract:"Remove",shapeLabelToolSelectionBrush:"Brush",shapeLabelToolSelectionLassoo:"Lassoo",shapeLabelToolSelectionRectangle:"Rectangle marquee",shapeLabelToolSelectionEllipse:"Ellipse marquee",shapeIconSelectionModeNew:'<g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 17H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1.5"/><rect width="12" height="12" x="9" y="9" fill="currentColor" fill-opacity=".25" rx="2"/></g>',shapeIconSelectionModeAdd:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><path d="M13 15h4M15 13v4"/></g>',shapeIconSelectionModeSubtract:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h-6a2 2 0 0 0-1.995 1.85L9 11v6H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><rect width="12" height="12" x="9" y="9" stroke-linecap="round" stroke-linejoin="round" rx="2"/><path d="M13 15h4"/></g>',shapeIconToolSelectionBrush:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSelectionLassoo:'<g fill="none" fill-rule="evenodd" stroke-width=".125em" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.428 17.702a18.46 18.46 0 0 0 4.085-1.595c5.851-3.112 9.019-8.599 7.074-12.256-1.945-3.657-8.265-4.1-14.116-.988C2.619 5.974-.55 11.46 1.396 15.118c.63 1.186 1.72 2.033 3.105 2.532"/><ellipse cx="8" cy="18.5" rx="3.5" ry="2.833" transform="rotate(-15 8 18.5)"/><path stroke-linecap="round" d="M5 18c3.347 1.048 5.514 1.881 6.5 2.5.859.54 1.517.994 1.5 2.364"/></g>',shapeIconToolSelectionRectangle:'<g stroke-width=".125em" stroke="currentColor"><path d="M9 1 h6 m4 0 h4v4 m0 4 v6 m0 4 v4h-4 m-4 0 h-6 m-4 0 h-4v-4 m0 -4 v-6 m0 -4 v-4h4" fill="none" /></g>',shapeIconToolSelectionEllipse:'<path stroke-width=".125em" stroke="currentColor" d="M1.21 9.853a11.054 11.054 0 0 0 0 4.294m1.643 3.965a11.054 11.054 0 0 0 3.035 3.035m3.965 1.644a11.054 11.054 0 0 0 4.294 0m3.965-1.644a11.054 11.054 0 0 0 3.035-3.035m1.644-3.965a11.054 11.054 0 0 0 0-4.294m-1.644-3.965a11.054 11.054 0 0 0-3.035-3.035m-3.965-1.644a11.054 11.054 0 0 0-4.294 0M5.888 2.853a11.054 11.054 0 0 0-3.035 3.035"/>'};var K6={cropLabel:"Crop",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:(t,e)=>{const[i,n,r]=e?[e<1?1:.3,e===1?.85:.5,e>1?1:.3]:[.2,.3,.4];return`<g fill="currentColor">
            <rect opacity="${i}" x="2" y="4" width="10" height="18" rx="1"/>
            <rect opacity="${n}" x="4" y="8" width="14" height="14" rx="1"/>
            <rect opacity="${r}" x="6" y="12" width="17" height="10" rx="1"/>
        </g>`},cropIconCropBoundary:(t,e)=>{const[i,n,r,o]=e?[.3,1,0,0]:[0,0,.3,1];return`<g fill="currentColor">
            <rect opacity="${i}" x="2" y="3" width="20" height="20" rx="1"/>
            <rect opacity="${n}" x="7" y="8" width="10" height="10" rx="1"/>
            <rect opacity="${r}" x="4" y="8" width="14" height="14" rx="1"/>
            <rect opacity="${o}" x="12" y="4" width="10" height="10" rx="1"/>
        </g>`},cropLabelButtonRecenter:"Recenter",cropLabelButtonRotateLeft:"Rotate left",cropLabelButtonRotateRight:"Rotate right",cropLabelButtonFlipHorizontal:"Flip horizontal",cropLabelButtonFlipVertical:"Flip vertical",cropLabelSelectPreset:"Crop shape",cropLabelCropBoundary:"Crop boundary",cropLabelCropBoundaryEdge:"Edge of image",cropLabelCropBoundaryNone:"None",cropLabelTabRotation:"Rotation",cropLabelTabZoom:"Scale"},J6={fillLabel:"Fill",fillIcon:`
    <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
        <g transform="rotate(60, 12, 12)">
            <rect x="4" y="4" width="14" height="16" rx="3"/>
        </g>
        <path d="M21 13 L21 21"></path>
        <path d="M4.5 12.5 L19 12.5"></path>
    </g>
    `},Q6={frameLabel:"Frame",frameIcon:`<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
            <rect x="2" y="2" width="20" height="20" rx="4"/>
            <rect x="6" y="6" width="12" height="12" rx="1"/>
        </g>`,frameLabelMatSharp:"Mat",frameLabelMatRound:"Bevel",frameLabelLineSingle:"Line",frameLabelLineMultiple:"Zebra",frameLabelEdgeSeparate:"Inset",frameLabelEdgeOverlap:"Plus",frameLabelEdgeCross:"Lumber",frameLabelCornerHooks:"Hook",frameLabelPolaroid:"Polaroid"},t8={redactLabel:"Redact",redactIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M 4 5 l 1 -1"/><path d="M 4 10 l 6 -6"/><path d="M 4 15 l 11 -11"/><path d="M 4 20 l 16 -16"/><path d="M 9 20 l 11 -11"/><path d="M 14 20 l 6 -6"/><path d="M 19 20 l 1 -1"/></g>'},nh=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t);Object.keys(i).forEach(n=>{i[n].get?Object.defineProperty(e,n,{get:()=>t[n],set:r=>t[n]=r}):e[n]=t[n]})},G2=t=>{const e={},{sub:i,pub:n}=Ya();Br()&&document.doctype!==null||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");const r=Xy();nh(r,e);const o=((c,d)=>{const u={},p=new Fg({target:c,props:{stores:d,pluginComponents:Array.from(Qp)}});let h=!1;const g=()=>{h||(Br()&&window.removeEventListener("pagehide",g),p&&(h=!0,p.$destroy()))};Mp||(Mp=new Set(Wh(Fg).filter(y=>!sw.includes(y)))),Mp.forEach(y=>{Object.defineProperty(u,y,{get:()=>p[y],set:lw.includes(y)?x=>{p[y]={...p[y],...x}}:x=>p[y]=x})}),Object.defineProperty(u,"previewImageData",{get:()=>p.imagePreviewCurrent}),R2.forEach(y=>{const x=eu[y],k=x[0];Object.defineProperty(u,y,{get:()=>p.pluginInterface[k][y],set:w=>{const C=x.reduce((M,R)=>(M[R]={...p.pluginOptions[R],[y]:w},M),{});p.pluginOptions={...p.pluginOptions,...C}}})}),Object.defineProperty(u,"element",{get:()=>p.root,set:()=>{}});const m=p.history;return hu(u,{on:(y,x)=>{if(h)return()=>{};if(/undo|redo|revert|writehistory/.test(y))return m.on(y,x);const k=[p.sub(y,x),p.$on(y,w=>x(w instanceof CustomEvent&&!w.detail?void 0:w))].filter(Boolean);return()=>k.forEach(w=>w())},updateImagePreview:y=>{p.imagePreviewSrc=y},close:()=>!h&&p.pub("close"),destroy:g}),Object.defineProperty(u,"history",{get:()=>({undo:()=>m.undo(),redo:()=>m.redo(),revert:()=>m.revert(),get:()=>m.get(),getCollapsed:()=>m.get().splice(0,m.index+1),set:y=>m.set(y),write:y=>m.write(y),get length(){return m.length()},get index(){return m.index},set index(y){m.index=y}})}),Br()&&window.addEventListener("pagehide",g),u})(t,r.stores);nh(o,e);const a=["loadImage","processImage","abortProcessImage","abortLoadImage"].map(c=>o.on(c,d=>{const u=r[c](d&&d.detail);u instanceof Promise&&u.catch(me)})),s=(c,d)=>{const u=i(c,d),p=r.on(c,d),h=o.on(c,d);return()=>{u(),p(),h()}};e.handleEvent=me;const l=I2.map(c=>s(c,d=>e.handleEvent(c,d)));return hu(e,{on:s,updateImage:c=>new Promise((d,u)=>{const p=e.history.get(),h=e.history.index,g=e.imageState;r.loadImage(c).then(m=>{e.history.set(p),e.history.index=h,e.imageState=g,d(m)}).catch(u)}),close:()=>{n("close")},destroy:()=>{[...a,...l].forEach(c=>c()),o.destroy(),r.destroy(),n("destroy")}}),setTimeout(()=>n("init",e),0),e};Br();var e8=(t,e={})=>{const i=Oe(t)?document.querySelector(t):t;if(!Al(i))return;e.class=e.class?"pintura-editor "+e.class:"pintura-editor";const n=G2(i);return Object.assign(n,e)};const Df=(t,e,i,n)=>{const r=rt(e.x-t.x,e.y-t.y),o=ao(r),a=5*i;let s;s=n?.5*a:Math.ceil(.5*(a-1));const l=Dr(_e(o),s);return{anchor:_e(t),offset:l,normal:o,solid:n,size:a,sizeHalf:s}},i8=(t,e,i)=>{const{strokeWidth:n,strokeColor:r,strokeJoin:o,strokeCap:a,...s}=t,{anchor:l,offset:c,normal:d,solid:u,size:p,sizeHalf:h}=e,g=l.x,m=l.y,y=Dr(_e(d),p),x=rt(g+y.x,m+y.y);if(Dr(y,.55),u){Bn(i,c);const k=Dr(_e(d),.5*h);return[{...s,points:[rt(g-k.x,m-k.y),rt(x.x-y.y,x.y+y.x),rt(x.x+y.y,x.y-y.x)],pathClose:!0,backgroundColor:r}]}{const k=Dr((M=>{const R=M.x;return M.x=-M.y,M.y=R,M})(_e(d)),.5),w=rt(g-k.x,m-k.y),C=rt(g+k.x,m+k.y);return[{...s,points:[rt(x.x+y.y,x.y-y.x),w,rt(g,m),C,rt(x.x-y.y,x.y+y.x)],pathClose:!1,strokeWidth:n,strokeColor:r,strokeJoin:o,strokeCap:a}]}},n8=(t,e,i)=>{const{strokeWidth:n,strokeColor:r,...o}=t,{anchor:a,solid:s,offset:l,normal:c,sizeHalf:d}=e;return Bn(i,l),s&&Bn(i,Tl(_e(c))),[{...o,x:a.x,y:a.y,rx:d,ry:d,backgroundColor:s?r:void 0,strokeWidth:s?void 0:n,strokeColor:s?void 0:r}]},r8=(t,e)=>{const{strokeWidth:i,strokeColor:n,strokeJoin:r,strokeCap:o,...a}=t,{anchor:s,offset:l}=e;return[{...a,points:[rt(s.x-l.y,s.y+l.x),rt(s.x+l.y,s.y-l.x)],strokeWidth:i,strokeColor:n,strokeJoin:r,strokeCap:o}]},o8=(t,e,i)=>{const{strokeWidth:n,strokeColor:r,...o}=t,{anchor:a,solid:s,offset:l,normal:c,sizeHalf:d}=e;return Bn(i,l),[{...o,x:a.x-d,y:a.y-d,width:2*d,height:2*d,rotation:(u=c,Math.atan2(u.y,u.x)),backgroundColor:s?r:void 0,strokeWidth:s?void 0:n,strokeColor:s?void 0:r}];var u},a8=(t={})=>e=>{if(!e.lineStart&&!e.lineEnd)return;const i=[],{x1:n,y1:r,x2:o,y2:a,lineStart:s,lineEnd:l,strokeWidth:c,strokeColor:d,strokeJoin:u,strokeCap:p,_isFormatted:h,_prerender:g,_scale:m,_translate:y,isSelected:x,isEditing:k,disableErase:w,id:C,...M}=e,R=rt(n,r),O=rt(o,a),T=[R,O];if(s){const[z,F]=s.split("-"),B=t[z];if(B){const f=Df(R,O,c,!!F);i.push(...B({...M,strokeColor:d,strokeWidth:c,strokeJoin:u,strokeCap:p},f,R))}}if(l){const[z,F]=l.split("-"),B=t[z];if(B){const f=Df(O,R,c,!!F);i.push(...B({...M,strokeColor:d,strokeWidth:c,strokeJoin:u,strokeCap:p},f,O))}}return[{...M,points:T,strokeWidth:c,strokeColor:d,strokeJoin:u,strokeCap:p},...i]},s8=()=>({arrow:i8,circle:n8,square:o8,bar:r8}),rh=(t,e)=>{const i=parseFloat(t)*e;return Oe(t)?i+"%":i},ea=(t,e)=>Oe(t)?cu(t,e):t,l8=t=>[{...t,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:t.frameSize?rh(t.frameSize,2):"2.5%",frameRadius:t.frameRound?rh(t.frameSize,2):0}],c8=({width:t,height:e,frameImage:i,frameSize:n="15%",frameOutset:r=0,frameSlices:o={x1:.15,y1:.15,x2:.85,y2:.85}},{isPreview:a})=>{if(!i)return[];const s=Math.sqrt(t*e),l=ea(n,s),c=a?l:Math.round(l),d=c,u=ea(r,s),p=2*u,{x1:h,x2:g,y1:m,y2:y}=o,x={x0:0,y0:0,x1:c,y1:d,x2:t-c,y2:e-d,x3:t,y3:e,cw:c,ch:d,ew:t-c-c,eh:e-d-d},k=a?1:0,w=2*k,C=u>0,M={expandsCanvas:C,width:x.cw,height:x.ch,backgroundImage:i};return[{expandsCanvas:C,x:x.x1-k-u,y:x.y0-u,width:x.ew+w+p,height:x.ch,backgroundCorners:[{x:h,y:0},{x:g,y:0},{x:g,y:m},{x:h,y:m}],backgroundImage:i},{expandsCanvas:C,x:x.x1-k-u,y:x.y2+u,width:x.ew+w+p,height:x.ch,backgroundCorners:[{x:h,y},{x:g,y},{x:g,y:1},{x:h,y:1}],backgroundImage:i},{expandsCanvas:C,x:x.x0-u,y:x.y1-k-u,width:x.cw,height:x.eh+w+p,backgroundCorners:[{x:0,y:m},{x:h,y:m},{x:h,y},{x:0,y}],backgroundImage:i},{expandsCanvas:C,x:x.x2+u,y:x.y1-k-u,width:x.cw,height:x.eh+w+p,backgroundCorners:[{x:g,y:m},{x:1,y:m},{x:1,y},{x:g,y}],backgroundImage:i},{...M,x:x.x0-u,y:x.y0-u,backgroundCorners:[{x:0,y:0},{x:h,y:0},{x:h,y:m},{x:0,y:m}]},{...M,x:x.x2+u,y:x.y0-u,backgroundCorners:[{x:g,y:0},{x:1,y:0},{x:1,y:m},{x:g,y:m}]},{...M,x:x.x2+u,y:x.y2+u,backgroundCorners:[{x:g,y},{x:1,y},{x:1,y:1},{x:g,y:1}]},{...M,x:x.x0-u,y:x.y2+u,backgroundCorners:[{x:0,y},{x:h,y},{x:h,y:1},{x:0,y:1}]}]},d8=({x:t,y:e,width:i,height:n,frameInset:r="3.5%",frameSize:o=".25%",frameColor:a=[1,1,1],frameOffset:s="5%",frameAmount:l=1,frameRadius:c=0,expandsCanvas:d=!1},{isPreview:u})=>{const p=Math.sqrt(i*n);let h=ea(o,p);const g=ea(r,p),m=ea(s,p);let y=0;u||(h=Math.max(1,Math.round(h)),y=h%2==0?0:.5);const x=ea(rh(c,l),p);return new Array(l).fill(void 0).map((k,w)=>{const C=m*w;let M=t+g+C,R=e+g+C,O=t+i-g-C,T=e+n-g-C;return u||(M=Math.round(M),R=Math.round(R),O=Math.round(O),T=Math.round(T)),{x:M+y,y:R+y,width:O-M,height:T-R,cornerRadius:x>0?x-C:0,strokeWidth:h,strokeColor:a,expandsCanvas:d}})},u8=({x:t,y:e,width:i,height:n,frameSize:r=".25%",frameOffset:o=0,frameInset:a="2.5%",frameColor:s=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(i*n);let d=ea(r,c),u=ea(a,c),p=ea(o,c),h=0;l||(d=Math.max(1,Math.round(d)),u=Math.round(u),p=Math.round(p),h=d%2==0?0:.5);const g=p-u,m=t+u+h,y=e+u+h,x=t+i-u-h,k=e+n-u-h;return[{points:[rt(m+g,y),rt(x-g,y)]},{points:[rt(x,y+g),rt(x,k-g)]},{points:[rt(x-g,k),rt(m+g,k)]},{points:[rt(m,k-g),rt(m,y+g)]}].map(w=>(w.strokeWidth=d,w.strokeColor=s,w))},p8=({x:t,y:e,width:i,height:n,frameSize:r=".25%",frameInset:o="2.5%",frameLength:a="2.5%",frameColor:s=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(i*n);let d=ea(r,c),u=ea(o,c),p=ea(a,c),h=0;l||(d=Math.max(1,Math.round(d)),u=Math.round(u),p=Math.round(p),h=d%2==0?0:.5);const g=t+u+h,m=e+u+h,y=t+i-u-h,x=e+n-u-h;return[{points:[rt(g,m+p),rt(g,m),rt(g+p,m)]},{points:[rt(y-p,m),rt(y,m),rt(y,m+p)]},{points:[rt(y,x-p),rt(y,x),rt(y-p,x)]},{points:[rt(g+p,x),rt(g,x),rt(g,x-p)]}].map(k=>(k.strokeWidth=d,k.strokeColor=s,k))},h8=({x:t,y:e,width:i,height:n,frameColor:r=[1,1,1]},{isPreview:o})=>{const a=Math.sqrt(i*n),s=.1*a;let l=.2*a,c=0;const d=.5*s;return o?c=1:l=Math.ceil(l),r.length=3,[{id:"border",x:t-d+c,y:e-d+c,width:i+s-2*c,height:n+l-2*c,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:s,frameColor:r,expandsCanvas:!0},{id:"chin",x:t-d,y:n-c,width:i+s,height:l,backgroundColor:r,expandsCanvas:!0}].filter(Boolean)},m8=(t={})=>(e,i)=>{if(!Le(e,"frameStyle"))return;const n=e.frameStyle,r=t[n];if(!r)return;const{frameStyle:o,...a}=e;return r(a,i)},$8=()=>({solid:l8,hook:p8,line:d8,edge:u8,polaroid:h8,nine:c8}),g8=t=>{const e=(i,n={isPreview:!0})=>{const r=t.map(o=>{const a=o(i,n);if(a)return a.map(s=>e(s,n))}).filter(Boolean).flat();return r.length?r.flat().map((o,a)=>(o.id=i.id+"_"+a,o)):i};return e};typeof window<"u"&&(t=>{if(!t)return;const[e,i,n,r]=[[108,111,99,97,116,105,111,110],[82,101,103,69,120,112],[116,101,115,116],[112,113,105,110,97,92,46,110,108]].map(o=>o.map(a=>String.fromCharCode(a)).join(""));t._yve10k0=new t[i](r)[n](t[e])})(window);const f8=a2,Bf=s2,y8=()=>({read:Hx,apply:Vf}),x8=(t={})=>{const{blurAmount:e,dataSizeScalar:i,scrambleAmount:n,backgroundColor:r}=t;return(o,a)=>(async(s,l={})=>{if(!s)return;const{width:c,height:d}=s,{dataSize:u=96,dataSizeScalar:p=1,scrambleAmount:h=4,blurAmount:g=6,outputFormat:m="canvas",backgroundColor:y=[0,0,0]}=l,x=Math.round(u*p),k=Math.min(x/c,x/d),w=Math.floor(c*k),C=Math.floor(d*k),M=hn("canvas",{width:w,height:C}),R=M.getContext("2d",{willReadFrequently:!0});if(y.length=3,R.fillStyle=Pr(y),R.fillRect(0,0,w,C),Il(s)){const F=hn("canvas",{width:c,height:d});F.getContext("2d",{willReadFrequently:!0}).putImageData(s,0,0),R.drawImage(F,0,0,w,C),Qn(F)}else R.drawImage(s,0,0,w,C);const O=R.getImageData(0,0,w,C),T=[];if(h>0&&T.push([A4,{amount:h}]),g>0)for(let F=0;F<g;F++)T.push([uy,{matrix:L4}]);let z;if(T.length){const F=(V,J)=>`(err, imageData) => {
(${V[J][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${J}]), 
${V[J+1]?F(V,J+1):"done"})
}`,B=`function (options, done) {
const filterInstructions = options.filterInstructions;
const imageData = options.imageData;
(${F(T,0)})(null, imageData)
}`,f=await Dc(B,[{imageData:O,filterInstructions:T.map(V=>V[1])}],[O.data.buffer]);z=yh(f)}else z=O;return m==="canvas"?(R.putImageData(z,0,0),M):z})(o,{blurAmount:e,scrambleAmount:n,backgroundColor:r,...a,dataSizeScalar:i||a.dataSizeScalar})},b8=_2,v8={markupEditorToolbar:Kw(),markupEditorToolStyles:qw(),markupEditorShapeStyleControls:_2()},w8=oS,S8=uS,k8=yS,C8=g6,T8=x6,M8=w6,P8=P6,R8=N6,I8=W6,E8=X6,A8=Dw,L8=Mw,z8=Gw,F8=Y6,D8=q6,B8=K6,O8=J6,W8={filterLabel:"Filter",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"Chrome",filterLabelFade:"Fade",filterLabelCold:"Cold",filterLabelWarm:"Warm",filterLabelPastel:"Pastel",filterLabelMonoDefault:"Mono",filterLabelMonoNoir:"Noir",filterLabelMonoWash:"Wash",filterLabelMonoStark:"Stark",filterLabelSepiaDefault:"Sepia",filterLabelSepiaBlues:"Blues",filterLabelSepiaRust:"Rust",filterLabelSepiaColor:"Color"},_8={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},V8={resizeLabel:"Resize",resizeIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4"/></g>',resizeLabelFormCaption:"Image output size",resizeLabelInputWidth:"w",resizeTitleInputWidth:"Width",resizeLabelInputHeight:"h",resizeTitleInputHeight:"Height",resizeTitleButtonMaintainAspectRatio:"Maintain aspectratio",resizeIconButtonMaintainAspectRatio:(t,e)=>`<defs><mask id="mask1" x="0" y="0" width="24" height="24" ><rect x="0" y="0" width="24" height="10" fill="#fff" stroke="none"/></mask></defs><g fill="none" fill-rule="evenodd"><g  mask="url(#mask1)"><path transform="translate(0 ${3*(e-1)})" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V17"/></g><rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/></g>`},N8={decorateLabel:"Decorate",decorateIcon:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width=".125em" stroke-linecap="round" stroke-linejoin="round" d="M12 18.5l-6.466 3.4 1.235-7.2-5.23-5.1 7.228-1.05L12 2l3.233 6.55 7.229 1.05-5.231 5.1 1.235 7.2z"/></g>'},H8={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},j8={stickerLabel:"Sticker",stickerIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"/><path d="M20 17c-3 3-5 5-8 5"/></g>'},U8=Q6,G8=t8,Z8=e8,X8=(t=[])=>g8([m8($8()),a8(s8()),...t]),Y8=(t={})=>{let e,i;Array.isArray(t.imageReader)||(i=t.imageReader,delete t.imageReader),Array.isArray(t.imageWriter)?e=Bf():(e=Qi(t.imageWriter)?t.imageWriter:Bf(t.imageWriter),delete t.imageWriter);let n;return Qi(t.imageScrambler)||(n=t.imageScrambler,delete t.imageScrambler),{imageReader:f8(i),imageWriter:e,imageOrienter:y8(),imageScrambler:x8(n)}},q8=(t={})=>{cw(w8,S8,k8,C8,T8,M8,P8,R8,I8,E8);const e=Y8(t),i={...F8,...D8,...B8,...O8,...W8,..._8,...U8,...G8,...V8,...N8,...H8,...j8,...t.locale};delete t.locale;const n=typeof t.shapePreprocessor=="function"?t.shapePreprocessor:X8(t.shapePreprocessor);return delete t.shapePreprocessor,t.markupEditorShapeStyleControls&&Object.entries(t.markupEditorShapeStyleControls).every(([r,o])=>/Options$/.test(r)||!Array.isArray(o))&&(t.markupEditorShapeStyleControls=b8({...t.markupEditorShapeStyleControls})),Ny([{...e,shapePreprocessor:n,utils:["trim","crop","filter","finetune","retouch","annotate","decorate","sticker","fill","frame","redact","resize"],...A8,...L8,...z8,...v8,stickerStickToImage:!0,locale:i},t])},K8={mounted(){this.editor=Z8(this.$refs.elementRef,Object.assign({},this.$attrs)),this.unsubs=E2(this.editor,this.$refs.elementRef)},beforeUpdate(){Object.assign(this.editor,Object.assign({},this.$attrs))},beforeUnmount(){this.editor&&(this.editor.destroy(),this.unsubs.forEach(t=>t()),this.unsubs=[],this.editor=void 0)},render(){return Ex("div",{className:"PinturaRootWrapper",ref:"elementRef"})}},J8=Ax({__name:"MediaImageEditor",props:{media:{}},async setup(t){let e,i;const n=t,r=q8({enableButtonClose:!0}),o=([e,i]=Lx(()=>Rx(n.media)),e=await e,i(),e);function a(l){n.media.setMediaImage(l.detail.dest),n.media.setEditing(!1),n.media.setUniqueId()}function s(l){l||n.media.setEditing(!1)}return(l,c)=>(zx(),Fx(Wx,{to:"#drawer-editor"},[nm(_x,{width:500,"rail-width":500,touchless:"","model-value":!0,"disable-resize-watcher":!0,elevation:0,class:"ig-navigation-drawer-editor","onUpdate:modelValue":s},{default:Dx(()=>[nm(Z1(K8),Bx(Z1(r),{src:Z1(o),"onPintura:process":c[0]||(c[0]=d=>a(d)),"onPintura:close":c[1]||(c[1]=d=>l.media.setEditing(!1)),onContextmenu:c[2]||(c[2]=Ox(()=>{},["stop"]))}),null,16,["src"])]),_:1})]))}}),uk=Ix(J8,[["__scopeId","data-v-b380d6be"]]);export{uk as default};
